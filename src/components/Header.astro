---
const navItems = [
  { label: 'Home', key: 'H', href: '/' },
  { label: 'Blog', key: 'B', href: '/posts/' },
  { label: 'Tags', key: 'T', href: '/tags/' },
  { label: 'Categories', key: 'C', href: '/categories/' },
  { label: 'CNP', key: 'V', href: '/calico-visualiser/' },
  { label: 'About', key: 'A', href: '/about/' },
  { label: 'RSS', key: 'R', href: '/feed.xml' },
];
---

<header
  class="sticky top-0 z-30 w-full border-b border-border bg-bg/95 backdrop-blur"
>
  <div class="mx-auto max-w-wide px-4 sm:px-6 lg:px-8 py-3">
    <div class="flex items-center justify-between gap-4">
      <!-- Logo -->
      <a
        href="/"
        class="flex items-center gap-2 font-mono text-base font-bold text-accent whitespace-nowrap hover:text-accent-hover transition-colors group"
      >
        <span>~/sbulav</span>
        <span class="text-fg-dim font-normal">{Astro.url.pathname === '/' ? '(master)' : ''}</span>
      </a>

      <!-- Nav items -->
      <nav class="flex items-center gap-1 overflow-x-auto no-scrollbar">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class="flex items-center gap-1 rounded px-2 py-1.5 font-mono text-xs whitespace-nowrap text-fg-muted transition-colors hover:bg-bg-secondary hover:text-fg"
              data-nav-key={item.key}
              title={`[${item.key}] ${item.label}`}
            >
              <span class="font-semibold text-accent">[{item.key}]</span>
              <span class="hidden sm:inline">{item.label}</span>
            </a>
          ))
        }
      </nav>
    </div>
  </div>
</header>

<script>
  function initHeaderShortcuts() {
    document.addEventListener('keydown', (e) => {
      // Don't trigger when typing in inputs
      const target = e.target as HTMLElement;
      if (
        target.tagName === 'INPUT' ||
        target.tagName === 'TEXTAREA' ||
        target.isContentEditable
      ) {
        return;
      }

      // Don't trigger with modifier keys
      if (e.ctrlKey || e.altKey || e.metaKey) return;

      const key = e.key.toUpperCase();
      const navLink = document.querySelector(
        `[data-nav-key="${key}"]`
      ) as HTMLAnchorElement;
      if (navLink) {
        e.preventDefault();
        navLink.click();
      }
    });
  }

  // Run on initial load and after view transitions
  initHeaderShortcuts();
  document.addEventListener('astro:after-swap', initHeaderShortcuts);
</script>

<style>
  /* Hide scrollbar for nav items but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
</style>
