---
const navItems = [
  { label: 'Home', key: 'H', href: '/' },
  { label: 'Blog', key: 'B', href: '/posts/' },
  { label: 'Tags', key: 'T', href: '/tags/' },
  { label: 'Categories', key: 'C', href: '/categories/' },
  { label: 'CNP', key: 'V', href: '/calico-visualiser/' },
  { label: 'About', key: 'A', href: '/about/' },
  { label: 'RSS', key: 'R', href: '/feed.xml' },
];
---

<header
  class="sticky top-0 z-30 w-full border-b border-terminal-border bg-terminal-bg/90 backdrop-blur-md"
>
  <div class="mx-auto max-w-4xl px-4 py-2 sm:px-6">
    <div class="flex items-center justify-between gap-2">
      <!-- Logo -->
      <a
        href="/"
        class="font-mono text-sm font-bold text-terminal-accent whitespace-nowrap hover:text-terminal-warning transition-colors"
      >
        Cloud Alchemist
      </a>

      <!-- Nav items -->
      <nav class="flex items-center gap-1 overflow-x-auto">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class="flex items-center gap-1 rounded bg-terminal-surface/50 px-2 py-1 font-mono text-[11px] leading-none whitespace-nowrap text-terminal-muted transition-colors hover:bg-terminal-surface hover:text-terminal-fg"
              data-nav-key={item.key}
            >
              <span class="font-bold text-terminal-fg">[{item.key}]</span>
              <span class="hidden sm:inline">{item.label}</span>
            </a>
          ))
        }
      </nav>
    </div>
  </div>
</header>

<script>
  function initHeaderShortcuts() {
    document.addEventListener('keydown', (e) => {
      // Don't trigger when typing in inputs
      const target = e.target as HTMLElement;
      if (
        target.tagName === 'INPUT' ||
        target.tagName === 'TEXTAREA' ||
        target.isContentEditable
      ) {
        return;
      }

      // Don't trigger with modifier keys (except shift for uppercase)
      if (e.ctrlKey || e.altKey || e.metaKey) return;

      const key = e.key.toUpperCase();
      const navLink = document.querySelector(
        `[data-nav-key="${key}"]`
      ) as HTMLAnchorElement;
      if (navLink) {
        e.preventDefault();
        navLink.click();
      }
    });
  }

  // Run on initial load and after view transitions
  initHeaderShortcuts();
  document.addEventListener('astro:after-swap', initHeaderShortcuts);
</script>
