---
const navItems = [
  { label: 'Home', key: 'H', href: '/' },
  { label: 'Blog', key: 'B', href: '/posts' },
  { label: 'Tags', key: 'T', href: '/tags' },
  { label: 'Categories', key: 'C', href: '/categories' },
  { label: 'CNP', key: 'V', href: '/calico-visualiser' },
  { label: 'About', key: 'A', href: '/about' },
  { label: 'RSS', key: 'R', href: '/feed.xml' },
];
---

<header
  class="sticky top-0 z-30 w-full border-b border-border bg-bg/95 backdrop-blur"
>
  <div class="mx-auto max-w-wide px-4 sm:px-6 lg:px-8 py-4">
    <div class="flex flex-col xl:flex-row xl:items-center xl:justify-between gap-3">
      <!-- Left: Logo/Prompt -->
      <div class="flex items-center gap-2">
        <a
          href="/"
          class="flex items-center gap-2 font-mono text-sm font-bold text-accent whitespace-nowrap hover:text-accent-hover transition-colors group"
        >
          <span class="text-accent">Cloud Alchemist</span>
        </a>
      </div>

      <!-- Right: Navigation -->
      <nav class="flex items-center gap-1 overflow-x-auto no-scrollbar -mx-1 px-1">
        {
          navItems.map((item) => (
            <a
              href={item.href}
              class="flex items-center gap-1 rounded px-2 py-1.5 font-mono text-xs whitespace-nowrap text-fg-muted transition-colors hover:bg-bg-secondary hover:text-fg"
              data-nav-key={item.key}
              title={`[${item.key}] ${item.label}`}
            >
              <span class="font-semibold text-accent">[{item.key}]</span>
              <span class="hidden sm:inline">{item.label}</span>
            </a>
          ))
        }
      </nav>
    </div>
  </div>
</header>

<script>
  function initHeaderShortcuts() {
    document.addEventListener('keydown', (e) => {
      // Don't trigger when typing in inputs
      const target = e.target as HTMLElement;
      if (
        target.tagName === 'INPUT' ||
        target.tagName === 'TEXTAREA' ||
        target.isContentEditable
      ) {
        return;
      }

      // Don't trigger with modifier keys
      if (e.ctrlKey || e.altKey || e.metaKey) return;

      const key = e.key.toUpperCase();
      const navLink = document.querySelector(
        `[data-nav-key="${key}"]`
      ) as HTMLAnchorElement;
      if (navLink) {
        e.preventDefault();
        navLink.click();
      }
    });
  }

  // Run on initial load and after view transitions
  initHeaderShortcuts();
  document.addEventListener('astro:after-swap', initHeaderShortcuts);
</script>

<style>
  /* Hide scrollbar for nav items but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;
  }

  @supports (scrollbar-width: none) {
    .no-scrollbar {
      scrollbar-width: none;
    }
  }
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
</style>
