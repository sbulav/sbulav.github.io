(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function gA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dm={exports:{}},Ua={};var DS;function r3(){if(DS)return Ua;DS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:o}}return Ua.Fragment=e,Ua.jsx=n,Ua.jsxs=n,Ua}var RS;function o3(){return RS||(RS=1,dm.exports=r3()),dm.exports}var C=o3(),pm={exports:{}},Ee={};var _S;function l3(){if(_S)return Ee;_S=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function k(D,H,ee){this.props=D,this.context=H,this.refs=A,this.updater=ee||b}k.prototype.isReactComponent={},k.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},k.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function T(){}T.prototype=k.prototype;function O(D,H,ee){this.props=D,this.context=H,this.refs=A,this.updater=ee||b}var M=O.prototype=new T;M.constructor=O,S(M,k.prototype),M.isPureReactComponent=!0;var L=Array.isArray;function _(){}var R={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function U(D,H,ee){var ie=ee.ref;return{$$typeof:t,type:D,key:H,ref:ie!==void 0?ie:null,props:ee}}function ne(D,H){return U(D.type,H,D.props)}function $(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Q(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ee){return H[ee]})}var Z=/\/+/g;function B(D,H){return typeof D=="object"&&D!==null&&D.key!=null?Q(""+D.key):H.toString(36)}function V(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(_,_):(D.status="pending",D.then(function(H){D.status==="pending"&&(D.status="fulfilled",D.value=H)},function(H){D.status==="pending"&&(D.status="rejected",D.reason=H)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function N(D,H,ee,ie,ce){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var fe=!1;if(D===null)fe=!0;else switch(he){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(D.$$typeof){case t:case e:fe=!0;break;case p:return fe=D._init,N(fe(D._payload),H,ee,ie,ce)}}if(fe)return ce=ce(D),fe=ie===""?"."+B(D,0):ie,L(ce)?(ee="",fe!=null&&(ee=fe.replace(Z,"$&/")+"/"),N(ce,H,ee,"",function(De){return De})):ce!=null&&($(ce)&&(ce=ne(ce,ee+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(Z,"$&/")+"/")+fe)),H.push(ce)),1;fe=0;var ue=ie===""?".":ie+":";if(L(D))for(var ge=0;ge<D.length;ge++)ie=D[ge],he=ue+B(ie,ge),fe+=N(ie,H,ee,he,ce);else if(ge=v(D),typeof ge=="function")for(D=ge.call(D),ge=0;!(ie=D.next()).done;)ie=ie.value,he=ue+B(ie,ge++),fe+=N(ie,H,ee,he,ce);else if(he==="object"){if(typeof D.then=="function")return N(V(D),H,ee,ie,ce);throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return fe}function P(D,H,ee){if(D==null)return D;var ie=[],ce=0;return N(D,ie,"","",function(he){return H.call(ee,he,ce++)}),ie}function j(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(ee){(D._status===0||D._status===-1)&&(D._status=1,D._result=ee)},function(ee){(D._status===0||D._status===-1)&&(D._status=2,D._result=ee)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var z=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},G={map:P,forEach:function(D,H,ee){P(D,function(){H.apply(this,arguments)},ee)},count:function(D){var H=0;return P(D,function(){H++}),H},toArray:function(D){return P(D,function(H){return H})||[]},only:function(D){if(!$(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ee.Activity=g,Ee.Children=G,Ee.Component=k,Ee.Fragment=n,Ee.Profiler=s,Ee.PureComponent=O,Ee.StrictMode=i,Ee.Suspense=f,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},Ee.cache=function(D){return function(){return D.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(D,H,ee){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=S({},D.props),ce=D.key;if(H!=null)for(he in H.key!==void 0&&(ce=""+H.key),H)!X.call(H,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&H.ref===void 0||(ie[he]=H[he]);var he=arguments.length-2;if(he===1)ie.children=ee;else if(1<he){for(var fe=Array(he),ue=0;ue<he;ue++)fe[ue]=arguments[ue+2];ie.children=fe}return U(D.type,ce,ie)},Ee.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Ee.createElement=function(D,H,ee){var ie,ce={},he=null;if(H!=null)for(ie in H.key!==void 0&&(he=""+H.key),H)X.call(H,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ce[ie]=H[ie]);var fe=arguments.length-2;if(fe===1)ce.children=ee;else if(1<fe){for(var ue=Array(fe),ge=0;ge<fe;ge++)ue[ge]=arguments[ge+2];ce.children=ue}if(D&&D.defaultProps)for(ie in fe=D.defaultProps,fe)ce[ie]===void 0&&(ce[ie]=fe[ie]);return U(D,he,ce)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(D){return{$$typeof:c,render:D}},Ee.isValidElement=$,Ee.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:j}},Ee.memo=function(D,H){return{$$typeof:h,type:D,compare:H===void 0?null:H}},Ee.startTransition=function(D){var H=R.T,ee={};R.T=ee;try{var ie=D(),ce=R.S;ce!==null&&ce(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(_,z)}catch(he){z(he)}finally{H!==null&&ee.types!==null&&(H.types=ee.types),R.T=H}},Ee.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ee.use=function(D){return R.H.use(D)},Ee.useActionState=function(D,H,ee){return R.H.useActionState(D,H,ee)},Ee.useCallback=function(D,H){return R.H.useCallback(D,H)},Ee.useContext=function(D){return R.H.useContext(D)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(D,H){return R.H.useDeferredValue(D,H)},Ee.useEffect=function(D,H){return R.H.useEffect(D,H)},Ee.useEffectEvent=function(D){return R.H.useEffectEvent(D)},Ee.useId=function(){return R.H.useId()},Ee.useImperativeHandle=function(D,H,ee){return R.H.useImperativeHandle(D,H,ee)},Ee.useInsertionEffect=function(D,H){return R.H.useInsertionEffect(D,H)},Ee.useLayoutEffect=function(D,H){return R.H.useLayoutEffect(D,H)},Ee.useMemo=function(D,H){return R.H.useMemo(D,H)},Ee.useOptimistic=function(D,H){return R.H.useOptimistic(D,H)},Ee.useReducer=function(D,H,ee){return R.H.useReducer(D,H,ee)},Ee.useRef=function(D){return R.H.useRef(D)},Ee.useState=function(D){return R.H.useState(D)},Ee.useSyncExternalStore=function(D,H,ee){return R.H.useSyncExternalStore(D,H,ee)},Ee.useTransition=function(){return R.H.useTransition()},Ee.version="19.2.4",Ee}var LS;function Yc(){return LS||(LS=1,pm.exports=l3()),pm.exports}var q=Yc();const a3=gA(q);var gm={exports:{}},$a={},mm={exports:{}},ym={};var BS;function c3(){return BS||(BS=1,(function(t){function e(N,P){var j=N.length;N.push(P);e:for(;0<j;){var z=j-1>>>1,G=N[z];if(0<s(G,P))N[z]=P,N[j]=G,j=z;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var P=N[0],j=N.pop();if(j!==P){N[0]=j;e:for(var z=0,G=N.length,D=G>>>1;z<D;){var H=2*(z+1)-1,ee=N[H],ie=H+1,ce=N[ie];if(0>s(ee,j))ie<G&&0>s(ce,ee)?(N[z]=ce,N[ie]=j,z=ie):(N[z]=ee,N[H]=j,z=H);else if(ie<G&&0>s(ce,j))N[z]=ce,N[ie]=j,z=ie;else break e}}return P}function s(N,P){var j=N.sortIndex-P.sortIndex;return j!==0?j:N.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],h=[],p=1,g=null,y=3,v=!1,b=!1,S=!1,A=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function M(N){for(var P=n(h);P!==null;){if(P.callback===null)i(h);else if(P.startTime<=N)i(h),P.sortIndex=P.expirationTime,e(f,P);else break;P=n(h)}}function L(N){if(S=!1,M(N),!b)if(n(f)!==null)b=!0,_||(_=!0,Q());else{var P=n(h);P!==null&&V(L,P.startTime-N)}}var _=!1,R=-1,X=5,U=-1;function ne(){return A?!0:!(t.unstable_now()-U<X)}function $(){if(A=!1,_){var N=t.unstable_now();U=N;var P=!0;try{e:{b=!1,S&&(S=!1,T(R),R=-1),v=!0;var j=y;try{t:{for(M(N),g=n(f);g!==null&&!(g.expirationTime>N&&ne());){var z=g.callback;if(typeof z=="function"){g.callback=null,y=g.priorityLevel;var G=z(g.expirationTime<=N);if(N=t.unstable_now(),typeof G=="function"){g.callback=G,M(N),P=!0;break t}g===n(f)&&i(f),M(N)}else i(f);g=n(f)}if(g!==null)P=!0;else{var D=n(h);D!==null&&V(L,D.startTime-N),P=!1}}break e}finally{g=null,y=j,v=!1}P=void 0}}finally{P?Q():_=!1}}}var Q;if(typeof O=="function")Q=function(){O($)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,B=Z.port2;Z.port1.onmessage=$,Q=function(){B.postMessage(null)}}else Q=function(){k($,0)};function V(N,P){R=k(function(){N(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(N){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var j=y;y=P;try{return N()}finally{y=j}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(N,P){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var j=y;y=N;try{return P()}finally{y=j}},t.unstable_scheduleCallback=function(N,P,j){var z=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?z+j:z):j=z,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,N={id:p++,callback:P,priorityLevel:N,startTime:j,expirationTime:G,sortIndex:-1},j>z?(N.sortIndex=j,e(h,N),n(f)===null&&N===n(h)&&(S?(T(R),R=-1):S=!0,V(L,j-z))):(N.sortIndex=G,e(f,N),b||v||(b=!0,_||(_=!0,Q()))),N},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(N){var P=y;return function(){var j=y;y=P;try{return N.apply(this,arguments)}finally{y=j}}}})(ym)),ym}var zS;function u3(){return zS||(zS=1,mm.exports=c3()),mm.exports}var xm={exports:{}},Xt={};var PS;function f3(){if(PS)return Xt;PS=1;var t=Yc();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},Xt.flushSync=function(f){var h=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=h,i.p=p,i.d.f()}},Xt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},Xt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Xt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):p==="script"&&i.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Xt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},Xt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);i.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Xt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},Xt.requestFormReset=function(f){i.d.r(f)},Xt.unstable_batchedUpdates=function(f,h){return f(h)},Xt.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},Xt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Xt.version="19.2.4",Xt}var HS;function mA(){if(HS)return xm.exports;HS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xm.exports=f3(),xm.exports}var jS;function h3(){if(jS)return $a;jS=1;var t=u3(),e=Yc(),n=mA();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function c(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function h(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,d=a;;){var m=u.return;if(m===null)break;var x=m.alternate;if(x===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===u)return f(m),r;if(x===d)return f(m),a;x=x.sibling}throw Error(i(188))}if(u.return!==d.return)u=m,d=x;else{for(var w=!1,E=m.child;E;){if(E===u){w=!0,u=m,d=x;break}if(E===d){w=!0,d=m,u=x;break}E=E.sibling}if(!w){for(E=x.child;E;){if(E===u){w=!0,u=x,d=m;break}if(E===d){w=!0,d=x,u=m;break}E=E.sibling}if(!w)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function p(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=p(r),a!==null)return a;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=$&&r[$]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Symbol.for("react.client.reference");function B(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Z?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case k:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case _:return"SuspenseList";case U:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case O:return r.displayName||"Context";case T:return(r._context.displayName||"Context")+".Consumer";case M:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return a=r.displayName||null,a!==null?a:B(r.type)||"Memo";case X:a=r._payload,r=r._init;try{return B(r(a))}catch{}}return null}var V=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},z=[],G=-1;function D(r){return{current:r}}function H(r){0>G||(r.current=z[G],z[G]=null,G--)}function ee(r,a){G++,z[G]=r.current,r.current=a}var ie=D(null),ce=D(null),he=D(null),fe=D(null);function ue(r,a){switch(ee(he,a),ee(ce,r),ee(ie,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?eS(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=eS(a),r=tS(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}H(ie),ee(ie,r)}function ge(){H(ie),H(ce),H(he)}function De(r){r.memoizedState!==null&&ee(fe,r);var a=ie.current,u=tS(a,r.type);a!==u&&(ee(ce,r),ee(ie,u))}function Te(r){ce.current===r&&(H(ie),H(ce)),fe.current===r&&(H(fe),Ha._currentValue=j)}var Ae,Oe;function Pe(r){if(Ae===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Ae=a&&a[1]||"",Oe=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ae+r+Oe}var We=!1;function Xe(r,a){if(!r||We)return"";We=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(se){var J=se}Reflect.construct(r,[],le)}else{try{le.call()}catch(se){J=se}r.call(le.prototype)}}else{try{throw Error()}catch(se){J=se}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(se){if(se&&J&&typeof se.stack=="string")return[se.stack,J.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),w=x[0],E=x[1];if(w&&E){var I=w.split(`
`),K=E.split(`
`);for(m=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;if(d===I.length||m===K.length)for(d=I.length-1,m=K.length-1;1<=d&&0<=m&&I[d]!==K[m];)m--;for(;1<=d&&0<=m;d--,m--)if(I[d]!==K[m]){if(d!==1||m!==1)do if(d--,m--,0>m||I[d]!==K[m]){var re=`
`+I[d].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=d&&0<=m);break}}}finally{We=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Pe(u):""}function _t(r,a){switch(r.tag){case 26:case 27:case 5:return Pe(r.type);case 16:return Pe("Lazy");case 13:return r.child!==a&&a!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return Xe(r.type,!1);case 11:return Xe(r.type.render,!1);case 1:return Xe(r.type,!0);case 31:return Pe("Activity");default:return""}}function Wn(r){try{var a="",u=null;do a+=_t(r,u),u=r,r=r.return;while(r);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var wn=Object.prototype.hasOwnProperty,Kn=t.unstable_scheduleCallback,Pi=t.unstable_cancelCallback,gr=t.unstable_shouldYield,mr=t.unstable_requestPaint,Pt=t.unstable_now,po=t.unstable_getCurrentPriorityLevel,Hi=t.unstable_ImmediatePriority,bs=t.unstable_UserBlockingPriority,yr=t.unstable_NormalPriority,Wd=t.unstable_LowPriority,go=t.unstable_IdlePriority,Kd=t.log,Zd=t.unstable_setDisableYieldValue,xr=null,Zt=null;function di(r){if(typeof Kd=="function"&&Zd(r),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(xr,r)}catch{}}var Jt=Math.clz32?Math.clz32:tp,Jd=Math.log,ep=Math.LN2;function tp(r){return r>>>=0,r===0?32:31-(Jd(r)/ep|0)|0}var mo=256,yo=262144,xo=4194304;function ji(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function vo(r,a,u){var d=r.pendingLanes;if(d===0)return 0;var m=0,x=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var E=d&134217727;return E!==0?(d=E&~x,d!==0?m=ji(d):(w&=E,w!==0?m=ji(w):u||(u=E&~r,u!==0&&(m=ji(u))))):(E=d&~x,E!==0?m=ji(E):w!==0?m=ji(w):u||(u=d&~r,u!==0&&(m=ji(u)))),m===0?0:a!==0&&a!==m&&(a&x)===0&&(x=m&-m,u=a&-a,x>=u||x===32&&(u&4194048)!==0)?a:m}function vr(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function np(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lu(){var r=xo;return xo<<=1,(xo&62914560)===0&&(xo=4194304),r}function Gl(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function br(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ip(r,a,u,d,m,x){var w=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var E=r.entanglements,I=r.expirationTimes,K=r.hiddenUpdates;for(u=w&~u;0<u;){var re=31-Jt(u),le=1<<re;E[re]=0,I[re]=-1;var J=K[re];if(J!==null)for(K[re]=null,re=0;re<J.length;re++){var se=J[re];se!==null&&(se.lane&=-536870913)}u&=~le}d!==0&&au(r,d,0),x!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=x&~(w&~a))}function au(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var d=31-Jt(a);r.entangledLanes|=a,r.entanglements[d]=r.entanglements[d]|1073741824|u&261930}function cu(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var d=31-Jt(u),m=1<<d;m&a|r[d]&a&&(r[d]|=a),u&=~m}}function uu(r,a){var u=a&-a;return u=(u&42)!==0?1:Wl(u),(u&(r.suspendedLanes|a))!==0?0:u}function Wl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Kl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fu(){var r=P.p;return r!==0?r:(r=window.event,r===void 0?32:AS(r.type))}function hu(r,a){var u=P.p;try{return P.p=r,a()}finally{P.p=u}}var pi=Math.random().toString(36).slice(2),Et="__reactFiber$"+pi,Yt="__reactProps$"+pi,Ii="__reactContainer$"+pi,bo="__reactEvents$"+pi,du="__reactListeners$"+pi,sp="__reactHandles$"+pi,pu="__reactResources$"+pi,Sr="__reactMarker$"+pi;function Zl(r){delete r[Et],delete r[Yt],delete r[bo],delete r[du],delete r[sp]}function Ss(r){var a=r[Et];if(a)return a;for(var u=r.parentNode;u;){if(a=u[Ii]||u[Et]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=aS(r);r!==null;){if(u=r[Et])return u;r=aS(r)}return a}r=u,u=r.parentNode}return null}function ws(r){if(r=r[Et]||r[Ii]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Cs(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function As(r){var a=r[pu];return a||(a=r[pu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vt(r){r[Sr]=!0}var gu=new Set,mu={};function Vi(r,a){ks(r,a),ks(r+"Capture",a)}function ks(r,a){for(mu[r]=a,r=0;r<a.length;r++)gu.add(a[r])}var rp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},yu={};function op(r){return wn.call(yu,r)?!0:wn.call(Jl,r)?!1:rp.test(r)?yu[r]=!0:(Jl[r]=!0,!1)}function So(r,a,u){if(op(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function wo(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Zn(r,a,u,d){if(d===null)r.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+d)}}function on(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xu(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function lp(r,a,u){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,x=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(w){u=""+w,x.call(this,w)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Co(r){if(!r._valueTracker){var a=xu(r)?"checked":"value";r._valueTracker=lp(r,a,""+r[a])}}function vu(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return r&&(d=xu(r)?r.checked?"true":"false":r.value),r=d,r!==u?(a.setValue(r),!0):!1}function wr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ap=/[\n"\\]/g;function ln(r){return r.replace(ap,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Cr(r,a,u,d,m,x,w,E){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),a!=null?w==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+on(a)):r.value!==""+on(a)&&(r.value=""+on(a)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),a!=null?ea(r,w,on(a)):u!=null?ea(r,w,on(u)):d!=null&&r.removeAttribute("value"),m==null&&x!=null&&(r.defaultChecked=!!x),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.name=""+on(E):r.removeAttribute("name")}function bu(r,a,u,d,m,x,w,E){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),a!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){Co(r);return}u=u!=null?""+on(u):"",a=a!=null?""+on(a):u,E||a===r.value||(r.value=a),r.defaultValue=a}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=E?r.checked:!!d,r.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),Co(r)}function ea(r,a,u){a==="number"&&wr(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Ui(r,a,u,d){if(r=r.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<r.length;u++)m=a.hasOwnProperty("$"+r[u].value),r[u].selected!==m&&(r[u].selected=m),m&&d&&(r[u].defaultSelected=!0)}else{for(u=""+on(u),a=null,m=0;m<r.length;m++){if(r[m].value===u){r[m].selected=!0,d&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function Gx(r,a,u){if(a!=null&&(a=""+on(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+on(u):""}function Wx(r,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(V(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=on(a),r.defaultValue=u,d=r.textContent,d===u&&d!==""&&d!==null&&(r.value=d),Co(r)}function Ao(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var eN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kx(r,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":d?r.setProperty(a,u):typeof u!="number"||u===0||eN.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function Zx(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var m in a)d=a[m],a.hasOwnProperty(m)&&u[m]!==d&&Kx(r,m,d)}else for(var x in a)a.hasOwnProperty(x)&&Kx(r,x,a[x])}function cp(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Su(r){return nN.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function $i(){}var up=null;function fp(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ko=null,Oo=null;function Jx(r){var a=ws(r);if(a&&(r=a.stateNode)){var u=r[Yt]||null;e:switch(r=a.stateNode,a.type){case"input":if(Cr(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ln(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==r&&d.form===r.form){var m=d[Yt]||null;if(!m)throw Error(i(90));Cr(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===r.form&&vu(d)}break e;case"textarea":Gx(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Ui(r,!!u.multiple,a,!1)}}}var hp=!1;function ev(r,a,u){if(hp)return r(a,u);hp=!0;try{var d=r(a);return d}finally{if(hp=!1,(ko!==null||Oo!==null)&&(cf(),ko&&(a=ko,r=Oo,Oo=ko=null,Jx(a),r)))for(a=0;a<r.length;a++)Jx(r[a])}}function ta(r,a){var u=r.stateNode;if(u===null)return null;var d=u[Yt]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dp=!1;if(qi)try{var na={};Object.defineProperty(na,"passive",{get:function(){dp=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{dp=!1}var Os=null,pp=null,wu=null;function tv(){if(wu)return wu;var r,a=pp,u=a.length,d,m="value"in Os?Os.value:Os.textContent,x=m.length;for(r=0;r<u&&a[r]===m[r];r++);var w=u-r;for(d=1;d<=w&&a[u-d]===m[x-d];d++);return wu=m.slice(r,1<d?1-d:void 0)}function Cu(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Au(){return!0}function nv(){return!1}function an(r){function a(u,d,m,x,w){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=x,this.target=w,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(u=r[E],this[E]=u?u(x):x[E]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Au:nv,this.isPropagationStopped=nv,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Au)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Au)},persist:function(){},isPersistent:Au}),a}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ku=an(Ar),ia=g({},Ar,{view:0,detail:0}),iN=an(ia),gp,mp,sa,Ou=g({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==sa&&(sa&&r.type==="mousemove"?(gp=r.screenX-sa.screenX,mp=r.screenY-sa.screenY):mp=gp=0,sa=r),gp)},movementY:function(r){return"movementY"in r?r.movementY:mp}}),iv=an(Ou),sN=g({},Ou,{dataTransfer:0}),rN=an(sN),oN=g({},ia,{relatedTarget:0}),yp=an(oN),lN=g({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),aN=an(lN),cN=g({},Ar,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),uN=an(cN),fN=g({},Ar,{data:0}),sv=an(fN),hN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gN(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=pN[r])?!!a[r]:!1}function xp(){return gN}var mN=g({},ia,{key:function(r){if(r.key){var a=hN[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Cu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?dN[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(r){return r.type==="keypress"?Cu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yN=an(mN),xN=g({},Ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rv=an(xN),vN=g({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),bN=an(vN),SN=g({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),wN=an(SN),CN=g({},Ou,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),AN=an(CN),kN=g({},Ar,{newState:0,oldState:0}),ON=an(kN),EN=[9,13,27,32],vp=qi&&"CompositionEvent"in window,ra=null;qi&&"documentMode"in document&&(ra=document.documentMode);var MN=qi&&"TextEvent"in window&&!ra,ov=qi&&(!vp||ra&&8<ra&&11>=ra),lv=" ",av=!1;function cv(r,a){switch(r){case"keyup":return EN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uv(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Eo=!1;function TN(r,a){switch(r){case"compositionend":return uv(a);case"keypress":return a.which!==32?null:(av=!0,lv);case"textInput":return r=a.data,r===lv&&av?null:r;default:return null}}function NN(r,a){if(Eo)return r==="compositionend"||!vp&&cv(r,a)?(r=tv(),wu=pp=Os=null,Eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ov&&a.locale!=="ko"?null:a.data;default:return null}}var DN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fv(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!DN[r.type]:a==="textarea"}function hv(r,a,u,d){ko?Oo?Oo.push(d):Oo=[d]:ko=d,a=mf(a,"onChange"),0<a.length&&(u=new ku("onChange","change",null,u,d),r.push({event:u,listeners:a}))}var oa=null,la=null;function RN(r){Fb(r,0)}function Eu(r){var a=Cs(r);if(vu(a))return r}function dv(r,a){if(r==="change")return a}var pv=!1;if(qi){var bp;if(qi){var Sp="oninput"in document;if(!Sp){var gv=document.createElement("div");gv.setAttribute("oninput","return;"),Sp=typeof gv.oninput=="function"}bp=Sp}else bp=!1;pv=bp&&(!document.documentMode||9<document.documentMode)}function mv(){oa&&(oa.detachEvent("onpropertychange",yv),la=oa=null)}function yv(r){if(r.propertyName==="value"&&Eu(la)){var a=[];hv(a,la,r,fp(r)),ev(RN,a)}}function _N(r,a,u){r==="focusin"?(mv(),oa=a,la=u,oa.attachEvent("onpropertychange",yv)):r==="focusout"&&mv()}function LN(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Eu(la)}function BN(r,a){if(r==="click")return Eu(a)}function zN(r,a){if(r==="input"||r==="change")return Eu(a)}function PN(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Cn=typeof Object.is=="function"?Object.is:PN;function aa(r,a){if(Cn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!wn.call(a,m)||!Cn(r[m],a[m]))return!1}return!0}function xv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function vv(r,a){var u=xv(r);r=0;for(var d;u;){if(u.nodeType===3){if(d=r+u.textContent.length,r<=a&&d>=a)return{node:u,offset:a-r};r=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=xv(u)}}function bv(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?bv(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Sv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=wr(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=wr(r.document)}return a}function wp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var HN=qi&&"documentMode"in document&&11>=document.documentMode,Mo=null,Cp=null,ca=null,Ap=!1;function wv(r,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ap||Mo==null||Mo!==wr(d)||(d=Mo,"selectionStart"in d&&wp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ca&&aa(ca,d)||(ca=d,d=mf(Cp,"onSelect"),0<d.length&&(a=new ku("onSelect","select",null,a,u),r.push({event:a,listeners:d}),a.target=Mo)))}function kr(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var To={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionrun:kr("Transition","TransitionRun"),transitionstart:kr("Transition","TransitionStart"),transitioncancel:kr("Transition","TransitionCancel"),transitionend:kr("Transition","TransitionEnd")},kp={},Cv={};qi&&(Cv=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function Or(r){if(kp[r])return kp[r];if(!To[r])return r;var a=To[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in Cv)return kp[r]=a[u];return r}var Av=Or("animationend"),kv=Or("animationiteration"),Ov=Or("animationstart"),jN=Or("transitionrun"),IN=Or("transitionstart"),VN=Or("transitioncancel"),Ev=Or("transitionend"),Mv=new Map,Op="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Op.push("scrollEnd");function Jn(r,a){Mv.set(r,a),Vi(a,[r])}var Mu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},zn=[],No=0,Ep=0;function Tu(){for(var r=No,a=Ep=No=0;a<r;){var u=zn[a];zn[a++]=null;var d=zn[a];zn[a++]=null;var m=zn[a];zn[a++]=null;var x=zn[a];if(zn[a++]=null,d!==null&&m!==null){var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}x!==0&&Tv(u,m,x)}}function Nu(r,a,u,d){zn[No++]=r,zn[No++]=a,zn[No++]=u,zn[No++]=d,Ep|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Mp(r,a,u,d){return Nu(r,a,u,d),Du(r)}function Er(r,a){return Nu(r,null,null,a),Du(r)}function Tv(r,a,u){r.lanes|=u;var d=r.alternate;d!==null&&(d.lanes|=u);for(var m=!1,x=r.return;x!==null;)x.childLanes|=u,d=x.alternate,d!==null&&(d.childLanes|=u),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(m=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,m&&a!==null&&(m=31-Jt(u),r=x.hiddenUpdates,d=r[m],d===null?r[m]=[a]:d.push(a),a.lane=u|536870912),x):null}function Du(r){if(50<Da)throw Da=0,Pg=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Do={};function UN(r,a,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,a,u,d){return new UN(r,a,u,d)}function Tp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Qi(r,a){var u=r.alternate;return u===null?(u=An(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Nv(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Ru(r,a,u,d,m,x){var w=0;if(d=r,typeof r=="function")Tp(r)&&(w=1);else if(typeof r=="string")w=XD(r,u,ie.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case U:return r=An(31,u,a,m),r.elementType=U,r.lanes=x,r;case S:return Mr(u.children,m,x,a);case A:w=8,m|=24;break;case k:return r=An(12,u,a,m|2),r.elementType=k,r.lanes=x,r;case L:return r=An(13,u,a,m),r.elementType=L,r.lanes=x,r;case _:return r=An(19,u,a,m),r.elementType=_,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case T:w=9;break e;case M:w=11;break e;case R:w=14;break e;case X:w=16,d=null;break e}w=29,u=Error(i(130,r===null?"null":typeof r,"")),d=null}return a=An(w,u,a,m),a.elementType=r,a.type=d,a.lanes=x,a}function Mr(r,a,u,d){return r=An(7,r,d,a),r.lanes=u,r}function Np(r,a,u){return r=An(6,r,null,a),r.lanes=u,r}function Dv(r){var a=An(18,null,null,0);return a.stateNode=r,a}function Dp(r,a,u){return a=An(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Rv=new WeakMap;function Pn(r,a){if(typeof r=="object"&&r!==null){var u=Rv.get(r);return u!==void 0?u:(a={value:r,source:a,stack:Wn(a)},Rv.set(r,a),a)}return{value:r,source:a,stack:Wn(a)}}var Ro=[],_o=0,_u=null,ua=0,Hn=[],jn=0,Es=null,gi=1,mi="";function Yi(r,a){Ro[_o++]=ua,Ro[_o++]=_u,_u=r,ua=a}function _v(r,a,u){Hn[jn++]=gi,Hn[jn++]=mi,Hn[jn++]=Es,Es=r;var d=gi;r=mi;var m=32-Jt(d)-1;d&=~(1<<m),u+=1;var x=32-Jt(a)+m;if(30<x){var w=m-m%5;x=(d&(1<<w)-1).toString(32),d>>=w,m-=w,gi=1<<32-Jt(a)+m|u<<m|d,mi=x+r}else gi=1<<x|u<<m|d,mi=r}function Rp(r){r.return!==null&&(Yi(r,1),_v(r,1,0))}function _p(r){for(;r===_u;)_u=Ro[--_o],Ro[_o]=null,ua=Ro[--_o],Ro[_o]=null;for(;r===Es;)Es=Hn[--jn],Hn[jn]=null,mi=Hn[--jn],Hn[jn]=null,gi=Hn[--jn],Hn[jn]=null}function Lv(r,a){Hn[jn++]=gi,Hn[jn++]=mi,Hn[jn++]=Es,gi=a.id,mi=a.overflow,Es=r}var Ht=null,rt=null,Ie=!1,Ms=null,In=!1,Lp=Error(i(519));function Ts(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fa(Pn(a,r)),Lp}function Bv(r){var a=r.stateNode,u=r.type,d=r.memoizedProps;switch(a[Et]=r,a[Yt]=d,u){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(u=0;u<_a.length;u++)Be(_a[u],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":Be("invalid",a),bu(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Be("invalid",a);break;case"textarea":Be("invalid",a),Wx(a,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||Zb(a.textContent,u)?(d.popover!=null&&(Be("beforetoggle",a),Be("toggle",a)),d.onScroll!=null&&Be("scroll",a),d.onScrollEnd!=null&&Be("scrollend",a),d.onClick!=null&&(a.onclick=$i),a=!0):a=!1,a||Ts(r,!0)}function zv(r){for(Ht=r.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Ht=Ht.return}}function Lo(r){if(r!==Ht)return!1;if(!Ie)return zv(r),Ie=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Zg(r.type,r.memoizedProps)),u=!u),u&&rt&&Ts(r),zv(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));rt=lS(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));rt=lS(r)}else a===27?(a=rt,$s(r.type)?(r=im,im=null,rt=r):rt=a):rt=Ht?Un(r.stateNode.nextSibling):null;return!0}function Tr(){rt=Ht=null,Ie=!1}function Bp(){var r=Ms;return r!==null&&(hn===null?hn=r:hn.push.apply(hn,r),Ms=null),r}function fa(r){Ms===null?Ms=[r]:Ms.push(r)}var zp=D(null),Nr=null,Xi=null;function Ns(r,a,u){ee(zp,a._currentValue),a._currentValue=u}function Fi(r){r._currentValue=zp.current,H(zp)}function Pp(r,a,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),r===u)break;r=r.return}}function Hp(r,a,u,d){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var x=m.dependencies;if(x!==null){var w=m.child;x=x.firstContext;e:for(;x!==null;){var E=x;x=m;for(var I=0;I<a.length;I++)if(E.context===a[I]){x.lanes|=u,E=x.alternate,E!==null&&(E.lanes|=u),Pp(x.return,u,r),d||(w=null);break e}x=E.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(i(341));w.lanes|=u,x=w.alternate,x!==null&&(x.lanes|=u),Pp(w,u,r),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===r){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function Bo(r,a,u,d){r=null;for(var m=a,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var E=m.type;Cn(m.pendingProps.value,w.value)||(r!==null?r.push(E):r=[E])}}else if(m===fe.current){if(w=m.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Ha):r=[Ha])}m=m.return}r!==null&&Hp(a,r,u,d),a.flags|=262144}function Lu(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Dr(r){Nr=r,Xi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function jt(r){return Pv(Nr,r)}function Bu(r,a){return Nr===null&&Dr(r),Pv(r,a)}function Pv(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Xi===null){if(r===null)throw Error(i(308));Xi=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Xi=Xi.next=a;return u}var $N=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,d){r.push(d)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},qN=t.unstable_scheduleCallback,QN=t.unstable_NormalPriority,bt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jp(){return{controller:new $N,data:new Map,refCount:0}}function ha(r){r.refCount--,r.refCount===0&&qN(QN,function(){r.controller.abort()})}var da=null,Ip=0,zo=0,Po=null;function YN(r,a){if(da===null){var u=da=[];Ip=0,zo=$g(),Po={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Ip++,a.then(Hv,Hv),a}function Hv(){if(--Ip===0&&da!==null){Po!==null&&(Po.status="fulfilled");var r=da;da=null,zo=0,Po=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function XN(r,a){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return r.then(function(){d.status="fulfilled",d.value=a;for(var m=0;m<u.length;m++)(0,u[m])(a)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var jv=N.S;N.S=function(r,a){wb=Pt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&YN(r,a),jv!==null&&jv(r,a)};var Rr=D(null);function Vp(){var r=Rr.current;return r!==null?r:tt.pooledCache}function zu(r,a){a===null?ee(Rr,Rr.current):ee(Rr,a.pool)}function Iv(){var r=Vp();return r===null?null:{parent:bt._currentValue,pool:r}}var Ho=Error(i(460)),Up=Error(i(474)),Pu=Error(i(542)),Hu={then:function(){}};function Vv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Uv(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then($i,$i),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,qv(r),r;default:if(typeof a.status=="string")a.then($i,$i);else{if(r=tt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(d){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=d}},function(d){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,qv(r),r}throw Lr=a,Ho}}function _r(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Lr=u,Ho):u}}var Lr=null;function $v(){if(Lr===null)throw Error(i(459));var r=Lr;return Lr=null,r}function qv(r){if(r===Ho||r===Pu)throw Error(i(483))}var jo=null,pa=0;function ju(r){var a=pa;return pa+=1,jo===null&&(jo=[]),Uv(jo,r,a)}function ga(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Iu(r,a){throw a.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Qv(r){function a(F,Y){if(r){var W=F.deletions;W===null?(F.deletions=[Y],F.flags|=16):W.push(Y)}}function u(F,Y){if(!r)return null;for(;Y!==null;)a(F,Y),Y=Y.sibling;return null}function d(F){for(var Y=new Map;F!==null;)F.key!==null?Y.set(F.key,F):Y.set(F.index,F),F=F.sibling;return Y}function m(F,Y){return F=Qi(F,Y),F.index=0,F.sibling=null,F}function x(F,Y,W){return F.index=W,r?(W=F.alternate,W!==null?(W=W.index,W<Y?(F.flags|=67108866,Y):W):(F.flags|=67108866,Y)):(F.flags|=1048576,Y)}function w(F){return r&&F.alternate===null&&(F.flags|=67108866),F}function E(F,Y,W,oe){return Y===null||Y.tag!==6?(Y=Np(W,F.mode,oe),Y.return=F,Y):(Y=m(Y,W),Y.return=F,Y)}function I(F,Y,W,oe){var Ce=W.type;return Ce===S?re(F,Y,W.props.children,oe,W.key):Y!==null&&(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&_r(Ce)===Y.type)?(Y=m(Y,W.props),ga(Y,W),Y.return=F,Y):(Y=Ru(W.type,W.key,W.props,null,F.mode,oe),ga(Y,W),Y.return=F,Y)}function K(F,Y,W,oe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==W.containerInfo||Y.stateNode.implementation!==W.implementation?(Y=Dp(W,F.mode,oe),Y.return=F,Y):(Y=m(Y,W.children||[]),Y.return=F,Y)}function re(F,Y,W,oe,Ce){return Y===null||Y.tag!==7?(Y=Mr(W,F.mode,oe,Ce),Y.return=F,Y):(Y=m(Y,W),Y.return=F,Y)}function le(F,Y,W){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Np(""+Y,F.mode,W),Y.return=F,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return W=Ru(Y.type,Y.key,Y.props,null,F.mode,W),ga(W,Y),W.return=F,W;case b:return Y=Dp(Y,F.mode,W),Y.return=F,Y;case X:return Y=_r(Y),le(F,Y,W)}if(V(Y)||Q(Y))return Y=Mr(Y,F.mode,W,null),Y.return=F,Y;if(typeof Y.then=="function")return le(F,ju(Y),W);if(Y.$$typeof===O)return le(F,Bu(F,Y),W);Iu(F,Y)}return null}function J(F,Y,W,oe){var Ce=Y!==null?Y.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ce!==null?null:E(F,Y,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return W.key===Ce?I(F,Y,W,oe):null;case b:return W.key===Ce?K(F,Y,W,oe):null;case X:return W=_r(W),J(F,Y,W,oe)}if(V(W)||Q(W))return Ce!==null?null:re(F,Y,W,oe,null);if(typeof W.then=="function")return J(F,Y,ju(W),oe);if(W.$$typeof===O)return J(F,Y,Bu(F,W),oe);Iu(F,W)}return null}function se(F,Y,W,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(W)||null,E(Y,F,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case v:return F=F.get(oe.key===null?W:oe.key)||null,I(Y,F,oe,Ce);case b:return F=F.get(oe.key===null?W:oe.key)||null,K(Y,F,oe,Ce);case X:return oe=_r(oe),se(F,Y,W,oe,Ce)}if(V(oe)||Q(oe))return F=F.get(W)||null,re(Y,F,oe,Ce,null);if(typeof oe.then=="function")return se(F,Y,W,ju(oe),Ce);if(oe.$$typeof===O)return se(F,Y,W,Bu(Y,oe),Ce);Iu(Y,oe)}return null}function xe(F,Y,W,oe){for(var Ce=null,$e=null,ve=Y,Re=Y=0,je=null;ve!==null&&Re<W.length;Re++){ve.index>Re?(je=ve,ve=null):je=ve.sibling;var qe=J(F,ve,W[Re],oe);if(qe===null){ve===null&&(ve=je);break}r&&ve&&qe.alternate===null&&a(F,ve),Y=x(qe,Y,Re),$e===null?Ce=qe:$e.sibling=qe,$e=qe,ve=je}if(Re===W.length)return u(F,ve),Ie&&Yi(F,Re),Ce;if(ve===null){for(;Re<W.length;Re++)ve=le(F,W[Re],oe),ve!==null&&(Y=x(ve,Y,Re),$e===null?Ce=ve:$e.sibling=ve,$e=ve);return Ie&&Yi(F,Re),Ce}for(ve=d(ve);Re<W.length;Re++)je=se(ve,F,Re,W[Re],oe),je!==null&&(r&&je.alternate!==null&&ve.delete(je.key===null?Re:je.key),Y=x(je,Y,Re),$e===null?Ce=je:$e.sibling=je,$e=je);return r&&ve.forEach(function(Fs){return a(F,Fs)}),Ie&&Yi(F,Re),Ce}function ke(F,Y,W,oe){if(W==null)throw Error(i(151));for(var Ce=null,$e=null,ve=Y,Re=Y=0,je=null,qe=W.next();ve!==null&&!qe.done;Re++,qe=W.next()){ve.index>Re?(je=ve,ve=null):je=ve.sibling;var Fs=J(F,ve,qe.value,oe);if(Fs===null){ve===null&&(ve=je);break}r&&ve&&Fs.alternate===null&&a(F,ve),Y=x(Fs,Y,Re),$e===null?Ce=Fs:$e.sibling=Fs,$e=Fs,ve=je}if(qe.done)return u(F,ve),Ie&&Yi(F,Re),Ce;if(ve===null){for(;!qe.done;Re++,qe=W.next())qe=le(F,qe.value,oe),qe!==null&&(Y=x(qe,Y,Re),$e===null?Ce=qe:$e.sibling=qe,$e=qe);return Ie&&Yi(F,Re),Ce}for(ve=d(ve);!qe.done;Re++,qe=W.next())qe=se(ve,F,Re,qe.value,oe),qe!==null&&(r&&qe.alternate!==null&&ve.delete(qe.key===null?Re:qe.key),Y=x(qe,Y,Re),$e===null?Ce=qe:$e.sibling=qe,$e=qe);return r&&ve.forEach(function(s3){return a(F,s3)}),Ie&&Yi(F,Re),Ce}function Je(F,Y,W,oe){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case v:e:{for(var Ce=W.key;Y!==null;){if(Y.key===Ce){if(Ce=W.type,Ce===S){if(Y.tag===7){u(F,Y.sibling),oe=m(Y,W.props.children),oe.return=F,F=oe;break e}}else if(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&_r(Ce)===Y.type){u(F,Y.sibling),oe=m(Y,W.props),ga(oe,W),oe.return=F,F=oe;break e}u(F,Y);break}else a(F,Y);Y=Y.sibling}W.type===S?(oe=Mr(W.props.children,F.mode,oe,W.key),oe.return=F,F=oe):(oe=Ru(W.type,W.key,W.props,null,F.mode,oe),ga(oe,W),oe.return=F,F=oe)}return w(F);case b:e:{for(Ce=W.key;Y!==null;){if(Y.key===Ce)if(Y.tag===4&&Y.stateNode.containerInfo===W.containerInfo&&Y.stateNode.implementation===W.implementation){u(F,Y.sibling),oe=m(Y,W.children||[]),oe.return=F,F=oe;break e}else{u(F,Y);break}else a(F,Y);Y=Y.sibling}oe=Dp(W,F.mode,oe),oe.return=F,F=oe}return w(F);case X:return W=_r(W),Je(F,Y,W,oe)}if(V(W))return xe(F,Y,W,oe);if(Q(W)){if(Ce=Q(W),typeof Ce!="function")throw Error(i(150));return W=Ce.call(W),ke(F,Y,W,oe)}if(typeof W.then=="function")return Je(F,Y,ju(W),oe);if(W.$$typeof===O)return Je(F,Y,Bu(F,W),oe);Iu(F,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,Y!==null&&Y.tag===6?(u(F,Y.sibling),oe=m(Y,W),oe.return=F,F=oe):(u(F,Y),oe=Np(W,F.mode,oe),oe.return=F,F=oe),w(F)):u(F,Y)}return function(F,Y,W,oe){try{pa=0;var Ce=Je(F,Y,W,oe);return jo=null,Ce}catch(ve){if(ve===Ho||ve===Pu)throw ve;var $e=An(29,ve,null,F.mode);return $e.lanes=oe,$e.return=F,$e}}}var Br=Qv(!0),Yv=Qv(!1),Ds=!1;function $p(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Rs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function _s(r,a,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Ye&2)!==0){var m=d.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),d.pending=a,a=Du(r),Tv(r,null,u),a}return Nu(r,d,a,u),Du(r)}function ma(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=r.pendingLanes,u|=d,a.lanes=u,cu(r,u)}}function Qp(r,a){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var w={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?m=x=w:x=x.next=w,u=u.next}while(u!==null);x===null?m=x=a:x=x.next=a}else m=x=a;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Yp=!1;function ya(){if(Yp){var r=Po;if(r!==null)throw r}}function xa(r,a,u,d){Yp=!1;var m=r.updateQueue;Ds=!1;var x=m.firstBaseUpdate,w=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var I=E,K=I.next;I.next=null,w===null?x=K:w.next=K,w=I;var re=r.alternate;re!==null&&(re=re.updateQueue,E=re.lastBaseUpdate,E!==w&&(E===null?re.firstBaseUpdate=K:E.next=K,re.lastBaseUpdate=I))}if(x!==null){var le=m.baseState;w=0,re=K=I=null,E=x;do{var J=E.lane&-536870913,se=J!==E.lane;if(se?(He&J)===J:(d&J)===J){J!==0&&J===zo&&(Yp=!0),re!==null&&(re=re.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var xe=r,ke=E;J=a;var Je=u;switch(ke.tag){case 1:if(xe=ke.payload,typeof xe=="function"){le=xe.call(Je,le,J);break e}le=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ke.payload,J=typeof xe=="function"?xe.call(Je,le,J):xe,J==null)break e;le=g({},le,J);break e;case 2:Ds=!0}}J=E.callback,J!==null&&(r.flags|=64,se&&(r.flags|=8192),se=m.callbacks,se===null?m.callbacks=[J]:se.push(J))}else se={lane:J,tag:E.tag,payload:E.payload,callback:E.callback,next:null},re===null?(K=re=se,I=le):re=re.next=se,w|=J;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;se=E,E=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);re===null&&(I=le),m.baseState=I,m.firstBaseUpdate=K,m.lastBaseUpdate=re,x===null&&(m.shared.lanes=0),Hs|=w,r.lanes=w,r.memoizedState=le}}function Xv(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Fv(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Xv(u[r],a)}var Io=D(null),Vu=D(0);function Gv(r,a){r=is,ee(Vu,r),ee(Io,a),is=r|a.baseLanes}function Xp(){ee(Vu,is),ee(Io,Io.current)}function Fp(){is=Vu.current,H(Io),H(Vu)}var kn=D(null),Vn=null;function Ls(r){var a=r.alternate;ee(pt,pt.current&1),ee(kn,r),Vn===null&&(a===null||Io.current!==null||a.memoizedState!==null)&&(Vn=r)}function Gp(r){ee(pt,pt.current),ee(kn,r),Vn===null&&(Vn=r)}function Wv(r){r.tag===22?(ee(pt,pt.current),ee(kn,r),Vn===null&&(Vn=r)):Bs()}function Bs(){ee(pt,pt.current),ee(kn,kn.current)}function On(r){H(kn),Vn===r&&(Vn=null),H(pt)}var pt=D(0);function Uu(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||tm(u)||nm(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Gi=0,Ne=null,Ke=null,St=null,$u=!1,Vo=!1,zr=!1,qu=0,va=0,Uo=null,FN=0;function ft(){throw Error(i(321))}function Wp(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!Cn(r[u],a[u]))return!1;return!0}function Kp(r,a,u,d,m,x){return Gi=x,Ne=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,N.H=r===null||r.memoizedState===null?_1:hg,zr=!1,x=u(d,m),zr=!1,Vo&&(x=Zv(a,u,d,m)),Kv(r),x}function Kv(r){N.H=wa;var a=Ke!==null&&Ke.next!==null;if(Gi=0,St=Ke=Ne=null,$u=!1,va=0,Uo=null,a)throw Error(i(300));r===null||wt||(r=r.dependencies,r!==null&&Lu(r)&&(wt=!0))}function Zv(r,a,u,d){Ne=r;var m=0;do{if(Vo&&(Uo=null),va=0,Vo=!1,25<=m)throw Error(i(301));if(m+=1,St=Ke=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}N.H=L1,x=a(u,d)}while(Vo);return x}function GN(){var r=N.H,a=r.useState()[0];return a=typeof a.then=="function"?ba(a):a,r=r.useState()[0],(Ke!==null?Ke.memoizedState:null)!==r&&(Ne.flags|=1024),a}function Zp(){var r=qu!==0;return qu=0,r}function Jp(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function eg(r){if($u){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}$u=!1}Gi=0,St=Ke=Ne=null,Vo=!1,va=qu=0,Uo=null}function en(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ne.memoizedState=St=r:St=St.next=r,St}function gt(){if(Ke===null){var r=Ne.alternate;r=r!==null?r.memoizedState:null}else r=Ke.next;var a=St===null?Ne.memoizedState:St.next;if(a!==null)St=a,Ke=r;else{if(r===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));Ke=r,r={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},St===null?Ne.memoizedState=St=r:St=St.next=r}return St}function Qu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ba(r){var a=va;return va+=1,Uo===null&&(Uo=[]),r=Uv(Uo,r,a),a=Ne,(St===null?a.memoizedState:St.next)===null&&(a=a.alternate,N.H=a===null||a.memoizedState===null?_1:hg),r}function Yu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ba(r);if(r.$$typeof===O)return jt(r)}throw Error(i(438,String(r)))}function tg(r){var a=null,u=Ne.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Ne.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Qu(),Ne.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),d=0;d<r;d++)u[d]=ne;return a.index++,u}function Wi(r,a){return typeof a=="function"?a(r):a}function Xu(r){var a=gt();return ng(a,Ke,r)}function ng(r,a,u){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var m=r.baseQueue,x=d.pending;if(x!==null){if(m!==null){var w=m.next;m.next=x.next,x.next=w}a.baseQueue=m=x,d.pending=null}if(x=r.baseState,m===null)r.memoizedState=x;else{a=m.next;var E=w=null,I=null,K=a,re=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(He&le)===le:(Gi&le)===le){var J=K.revertLane;if(J===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===zo&&(re=!0);else if((Gi&J)===J){K=K.next,J===zo&&(re=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(E=I=le,w=x):I=I.next=le,Ne.lanes|=J,Hs|=J;le=K.action,zr&&u(x,le),x=K.hasEagerState?K.eagerState:u(x,le)}else J={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(E=I=J,w=x):I=I.next=J,Ne.lanes|=le,Hs|=le;K=K.next}while(K!==null&&K!==a);if(I===null?w=x:I.next=E,!Cn(x,r.memoizedState)&&(wt=!0,re&&(u=Po,u!==null)))throw u;r.memoizedState=x,r.baseState=w,r.baseQueue=I,d.lastRenderedState=x}return m===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function ig(r){var a=gt(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var d=u.dispatch,m=u.pending,x=a.memoizedState;if(m!==null){u.pending=null;var w=m=m.next;do x=r(x,w.action),w=w.next;while(w!==m);Cn(x,a.memoizedState)||(wt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),u.lastRenderedState=x}return[x,d]}function Jv(r,a,u){var d=Ne,m=gt(),x=Ie;if(x){if(u===void 0)throw Error(i(407));u=u()}else u=a();var w=!Cn((Ke||m).memoizedState,u);if(w&&(m.memoizedState=u,wt=!0),m=m.queue,og(n1.bind(null,d,m,r),[r]),m.getSnapshot!==a||w||St!==null&&St.memoizedState.tag&1){if(d.flags|=2048,$o(9,{destroy:void 0},t1.bind(null,d,m,u,a),null),tt===null)throw Error(i(349));x||(Gi&127)!==0||e1(d,a,u)}return u}function e1(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Ne.updateQueue,a===null?(a=Qu(),Ne.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function t1(r,a,u,d){a.value=u,a.getSnapshot=d,i1(a)&&s1(r)}function n1(r,a,u){return u(function(){i1(a)&&s1(r)})}function i1(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!Cn(r,u)}catch{return!0}}function s1(r){var a=Er(r,2);a!==null&&dn(a,r,2)}function sg(r){var a=en();if(typeof r=="function"){var u=r;if(r=u(),zr){di(!0);try{u()}finally{di(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:r},a}function r1(r,a,u,d){return r.baseState=u,ng(r,Ke,typeof d=="function"?d:Wi)}function WN(r,a,u,d,m){if(Wu(r))throw Error(i(485));if(r=a.action,r!==null){var x={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){x.listeners.push(w)}};N.T!==null?u(!0):x.isTransition=!1,d(x),u=a.pending,u===null?(x.next=a.pending=x,o1(a,x)):(x.next=u.next,a.pending=u.next=x)}}function o1(r,a){var u=a.action,d=a.payload,m=r.state;if(a.isTransition){var x=N.T,w={};N.T=w;try{var E=u(m,d),I=N.S;I!==null&&I(w,E),l1(r,a,E)}catch(K){rg(r,a,K)}finally{x!==null&&w.types!==null&&(x.types=w.types),N.T=x}}else try{x=u(m,d),l1(r,a,x)}catch(K){rg(r,a,K)}}function l1(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){a1(r,a,d)},function(d){return rg(r,a,d)}):a1(r,a,u)}function a1(r,a,u){a.status="fulfilled",a.value=u,c1(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,o1(r,u)))}function rg(r,a,u){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,c1(a),a=a.next;while(a!==d)}r.action=null}function c1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function u1(r,a){return a}function f1(r,a){if(Ie){var u=tt.formState;if(u!==null){e:{var d=Ne;if(Ie){if(rt){t:{for(var m=rt,x=In;m.nodeType!==8;){if(!x){m=null;break t}if(m=Un(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){rt=Un(m.nextSibling),d=m.data==="F!";break e}}Ts(d)}d=!1}d&&(a=u[0])}}return u=en(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u1,lastRenderedState:a},u.queue=d,u=N1.bind(null,Ne,d),d.dispatch=u,d=sg(!1),x=fg.bind(null,Ne,!1,d.queue),d=en(),m={state:a,dispatch:null,action:r,pending:null},d.queue=m,u=WN.bind(null,Ne,m,x,u),m.dispatch=u,d.memoizedState=r,[a,u,!1]}function h1(r){var a=gt();return d1(a,Ke,r)}function d1(r,a,u){if(a=ng(r,a,u1)[0],r=Xu(Wi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=ba(a)}catch(w){throw w===Ho?Pu:w}else d=a;a=gt();var m=a.queue,x=m.dispatch;return u!==a.memoizedState&&(Ne.flags|=2048,$o(9,{destroy:void 0},KN.bind(null,m,u),null)),[d,x,r]}function KN(r,a){r.action=a}function p1(r){var a=gt(),u=Ke;if(u!==null)return d1(a,u,r);gt(),a=a.memoizedState,u=gt();var d=u.queue.dispatch;return u.memoizedState=r,[a,d,!1]}function $o(r,a,u,d){return r={tag:r,create:u,deps:d,inst:a,next:null},a=Ne.updateQueue,a===null&&(a=Qu(),Ne.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,a.lastEffect=r),r}function g1(){return gt().memoizedState}function Fu(r,a,u,d){var m=en();Ne.flags|=r,m.memoizedState=$o(1|a,{destroy:void 0},u,d===void 0?null:d)}function Gu(r,a,u,d){var m=gt();d=d===void 0?null:d;var x=m.memoizedState.inst;Ke!==null&&d!==null&&Wp(d,Ke.memoizedState.deps)?m.memoizedState=$o(a,x,u,d):(Ne.flags|=r,m.memoizedState=$o(1|a,x,u,d))}function m1(r,a){Fu(8390656,8,r,a)}function og(r,a){Gu(2048,8,r,a)}function ZN(r){Ne.flags|=4;var a=Ne.updateQueue;if(a===null)a=Qu(),Ne.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function y1(r){var a=gt().memoizedState;return ZN({ref:a,nextImpl:r}),function(){if((Ye&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function x1(r,a){return Gu(4,2,r,a)}function v1(r,a){return Gu(4,4,r,a)}function b1(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function S1(r,a,u){u=u!=null?u.concat([r]):null,Gu(4,4,b1.bind(null,a,r),u)}function lg(){}function w1(r,a){var u=gt();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&Wp(a,d[1])?d[0]:(u.memoizedState=[r,a],r)}function C1(r,a){var u=gt();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&Wp(a,d[1]))return d[0];if(d=r(),zr){di(!0);try{r()}finally{di(!1)}}return u.memoizedState=[d,a],d}function ag(r,a,u){return u===void 0||(Gi&1073741824)!==0&&(He&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=Ab(),Ne.lanes|=r,Hs|=r,u)}function A1(r,a,u,d){return Cn(u,a)?u:Io.current!==null?(r=ag(r,u,d),Cn(r,a)||(wt=!0),r):(Gi&42)===0||(Gi&1073741824)!==0&&(He&261930)===0?(wt=!0,r.memoizedState=u):(r=Ab(),Ne.lanes|=r,Hs|=r,a)}function k1(r,a,u,d,m){var x=P.p;P.p=x!==0&&8>x?x:8;var w=N.T,E={};N.T=E,fg(r,!1,a,u);try{var I=m(),K=N.S;if(K!==null&&K(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var re=XN(I,d);Sa(r,a,re,Tn(r))}else Sa(r,a,d,Tn(r))}catch(le){Sa(r,a,{then:function(){},status:"rejected",reason:le},Tn())}finally{P.p=x,w!==null&&E.types!==null&&(w.types=E.types),N.T=w}}function JN(){}function cg(r,a,u,d){if(r.tag!==5)throw Error(i(476));var m=O1(r).queue;k1(r,m,a,j,u===null?JN:function(){return E1(r),u(d)})}function O1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:j},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function E1(r){var a=O1(r);a.next===null&&(a=r.alternate.memoizedState),Sa(r,a.next.queue,{},Tn())}function ug(){return jt(Ha)}function M1(){return gt().memoizedState}function T1(){return gt().memoizedState}function eD(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Tn();r=Rs(u);var d=_s(a,r,u);d!==null&&(dn(d,a,u),ma(d,a,u)),a={cache:jp()},r.payload=a;return}a=a.return}}function tD(r,a,u){var d=Tn();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Wu(r)?D1(a,u):(u=Mp(r,a,u,d),u!==null&&(dn(u,r,d),R1(u,a,d)))}function N1(r,a,u){var d=Tn();Sa(r,a,u,d)}function Sa(r,a,u,d){var m={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Wu(r))D1(a,m);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var w=a.lastRenderedState,E=x(w,u);if(m.hasEagerState=!0,m.eagerState=E,Cn(E,w))return Nu(r,a,m,0),tt===null&&Tu(),!1}catch{}if(u=Mp(r,a,m,d),u!==null)return dn(u,r,d),R1(u,a,d),!0}return!1}function fg(r,a,u,d){if(d={lane:2,revertLane:$g(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Wu(r)){if(a)throw Error(i(479))}else a=Mp(r,u,d,2),a!==null&&dn(a,r,2)}function Wu(r){var a=r.alternate;return r===Ne||a!==null&&a===Ne}function D1(r,a){Vo=$u=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function R1(r,a,u){if((u&4194048)!==0){var d=a.lanes;d&=r.pendingLanes,u|=d,a.lanes=u,cu(r,u)}}var wa={readContext:jt,use:Yu,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};wa.useEffectEvent=ft;var _1={readContext:jt,use:Yu,useCallback:function(r,a){return en().memoizedState=[r,a===void 0?null:a],r},useContext:jt,useEffect:m1,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,Fu(4194308,4,b1.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Fu(4194308,4,r,a)},useInsertionEffect:function(r,a){Fu(4,2,r,a)},useMemo:function(r,a){var u=en();a=a===void 0?null:a;var d=r();if(zr){di(!0);try{r()}finally{di(!1)}}return u.memoizedState=[d,a],d},useReducer:function(r,a,u){var d=en();if(u!==void 0){var m=u(a);if(zr){di(!0);try{u(a)}finally{di(!1)}}}else m=a;return d.memoizedState=d.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},d.queue=r,r=r.dispatch=tD.bind(null,Ne,r),[d.memoizedState,r]},useRef:function(r){var a=en();return r={current:r},a.memoizedState=r},useState:function(r){r=sg(r);var a=r.queue,u=N1.bind(null,Ne,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:lg,useDeferredValue:function(r,a){var u=en();return ag(u,r,a)},useTransition:function(){var r=sg(!1);return r=k1.bind(null,Ne,r.queue,!0,!1),en().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var d=Ne,m=en();if(Ie){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),tt===null)throw Error(i(349));(He&127)!==0||e1(d,a,u)}m.memoizedState=u;var x={value:u,getSnapshot:a};return m.queue=x,m1(n1.bind(null,d,x,r),[r]),d.flags|=2048,$o(9,{destroy:void 0},t1.bind(null,d,x,u,a),null),u},useId:function(){var r=en(),a=tt.identifierPrefix;if(Ie){var u=mi,d=gi;u=(d&~(1<<32-Jt(d)-1)).toString(32)+u,a="_"+a+"R_"+u,u=qu++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=FN++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:ug,useFormState:f1,useActionState:f1,useOptimistic:function(r){var a=en();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=fg.bind(null,Ne,!0,u),u.dispatch=a,[r,a]},useMemoCache:tg,useCacheRefresh:function(){return en().memoizedState=eD.bind(null,Ne)},useEffectEvent:function(r){var a=en(),u={impl:r};return a.memoizedState=u,function(){if((Ye&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},hg={readContext:jt,use:Yu,useCallback:w1,useContext:jt,useEffect:og,useImperativeHandle:S1,useInsertionEffect:x1,useLayoutEffect:v1,useMemo:C1,useReducer:Xu,useRef:g1,useState:function(){return Xu(Wi)},useDebugValue:lg,useDeferredValue:function(r,a){var u=gt();return A1(u,Ke.memoizedState,r,a)},useTransition:function(){var r=Xu(Wi)[0],a=gt().memoizedState;return[typeof r=="boolean"?r:ba(r),a]},useSyncExternalStore:Jv,useId:M1,useHostTransitionStatus:ug,useFormState:h1,useActionState:h1,useOptimistic:function(r,a){var u=gt();return r1(u,Ke,r,a)},useMemoCache:tg,useCacheRefresh:T1};hg.useEffectEvent=y1;var L1={readContext:jt,use:Yu,useCallback:w1,useContext:jt,useEffect:og,useImperativeHandle:S1,useInsertionEffect:x1,useLayoutEffect:v1,useMemo:C1,useReducer:ig,useRef:g1,useState:function(){return ig(Wi)},useDebugValue:lg,useDeferredValue:function(r,a){var u=gt();return Ke===null?ag(u,r,a):A1(u,Ke.memoizedState,r,a)},useTransition:function(){var r=ig(Wi)[0],a=gt().memoizedState;return[typeof r=="boolean"?r:ba(r),a]},useSyncExternalStore:Jv,useId:M1,useHostTransitionStatus:ug,useFormState:p1,useActionState:p1,useOptimistic:function(r,a){var u=gt();return Ke!==null?r1(u,Ke,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:tg,useCacheRefresh:T1};L1.useEffectEvent=y1;function dg(r,a,u,d){a=r.memoizedState,u=u(d,a),u=u==null?a:g({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var pg={enqueueSetState:function(r,a,u){r=r._reactInternals;var d=Tn(),m=Rs(d);m.payload=a,u!=null&&(m.callback=u),a=_s(r,m,d),a!==null&&(dn(a,r,d),ma(a,r,d))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var d=Tn(),m=Rs(d);m.tag=1,m.payload=a,u!=null&&(m.callback=u),a=_s(r,m,d),a!==null&&(dn(a,r,d),ma(a,r,d))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Tn(),d=Rs(u);d.tag=2,a!=null&&(d.callback=a),a=_s(r,d,u),a!==null&&(dn(a,r,u),ma(a,r,u))}};function B1(r,a,u,d,m,x,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,x,w):a.prototype&&a.prototype.isPureReactComponent?!aa(u,d)||!aa(m,x):!0}function z1(r,a,u,d){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==r&&pg.enqueueReplaceState(a,a.state,null)}function Pr(r,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(r=r.defaultProps){u===a&&(u=g({},u));for(var m in r)u[m]===void 0&&(u[m]=r[m])}return u}function P1(r){Mu(r)}function H1(r){console.error(r)}function j1(r){Mu(r)}function Ku(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function I1(r,a,u){try{var d=r.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function gg(r,a,u){return u=Rs(u),u.tag=3,u.payload={element:null},u.callback=function(){Ku(r,a)},u}function V1(r){return r=Rs(r),r.tag=3,r}function U1(r,a,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var x=d.value;r.payload=function(){return m(x)},r.callback=function(){I1(a,u,d)}}var w=u.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){I1(a,u,d),typeof m!="function"&&(js===null?js=new Set([this]):js.add(this));var E=d.stack;this.componentDidCatch(d.value,{componentStack:E!==null?E:""})})}function nD(r,a,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&Bo(a,u,m,!0),u=kn.current,u!==null){switch(u.tag){case 31:case 13:return Vn===null?uf():u.alternate===null&&ht===0&&(ht=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===Hu?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),Ig(r,d,m)),!1;case 22:return u.flags|=65536,d===Hu?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),Ig(r,d,m)),!1}throw Error(i(435,u.tag))}return Ig(r,d,m),uf(),!1}if(Ie)return a=kn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,d!==Lp&&(r=Error(i(422),{cause:d}),fa(Pn(r,u)))):(d!==Lp&&(a=Error(i(423),{cause:d}),fa(Pn(a,u))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,d=Pn(d,u),m=gg(r.stateNode,d,m),Qp(r,m),ht!==4&&(ht=2)),!1;var x=Error(i(520),{cause:d});if(x=Pn(x,u),Na===null?Na=[x]:Na.push(x),ht!==4&&(ht=2),a===null)return!0;d=Pn(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=m&-m,u.lanes|=r,r=gg(u.stateNode,d,r),Qp(u,r),!1;case 1:if(a=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(js===null||!js.has(x))))return u.flags|=65536,m&=-m,u.lanes|=m,m=V1(m),U1(m,r,u,d),Qp(u,m),!1}u=u.return}while(u!==null);return!1}var mg=Error(i(461)),wt=!1;function It(r,a,u,d){a.child=r===null?Yv(a,null,u,d):Br(a,r.child,u,d)}function $1(r,a,u,d,m){u=u.render;var x=a.ref;if("ref"in d){var w={};for(var E in d)E!=="ref"&&(w[E]=d[E])}else w=d;return Dr(a),d=Kp(r,a,u,w,x,m),E=Zp(),r!==null&&!wt?(Jp(r,a,m),Ki(r,a,m)):(Ie&&E&&Rp(a),a.flags|=1,It(r,a,d,m),a.child)}function q1(r,a,u,d,m){if(r===null){var x=u.type;return typeof x=="function"&&!Tp(x)&&x.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=x,Q1(r,a,x,d,m)):(r=Ru(u.type,null,d,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,!Ag(r,m)){var w=x.memoizedProps;if(u=u.compare,u=u!==null?u:aa,u(w,d)&&r.ref===a.ref)return Ki(r,a,m)}return a.flags|=1,r=Qi(x,d),r.ref=a.ref,r.return=a,a.child=r}function Q1(r,a,u,d,m){if(r!==null){var x=r.memoizedProps;if(aa(x,d)&&r.ref===a.ref)if(wt=!1,a.pendingProps=d=x,Ag(r,m))(r.flags&131072)!==0&&(wt=!0);else return a.lanes=r.lanes,Ki(r,a,m)}return yg(r,a,u,d,m)}function Y1(r,a,u,d){var m=d.children,x=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,r!==null){for(d=a.child=r.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~x}else d=0,a.child=null;return X1(r,a,x,u,d)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&zu(a,x!==null?x.cachePool:null),x!==null?Gv(a,x):Xp(),Wv(a);else return d=a.lanes=536870912,X1(r,a,x!==null?x.baseLanes|u:u,u,d)}else x!==null?(zu(a,x.cachePool),Gv(a,x),Bs(),a.memoizedState=null):(r!==null&&zu(a,null),Xp(),Bs());return It(r,a,m,u),a.child}function Ca(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function X1(r,a,u,d,m){var x=Vp();return x=x===null?null:{parent:bt._currentValue,pool:x},a.memoizedState={baseLanes:u,cachePool:x},r!==null&&zu(a,null),Xp(),Wv(a),r!==null&&Bo(r,a,d,!0),a.childLanes=m,null}function Zu(r,a){return a=ef({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function F1(r,a,u){return Br(a,r.child,null,u),r=Zu(a,a.pendingProps),r.flags|=2,On(a),a.memoizedState=null,r}function iD(r,a,u){var d=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ie){if(d.mode==="hidden")return r=Zu(a,d),a.lanes=536870912,Ca(null,r);if(Gp(a),(r=rt)?(r=oS(r,In),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:gi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},u=Dv(r),u.return=a,a.child=u,Ht=a,rt=null)):r=null,r===null)throw Ts(a);return a.lanes=536870912,null}return Zu(a,d)}var x=r.memoizedState;if(x!==null){var w=x.dehydrated;if(Gp(a),m)if(a.flags&256)a.flags&=-257,a=F1(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(wt||Bo(r,a,u,!1),m=(u&r.childLanes)!==0,wt||m){if(d=tt,d!==null&&(w=uu(d,u),w!==0&&w!==x.retryLane))throw x.retryLane=w,Er(r,w),dn(d,r,w),mg;uf(),a=F1(r,a,u)}else r=x.treeContext,rt=Un(w.nextSibling),Ht=a,Ie=!0,Ms=null,In=!1,r!==null&&Lv(a,r),a=Zu(a,d),a.flags|=4096;return a}return r=Qi(r.child,{mode:d.mode,children:d.children}),r.ref=a.ref,a.child=r,r.return=a,r}function Ju(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function yg(r,a,u,d,m){return Dr(a),u=Kp(r,a,u,d,void 0,m),d=Zp(),r!==null&&!wt?(Jp(r,a,m),Ki(r,a,m)):(Ie&&d&&Rp(a),a.flags|=1,It(r,a,u,m),a.child)}function G1(r,a,u,d,m,x){return Dr(a),a.updateQueue=null,u=Zv(a,d,u,m),Kv(r),d=Zp(),r!==null&&!wt?(Jp(r,a,x),Ki(r,a,x)):(Ie&&d&&Rp(a),a.flags|=1,It(r,a,u,x),a.child)}function W1(r,a,u,d,m){if(Dr(a),a.stateNode===null){var x=Do,w=u.contextType;typeof w=="object"&&w!==null&&(x=jt(w)),x=new u(d,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=pg,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=d,x.state=a.memoizedState,x.refs={},$p(a),w=u.contextType,x.context=typeof w=="object"&&w!==null?jt(w):Do,x.state=a.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(dg(a,u,w,d),x.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(w=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),w!==x.state&&pg.enqueueReplaceState(x,x.state,null),xa(a,d,x,m),ya(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(r===null){x=a.stateNode;var E=a.memoizedProps,I=Pr(u,E);x.props=I;var K=x.context,re=u.contextType;w=Do,typeof re=="object"&&re!==null&&(w=jt(re));var le=u.getDerivedStateFromProps;re=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,re||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E||K!==w)&&z1(a,x,d,w),Ds=!1;var J=a.memoizedState;x.state=J,xa(a,d,x,m),ya(),K=a.memoizedState,E||J!==K||Ds?(typeof le=="function"&&(dg(a,u,le,d),K=a.memoizedState),(I=Ds||B1(a,u,I,d,J,K,w))?(re||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=K),x.props=d,x.state=K,x.context=w,d=I):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{x=a.stateNode,qp(r,a),w=a.memoizedProps,re=Pr(u,w),x.props=re,le=a.pendingProps,J=x.context,K=u.contextType,I=Do,typeof K=="object"&&K!==null&&(I=jt(K)),E=u.getDerivedStateFromProps,(K=typeof E=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==le||J!==I)&&z1(a,x,d,I),Ds=!1,J=a.memoizedState,x.state=J,xa(a,d,x,m),ya();var se=a.memoizedState;w!==le||J!==se||Ds||r!==null&&r.dependencies!==null&&Lu(r.dependencies)?(typeof E=="function"&&(dg(a,u,E,d),se=a.memoizedState),(re=Ds||B1(a,u,re,d,J,se,I)||r!==null&&r.dependencies!==null&&Lu(r.dependencies))?(K||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,se,I),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,se,I)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=se),x.props=d,x.state=se,x.context=I,d=re):(typeof x.componentDidUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&J===r.memoizedState||(a.flags|=1024),d=!1)}return x=d,Ju(r,a),d=(a.flags&128)!==0,x||d?(x=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,r!==null&&d?(a.child=Br(a,r.child,null,m),a.child=Br(a,null,u,m)):It(r,a,u,m),a.memoizedState=x.state,r=a.child):r=Ki(r,a,m),r}function K1(r,a,u,d){return Tr(),a.flags|=256,It(r,a,u,d),a.child}var xg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vg(r){return{baseLanes:r,cachePool:Iv()}}function bg(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Mn),r}function Z1(r,a,u){var d=a.pendingProps,m=!1,x=(a.flags&128)!==0,w;if((w=x)||(w=r!==null&&r.memoizedState===null?!1:(pt.current&2)!==0),w&&(m=!0,a.flags&=-129),w=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ie){if(m?Ls(a):Bs(),(r=rt)?(r=oS(r,In),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:gi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},u=Dv(r),u.return=a,a.child=u,Ht=a,rt=null)):r=null,r===null)throw Ts(a);return nm(r)?a.lanes=32:a.lanes=536870912,null}var E=d.children;return d=d.fallback,m?(Bs(),m=a.mode,E=ef({mode:"hidden",children:E},m),d=Mr(d,m,u,null),E.return=a,d.return=a,E.sibling=d,a.child=E,d=a.child,d.memoizedState=vg(u),d.childLanes=bg(r,w,u),a.memoizedState=xg,Ca(null,d)):(Ls(a),Sg(a,E))}var I=r.memoizedState;if(I!==null&&(E=I.dehydrated,E!==null)){if(x)a.flags&256?(Ls(a),a.flags&=-257,a=wg(r,a,u)):a.memoizedState!==null?(Bs(),a.child=r.child,a.flags|=128,a=null):(Bs(),E=d.fallback,m=a.mode,d=ef({mode:"visible",children:d.children},m),E=Mr(E,m,u,null),E.flags|=2,d.return=a,E.return=a,d.sibling=E,a.child=d,Br(a,r.child,null,u),d=a.child,d.memoizedState=vg(u),d.childLanes=bg(r,w,u),a.memoizedState=xg,a=Ca(null,d));else if(Ls(a),nm(E)){if(w=E.nextSibling&&E.nextSibling.dataset,w)var K=w.dgst;w=K,d=Error(i(419)),d.stack="",d.digest=w,fa({value:d,source:null,stack:null}),a=wg(r,a,u)}else if(wt||Bo(r,a,u,!1),w=(u&r.childLanes)!==0,wt||w){if(w=tt,w!==null&&(d=uu(w,u),d!==0&&d!==I.retryLane))throw I.retryLane=d,Er(r,d),dn(w,r,d),mg;tm(E)||uf(),a=wg(r,a,u)}else tm(E)?(a.flags|=192,a.child=r.child,a=null):(r=I.treeContext,rt=Un(E.nextSibling),Ht=a,Ie=!0,Ms=null,In=!1,r!==null&&Lv(a,r),a=Sg(a,d.children),a.flags|=4096);return a}return m?(Bs(),E=d.fallback,m=a.mode,I=r.child,K=I.sibling,d=Qi(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,K!==null?E=Qi(K,E):(E=Mr(E,m,u,null),E.flags|=2),E.return=a,d.return=a,d.sibling=E,a.child=d,Ca(null,d),d=a.child,E=r.child.memoizedState,E===null?E=vg(u):(m=E.cachePool,m!==null?(I=bt._currentValue,m=m.parent!==I?{parent:I,pool:I}:m):m=Iv(),E={baseLanes:E.baseLanes|u,cachePool:m}),d.memoizedState=E,d.childLanes=bg(r,w,u),a.memoizedState=xg,Ca(r.child,d)):(Ls(a),u=r.child,r=u.sibling,u=Qi(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,r!==null&&(w=a.deletions,w===null?(a.deletions=[r],a.flags|=16):w.push(r)),a.child=u,a.memoizedState=null,u)}function Sg(r,a){return a=ef({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function ef(r,a){return r=An(22,r,null,a),r.lanes=0,r}function wg(r,a,u){return Br(a,r.child,null,u),r=Sg(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function J1(r,a,u){r.lanes|=a;var d=r.alternate;d!==null&&(d.lanes|=a),Pp(r.return,a,u)}function Cg(r,a,u,d,m,x){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m,treeForkCount:x}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=u,w.tailMode=m,w.treeForkCount=x)}function eb(r,a,u){var d=a.pendingProps,m=d.revealOrder,x=d.tail;d=d.children;var w=pt.current,E=(w&2)!==0;if(E?(w=w&1|2,a.flags|=128):w&=1,ee(pt,w),It(r,a,d,u),d=Ie?ua:0,!E&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&J1(r,u,a);else if(r.tag===19)J1(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(u=a.child,m=null;u!==null;)r=u.alternate,r!==null&&Uu(r)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Cg(a,!1,m,u,x,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&Uu(r)===null){a.child=m;break}r=m.sibling,m.sibling=u,u=m,m=r}Cg(a,!0,u,null,x,d);break;case"together":Cg(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Ki(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),Hs|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(Bo(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=Qi(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Qi(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function Ag(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Lu(r)))}function sD(r,a,u){switch(a.tag){case 3:ue(a,a.stateNode.containerInfo),Ns(a,bt,r.memoizedState.cache),Tr();break;case 27:case 5:De(a);break;case 4:ue(a,a.stateNode.containerInfo);break;case 10:Ns(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Gp(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(Ls(a),a.flags|=128,null):(u&a.child.childLanes)!==0?Z1(r,a,u):(Ls(a),r=Ki(r,a,u),r!==null?r.sibling:null);Ls(a);break;case 19:var m=(r.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(Bo(r,a,u,!1),d=(u&a.childLanes)!==0),m){if(d)return eb(r,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ee(pt,pt.current),d)break;return null;case 22:return a.lanes=0,Y1(r,a,u,a.pendingProps);case 24:Ns(a,bt,r.memoizedState.cache)}return Ki(r,a,u)}function tb(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)wt=!0;else{if(!Ag(r,u)&&(a.flags&128)===0)return wt=!1,sD(r,a,u);wt=(r.flags&131072)!==0}else wt=!1,Ie&&(a.flags&1048576)!==0&&_v(a,ua,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(r=_r(a.elementType),a.type=r,typeof r=="function")Tp(r)?(d=Pr(r,d),a.tag=1,a=W1(null,a,r,d,u)):(a.tag=0,a=yg(null,a,r,d,u));else{if(r!=null){var m=r.$$typeof;if(m===M){a.tag=11,a=$1(null,a,r,d,u);break e}else if(m===R){a.tag=14,a=q1(null,a,r,d,u);break e}}throw a=B(r)||r,Error(i(306,a,""))}}return a;case 0:return yg(r,a,a.type,a.pendingProps,u);case 1:return d=a.type,m=Pr(d,a.pendingProps),W1(r,a,d,m,u);case 3:e:{if(ue(a,a.stateNode.containerInfo),r===null)throw Error(i(387));d=a.pendingProps;var x=a.memoizedState;m=x.element,qp(r,a),xa(a,d,null,u);var w=a.memoizedState;if(d=w.cache,Ns(a,bt,d),d!==x.cache&&Hp(a,[bt],u,!0),ya(),d=w.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:w.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=K1(r,a,d,u);break e}else if(d!==m){m=Pn(Error(i(424)),a),fa(m),a=K1(r,a,d,u);break e}else for(r=a.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,rt=Un(r.firstChild),Ht=a,Ie=!0,Ms=null,In=!0,u=Yv(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Tr(),d===m){a=Ki(r,a,u);break e}It(r,a,d,u)}a=a.child}return a;case 26:return Ju(r,a),r===null?(u=hS(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ie||(u=a.type,r=a.pendingProps,d=yf(he.current).createElement(u),d[Et]=a,d[Yt]=r,Vt(d,u,r),vt(d),a.stateNode=d):a.memoizedState=hS(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return De(a),r===null&&Ie&&(d=a.stateNode=cS(a.type,a.pendingProps,he.current),Ht=a,In=!0,m=rt,$s(a.type)?(im=m,rt=Un(d.firstChild)):rt=m),It(r,a,a.pendingProps.children,u),Ju(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ie&&((m=d=rt)&&(d=LD(d,a.type,a.pendingProps,In),d!==null?(a.stateNode=d,Ht=a,rt=Un(d.firstChild),In=!1,m=!0):m=!1),m||Ts(a)),De(a),m=a.type,x=a.pendingProps,w=r!==null?r.memoizedProps:null,d=x.children,Zg(m,x)?d=null:w!==null&&Zg(m,w)&&(a.flags|=32),a.memoizedState!==null&&(m=Kp(r,a,GN,null,null,u),Ha._currentValue=m),Ju(r,a),It(r,a,d,u),a.child;case 6:return r===null&&Ie&&((r=u=rt)&&(u=BD(u,a.pendingProps,In),u!==null?(a.stateNode=u,Ht=a,rt=null,r=!0):r=!1),r||Ts(a)),null;case 13:return Z1(r,a,u);case 4:return ue(a,a.stateNode.containerInfo),d=a.pendingProps,r===null?a.child=Br(a,null,d,u):It(r,a,d,u),a.child;case 11:return $1(r,a,a.type,a.pendingProps,u);case 7:return It(r,a,a.pendingProps,u),a.child;case 8:return It(r,a,a.pendingProps.children,u),a.child;case 12:return It(r,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Ns(a,a.type,d.value),It(r,a,d.children,u),a.child;case 9:return m=a.type._context,d=a.pendingProps.children,Dr(a),m=jt(m),d=d(m),a.flags|=1,It(r,a,d,u),a.child;case 14:return q1(r,a,a.type,a.pendingProps,u);case 15:return Q1(r,a,a.type,a.pendingProps,u);case 19:return eb(r,a,u);case 31:return iD(r,a,u);case 22:return Y1(r,a,u,a.pendingProps);case 24:return Dr(a),d=jt(bt),r===null?(m=Vp(),m===null&&(m=tt,x=jp(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=u),m=x),a.memoizedState={parent:d,cache:m},$p(a),Ns(a,bt,m)):((r.lanes&u)!==0&&(qp(r,a),xa(a,null,null,u),ya()),m=r.memoizedState,x=a.memoizedState,m.parent!==d?(m={parent:d,cache:d},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ns(a,bt,d)):(d=x.cache,Ns(a,bt,d),d!==m.cache&&Hp(a,[bt],u,!0))),It(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Zi(r){r.flags|=4}function kg(r,a,u,d,m){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(Mb())r.flags|=8192;else throw Lr=Hu,Up}else r.flags&=-16777217}function nb(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!yS(a))if(Mb())r.flags|=8192;else throw Lr=Hu,Up}function tf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?lu():536870912,r.lanes|=a,Xo|=a)}function Aa(r,a){if(!Ie)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function ot(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(a)for(var m=r.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=d,r.childLanes=u,a}function rD(r,a,u){var d=a.pendingProps;switch(_p(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(a),null;case 1:return ot(a),null;case 3:return u=a.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Fi(bt),ge(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Lo(a)?Zi(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Bp())),ot(a),null;case 26:var m=a.type,x=a.memoizedState;return r===null?(Zi(a),x!==null?(ot(a),nb(a,x)):(ot(a),kg(a,m,null,d,u))):x?x!==r.memoizedState?(Zi(a),ot(a),nb(a,x)):(ot(a),a.flags&=-16777217):(r=r.memoizedProps,r!==d&&Zi(a),ot(a),kg(a,m,r,d,u)),null;case 27:if(Te(a),u=he.current,m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&Zi(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return ot(a),null}r=ie.current,Lo(a)?Bv(a):(r=cS(m,d,u),a.stateNode=r,Zi(a))}return ot(a),null;case 5:if(Te(a),m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&Zi(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return ot(a),null}if(x=ie.current,Lo(a))Bv(a);else{var w=yf(he.current);switch(x){case 1:x=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:x=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":x=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":x=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":x=w.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?w.createElement("select",{is:d.is}):w.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?w.createElement(m,{is:d.is}):w.createElement(m)}}x[Et]=a,x[Yt]=d;e:for(w=a.child;w!==null;){if(w.tag===5||w.tag===6)x.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===a)break e;for(;w.sibling===null;){if(w.return===null||w.return===a)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}a.stateNode=x;e:switch(Vt(x,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Zi(a)}}return ot(a),kg(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==d&&Zi(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(r=he.current,Lo(a)){if(r=a.stateNode,u=a.memoizedProps,d=null,m=Ht,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}r[Et]=a,r=!!(r.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||Zb(r.nodeValue,u)),r||Ts(a,!0)}else r=yf(r).createTextNode(d),r[Et]=a,a.stateNode=r}return ot(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(d=Lo(a),u!==null){if(r===null){if(!d)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Et]=a}else Tr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ot(a),r=!1}else u=Bp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(On(a),a):(On(a),null);if((a.flags&128)!==0)throw Error(i(558))}return ot(a),null;case 13:if(d=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Lo(a),d!==null&&d.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Et]=a}else Tr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ot(a),m=!1}else m=Bp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(On(a),a):(On(a),null)}return On(a),(a.flags&128)!==0?(a.lanes=u,a):(u=d!==null,r=r!==null&&r.memoizedState!==null,u&&(d=a.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),tf(a,a.updateQueue),ot(a),null);case 4:return ge(),r===null&&Xg(a.stateNode.containerInfo),ot(a),null;case 10:return Fi(a.type),ot(a),null;case 19:if(H(pt),d=a.memoizedState,d===null)return ot(a),null;if(m=(a.flags&128)!==0,x=d.rendering,x===null)if(m)Aa(d,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(x=Uu(r),x!==null){for(a.flags|=128,Aa(d,!1),r=x.updateQueue,a.updateQueue=r,tf(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)Nv(u,r),u=u.sibling;return ee(pt,pt.current&1|2),Ie&&Yi(a,d.treeForkCount),a.child}r=r.sibling}d.tail!==null&&Pt()>lf&&(a.flags|=128,m=!0,Aa(d,!1),a.lanes=4194304)}else{if(!m)if(r=Uu(x),r!==null){if(a.flags|=128,m=!0,r=r.updateQueue,a.updateQueue=r,tf(a,r),Aa(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!Ie)return ot(a),null}else 2*Pt()-d.renderingStartTime>lf&&u!==536870912&&(a.flags|=128,m=!0,Aa(d,!1),a.lanes=4194304);d.isBackwards?(x.sibling=a.child,a.child=x):(r=d.last,r!==null?r.sibling=x:a.child=x,d.last=x)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Pt(),r.sibling=null,u=pt.current,ee(pt,m?u&1|2:u&1),Ie&&Yi(a,d.treeForkCount),r):(ot(a),null);case 22:case 23:return On(a),Fp(),d=a.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(ot(a),a.subtreeFlags&6&&(a.flags|=8192)):ot(a),u=a.updateQueue,u!==null&&tf(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),r!==null&&H(Rr),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Fi(bt),ot(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function oD(r,a){switch(_p(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Fi(bt),ge(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Te(a),null;case 31:if(a.memoizedState!==null){if(On(a),a.alternate===null)throw Error(i(340));Tr()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(On(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Tr()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return H(pt),null;case 4:return ge(),null;case 10:return Fi(a.type),null;case 22:case 23:return On(a),Fp(),r!==null&&H(Rr),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Fi(bt),null;case 25:return null;default:return null}}function ib(r,a){switch(_p(a),a.tag){case 3:Fi(bt),ge();break;case 26:case 27:case 5:Te(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&On(a);break;case 13:On(a);break;case 19:H(pt);break;case 10:Fi(a.type);break;case 22:case 23:On(a),Fp(),r!==null&&H(Rr);break;case 24:Fi(bt)}}function ka(r,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&r)===r){d=void 0;var x=u.create,w=u.inst;d=x(),w.destroy=d}u=u.next}while(u!==m)}}catch(E){Ge(a,a.return,E)}}function zs(r,a,u){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var x=m.next;d=x;do{if((d.tag&r)===r){var w=d.inst,E=w.destroy;if(E!==void 0){w.destroy=void 0,m=a;var I=u,K=E;try{K()}catch(re){Ge(m,I,re)}}}d=d.next}while(d!==x)}}catch(re){Ge(a,a.return,re)}}function sb(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{Fv(a,u)}catch(d){Ge(r,r.return,d)}}}function rb(r,a,u){u.props=Pr(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(d){Ge(r,a,d)}}function Oa(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof u=="function"?r.refCleanup=u(d):u.current=d}}catch(m){Ge(r,a,m)}}function yi(r,a){var u=r.ref,d=r.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){Ge(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Ge(r,a,m)}else u.current=null}function ob(r){var a=r.type,u=r.memoizedProps,d=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){Ge(r,r.return,m)}}function Og(r,a,u){try{var d=r.stateNode;MD(d,r.type,u,a),d[Yt]=a}catch(m){Ge(r,r.return,m)}}function lb(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&$s(r.type)||r.tag===4}function Eg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||lb(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&$s(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Mg(r,a,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=$i));else if(d!==4&&(d===27&&$s(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(Mg(r,a,u),r=r.sibling;r!==null;)Mg(r,a,u),r=r.sibling}function nf(r,a,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(d!==4&&(d===27&&$s(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(nf(r,a,u),r=r.sibling;r!==null;)nf(r,a,u),r=r.sibling}function ab(r){var a=r.stateNode,u=r.memoizedProps;try{for(var d=r.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Vt(a,d,u),a[Et]=r,a[Yt]=u}catch(x){Ge(r,r.return,x)}}var Ji=!1,Ct=!1,Tg=!1,cb=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function lD(r,a){if(r=r.containerInfo,Wg=Af,r=Sv(r),wp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var w=0,E=-1,I=-1,K=0,re=0,le=r,J=null;t:for(;;){for(var se;le!==u||m!==0&&le.nodeType!==3||(E=w+m),le!==x||d!==0&&le.nodeType!==3||(I=w+d),le.nodeType===3&&(w+=le.nodeValue.length),(se=le.firstChild)!==null;)J=le,le=se;for(;;){if(le===r)break t;if(J===u&&++K===m&&(E=w),J===x&&++re===d&&(I=w),(se=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=se}u=E===-1||I===-1?null:{start:E,end:I}}else u=null}u=u||{start:0,end:0}}else u=null;for(Kg={focusedElem:r,selectionRange:u},Af=!1,Lt=a;Lt!==null;)if(a=Lt,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Lt=r;else for(;Lt!==null;){switch(a=Lt,x=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)m=r[u],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,u=a,m=x.memoizedProps,x=x.memoizedState,d=u.stateNode;try{var xe=Pr(u.type,m);r=d.getSnapshotBeforeUpdate(xe,x),d.__reactInternalSnapshotBeforeUpdate=r}catch(ke){Ge(u,u.return,ke)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)em(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":em(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,Lt=r;break}Lt=a.return}}function ub(r,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:ts(r,u),d&4&&ka(5,u);break;case 1:if(ts(r,u),d&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(w){Ge(u,u.return,w)}else{var m=Pr(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(w){Ge(u,u.return,w)}}d&64&&sb(u),d&512&&Oa(u,u.return);break;case 3:if(ts(r,u),d&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Fv(r,a)}catch(w){Ge(u,u.return,w)}}break;case 27:a===null&&d&4&&ab(u);case 26:case 5:ts(r,u),a===null&&d&4&&ob(u),d&512&&Oa(u,u.return);break;case 12:ts(r,u);break;case 31:ts(r,u),d&4&&db(r,u);break;case 13:ts(r,u),d&4&&pb(r,u),d&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=mD.bind(null,u),zD(r,u))));break;case 22:if(d=u.memoizedState!==null||Ji,!d){a=a!==null&&a.memoizedState!==null||Ct,m=Ji;var x=Ct;Ji=d,(Ct=a)&&!x?ns(r,u,(u.subtreeFlags&8772)!==0):ts(r,u),Ji=m,Ct=x}break;case 30:break;default:ts(r,u)}}function fb(r){var a=r.alternate;a!==null&&(r.alternate=null,fb(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Zl(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var lt=null,cn=!1;function es(r,a,u){for(u=u.child;u!==null;)hb(r,a,u),u=u.sibling}function hb(r,a,u){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(xr,u)}catch{}switch(u.tag){case 26:Ct||yi(u,a),es(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ct||yi(u,a);var d=lt,m=cn;$s(u.type)&&(lt=u.stateNode,cn=!1),es(r,a,u),Ba(u.stateNode),lt=d,cn=m;break;case 5:Ct||yi(u,a);case 6:if(d=lt,m=cn,lt=null,es(r,a,u),lt=d,cn=m,lt!==null)if(cn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(u.stateNode)}catch(x){Ge(u,a,x)}else try{lt.removeChild(u.stateNode)}catch(x){Ge(u,a,x)}break;case 18:lt!==null&&(cn?(r=lt,sS(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),tl(r)):sS(lt,u.stateNode));break;case 4:d=lt,m=cn,lt=u.stateNode.containerInfo,cn=!0,es(r,a,u),lt=d,cn=m;break;case 0:case 11:case 14:case 15:zs(2,u,a),Ct||zs(4,u,a),es(r,a,u);break;case 1:Ct||(yi(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&rb(u,a,d)),es(r,a,u);break;case 21:es(r,a,u);break;case 22:Ct=(d=Ct)||u.memoizedState!==null,es(r,a,u),Ct=d;break;default:es(r,a,u)}}function db(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{tl(r)}catch(u){Ge(a,a.return,u)}}}function pb(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{tl(r)}catch(u){Ge(a,a.return,u)}}function aD(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new cb),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new cb),a;default:throw Error(i(435,r.tag))}}function sf(r,a){var u=aD(r);a.forEach(function(d){if(!u.has(d)){u.add(d);var m=yD.bind(null,r,d);d.then(m,m)}})}function un(r,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],x=r,w=a,E=w;e:for(;E!==null;){switch(E.tag){case 27:if($s(E.type)){lt=E.stateNode,cn=!1;break e}break;case 5:lt=E.stateNode,cn=!1;break e;case 3:case 4:lt=E.stateNode.containerInfo,cn=!0;break e}E=E.return}if(lt===null)throw Error(i(160));hb(x,w,m),lt=null,cn=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)gb(a,r),a=a.sibling}var ei=null;function gb(r,a){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:un(a,r),fn(r),d&4&&(zs(3,r,r.return),ka(3,r),zs(5,r,r.return));break;case 1:un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),d&64&&Ji&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=ei;if(un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),d&4){var x=u!==null?u.memoizedState:null;if(d=r.memoizedState,u===null)if(d===null)if(r.stateNode===null){e:{d=r.type,u=r.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":x=m.getElementsByTagName("title")[0],(!x||x[Sr]||x[Et]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(d),m.head.insertBefore(x,m.querySelector("head > title"))),Vt(x,d,u),x[Et]=r,vt(x),d=x;break e;case"link":var w=gS("link","href",m).get(d+(u.href||""));if(w){for(var E=0;E<w.length;E++)if(x=w[E],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){w.splice(E,1);break t}}x=m.createElement(d),Vt(x,d,u),m.head.appendChild(x);break;case"meta":if(w=gS("meta","content",m).get(d+(u.content||""))){for(E=0;E<w.length;E++)if(x=w[E],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){w.splice(E,1);break t}}x=m.createElement(d),Vt(x,d,u),m.head.appendChild(x);break;default:throw Error(i(468,d))}x[Et]=r,vt(x),d=x}r.stateNode=d}else mS(m,r.type,r.stateNode);else r.stateNode=pS(m,d,r.memoizedProps);else x!==d?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,d===null?mS(m,r.type,r.stateNode):pS(m,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Og(r,r.memoizedProps,u.memoizedProps)}break;case 27:un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),u!==null&&d&4&&Og(r,r.memoizedProps,u.memoizedProps);break;case 5:if(un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),r.flags&32){m=r.stateNode;try{Ao(m,"")}catch(xe){Ge(r,r.return,xe)}}d&4&&r.stateNode!=null&&(m=r.memoizedProps,Og(r,m,u!==null?u.memoizedProps:m)),d&1024&&(Tg=!0);break;case 6:if(un(a,r),fn(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,u=r.stateNode;try{u.nodeValue=d}catch(xe){Ge(r,r.return,xe)}}break;case 3:if(bf=null,m=ei,ei=xf(a.containerInfo),un(a,r),ei=m,fn(r),d&4&&u!==null&&u.memoizedState.isDehydrated)try{tl(a.containerInfo)}catch(xe){Ge(r,r.return,xe)}Tg&&(Tg=!1,mb(r));break;case 4:d=ei,ei=xf(r.stateNode.containerInfo),un(a,r),fn(r),ei=d;break;case 12:un(a,r),fn(r);break;case 31:un(a,r),fn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,sf(r,d)));break;case 13:un(a,r),fn(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(of=Pt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,sf(r,d)));break;case 22:m=r.memoizedState!==null;var I=u!==null&&u.memoizedState!==null,K=Ji,re=Ct;if(Ji=K||m,Ct=re||I,un(a,r),Ct=re,Ji=K,fn(r),d&8192)e:for(a=r.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(u===null||I||Ji||Ct||Hr(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){I=u=a;try{if(x=I.stateNode,m)w=x.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=I.stateNode;var le=I.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(xe){Ge(I,I.return,xe)}}}else if(a.tag===6){if(u===null){I=a;try{I.stateNode.nodeValue=m?"":I.memoizedProps}catch(xe){Ge(I,I.return,xe)}}}else if(a.tag===18){if(u===null){I=a;try{var se=I.stateNode;m?rS(se,!0):rS(I.stateNode,!1)}catch(xe){Ge(I,I.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=r.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,sf(r,u))));break;case 19:un(a,r),fn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,sf(r,d)));break;case 30:break;case 21:break;default:un(a,r),fn(r)}}function fn(r){var a=r.flags;if(a&2){try{for(var u,d=r.return;d!==null;){if(lb(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var m=u.stateNode,x=Eg(r);nf(r,x,m);break;case 5:var w=u.stateNode;u.flags&32&&(Ao(w,""),u.flags&=-33);var E=Eg(r);nf(r,E,w);break;case 3:case 4:var I=u.stateNode.containerInfo,K=Eg(r);Mg(r,K,I);break;default:throw Error(i(161))}}catch(re){Ge(r,r.return,re)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function mb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;mb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ts(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ub(r,a.alternate,a),a=a.sibling}function Hr(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:zs(4,a,a.return),Hr(a);break;case 1:yi(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&rb(a,a.return,u),Hr(a);break;case 27:Ba(a.stateNode);case 26:case 5:yi(a,a.return),Hr(a);break;case 22:a.memoizedState===null&&Hr(a);break;case 30:Hr(a);break;default:Hr(a)}r=r.sibling}}function ns(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,m=r,x=a,w=x.flags;switch(x.tag){case 0:case 11:case 15:ns(m,x,u),ka(4,x);break;case 1:if(ns(m,x,u),d=x,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(K){Ge(d,d.return,K)}if(d=x,m=d.updateQueue,m!==null){var E=d.stateNode;try{var I=m.shared.hiddenCallbacks;if(I!==null)for(m.shared.hiddenCallbacks=null,m=0;m<I.length;m++)Xv(I[m],E)}catch(K){Ge(d,d.return,K)}}u&&w&64&&sb(x),Oa(x,x.return);break;case 27:ab(x);case 26:case 5:ns(m,x,u),u&&d===null&&w&4&&ob(x),Oa(x,x.return);break;case 12:ns(m,x,u);break;case 31:ns(m,x,u),u&&w&4&&db(m,x);break;case 13:ns(m,x,u),u&&w&4&&pb(m,x);break;case 22:x.memoizedState===null&&ns(m,x,u),Oa(x,x.return);break;case 30:break;default:ns(m,x,u)}a=a.sibling}}function Ng(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ha(u))}function Dg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&ha(r))}function ti(r,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)yb(r,a,u,d),a=a.sibling}function yb(r,a,u,d){var m=a.flags;switch(a.tag){case 0:case 11:case 15:ti(r,a,u,d),m&2048&&ka(9,a);break;case 1:ti(r,a,u,d);break;case 3:ti(r,a,u,d),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&ha(r)));break;case 12:if(m&2048){ti(r,a,u,d),r=a.stateNode;try{var x=a.memoizedProps,w=x.id,E=x.onPostCommit;typeof E=="function"&&E(w,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(I){Ge(a,a.return,I)}}else ti(r,a,u,d);break;case 31:ti(r,a,u,d);break;case 13:ti(r,a,u,d);break;case 23:break;case 22:x=a.stateNode,w=a.alternate,a.memoizedState!==null?x._visibility&2?ti(r,a,u,d):Ea(r,a):x._visibility&2?ti(r,a,u,d):(x._visibility|=2,qo(r,a,u,d,(a.subtreeFlags&10256)!==0||!1)),m&2048&&Ng(w,a);break;case 24:ti(r,a,u,d),m&2048&&Dg(a.alternate,a);break;default:ti(r,a,u,d)}}function qo(r,a,u,d,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=r,w=a,E=u,I=d,K=w.flags;switch(w.tag){case 0:case 11:case 15:qo(x,w,E,I,m),ka(8,w);break;case 23:break;case 22:var re=w.stateNode;w.memoizedState!==null?re._visibility&2?qo(x,w,E,I,m):Ea(x,w):(re._visibility|=2,qo(x,w,E,I,m)),m&&K&2048&&Ng(w.alternate,w);break;case 24:qo(x,w,E,I,m),m&&K&2048&&Dg(w.alternate,w);break;default:qo(x,w,E,I,m)}a=a.sibling}}function Ea(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,d=a,m=d.flags;switch(d.tag){case 22:Ea(u,d),m&2048&&Ng(d.alternate,d);break;case 24:Ea(u,d),m&2048&&Dg(d.alternate,d);break;default:Ea(u,d)}a=a.sibling}}var Ma=8192;function Qo(r,a,u){if(r.subtreeFlags&Ma)for(r=r.child;r!==null;)xb(r,a,u),r=r.sibling}function xb(r,a,u){switch(r.tag){case 26:Qo(r,a,u),r.flags&Ma&&r.memoizedState!==null&&FD(u,ei,r.memoizedState,r.memoizedProps);break;case 5:Qo(r,a,u);break;case 3:case 4:var d=ei;ei=xf(r.stateNode.containerInfo),Qo(r,a,u),ei=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Ma,Ma=16777216,Qo(r,a,u),Ma=d):Qo(r,a,u));break;default:Qo(r,a,u)}}function vb(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Ta(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Lt=d,Sb(d,r)}vb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)bb(r),r=r.sibling}function bb(r){switch(r.tag){case 0:case 11:case 15:Ta(r),r.flags&2048&&zs(9,r,r.return);break;case 3:Ta(r);break;case 12:Ta(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,rf(r)):Ta(r);break;default:Ta(r)}}function rf(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];Lt=d,Sb(d,r)}vb(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:zs(8,a,a.return),rf(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,rf(a));break;default:rf(a)}r=r.sibling}}function Sb(r,a){for(;Lt!==null;){var u=Lt;switch(u.tag){case 0:case 11:case 15:zs(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ha(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Lt=d;else e:for(u=r;Lt!==null;){d=Lt;var m=d.sibling,x=d.return;if(fb(d),d===u){Lt=null;break e}if(m!==null){m.return=x,Lt=m;break e}Lt=x}}}var cD={getCacheForType:function(r){var a=jt(bt),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return jt(bt).controller.signal}},uD=typeof WeakMap=="function"?WeakMap:Map,Ye=0,tt=null,Le=null,He=0,Fe=0,En=null,Ps=!1,Yo=!1,Rg=!1,is=0,ht=0,Hs=0,jr=0,_g=0,Mn=0,Xo=0,Na=null,hn=null,Lg=!1,of=0,wb=0,lf=1/0,af=null,js=null,Mt=0,Is=null,Fo=null,ss=0,Bg=0,zg=null,Cb=null,Da=0,Pg=null;function Tn(){return(Ye&2)!==0&&He!==0?He&-He:N.T!==null?$g():fu()}function Ab(){if(Mn===0)if((He&536870912)===0||Ie){var r=yo;yo<<=1,(yo&3932160)===0&&(yo=262144),Mn=r}else Mn=536870912;return r=kn.current,r!==null&&(r.flags|=32),Mn}function dn(r,a,u){(r===tt&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)&&(Go(r,0),Vs(r,He,Mn,!1)),br(r,u),((Ye&2)===0||r!==tt)&&(r===tt&&((Ye&2)===0&&(jr|=u),ht===4&&Vs(r,He,Mn,!1)),xi(r))}function kb(r,a,u){if((Ye&6)!==0)throw Error(i(327));var d=!u&&(a&127)===0&&(a&r.expiredLanes)===0||vr(r,a),m=d?dD(r,a):jg(r,a,!0),x=d;do{if(m===0){Yo&&!d&&Vs(r,a,0,!1);break}else{if(u=r.current.alternate,x&&!fD(u)){m=jg(r,a,!1),x=!1;continue}if(m===2){if(x=a,r.errorRecoveryDisabledLanes&x)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){a=w;e:{var E=r;m=Na;var I=E.current.memoizedState.isDehydrated;if(I&&(Go(E,w).flags|=256),w=jg(E,w,!1),w!==2){if(Rg&&!I){E.errorRecoveryDisabledLanes|=x,jr|=x,m=4;break e}x=hn,hn=m,x!==null&&(hn===null?hn=x:hn.push.apply(hn,x))}m=w}if(x=!1,m!==2)continue}}if(m===1){Go(r,0),Vs(r,a,0,!0);break}e:{switch(d=r,x=m,x){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Vs(d,a,Mn,!Ps);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=of+300-Pt(),10<m)){if(Vs(d,a,Mn,!Ps),vo(d,0,!0)!==0)break e;ss=a,d.timeoutHandle=nS(Ob.bind(null,d,u,hn,af,Lg,a,Mn,jr,Xo,Ps,x,"Throttled",-0,0),m);break e}Ob(d,u,hn,af,Lg,a,Mn,jr,Xo,Ps,x,null,-0,0)}}break}while(!0);xi(r)}function Ob(r,a,u,d,m,x,w,E,I,K,re,le,J,se){if(r.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$i},xb(a,x,le);var xe=(x&62914560)===x?of-Pt():(x&4194048)===x?wb-Pt():0;if(xe=GD(le,xe),xe!==null){ss=x,r.cancelPendingCommit=xe(Lb.bind(null,r,a,x,u,d,m,w,E,I,re,le,null,J,se)),Vs(r,x,w,!K);return}}Lb(r,a,x,u,d,m,w,E,I)}function fD(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],x=m.getSnapshot;m=m.value;try{if(!Cn(x(),m))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Vs(r,a,u,d){a&=~_g,a&=~jr,r.suspendedLanes|=a,r.pingedLanes&=~a,d&&(r.warmLanes|=a),d=r.expirationTimes;for(var m=a;0<m;){var x=31-Jt(m),w=1<<x;d[x]=-1,m&=~w}u!==0&&au(r,u,a)}function cf(){return(Ye&6)===0?(Ra(0),!1):!0}function Hg(){if(Le!==null){if(Fe===0)var r=Le.return;else r=Le,Xi=Nr=null,eg(r),jo=null,pa=0,r=Le;for(;r!==null;)ib(r.alternate,r),r=r.return;Le=null}}function Go(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,DD(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),ss=0,Hg(),tt=r,Le=u=Qi(r.current,null),He=a,Fe=0,En=null,Ps=!1,Yo=vr(r,a),Rg=!1,Xo=Mn=_g=jr=Hs=ht=0,hn=Na=null,Lg=!1,(a&8)!==0&&(a|=a&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=a;0<d;){var m=31-Jt(d),x=1<<m;a|=r[m],d&=~x}return is=a,Tu(),u}function Eb(r,a){Ne=null,N.H=wa,a===Ho||a===Pu?(a=$v(),Fe=3):a===Up?(a=$v(),Fe=4):Fe=a===mg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,En=a,Le===null&&(ht=1,Ku(r,Pn(a,r.current)))}function Mb(){var r=kn.current;return r===null?!0:(He&4194048)===He?Vn===null:(He&62914560)===He||(He&536870912)!==0?r===Vn:!1}function Tb(){var r=N.H;return N.H=wa,r===null?wa:r}function Nb(){var r=N.A;return N.A=cD,r}function uf(){ht=4,Ps||(He&4194048)!==He&&kn.current!==null||(Yo=!0),(Hs&134217727)===0&&(jr&134217727)===0||tt===null||Vs(tt,He,Mn,!1)}function jg(r,a,u){var d=Ye;Ye|=2;var m=Tb(),x=Nb();(tt!==r||He!==a)&&(af=null,Go(r,a)),a=!1;var w=ht;e:do try{if(Fe!==0&&Le!==null){var E=Le,I=En;switch(Fe){case 8:Hg(),w=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(a=!0);var K=Fe;if(Fe=0,En=null,Wo(r,E,I,K),u&&Yo){w=0;break e}break;default:K=Fe,Fe=0,En=null,Wo(r,E,I,K)}}hD(),w=ht;break}catch(re){Eb(r,re)}while(!0);return a&&r.shellSuspendCounter++,Xi=Nr=null,Ye=d,N.H=m,N.A=x,Le===null&&(tt=null,He=0,Tu()),w}function hD(){for(;Le!==null;)Db(Le)}function dD(r,a){var u=Ye;Ye|=2;var d=Tb(),m=Nb();tt!==r||He!==a?(af=null,lf=Pt()+500,Go(r,a)):Yo=vr(r,a);e:do try{if(Fe!==0&&Le!==null){a=Le;var x=En;t:switch(Fe){case 1:Fe=0,En=null,Wo(r,a,x,1);break;case 2:case 9:if(Vv(x)){Fe=0,En=null,Rb(a);break}a=function(){Fe!==2&&Fe!==9||tt!==r||(Fe=7),xi(r)},x.then(a,a);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Vv(x)?(Fe=0,En=null,Rb(a)):(Fe=0,En=null,Wo(r,a,x,7));break;case 5:var w=null;switch(Le.tag){case 26:w=Le.memoizedState;case 5:case 27:var E=Le;if(w?yS(w):E.stateNode.complete){Fe=0,En=null;var I=E.sibling;if(I!==null)Le=I;else{var K=E.return;K!==null?(Le=K,ff(K)):Le=null}break t}}Fe=0,En=null,Wo(r,a,x,5);break;case 6:Fe=0,En=null,Wo(r,a,x,6);break;case 8:Hg(),ht=6;break e;default:throw Error(i(462))}}pD();break}catch(re){Eb(r,re)}while(!0);return Xi=Nr=null,N.H=d,N.A=m,Ye=u,Le!==null?0:(tt=null,He=0,Tu(),ht)}function pD(){for(;Le!==null&&!gr();)Db(Le)}function Db(r){var a=tb(r.alternate,r,is);r.memoizedProps=r.pendingProps,a===null?ff(r):Le=a}function Rb(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=G1(u,a,a.pendingProps,a.type,void 0,He);break;case 11:a=G1(u,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:eg(a);default:ib(u,a),a=Le=Nv(a,is),a=tb(u,a,is)}r.memoizedProps=r.pendingProps,a===null?ff(r):Le=a}function Wo(r,a,u,d){Xi=Nr=null,eg(a),jo=null,pa=0;var m=a.return;try{if(nD(r,m,a,u,He)){ht=1,Ku(r,Pn(u,r.current)),Le=null;return}}catch(x){if(m!==null)throw Le=m,x;ht=1,Ku(r,Pn(u,r.current)),Le=null;return}a.flags&32768?(Ie||d===1?r=!0:Yo||(He&536870912)!==0?r=!1:(Ps=r=!0,(d===2||d===9||d===3||d===6)&&(d=kn.current,d!==null&&d.tag===13&&(d.flags|=16384))),_b(a,r)):ff(a)}function ff(r){var a=r;do{if((a.flags&32768)!==0){_b(a,Ps);return}r=a.return;var u=rD(a.alternate,a,is);if(u!==null){Le=u;return}if(a=a.sibling,a!==null){Le=a;return}Le=a=r}while(a!==null);ht===0&&(ht=5)}function _b(r,a){do{var u=oD(r.alternate,r);if(u!==null){u.flags&=32767,Le=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Le=r;return}Le=r=u}while(r!==null);ht=6,Le=null}function Lb(r,a,u,d,m,x,w,E,I){r.cancelPendingCommit=null;do hf();while(Mt!==0);if((Ye&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(x=a.lanes|a.childLanes,x|=Ep,ip(r,u,x,w,E,I),r===tt&&(Le=tt=null,He=0),Fo=a,Is=r,ss=u,Bg=x,zg=m,Cb=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,xD(yr,function(){return jb(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=N.T,N.T=null,m=P.p,P.p=2,w=Ye,Ye|=4;try{lD(r,a,u)}finally{Ye=w,P.p=m,N.T=d}}Mt=1,Bb(),zb(),Pb()}}function Bb(){if(Mt===1){Mt=0;var r=Is,a=Fo,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=N.T,N.T=null;var d=P.p;P.p=2;var m=Ye;Ye|=4;try{gb(a,r);var x=Kg,w=Sv(r.containerInfo),E=x.focusedElem,I=x.selectionRange;if(w!==E&&E&&E.ownerDocument&&bv(E.ownerDocument.documentElement,E)){if(I!==null&&wp(E)){var K=I.start,re=I.end;if(re===void 0&&(re=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(re,E.value.length);else{var le=E.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var se=J.getSelection(),xe=E.textContent.length,ke=Math.min(I.start,xe),Je=I.end===void 0?ke:Math.min(I.end,xe);!se.extend&&ke>Je&&(w=Je,Je=ke,ke=w);var F=vv(E,ke),Y=vv(E,Je);if(F&&Y&&(se.rangeCount!==1||se.anchorNode!==F.node||se.anchorOffset!==F.offset||se.focusNode!==Y.node||se.focusOffset!==Y.offset)){var W=le.createRange();W.setStart(F.node,F.offset),se.removeAllRanges(),ke>Je?(se.addRange(W),se.extend(Y.node,Y.offset)):(W.setEnd(Y.node,Y.offset),se.addRange(W))}}}}for(le=[],se=E;se=se.parentNode;)se.nodeType===1&&le.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<le.length;E++){var oe=le[E];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Af=!!Wg,Kg=Wg=null}finally{Ye=m,P.p=d,N.T=u}}r.current=a,Mt=2}}function zb(){if(Mt===2){Mt=0;var r=Is,a=Fo,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=N.T,N.T=null;var d=P.p;P.p=2;var m=Ye;Ye|=4;try{ub(r,a.alternate,a)}finally{Ye=m,P.p=d,N.T=u}}Mt=3}}function Pb(){if(Mt===4||Mt===3){Mt=0,mr();var r=Is,a=Fo,u=ss,d=Cb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mt=5:(Mt=0,Fo=Is=null,Hb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(js=null),Kl(u),a=a.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(xr,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=N.T,m=P.p,P.p=2,N.T=null;try{for(var x=r.onRecoverableError,w=0;w<d.length;w++){var E=d[w];x(E.value,{componentStack:E.stack})}}finally{N.T=a,P.p=m}}(ss&3)!==0&&hf(),xi(r),m=r.pendingLanes,(u&261930)!==0&&(m&42)!==0?r===Pg?Da++:(Da=0,Pg=r):Da=0,Ra(0)}}function Hb(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,ha(a)))}function hf(){return Bb(),zb(),Pb(),jb()}function jb(){if(Mt!==5)return!1;var r=Is,a=Bg;Bg=0;var u=Kl(ss),d=N.T,m=P.p;try{P.p=32>u?32:u,N.T=null,u=zg,zg=null;var x=Is,w=ss;if(Mt=0,Fo=Is=null,ss=0,(Ye&6)!==0)throw Error(i(331));var E=Ye;if(Ye|=4,bb(x.current),yb(x,x.current,w,u),Ye=E,Ra(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(xr,x)}catch{}return!0}finally{P.p=m,N.T=d,Hb(r,a)}}function Ib(r,a,u){a=Pn(u,a),a=gg(r.stateNode,a,2),r=_s(r,a,2),r!==null&&(br(r,2),xi(r))}function Ge(r,a,u){if(r.tag===3)Ib(r,r,u);else for(;a!==null;){if(a.tag===3){Ib(a,r,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(js===null||!js.has(d))){r=Pn(u,r),u=V1(2),d=_s(a,u,2),d!==null&&(U1(u,d,a,r),br(d,2),xi(d));break}}a=a.return}}function Ig(r,a,u){var d=r.pingCache;if(d===null){d=r.pingCache=new uD;var m=new Set;d.set(a,m)}else m=d.get(a),m===void 0&&(m=new Set,d.set(a,m));m.has(u)||(Rg=!0,m.add(u),r=gD.bind(null,r,a,u),a.then(r,r))}function gD(r,a,u){var d=r.pingCache;d!==null&&d.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,tt===r&&(He&u)===u&&(ht===4||ht===3&&(He&62914560)===He&&300>Pt()-of?(Ye&2)===0&&Go(r,0):_g|=u,Xo===He&&(Xo=0)),xi(r)}function Vb(r,a){a===0&&(a=lu()),r=Er(r,a),r!==null&&(br(r,a),xi(r))}function mD(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),Vb(r,u)}function yD(r,a){var u=0;switch(r.tag){case 31:case 13:var d=r.stateNode,m=r.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),Vb(r,u)}function xD(r,a){return Kn(r,a)}var df=null,Ko=null,Vg=!1,pf=!1,Ug=!1,Us=0;function xi(r){r!==Ko&&r.next===null&&(Ko===null?df=Ko=r:Ko=Ko.next=r),pf=!0,Vg||(Vg=!0,bD())}function Ra(r,a){if(!Ug&&pf){Ug=!0;do for(var u=!1,d=df;d!==null;){if(r!==0){var m=d.pendingLanes;if(m===0)var x=0;else{var w=d.suspendedLanes,E=d.pingedLanes;x=(1<<31-Jt(42|r)+1)-1,x&=m&~(w&~E),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,Qb(d,x))}else x=He,x=vo(d,d===tt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||vr(d,x)||(u=!0,Qb(d,x));d=d.next}while(u);Ug=!1}}function vD(){Ub()}function Ub(){pf=Vg=!1;var r=0;Us!==0&&ND()&&(r=Us);for(var a=Pt(),u=null,d=df;d!==null;){var m=d.next,x=$b(d,a);x===0?(d.next=null,u===null?df=m:u.next=m,m===null&&(Ko=u)):(u=d,(r!==0||(x&3)!==0)&&(pf=!0)),d=m}Mt!==0&&Mt!==5||Ra(r),Us!==0&&(Us=0)}function $b(r,a){for(var u=r.suspendedLanes,d=r.pingedLanes,m=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var w=31-Jt(x),E=1<<w,I=m[w];I===-1?((E&u)===0||(E&d)!==0)&&(m[w]=np(E,a)):I<=a&&(r.expiredLanes|=E),x&=~E}if(a=tt,u=He,u=vo(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,u===0||r===a&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Pi(d),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||vr(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(d!==null&&Pi(d),Kl(u)){case 2:case 8:u=bs;break;case 32:u=yr;break;case 268435456:u=go;break;default:u=yr}return d=qb.bind(null,r),u=Kn(u,d),r.callbackPriority=a,r.callbackNode=u,a}return d!==null&&d!==null&&Pi(d),r.callbackPriority=2,r.callbackNode=null,2}function qb(r,a){if(Mt!==0&&Mt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(hf()&&r.callbackNode!==u)return null;var d=He;return d=vo(r,r===tt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(kb(r,d,a),$b(r,Pt()),r.callbackNode!=null&&r.callbackNode===u?qb.bind(null,r):null)}function Qb(r,a){if(hf())return null;kb(r,a,!0)}function bD(){RD(function(){(Ye&6)!==0?Kn(Hi,vD):Ub()})}function $g(){if(Us===0){var r=zo;r===0&&(r=mo,mo<<=1,(mo&261888)===0&&(mo=256)),Us=r}return Us}function Yb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Su(""+r)}function Xb(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function SD(r,a,u,d,m){if(a==="submit"&&u&&u.stateNode===m){var x=Yb((m[Yt]||null).action),w=d.submitter;w&&(a=(a=w[Yt]||null)?Yb(a.formAction):w.getAttribute("formAction"),a!==null&&(x=a,w=null));var E=new ku("action","action",null,d,m);r.push({event:E,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Us!==0){var I=w?Xb(m,w):new FormData(m);cg(u,{pending:!0,data:I,method:m.method,action:x},null,I)}}else typeof x=="function"&&(E.preventDefault(),I=w?Xb(m,w):new FormData(m),cg(u,{pending:!0,data:I,method:m.method,action:x},x,I))},currentTarget:m}]})}}for(var qg=0;qg<Op.length;qg++){var Qg=Op[qg],wD=Qg.toLowerCase(),CD=Qg[0].toUpperCase()+Qg.slice(1);Jn(wD,"on"+CD)}Jn(Av,"onAnimationEnd"),Jn(kv,"onAnimationIteration"),Jn(Ov,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(jN,"onTransitionRun"),Jn(IN,"onTransitionStart"),Jn(VN,"onTransitionCancel"),Jn(Ev,"onTransitionEnd"),ks("onMouseEnter",["mouseout","mouseover"]),ks("onMouseLeave",["mouseout","mouseover"]),ks("onPointerEnter",["pointerout","pointerover"]),ks("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_a));function Fb(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var d=r[u],m=d.event;d=d.listeners;e:{var x=void 0;if(a)for(var w=d.length-1;0<=w;w--){var E=d[w],I=E.instance,K=E.currentTarget;if(E=E.listener,I!==x&&m.isPropagationStopped())break e;x=E,m.currentTarget=K;try{x(m)}catch(re){Mu(re)}m.currentTarget=null,x=I}else for(w=0;w<d.length;w++){if(E=d[w],I=E.instance,K=E.currentTarget,E=E.listener,I!==x&&m.isPropagationStopped())break e;x=E,m.currentTarget=K;try{x(m)}catch(re){Mu(re)}m.currentTarget=null,x=I}}}}function Be(r,a){var u=a[bo];u===void 0&&(u=a[bo]=new Set);var d=r+"__bubble";u.has(d)||(Gb(a,r,2,!1),u.add(d))}function Yg(r,a,u){var d=0;a&&(d|=4),Gb(u,r,d,a)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Xg(r){if(!r[gf]){r[gf]=!0,gu.forEach(function(u){u!=="selectionchange"&&(AD.has(u)||Yg(u,!1,r),Yg(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[gf]||(a[gf]=!0,Yg("selectionchange",!1,a))}}function Gb(r,a,u,d){switch(AS(a)){case 2:var m=ZD;break;case 8:m=JD;break;default:m=am}u=m.bind(null,a,u,r),m=void 0,!dp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),d?m!==void 0?r.addEventListener(a,u,{capture:!0,passive:m}):r.addEventListener(a,u,!0):m!==void 0?r.addEventListener(a,u,{passive:m}):r.addEventListener(a,u,!1)}function Fg(r,a,u,d,m){var x=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var E=d.stateNode.containerInfo;if(E===m)break;if(w===4)for(w=d.return;w!==null;){var I=w.tag;if((I===3||I===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;E!==null;){if(w=Ss(E),w===null)return;if(I=w.tag,I===5||I===6||I===26||I===27){d=x=w;continue e}E=E.parentNode}}d=d.return}ev(function(){var K=x,re=fp(u),le=[];e:{var J=Mv.get(r);if(J!==void 0){var se=ku,xe=r;switch(r){case"keypress":if(Cu(u)===0)break e;case"keydown":case"keyup":se=yN;break;case"focusin":xe="focus",se=yp;break;case"focusout":xe="blur",se=yp;break;case"beforeblur":case"afterblur":se=yp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=iv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=rN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=bN;break;case Av:case kv:case Ov:se=aN;break;case Ev:se=wN;break;case"scroll":case"scrollend":se=iN;break;case"wheel":se=AN;break;case"copy":case"cut":case"paste":se=uN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=rv;break;case"toggle":case"beforetoggle":se=ON}var ke=(a&4)!==0,Je=!ke&&(r==="scroll"||r==="scrollend"),F=ke?J!==null?J+"Capture":null:J;ke=[];for(var Y=K,W;Y!==null;){var oe=Y;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||F===null||(oe=ta(Y,F),oe!=null&&ke.push(La(Y,oe,W))),Je)break;Y=Y.return}0<ke.length&&(J=new se(J,xe,null,u,re),le.push({event:J,listeners:ke}))}}if((a&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",J&&u!==up&&(xe=u.relatedTarget||u.fromElement)&&(Ss(xe)||xe[Ii]))break e;if((se||J)&&(J=re.window===re?re:(J=re.ownerDocument)?J.defaultView||J.parentWindow:window,se?(xe=u.relatedTarget||u.toElement,se=K,xe=xe?Ss(xe):null,xe!==null&&(Je=o(xe),ke=xe.tag,xe!==Je||ke!==5&&ke!==27&&ke!==6)&&(xe=null)):(se=null,xe=K),se!==xe)){if(ke=iv,oe="onMouseLeave",F="onMouseEnter",Y="mouse",(r==="pointerout"||r==="pointerover")&&(ke=rv,oe="onPointerLeave",F="onPointerEnter",Y="pointer"),Je=se==null?J:Cs(se),W=xe==null?J:Cs(xe),J=new ke(oe,Y+"leave",se,u,re),J.target=Je,J.relatedTarget=W,oe=null,Ss(re)===K&&(ke=new ke(F,Y+"enter",xe,u,re),ke.target=W,ke.relatedTarget=Je,oe=ke),Je=oe,se&&xe)t:{for(ke=kD,F=se,Y=xe,W=0,oe=F;oe;oe=ke(oe))W++;oe=0;for(var Ce=Y;Ce;Ce=ke(Ce))oe++;for(;0<W-oe;)F=ke(F),W--;for(;0<oe-W;)Y=ke(Y),oe--;for(;W--;){if(F===Y||Y!==null&&F===Y.alternate){ke=F;break t}F=ke(F),Y=ke(Y)}ke=null}else ke=null;se!==null&&Wb(le,J,se,ke,!1),xe!==null&&Je!==null&&Wb(le,Je,xe,ke,!0)}}e:{if(J=K?Cs(K):window,se=J.nodeName&&J.nodeName.toLowerCase(),se==="select"||se==="input"&&J.type==="file")var $e=dv;else if(fv(J))if(pv)$e=zN;else{$e=LN;var ve=_N}else se=J.nodeName,!se||se.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&cp(K.elementType)&&($e=dv):$e=BN;if($e&&($e=$e(r,K))){hv(le,$e,u,re);break e}ve&&ve(r,J,K),r==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&ea(J,"number",J.value)}switch(ve=K?Cs(K):window,r){case"focusin":(fv(ve)||ve.contentEditable==="true")&&(Mo=ve,Cp=K,ca=null);break;case"focusout":ca=Cp=Mo=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,wv(le,u,re);break;case"selectionchange":if(HN)break;case"keydown":case"keyup":wv(le,u,re)}var Re;if(vp)e:{switch(r){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Eo?cv(r,u)&&(je="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(ov&&u.locale!=="ko"&&(Eo||je!=="onCompositionStart"?je==="onCompositionEnd"&&Eo&&(Re=tv()):(Os=re,pp="value"in Os?Os.value:Os.textContent,Eo=!0)),ve=mf(K,je),0<ve.length&&(je=new sv(je,r,null,u,re),le.push({event:je,listeners:ve}),Re?je.data=Re:(Re=uv(u),Re!==null&&(je.data=Re)))),(Re=MN?TN(r,u):NN(r,u))&&(je=mf(K,"onBeforeInput"),0<je.length&&(ve=new sv("onBeforeInput","beforeinput",null,u,re),le.push({event:ve,listeners:je}),ve.data=Re)),SD(le,r,K,u,re)}Fb(le,a)})}function La(r,a,u){return{instance:r,listener:a,currentTarget:u}}function mf(r,a){for(var u=a+"Capture",d=[];r!==null;){var m=r,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=ta(r,u),m!=null&&d.unshift(La(r,m,x)),m=ta(r,a),m!=null&&d.push(La(r,m,x))),r.tag===3)return d;r=r.return}return[]}function kD(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Wb(r,a,u,d,m){for(var x=a._reactName,w=[];u!==null&&u!==d;){var E=u,I=E.alternate,K=E.stateNode;if(E=E.tag,I!==null&&I===d)break;E!==5&&E!==26&&E!==27||K===null||(I=K,m?(K=ta(u,x),K!=null&&w.unshift(La(u,K,I))):m||(K=ta(u,x),K!=null&&w.push(La(u,K,I)))),u=u.return}w.length!==0&&r.push({event:a,listeners:w})}var OD=/\r\n?/g,ED=/\u0000|\uFFFD/g;function Kb(r){return(typeof r=="string"?r:""+r).replace(OD,`
`).replace(ED,"")}function Zb(r,a){return a=Kb(a),Kb(r)===a}function Ze(r,a,u,d,m,x){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Ao(r,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Ao(r,""+d);break;case"className":wo(r,"class",d);break;case"tabIndex":wo(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":wo(r,u,d);break;case"style":Zx(r,d,x);break;case"data":if(a!=="object"){wo(r,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=Su(""+d),r.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(a!=="input"&&Ze(r,a,"name",m.name,m,null),Ze(r,a,"formEncType",m.formEncType,m,null),Ze(r,a,"formMethod",m.formMethod,m,null),Ze(r,a,"formTarget",m.formTarget,m,null)):(Ze(r,a,"encType",m.encType,m,null),Ze(r,a,"method",m.method,m,null),Ze(r,a,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=Su(""+d),r.setAttribute(u,d);break;case"onClick":d!=null&&(r.onclick=$i);break;case"onScroll":d!=null&&Be("scroll",r);break;case"onScrollEnd":d!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}u=Su(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""+d):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":d===!0?r.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,d):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(u,d):r.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(u):r.setAttribute(u,d);break;case"popover":Be("beforetoggle",r),Be("toggle",r),So(r,"popover",d);break;case"xlinkActuate":Zn(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zn(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zn(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zn(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zn(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zn(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zn(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":So(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=tN.get(u)||u,So(r,u,d))}}function Gg(r,a,u,d,m,x){switch(u){case"style":Zx(r,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof d=="string"?Ao(r,d):(typeof d=="number"||typeof d=="bigint")&&Ao(r,""+d);break;case"onScroll":d!=null&&Be("scroll",r);break;case"onScrollEnd":d!=null&&Be("scrollend",r);break;case"onClick":d!=null&&(r.onclick=$i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mu.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),a=u.slice(2,m?u.length-7:void 0),x=r[Yt]||null,x=x!=null?x[u]:null,typeof x=="function"&&r.removeEventListener(a,x,m),typeof d=="function")){typeof x!="function"&&x!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,d,m);break e}u in r?r[u]=d:d===!0?r.setAttribute(u,""):So(r,u,d)}}}function Vt(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var d=!1,m=!1,x;for(x in u)if(u.hasOwnProperty(x)){var w=u[x];if(w!=null)switch(x){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ze(r,a,x,w,u,null)}}m&&Ze(r,a,"srcSet",u.srcSet,u,null),d&&Ze(r,a,"src",u.src,u,null);return;case"input":Be("invalid",r);var E=x=w=m=null,I=null,K=null;for(d in u)if(u.hasOwnProperty(d)){var re=u[d];if(re!=null)switch(d){case"name":m=re;break;case"type":w=re;break;case"checked":I=re;break;case"defaultChecked":K=re;break;case"value":x=re;break;case"defaultValue":E=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:Ze(r,a,d,re,u,null)}}bu(r,x,E,I,K,w,m,!1);return;case"select":Be("invalid",r),d=w=x=null;for(m in u)if(u.hasOwnProperty(m)&&(E=u[m],E!=null))switch(m){case"value":x=E;break;case"defaultValue":w=E;break;case"multiple":d=E;default:Ze(r,a,m,E,u,null)}a=x,u=w,r.multiple=!!d,a!=null?Ui(r,!!d,a,!1):u!=null&&Ui(r,!!d,u,!0);return;case"textarea":Be("invalid",r),x=m=d=null;for(w in u)if(u.hasOwnProperty(w)&&(E=u[w],E!=null))switch(w){case"value":d=E;break;case"defaultValue":m=E;break;case"children":x=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Ze(r,a,w,E,u,null)}Wx(r,d,m,x);return;case"option":for(I in u)u.hasOwnProperty(I)&&(d=u[I],d!=null)&&(I==="selected"?r.selected=d&&typeof d!="function"&&typeof d!="symbol":Ze(r,a,I,d,u,null));return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(d=0;d<_a.length;d++)Be(_a[d],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in u)if(u.hasOwnProperty(K)&&(d=u[K],d!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ze(r,a,K,d,u,null)}return;default:if(cp(a)){for(re in u)u.hasOwnProperty(re)&&(d=u[re],d!==void 0&&Gg(r,a,re,d,u,void 0));return}}for(E in u)u.hasOwnProperty(E)&&(d=u[E],d!=null&&Ze(r,a,E,d,u,null))}function MD(r,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,w=null,E=null,I=null,K=null,re=null;for(se in u){var le=u[se];if(u.hasOwnProperty(se)&&le!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":I=le;default:d.hasOwnProperty(se)||Ze(r,a,se,null,d,le)}}for(var J in d){var se=d[J];if(le=u[J],d.hasOwnProperty(J)&&(se!=null||le!=null))switch(J){case"type":x=se;break;case"name":m=se;break;case"checked":K=se;break;case"defaultChecked":re=se;break;case"value":w=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:se!==le&&Ze(r,a,J,se,d,le)}}Cr(r,w,E,I,K,re,x,m);return;case"select":se=w=E=J=null;for(x in u)if(I=u[x],u.hasOwnProperty(x)&&I!=null)switch(x){case"value":break;case"multiple":se=I;default:d.hasOwnProperty(x)||Ze(r,a,x,null,d,I)}for(m in d)if(x=d[m],I=u[m],d.hasOwnProperty(m)&&(x!=null||I!=null))switch(m){case"value":J=x;break;case"defaultValue":E=x;break;case"multiple":w=x;default:x!==I&&Ze(r,a,m,x,d,I)}a=E,u=w,d=se,J!=null?Ui(r,!!u,J,!1):!!d!=!!u&&(a!=null?Ui(r,!!u,a,!0):Ui(r,!!u,u?[]:"",!1));return;case"textarea":se=J=null;for(E in u)if(m=u[E],u.hasOwnProperty(E)&&m!=null&&!d.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ze(r,a,E,null,d,m)}for(w in d)if(m=d[w],x=u[w],d.hasOwnProperty(w)&&(m!=null||x!=null))switch(w){case"value":J=m;break;case"defaultValue":se=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==x&&Ze(r,a,w,m,d,x)}Gx(r,J,se);return;case"option":for(var xe in u)J=u[xe],u.hasOwnProperty(xe)&&J!=null&&!d.hasOwnProperty(xe)&&(xe==="selected"?r.selected=!1:Ze(r,a,xe,null,d,J));for(I in d)J=d[I],se=u[I],d.hasOwnProperty(I)&&J!==se&&(J!=null||se!=null)&&(I==="selected"?r.selected=J&&typeof J!="function"&&typeof J!="symbol":Ze(r,a,I,J,d,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in u)J=u[ke],u.hasOwnProperty(ke)&&J!=null&&!d.hasOwnProperty(ke)&&Ze(r,a,ke,null,d,J);for(K in d)if(J=d[K],se=u[K],d.hasOwnProperty(K)&&J!==se&&(J!=null||se!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:Ze(r,a,K,J,d,se)}return;default:if(cp(a)){for(var Je in u)J=u[Je],u.hasOwnProperty(Je)&&J!==void 0&&!d.hasOwnProperty(Je)&&Gg(r,a,Je,void 0,d,J);for(re in d)J=d[re],se=u[re],!d.hasOwnProperty(re)||J===se||J===void 0&&se===void 0||Gg(r,a,re,J,d,se);return}}for(var F in u)J=u[F],u.hasOwnProperty(F)&&J!=null&&!d.hasOwnProperty(F)&&Ze(r,a,F,null,d,J);for(le in d)J=d[le],se=u[le],!d.hasOwnProperty(le)||J===se||J==null&&se==null||Ze(r,a,le,J,d,se)}function Jb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function TD(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var m=u[d],x=m.transferSize,w=m.initiatorType,E=m.duration;if(x&&E&&Jb(w)){for(w=0,E=m.responseEnd,d+=1;d<u.length;d++){var I=u[d],K=I.startTime;if(K>E)break;var re=I.transferSize,le=I.initiatorType;re&&Jb(le)&&(I=I.responseEnd,w+=re*(I<E?1:(E-K)/(I-K)))}if(--d,a+=8*(x+w)/(m.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Wg=null,Kg=null;function yf(r){return r.nodeType===9?r:r.ownerDocument}function eS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tS(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Zg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Jg=null;function ND(){var r=window.event;return r&&r.type==="popstate"?r===Jg?!1:(Jg=r,!0):(Jg=null,!1)}var nS=typeof setTimeout=="function"?setTimeout:void 0,DD=typeof clearTimeout=="function"?clearTimeout:void 0,iS=typeof Promise=="function"?Promise:void 0,RD=typeof queueMicrotask=="function"?queueMicrotask:typeof iS<"u"?function(r){return iS.resolve(null).then(r).catch(_D)}:nS;function _D(r){setTimeout(function(){throw r})}function $s(r){return r==="head"}function sS(r,a){var u=a,d=0;do{var m=u.nextSibling;if(r.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"||u==="/&"){if(d===0){r.removeChild(m),tl(a);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Ba(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Ba(u);for(var x=u.firstChild;x;){var w=x.nextSibling,E=x.nodeName;x[Sr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=w}}else u==="body"&&Ba(r.ownerDocument.body);u=m}while(u);tl(a)}function rS(r,a){var u=r;r=0;do{var d=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=d}while(u)}function em(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":em(u),Zl(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function LD(r,a,u,d){for(;r.nodeType===1;){var m=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Sr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=Un(r.nextSibling),r===null)break}return null}function BD(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Un(r.nextSibling),r===null))return null;return r}function oS(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=Un(r.nextSibling),r===null))return null;return r}function tm(r){return r.data==="$?"||r.data==="$~"}function nm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function zD(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function Un(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var im=null;function lS(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return Un(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function aS(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function cS(r,a,u){switch(a=yf(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ba(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Zl(r)}var $n=new Map,uS=new Set;function xf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var rs=P.d;P.d={f:PD,r:HD,D:jD,C:ID,L:VD,m:UD,X:qD,S:$D,M:QD};function PD(){var r=rs.f(),a=cf();return r||a}function HD(r){var a=ws(r);a!==null&&a.tag===5&&a.type==="form"?E1(a):rs.r(r)}var Zo=typeof document>"u"?null:document;function fS(r,a,u){var d=Zo;if(d&&typeof a=="string"&&a){var m=ln(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),uS.has(m)||(uS.add(m),r={rel:r,crossOrigin:u,href:a},d.querySelector(m)===null&&(a=d.createElement("link"),Vt(a,"link",r),vt(a),d.head.appendChild(a)))}}function jD(r){rs.D(r),fS("dns-prefetch",r,null)}function ID(r,a){rs.C(r,a),fS("preconnect",r,a)}function VD(r,a,u){rs.L(r,a,u);var d=Zo;if(d&&r&&a){var m='link[rel="preload"][as="'+ln(a)+'"]';a==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+ln(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+ln(u.imageSizes)+'"]')):m+='[href="'+ln(r)+'"]';var x=m;switch(a){case"style":x=Jo(r);break;case"script":x=el(r)}$n.has(x)||(r=g({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),$n.set(x,r),d.querySelector(m)!==null||a==="style"&&d.querySelector(za(x))||a==="script"&&d.querySelector(Pa(x))||(a=d.createElement("link"),Vt(a,"link",r),vt(a),d.head.appendChild(a)))}}function UD(r,a){rs.m(r,a);var u=Zo;if(u&&r){var d=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ln(d)+'"][href="'+ln(r)+'"]',x=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=el(r)}if(!$n.has(x)&&(r=g({rel:"modulepreload",href:r},a),$n.set(x,r),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Pa(x)))return}d=u.createElement("link"),Vt(d,"link",r),vt(d),u.head.appendChild(d)}}}function $D(r,a,u){rs.S(r,a,u);var d=Zo;if(d&&r){var m=As(d).hoistableStyles,x=Jo(r);a=a||"default";var w=m.get(x);if(!w){var E={loading:0,preload:null};if(w=d.querySelector(za(x)))E.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":a},u),(u=$n.get(x))&&sm(r,u);var I=w=d.createElement("link");vt(I),Vt(I,"link",r),I._p=new Promise(function(K,re){I.onload=K,I.onerror=re}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,vf(w,a,d)}w={type:"stylesheet",instance:w,count:1,state:E},m.set(x,w)}}}function qD(r,a){rs.X(r,a);var u=Zo;if(u&&r){var d=As(u).hoistableScripts,m=el(r),x=d.get(m);x||(x=u.querySelector(Pa(m)),x||(r=g({src:r,async:!0},a),(a=$n.get(m))&&rm(r,a),x=u.createElement("script"),vt(x),Vt(x,"link",r),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function QD(r,a){rs.M(r,a);var u=Zo;if(u&&r){var d=As(u).hoistableScripts,m=el(r),x=d.get(m);x||(x=u.querySelector(Pa(m)),x||(r=g({src:r,async:!0,type:"module"},a),(a=$n.get(m))&&rm(r,a),x=u.createElement("script"),vt(x),Vt(x,"link",r),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function hS(r,a,u,d){var m=(m=he.current)?xf(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Jo(u.href),u=As(m).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Jo(u.href);var x=As(m).hoistableStyles,w=x.get(r);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,w),(x=m.querySelector(za(r)))&&!x._p&&(w.instance=x,w.state.loading=5),$n.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},$n.set(r,u),x||YD(m,r,u,w.state))),a&&d===null)throw Error(i(528,""));return w}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=el(u),u=As(m).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Jo(r){return'href="'+ln(r)+'"'}function za(r){return'link[rel="stylesheet"]['+r+"]"}function dS(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function YD(r,a,u,d){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=r.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Vt(a,"link",u),vt(a),r.head.appendChild(a))}function el(r){return'[src="'+ln(r)+'"]'}function Pa(r){return"script[async]"+r}function pS(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=r.querySelector('style[data-href~="'+ln(u.href)+'"]');if(d)return a.instance=d,vt(d),d;var m=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),vt(d),Vt(d,"style",m),vf(d,u.precedence,r),a.instance=d;case"stylesheet":m=Jo(u.href);var x=r.querySelector(za(m));if(x)return a.state.loading|=4,a.instance=x,vt(x),x;d=dS(u),(m=$n.get(m))&&sm(d,m),x=(r.ownerDocument||r).createElement("link"),vt(x);var w=x;return w._p=new Promise(function(E,I){w.onload=E,w.onerror=I}),Vt(x,"link",d),a.state.loading|=4,vf(x,u.precedence,r),a.instance=x;case"script":return x=el(u.src),(m=r.querySelector(Pa(x)))?(a.instance=m,vt(m),m):(d=u,(m=$n.get(x))&&(d=g({},u),rm(d,m)),r=r.ownerDocument||r,m=r.createElement("script"),vt(m),Vt(m,"link",d),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,vf(d,u.precedence,r));return a.instance}function vf(r,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,x=m,w=0;w<d.length;w++){var E=d[w];if(E.dataset.precedence===a)x=E;else if(x!==m)break}x?x.parentNode.insertBefore(r,x.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function sm(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function rm(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var bf=null;function gS(r,a,u){if(bf===null){var d=new Map,m=bf=new Map;m.set(u,d)}else m=bf,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(r))return d;for(d.set(r,null),u=u.getElementsByTagName(r),m=0;m<u.length;m++){var x=u[m];if(!(x[Sr]||x[Et]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var w=x.getAttribute(a)||"";w=r+w;var E=d.get(w);E?E.push(x):d.set(w,[x])}}return d}function mS(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function XD(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(r=a.disabled,typeof a.precedence=="string"&&r==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function yS(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function FD(r,a,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var m=Jo(d.href),x=a.querySelector(za(m));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=Sf.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=x,vt(x);return}x=a.ownerDocument||a,d=dS(d),(m=$n.get(m))&&sm(d,m),x=x.createElement("link"),vt(x);var w=x;w._p=new Promise(function(E,I){w.onload=E,w.onerror=I}),Vt(x,"link",d),u.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=Sf.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var om=0;function GD(r,a){return r.stylesheets&&r.count===0&&Cf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var d=setTimeout(function(){if(r.stylesheets&&Cf(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+a);0<r.imgBytes&&om===0&&(om=62500*TD());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Cf(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>om?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function Sf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var wf=null;function Cf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,wf=new Map,a.forEach(WD,r),wf=null,Sf.call(r))}function WD(r,a){if(!(a.state.loading&4)){var u=wf.get(r);if(u)var d=u.get(null);else{u=new Map,wf.set(r,u);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var w=m[x];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(u.set(w.dataset.precedence,w),d=w)}d&&u.set(null,d)}m=a.instance,w=m.getAttribute("data-precedence"),x=u.get(w)||d,x===d&&u.set(null,m),u.set(w,m),this.count++,d=Sf.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),x?x.parentNode.insertBefore(m,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var Ha={$$typeof:O,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function KD(r,a,u,d,m,x,w,E,I){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.hiddenUpdates=Gl(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function xS(r,a,u,d,m,x,w,E,I,K,re,le){return r=new KD(r,a,u,w,I,K,re,le,E),a=1,x===!0&&(a|=24),x=An(3,null,null,a),r.current=x,x.stateNode=r,a=jp(),a.refCount++,r.pooledCache=a,a.refCount++,x.memoizedState={element:d,isDehydrated:u,cache:a},$p(x),r}function vS(r){return r?(r=Do,r):Do}function bS(r,a,u,d,m,x){m=vS(m),d.context===null?d.context=m:d.pendingContext=m,d=Rs(a),d.payload={element:u},x=x===void 0?null:x,x!==null&&(d.callback=x),u=_s(r,d,a),u!==null&&(dn(u,r,a),ma(u,r,a))}function SS(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function lm(r,a){SS(r,a),(r=r.alternate)&&SS(r,a)}function wS(r){if(r.tag===13||r.tag===31){var a=Er(r,67108864);a!==null&&dn(a,r,67108864),lm(r,67108864)}}function CS(r){if(r.tag===13||r.tag===31){var a=Tn();a=Wl(a);var u=Er(r,a);u!==null&&dn(u,r,a),lm(r,a)}}var Af=!0;function ZD(r,a,u,d){var m=N.T;N.T=null;var x=P.p;try{P.p=2,am(r,a,u,d)}finally{P.p=x,N.T=m}}function JD(r,a,u,d){var m=N.T;N.T=null;var x=P.p;try{P.p=8,am(r,a,u,d)}finally{P.p=x,N.T=m}}function am(r,a,u,d){if(Af){var m=cm(d);if(m===null)Fg(r,a,d,kf,u),kS(r,d);else if(t3(m,r,a,u,d))d.stopPropagation();else if(kS(r,d),a&4&&-1<e3.indexOf(r)){for(;m!==null;){var x=ws(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var w=ji(x.pendingLanes);if(w!==0){var E=x;for(E.pendingLanes|=2,E.entangledLanes|=2;w;){var I=1<<31-Jt(w);E.entanglements[1]|=I,w&=~I}xi(x),(Ye&6)===0&&(lf=Pt()+500,Ra(0))}}break;case 31:case 13:E=Er(x,2),E!==null&&dn(E,x,2),cf(),lm(x,2)}if(x=cm(d),x===null&&Fg(r,a,d,kf,u),x===m)break;m=x}m!==null&&d.stopPropagation()}else Fg(r,a,d,null,u)}}function cm(r){return r=fp(r),um(r)}var kf=null;function um(r){if(kf=null,r=Ss(r),r!==null){var a=o(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=l(a),r!==null)return r;r=null}else if(u===31){if(r=c(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return kf=r,null}function AS(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(po()){case Hi:return 2;case bs:return 8;case yr:case Wd:return 32;case go:return 268435456;default:return 32}default:return 32}}var fm=!1,qs=null,Qs=null,Ys=null,ja=new Map,Ia=new Map,Xs=[],e3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kS(r,a){switch(r){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":ja.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(a.pointerId)}}function Va(r,a,u,d,m,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:x,targetContainers:[m]},a!==null&&(a=ws(a),a!==null&&wS(a)),r):(r.eventSystemFlags|=d,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function t3(r,a,u,d,m){switch(a){case"focusin":return qs=Va(qs,r,a,u,d,m),!0;case"dragenter":return Qs=Va(Qs,r,a,u,d,m),!0;case"mouseover":return Ys=Va(Ys,r,a,u,d,m),!0;case"pointerover":var x=m.pointerId;return ja.set(x,Va(ja.get(x)||null,r,a,u,d,m)),!0;case"gotpointercapture":return x=m.pointerId,Ia.set(x,Va(Ia.get(x)||null,r,a,u,d,m)),!0}return!1}function OS(r){var a=Ss(r.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){r.blockedOn=a,hu(r.priority,function(){CS(u)});return}}else if(a===31){if(a=c(u),a!==null){r.blockedOn=a,hu(r.priority,function(){CS(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Of(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=cm(r.nativeEvent);if(u===null){u=r.nativeEvent;var d=new u.constructor(u.type,u);up=d,u.target.dispatchEvent(d),up=null}else return a=ws(u),a!==null&&wS(a),r.blockedOn=u,!1;a.shift()}return!0}function ES(r,a,u){Of(r)&&u.delete(a)}function n3(){fm=!1,qs!==null&&Of(qs)&&(qs=null),Qs!==null&&Of(Qs)&&(Qs=null),Ys!==null&&Of(Ys)&&(Ys=null),ja.forEach(ES),Ia.forEach(ES)}function Ef(r,a){r.blockedOn===a&&(r.blockedOn=null,fm||(fm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,n3)))}var Mf=null;function MS(r){Mf!==r&&(Mf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mf===r&&(Mf=null);for(var a=0;a<r.length;a+=3){var u=r[a],d=r[a+1],m=r[a+2];if(typeof d!="function"){if(um(d||u)===null)continue;break}var x=ws(u);x!==null&&(r.splice(a,3),a-=3,cg(x,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function tl(r){function a(I){return Ef(I,r)}qs!==null&&Ef(qs,r),Qs!==null&&Ef(Qs,r),Ys!==null&&Ef(Ys,r),ja.forEach(a),Ia.forEach(a);for(var u=0;u<Xs.length;u++){var d=Xs[u];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Xs.length&&(u=Xs[0],u.blockedOn===null);)OS(u),u.blockedOn===null&&Xs.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],x=u[d+1],w=m[Yt]||null;if(typeof x=="function")w||MS(u);else if(w){var E=null;if(x&&x.hasAttribute("formAction")){if(m=x,w=x[Yt]||null)E=w.formAction;else if(um(m)!==null)continue}else E=w.action;typeof E=="function"?u[d+1]=E:(u.splice(d,3),d-=3),MS(u)}}}function TS(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function hm(r){this._internalRoot=r}Tf.prototype.render=hm.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=Tn();bS(u,d,r,a,null,null)},Tf.prototype.unmount=hm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;bS(r.current,2,null,r,null,null),cf(),a[Ii]=null}};function Tf(r){this._internalRoot=r}Tf.prototype.unstable_scheduleHydration=function(r){if(r){var a=fu();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Xs.length&&a!==0&&a<Xs[u].priority;u++);Xs.splice(u,0,r),u===0&&OS(r)}};var NS=e.version;if(NS!=="19.2.4")throw Error(i(527,NS,"19.2.4"));P.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(a),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var i3={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{xr=Nf.inject(i3),Zt=Nf}catch{}}return $a.createRoot=function(r,a){if(!s(r))throw Error(i(299));var u=!1,d="",m=P1,x=H1,w=j1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=xS(r,1,!1,null,null,u,d,null,m,x,w,TS),r[Ii]=a.current,Xg(r),new hm(a)},$a.hydrateRoot=function(r,a,u){if(!s(r))throw Error(i(299));var d=!1,m="",x=P1,w=H1,E=j1,I=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(E=u.onRecoverableError),u.formState!==void 0&&(I=u.formState)),a=xS(r,1,!0,a,u??null,d,m,I,x,w,E,TS),a.context=vS(null),u=a.current,d=Tn(),d=Wl(d),m=Rs(d),m.callback=null,_s(u,m,d),u=d,a.current.lanes=u,br(a,u),xi(a),r[Ii]=a.current,Xg(r),new Tf(a)},$a.version="19.2.4",$a}var IS;function d3(){if(IS)return gm.exports;IS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gm.exports=h3(),gm.exports}var p3=d3();const g3={yamlContent:"",policy:null,parseError:null,selectedNodeId:null,ruleLineRanges:null,highlightedLines:null};function m3(t,e){switch(e.type){case"SET_YAML":return{...t,yamlContent:e.payload};case"SET_POLICY":return{...t,policy:e.payload.policy,ruleLineRanges:e.payload.ruleLineRanges,parseError:null};case"SET_ERROR":return{...t,parseError:e.payload};case"SELECT_NODE":return{...t,selectedNodeId:e.payload};case"HIGHLIGHT_LINES":return{...t,highlightedLines:e.payload};default:return t}}const yA=q.createContext(null);function y3({children:t}){const[e,n]=q.useReducer(m3,g3);return C.jsx(yA.Provider,{value:{state:e,dispatch:n},children:t})}function Ot(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Ot(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var x3={value:()=>{}};function bd(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new fh(n)}function fh(t){this._=t}function v3(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}fh.prototype=bd.prototype={constructor:fh,on:function(t,e){var n=this._,i=v3(t+"",n),s,o=-1,l=i.length;if(arguments.length<2){for(;++o<l;)if((s=(t=i[o]).type)&&(s=b3(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(s=(t=i[o]).type)n[s]=VS(n[s],t.name,e);else if(e==null)for(s in n)n[s]=VS(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new fh(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,o;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,o=i.length;s<o;++s)i[s].value.apply(e,n)}};function b3(t,e){for(var n=0,i=t.length,s;n<i;++n)if((s=t[n]).name===e)return s.value}function VS(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=x3,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var y0="http://www.w3.org/1999/xhtml";const US={svg:"http://www.w3.org/2000/svg",xhtml:y0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sd(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),US.hasOwnProperty(e)?{space:US[e],local:t}:t}function S3(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===y0&&e.documentElement.namespaceURI===y0?e.createElement(t):e.createElementNS(n,t)}}function w3(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xA(t){var e=Sd(t);return(e.local?w3:S3)(e)}function C3(){}function Iy(t){return t==null?C3:function(){return this.querySelector(t)}}function A3(t){typeof t!="function"&&(t=Iy(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=i[s]=new Array(l),f,h,p=0;p<l;++p)(f=o[p])&&(h=t.call(f,f.__data__,p,o))&&("__data__"in f&&(h.__data__=f.__data__),c[p]=h);return new Bn(i,this._parents)}function k3(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function O3(){return[]}function vA(t){return t==null?O3:function(){return this.querySelectorAll(t)}}function E3(t){return function(){return k3(t.apply(this,arguments))}}function M3(t){typeof t=="function"?t=E3(t):t=vA(t);for(var e=this._groups,n=e.length,i=[],s=[],o=0;o<n;++o)for(var l=e[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&(i.push(t.call(f,f.__data__,h,l)),s.push(f));return new Bn(i,s)}function bA(t){return function(){return this.matches(t)}}function SA(t){return function(e){return e.matches(t)}}var T3=Array.prototype.find;function N3(t){return function(){return T3.call(this.children,t)}}function D3(){return this.firstElementChild}function R3(t){return this.select(t==null?D3:N3(typeof t=="function"?t:SA(t)))}var _3=Array.prototype.filter;function L3(){return Array.from(this.children)}function B3(t){return function(){return _3.call(this.children,t)}}function z3(t){return this.selectAll(t==null?L3:B3(typeof t=="function"?t:SA(t)))}function P3(t){typeof t!="function"&&(t=bA(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=i[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new Bn(i,this._parents)}function wA(t){return new Array(t.length)}function H3(){return new Bn(this._enter||this._groups.map(wA),this._parents)}function Oh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Oh.prototype={constructor:Oh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function j3(t){return function(){return t}}function I3(t,e,n,i,s,o){for(var l=0,c,f=e.length,h=o.length;l<h;++l)(c=e[l])?(c.__data__=o[l],i[l]=c):n[l]=new Oh(t,o[l]);for(;l<f;++l)(c=e[l])&&(s[l]=c)}function V3(t,e,n,i,s,o,l){var c,f,h=new Map,p=e.length,g=o.length,y=new Array(p),v;for(c=0;c<p;++c)(f=e[c])&&(y[c]=v=l.call(f,f.__data__,c,e)+"",h.has(v)?s[c]=f:h.set(v,f));for(c=0;c<g;++c)v=l.call(t,o[c],c,o)+"",(f=h.get(v))?(i[c]=f,f.__data__=o[c],h.delete(v)):n[c]=new Oh(t,o[c]);for(c=0;c<p;++c)(f=e[c])&&h.get(y[c])===f&&(s[c]=f)}function U3(t){return t.__data__}function $3(t,e){if(!arguments.length)return Array.from(this,U3);var n=e?V3:I3,i=this._parents,s=this._groups;typeof t!="function"&&(t=j3(t));for(var o=s.length,l=new Array(o),c=new Array(o),f=new Array(o),h=0;h<o;++h){var p=i[h],g=s[h],y=g.length,v=q3(t.call(p,p&&p.__data__,h,i)),b=v.length,S=c[h]=new Array(b),A=l[h]=new Array(b),k=f[h]=new Array(y);n(p,g,S,A,k,v,e);for(var T=0,O=0,M,L;T<b;++T)if(M=S[T]){for(T>=O&&(O=T+1);!(L=A[O])&&++O<b;);M._next=L||null}}return l=new Bn(l,i),l._enter=c,l._exit=f,l}function q3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Q3(){return new Bn(this._exit||this._groups.map(wA),this._parents)}function Y3(t,e,n){var i=this.enter(),s=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),i&&s?i.merge(s).order():s}function X3(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,s=n.length,o=i.length,l=Math.min(s,o),c=new Array(s),f=0;f<l;++f)for(var h=n[f],p=i[f],g=h.length,y=c[f]=new Array(g),v,b=0;b<g;++b)(v=h[b]||p[b])&&(y[b]=v);for(;f<s;++f)c[f]=n[f];return new Bn(c,this._parents)}function F3(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],s=i.length-1,o=i[s],l;--s>=0;)(l=i[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function G3(t){t||(t=W3);function e(g,y){return g&&y?t(g.__data__,y.__data__):!g-!y}for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o){for(var l=n[o],c=l.length,f=s[o]=new Array(c),h,p=0;p<c;++p)(h=l[p])&&(f[p]=h);f.sort(e)}return new Bn(s,this._parents).order()}function W3(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function K3(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Z3(){return Array.from(this)}function J3(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],s=0,o=i.length;s<o;++s){var l=i[s];if(l)return l}return null}function e5(){let t=0;for(const e of this)++t;return t}function t5(){return!this.node()}function n5(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var s=e[n],o=0,l=s.length,c;o<l;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function i5(t){return function(){this.removeAttribute(t)}}function s5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function r5(t,e){return function(){this.setAttribute(t,e)}}function o5(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function l5(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function a5(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function c5(t,e){var n=Sd(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?s5:i5:typeof e=="function"?n.local?a5:l5:n.local?o5:r5)(n,e))}function CA(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function u5(t){return function(){this.style.removeProperty(t)}}function f5(t,e,n){return function(){this.style.setProperty(t,e,n)}}function h5(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function d5(t,e,n){return arguments.length>1?this.each((e==null?u5:typeof e=="function"?h5:f5)(t,e,n??"")):El(this.node(),t)}function El(t,e){return t.style.getPropertyValue(e)||CA(t).getComputedStyle(t,null).getPropertyValue(e)}function p5(t){return function(){delete this[t]}}function g5(t,e){return function(){this[t]=e}}function m5(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function y5(t,e){return arguments.length>1?this.each((e==null?p5:typeof e=="function"?m5:g5)(t,e)):this.node()[t]}function AA(t){return t.trim().split(/^|\s+/)}function Vy(t){return t.classList||new kA(t)}function kA(t){this._node=t,this._names=AA(t.getAttribute("class")||"")}kA.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function OA(t,e){for(var n=Vy(t),i=-1,s=e.length;++i<s;)n.add(e[i])}function EA(t,e){for(var n=Vy(t),i=-1,s=e.length;++i<s;)n.remove(e[i])}function x5(t){return function(){OA(this,t)}}function v5(t){return function(){EA(this,t)}}function b5(t,e){return function(){(e.apply(this,arguments)?OA:EA)(this,t)}}function S5(t,e){var n=AA(t+"");if(arguments.length<2){for(var i=Vy(this.node()),s=-1,o=n.length;++s<o;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?b5:e?x5:v5)(n,e))}function w5(){this.textContent=""}function C5(t){return function(){this.textContent=t}}function A5(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function k5(t){return arguments.length?this.each(t==null?w5:(typeof t=="function"?A5:C5)(t)):this.node().textContent}function O5(){this.innerHTML=""}function E5(t){return function(){this.innerHTML=t}}function M5(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function T5(t){return arguments.length?this.each(t==null?O5:(typeof t=="function"?M5:E5)(t)):this.node().innerHTML}function N5(){this.nextSibling&&this.parentNode.appendChild(this)}function D5(){return this.each(N5)}function R5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _5(){return this.each(R5)}function L5(t){var e=typeof t=="function"?t:xA(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function B5(){return null}function z5(t,e){var n=typeof t=="function"?t:xA(t),i=e==null?B5:typeof e=="function"?e:Iy(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function P5(){var t=this.parentNode;t&&t.removeChild(this)}function H5(){return this.each(P5)}function j5(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function I5(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function V5(t){return this.select(t?I5:j5)}function U5(t){return arguments.length?this.property("__data__",t):this.node().__data__}function $5(t){return function(e){t.call(this,e,this.__data__)}}function q5(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Q5(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Y5(t,e,n){return function(){var i=this.__on,s,o=$5(e);if(i){for(var l=0,c=i.length;l<c;++l)if((s=i[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(s):this.__on=[s]}}function X5(t,e,n){var i=q5(t+""),s,o=i.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,p;f<h;++f)for(s=0,p=c[f];s<o;++s)if((l=i[s]).type===p.type&&l.name===p.name)return p.value}return}for(c=e?Y5:Q5,s=0;s<o;++s)this.each(c(i[s],e,n));return this}function MA(t,e,n){var i=CA(t),s=i.CustomEvent;typeof s=="function"?s=new s(e,n):(s=i.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function F5(t,e){return function(){return MA(this,t,e)}}function G5(t,e){return function(){return MA(this,t,e.apply(this,arguments))}}function W5(t,e){return this.each((typeof e=="function"?G5:F5)(t,e))}function*K5(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],s=0,o=i.length,l;s<o;++s)(l=i[s])&&(yield l)}var TA=[null];function Bn(t,e){this._groups=t,this._parents=e}function Xc(){return new Bn([[document.documentElement]],TA)}function Z5(){return this}Bn.prototype=Xc.prototype={constructor:Bn,select:A3,selectAll:M3,selectChild:R3,selectChildren:z3,filter:P3,data:$3,enter:H3,exit:Q3,join:Y3,merge:X3,selection:Z5,order:F3,sort:G3,call:K3,nodes:Z3,node:J3,size:e5,empty:t5,each:n5,attr:c5,style:d5,property:y5,classed:S5,text:k5,html:T5,raise:D5,lower:_5,append:L5,insert:z5,remove:H5,clone:V5,datum:U5,on:X5,dispatch:W5,[Symbol.iterator]:K5};function _n(t){return typeof t=="string"?new Bn([[document.querySelector(t)]],[document.documentElement]):new Bn([[t]],TA)}function J5(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ni(t,e){if(t=J5(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const eR={passive:!1},gc={capture:!0,passive:!1};function vm(t){t.stopImmediatePropagation()}function yl(t){t.preventDefault(),t.stopImmediatePropagation()}function NA(t){var e=t.document.documentElement,n=_n(t).on("dragstart.drag",yl,gc);"onselectstart"in e?n.on("selectstart.drag",yl,gc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function DA(t,e){var n=t.document.documentElement,i=_n(t).on("dragstart.drag",null);e&&(i.on("click.drag",yl,gc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Df=t=>()=>t;function x0(t,{sourceEvent:e,subject:n,target:i,identifier:s,active:o,x:l,y:c,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}x0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function tR(t){return!t.ctrlKey&&!t.button}function nR(){return this.parentNode}function iR(t,e){return e??{x:t.x,y:t.y}}function sR(){return navigator.maxTouchPoints||"ontouchstart"in this}function RA(){var t=tR,e=nR,n=iR,i=sR,s={},o=bd("start","drag","end"),l=0,c,f,h,p,g=0;function y(M){M.on("mousedown.drag",v).filter(i).on("touchstart.drag",A).on("touchmove.drag",k,eR).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(M,L){if(!(p||!t.call(this,M,L))){var _=O(this,e.call(this,M,L),M,L,"mouse");_&&(_n(M.view).on("mousemove.drag",b,gc).on("mouseup.drag",S,gc),NA(M.view),vm(M),h=!1,c=M.clientX,f=M.clientY,_("start",M))}}function b(M){if(yl(M),!h){var L=M.clientX-c,_=M.clientY-f;h=L*L+_*_>g}s.mouse("drag",M)}function S(M){_n(M.view).on("mousemove.drag mouseup.drag",null),DA(M.view,h),yl(M),s.mouse("end",M)}function A(M,L){if(t.call(this,M,L)){var _=M.changedTouches,R=e.call(this,M,L),X=_.length,U,ne;for(U=0;U<X;++U)(ne=O(this,R,M,L,_[U].identifier,_[U]))&&(vm(M),ne("start",M,_[U]))}}function k(M){var L=M.changedTouches,_=L.length,R,X;for(R=0;R<_;++R)(X=s[L[R].identifier])&&(yl(M),X("drag",M,L[R]))}function T(M){var L=M.changedTouches,_=L.length,R,X;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<_;++R)(X=s[L[R].identifier])&&(vm(M),X("end",M,L[R]))}function O(M,L,_,R,X,U){var ne=o.copy(),$=ni(U||_,L),Q,Z,B;if((B=n.call(M,new x0("beforestart",{sourceEvent:_,target:y,identifier:X,active:l,x:$[0],y:$[1],dx:0,dy:0,dispatch:ne}),R))!=null)return Q=B.x-$[0]||0,Z=B.y-$[1]||0,function V(N,P,j){var z=$,G;switch(N){case"start":s[X]=V,G=l++;break;case"end":delete s[X],--l;case"drag":$=ni(j||P,L),G=l;break}ne.call(N,M,new x0(N,{sourceEvent:P,subject:B,target:y,identifier:X,active:G,x:$[0]+Q,y:$[1]+Z,dx:$[0]-z[0],dy:$[1]-z[1],dispatch:ne}),R)}}return y.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Df(!!M),y):t},y.container=function(M){return arguments.length?(e=typeof M=="function"?M:Df(M),y):e},y.subject=function(M){return arguments.length?(n=typeof M=="function"?M:Df(M),y):n},y.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:Df(!!M),y):i},y.on=function(){var M=o.on.apply(o,arguments);return M===o?y:M},y.clickDistance=function(M){return arguments.length?(g=(M=+M)*M,y):Math.sqrt(g)},y}function Uy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _A(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Fc(){}var mc=.7,Eh=1/mc,xl="\\s*([+-]?\\d+)\\s*",yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rR=/^#([0-9a-f]{3,8})$/,oR=new RegExp(`^rgb\\(${xl},${xl},${xl}\\)$`),lR=new RegExp(`^rgb\\(${Ti},${Ti},${Ti}\\)$`),aR=new RegExp(`^rgba\\(${xl},${xl},${xl},${yc}\\)$`),cR=new RegExp(`^rgba\\(${Ti},${Ti},${Ti},${yc}\\)$`),uR=new RegExp(`^hsl\\(${yc},${Ti},${Ti}\\)$`),fR=new RegExp(`^hsla\\(${yc},${Ti},${Ti},${yc}\\)$`),$S={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Uy(Fc,so,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:qS,formatHex:qS,formatHex8:hR,formatHsl:dR,formatRgb:QS,toString:QS});function qS(){return this.rgb().formatHex()}function hR(){return this.rgb().formatHex8()}function dR(){return LA(this).formatHsl()}function QS(){return this.rgb().formatRgb()}function so(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rR.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YS(e):n===3?new yn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Rf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Rf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=oR.exec(t))?new yn(e[1],e[2],e[3],1):(e=lR.exec(t))?new yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=aR.exec(t))?Rf(e[1],e[2],e[3],e[4]):(e=cR.exec(t))?Rf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uR.exec(t))?GS(e[1],e[2]/100,e[3]/100,1):(e=fR.exec(t))?GS(e[1],e[2]/100,e[3]/100,e[4]):$S.hasOwnProperty(t)?YS($S[t]):t==="transparent"?new yn(NaN,NaN,NaN,0):null}function YS(t){return new yn(t>>16&255,t>>8&255,t&255,1)}function Rf(t,e,n,i){return i<=0&&(t=e=n=NaN),new yn(t,e,n,i)}function pR(t){return t instanceof Fc||(t=so(t)),t?(t=t.rgb(),new yn(t.r,t.g,t.b,t.opacity)):new yn}function v0(t,e,n,i){return arguments.length===1?pR(t):new yn(t,e,n,i??1)}function yn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Uy(yn,v0,_A(Fc,{brighter(t){return t=t==null?Eh:Math.pow(Eh,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mc:Math.pow(mc,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yn(Zr(this.r),Zr(this.g),Zr(this.b),Mh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XS,formatHex:XS,formatHex8:gR,formatRgb:FS,toString:FS}));function XS(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}`}function gR(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}${Xr((isNaN(this.opacity)?1:this.opacity)*255)}`}function FS(){const t=Mh(this.opacity);return`${t===1?"rgb(":"rgba("}${Zr(this.r)}, ${Zr(this.g)}, ${Zr(this.b)}${t===1?")":`, ${t})`}`}function Mh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xr(t){return t=Zr(t),(t<16?"0":"")+t.toString(16)}function GS(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ii(t,e,n,i)}function LA(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);if(t instanceof Fc||(t=so(t)),!t)return new ii;if(t instanceof ii)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,s=Math.min(e,n,i),o=Math.max(e,n,i),l=NaN,c=o-s,f=(o+s)/2;return c?(e===o?l=(n-i)/c+(n<i)*6:n===o?l=(i-e)/c+2:l=(e-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new ii(l,c,f,t.opacity)}function mR(t,e,n,i){return arguments.length===1?LA(t):new ii(t,e,n,i??1)}function ii(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Uy(ii,mR,_A(Fc,{brighter(t){return t=t==null?Eh:Math.pow(Eh,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mc:Math.pow(mc,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new yn(bm(t>=240?t-240:t+120,s,i),bm(t,s,i),bm(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new ii(WS(this.h),_f(this.s),_f(this.l),Mh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mh(this.opacity);return`${t===1?"hsl(":"hsla("}${WS(this.h)}, ${_f(this.s)*100}%, ${_f(this.l)*100}%${t===1?")":`, ${t})`}`}}));function WS(t){return t=(t||0)%360,t<0?t+360:t}function _f(t){return Math.max(0,Math.min(1,t||0))}function bm(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $y=t=>()=>t;function yR(t,e){return function(n){return t+n*e}}function xR(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function vR(t){return(t=+t)==1?BA:function(e,n){return n-e?xR(e,n,t):$y(isNaN(e)?n:e)}}function BA(t,e){var n=e-t;return n?yR(t,n):$y(isNaN(t)?e:t)}const Th=(function t(e){var n=vR(e);function i(s,o){var l=n((s=v0(s)).r,(o=v0(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=BA(s.opacity,o.opacity);return function(p){return s.r=l(p),s.g=c(p),s.b=f(p),s.opacity=h(p),s+""}}return i.gamma=t,i})(1);function bR(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),s;return function(o){for(s=0;s<n;++s)i[s]=t[s]*(1-o)+e[s]*o;return i}}function SR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wR(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,s=new Array(i),o=new Array(n),l;for(l=0;l<i;++l)s[l]=sc(t[l],e[l]);for(;l<n;++l)o[l]=e[l];return function(c){for(l=0;l<i;++l)o[l]=s[l](c);return o}}function CR(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ci(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function AR(t,e){var n={},i={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=sc(t[s],e[s]):i[s]=e[s];return function(o){for(s in n)i[s]=n[s](o);return i}}var b0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sm=new RegExp(b0.source,"g");function kR(t){return function(){return t}}function OR(t){return function(e){return t(e)+""}}function zA(t,e){var n=b0.lastIndex=Sm.lastIndex=0,i,s,o,l=-1,c=[],f=[];for(t=t+"",e=e+"";(i=b0.exec(t))&&(s=Sm.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(i=i[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:Ci(i,s)})),n=Sm.lastIndex;return n<e.length&&(o=e.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?OR(f[0].x):kR(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)c[(g=f[p]).i]=g.x(h);return c.join("")})}function sc(t,e){var n=typeof e,i;return e==null||n==="boolean"?$y(e):(n==="number"?Ci:n==="string"?(i=so(e))?(e=i,Th):zA:e instanceof so?Th:e instanceof Date?CR:SR(e)?bR:Array.isArray(e)?wR:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?AR:Ci)(t,e)}var KS=180/Math.PI,S0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function PA(t,e,n,i,s,o){var l,c,f;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,f/=c),t*i<e*n&&(t=-t,e=-e,f=-f,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*KS,skewX:Math.atan(f)*KS,scaleX:l,scaleY:c}}var Lf;function ER(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?S0:PA(e.a,e.b,e.c,e.d,e.e,e.f)}function MR(t){return t==null||(Lf||(Lf=document.createElementNS("http://www.w3.org/2000/svg","g")),Lf.setAttribute("transform",t),!(t=Lf.transform.baseVal.consolidate()))?S0:(t=t.matrix,PA(t.a,t.b,t.c,t.d,t.e,t.f))}function HA(t,e,n,i){function s(h){return h.length?h.pop()+" ":""}function o(h,p,g,y,v,b){if(h!==g||p!==y){var S=v.push("translate(",null,e,null,n);b.push({i:S-4,x:Ci(h,g)},{i:S-2,x:Ci(p,y)})}else(g||y)&&v.push("translate("+g+e+y+n)}function l(h,p,g,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:g.push(s(g)+"rotate(",null,i)-2,x:Ci(h,p)})):p&&g.push(s(g)+"rotate("+p+i)}function c(h,p,g,y){h!==p?y.push({i:g.push(s(g)+"skewX(",null,i)-2,x:Ci(h,p)}):p&&g.push(s(g)+"skewX("+p+i)}function f(h,p,g,y,v,b){if(h!==g||p!==y){var S=v.push(s(v)+"scale(",null,",",null,")");b.push({i:S-4,x:Ci(h,g)},{i:S-2,x:Ci(p,y)})}else(g!==1||y!==1)&&v.push(s(v)+"scale("+g+","+y+")")}return function(h,p){var g=[],y=[];return h=t(h),p=t(p),o(h.translateX,h.translateY,p.translateX,p.translateY,g,y),l(h.rotate,p.rotate,g,y),c(h.skewX,p.skewX,g,y),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,g,y),h=p=null,function(v){for(var b=-1,S=y.length,A;++b<S;)g[(A=y[b]).i]=A.x(v);return g.join("")}}}var TR=HA(ER,"px, ","px)","deg)"),NR=HA(MR,", ",")",")"),DR=1e-12;function ZS(t){return((t=Math.exp(t))+1/t)/2}function RR(t){return((t=Math.exp(t))-1/t)/2}function _R(t){return((t=Math.exp(2*t))-1)/(t+1)}const hh=(function t(e,n,i){function s(o,l){var c=o[0],f=o[1],h=o[2],p=l[0],g=l[1],y=l[2],v=p-c,b=g-f,S=v*v+b*b,A,k;if(S<DR)k=Math.log(y/h)/e,A=function(R){return[c+R*v,f+R*b,h*Math.exp(e*R*k)]};else{var T=Math.sqrt(S),O=(y*y-h*h+i*S)/(2*h*n*T),M=(y*y-h*h-i*S)/(2*y*n*T),L=Math.log(Math.sqrt(O*O+1)-O),_=Math.log(Math.sqrt(M*M+1)-M);k=(_-L)/e,A=function(R){var X=R*k,U=ZS(L),ne=h/(n*T)*(U*_R(e*X+L)-RR(L));return[c+ne*v,f+ne*b,h*U/ZS(e*X+L)]}}return A.duration=k*1e3*e/Math.SQRT2,A}return s.rho=function(o){var l=Math.max(.001,+o),c=l*l,f=c*c;return t(l,c,f)},s})(Math.SQRT2,2,4);var Ml=0,Ka=0,qa=0,jA=1e3,Nh,Za,Dh=0,ro=0,wd=0,xc=typeof performance=="object"&&performance.now?performance:Date,IA=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qy(){return ro||(IA(LR),ro=xc.now()+wd)}function LR(){ro=0}function Rh(){this._call=this._time=this._next=null}Rh.prototype=VA.prototype={constructor:Rh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?qy():+n)+(e==null?0:+e),!this._next&&Za!==this&&(Za?Za._next=this:Nh=this,Za=this),this._call=t,this._time=n,w0()},stop:function(){this._call&&(this._call=null,this._time=1/0,w0())}};function VA(t,e,n){var i=new Rh;return i.restart(t,e,n),i}function BR(){qy(),++Ml;for(var t=Nh,e;t;)(e=ro-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ml}function JS(){ro=(Dh=xc.now())+wd,Ml=Ka=0;try{BR()}finally{Ml=0,PR(),ro=0}}function zR(){var t=xc.now(),e=t-Dh;e>jA&&(wd-=e,Dh=t)}function PR(){for(var t,e=Nh,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Nh=n);Za=t,w0(i)}function w0(t){if(!Ml){Ka&&(Ka=clearTimeout(Ka));var e=t-ro;e>24?(t<1/0&&(Ka=setTimeout(JS,t-xc.now()-wd)),qa&&(qa=clearInterval(qa))):(qa||(Dh=xc.now(),qa=setInterval(zR,jA)),Ml=1,IA(JS))}}function ew(t,e,n){var i=new Rh;return e=e==null?0:+e,i.restart(s=>{i.stop(),t(s+e)},e,n),i}var HR=bd("start","end","cancel","interrupt"),jR=[],UA=0,tw=1,C0=2,dh=3,nw=4,A0=5,ph=6;function Cd(t,e,n,i,s,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;IR(t,n,{name:e,index:i,group:s,on:HR,tween:jR,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:UA})}function Qy(t,e){var n=ui(t,e);if(n.state>UA)throw new Error("too late; already scheduled");return n}function _i(t,e){var n=ui(t,e);if(n.state>dh)throw new Error("too late; already running");return n}function ui(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function IR(t,e,n){var i=t.__transition,s;i[e]=n,n.timer=VA(o,0,n.time);function o(h){n.state=tw,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var p,g,y,v;if(n.state!==tw)return f();for(p in i)if(v=i[p],v.name===n.name){if(v.state===dh)return ew(l);v.state===nw?(v.state=ph,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete i[p]):+p<e&&(v.state=ph,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete i[p])}if(ew(function(){n.state===dh&&(n.state=nw,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=C0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===C0){for(n.state=dh,s=new Array(y=n.tween.length),p=0,g=-1;p<y;++p)(v=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++g]=v);s.length=g+1}}function c(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=A0,1),g=-1,y=s.length;++g<y;)s[g].call(t,p);n.state===A0&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=ph,n.timer.stop(),delete i[e];for(var h in i)return;delete t.__transition}}function gh(t,e){var n=t.__transition,i,s,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((i=n[l]).name!==e){o=!1;continue}s=i.state>C0&&i.state<A0,i.state=ph,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[l]}o&&delete t.__transition}}function VR(t){return this.each(function(){gh(this,t)})}function UR(t,e){var n,i;return function(){var s=_i(this,t),o=s.tween;if(o!==n){i=n=o;for(var l=0,c=i.length;l<c;++l)if(i[l].name===e){i=i.slice(),i.splice(l,1);break}}s.tween=i}}function $R(t,e,n){var i,s;if(typeof n!="function")throw new Error;return function(){var o=_i(this,t),l=o.tween;if(l!==i){s=(i=l).slice();for(var c={name:e,value:n},f=0,h=s.length;f<h;++f)if(s[f].name===e){s[f]=c;break}f===h&&s.push(c)}o.tween=s}}function qR(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ui(this.node(),n).tween,s=0,o=i.length,l;s<o;++s)if((l=i[s]).name===t)return l.value;return null}return this.each((e==null?UR:$R)(n,t,e))}function Yy(t,e,n){var i=t._id;return t.each(function(){var s=_i(this,i);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ui(s,i).value[e]}}function $A(t,e){var n;return(typeof e=="number"?Ci:e instanceof so?Th:(n=so(e))?(e=n,Th):zA)(t,e)}function QR(t){return function(){this.removeAttribute(t)}}function YR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function XR(t,e,n){var i,s=n+"",o;return function(){var l=this.getAttribute(t);return l===s?null:l===i?o:o=e(i=l,n)}}function FR(t,e,n){var i,s=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===i?o:o=e(i=l,n)}}function GR(t,e,n){var i,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=c+"",l===f?null:l===i&&f===s?o:(s=f,o=e(i=l,c)))}}function WR(t,e,n){var i,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=c+"",l===f?null:l===i&&f===s?o:(s=f,o=e(i=l,c)))}}function KR(t,e){var n=Sd(t),i=n==="transform"?NR:$A;return this.attrTween(t,typeof e=="function"?(n.local?WR:GR)(n,i,Yy(this,"attr."+t,e)):e==null?(n.local?YR:QR)(n):(n.local?FR:XR)(n,i,e))}function ZR(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function JR(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function e4(t,e){var n,i;function s(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&JR(t,o)),n}return s._value=e,s}function t4(t,e){var n,i;function s(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&ZR(t,o)),n}return s._value=e,s}function n4(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Sd(t);return this.tween(n,(i.local?e4:t4)(i,e))}function i4(t,e){return function(){Qy(this,t).delay=+e.apply(this,arguments)}}function s4(t,e){return e=+e,function(){Qy(this,t).delay=e}}function r4(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?i4:s4)(e,t)):ui(this.node(),e).delay}function o4(t,e){return function(){_i(this,t).duration=+e.apply(this,arguments)}}function l4(t,e){return e=+e,function(){_i(this,t).duration=e}}function a4(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?o4:l4)(e,t)):ui(this.node(),e).duration}function c4(t,e){if(typeof e!="function")throw new Error;return function(){_i(this,t).ease=e}}function u4(t){var e=this._id;return arguments.length?this.each(c4(e,t)):ui(this.node(),e).ease}function f4(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;_i(this,t).ease=n}}function h4(t){if(typeof t!="function")throw new Error;return this.each(f4(this._id,t))}function d4(t){typeof t!="function"&&(t=bA(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=i[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new ds(i,this._parents,this._name,this._id)}function p4(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(i),c=0;c<o;++c)for(var f=e[c],h=n[c],p=f.length,g=l[c]=new Array(p),y,v=0;v<p;++v)(y=f[v]||h[v])&&(g[v]=y);for(;c<i;++c)l[c]=e[c];return new ds(l,this._parents,this._name,this._id)}function g4(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function m4(t,e,n){var i,s,o=g4(e)?Qy:_i;return function(){var l=o(this,t),c=l.on;c!==i&&(s=(i=c).copy()).on(e,n),l.on=s}}function y4(t,e){var n=this._id;return arguments.length<2?ui(this.node(),n).on.on(t):this.each(m4(n,t,e))}function x4(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function v4(){return this.on("end.remove",x4(this._id))}function b4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Iy(t));for(var i=this._groups,s=i.length,o=new Array(s),l=0;l<s;++l)for(var c=i[l],f=c.length,h=o[l]=new Array(f),p,g,y=0;y<f;++y)(p=c[y])&&(g=t.call(p,p.__data__,y,c))&&("__data__"in p&&(g.__data__=p.__data__),h[y]=g,Cd(h[y],e,n,y,h,ui(p,n)));return new ds(o,this._parents,e,n)}function S4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vA(t));for(var i=this._groups,s=i.length,o=[],l=[],c=0;c<s;++c)for(var f=i[c],h=f.length,p,g=0;g<h;++g)if(p=f[g]){for(var y=t.call(p,p.__data__,g,f),v,b=ui(p,n),S=0,A=y.length;S<A;++S)(v=y[S])&&Cd(v,e,n,S,y,b);o.push(y),l.push(p)}return new ds(o,l,e,n)}var w4=Xc.prototype.constructor;function C4(){return new w4(this._groups,this._parents)}function A4(t,e){var n,i,s;return function(){var o=El(this,t),l=(this.style.removeProperty(t),El(this,t));return o===l?null:o===n&&l===i?s:s=e(n=o,i=l)}}function qA(t){return function(){this.style.removeProperty(t)}}function k4(t,e,n){var i,s=n+"",o;return function(){var l=El(this,t);return l===s?null:l===i?o:o=e(i=l,n)}}function O4(t,e,n){var i,s,o;return function(){var l=El(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),El(this,t))),l===f?null:l===i&&f===s?o:(s=f,o=e(i=l,c))}}function E4(t,e){var n,i,s,o="style."+e,l="end."+o,c;return function(){var f=_i(this,t),h=f.on,p=f.value[o]==null?c||(c=qA(e)):void 0;(h!==n||s!==p)&&(i=(n=h).copy()).on(l,s=p),f.on=i}}function M4(t,e,n){var i=(t+="")=="transform"?TR:$A;return e==null?this.styleTween(t,A4(t,i)).on("end.style."+t,qA(t)):typeof e=="function"?this.styleTween(t,O4(t,i,Yy(this,"style."+t,e))).each(E4(this._id,t)):this.styleTween(t,k4(t,i,e),n).on("end.style."+t,null)}function T4(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function N4(t,e,n){var i,s;function o(){var l=e.apply(this,arguments);return l!==s&&(i=(s=l)&&T4(t,l,n)),i}return o._value=e,o}function D4(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,N4(t,e,n??""))}function R4(t){return function(){this.textContent=t}}function _4(t){return function(){var e=t(this);this.textContent=e??""}}function L4(t){return this.tween("text",typeof t=="function"?_4(Yy(this,"text",t)):R4(t==null?"":t+""))}function B4(t){return function(e){this.textContent=t.call(this,e)}}function z4(t){var e,n;function i(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&B4(s)),e}return i._value=t,i}function P4(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,z4(t))}function H4(){for(var t=this._name,e=this._id,n=QA(),i=this._groups,s=i.length,o=0;o<s;++o)for(var l=i[o],c=l.length,f,h=0;h<c;++h)if(f=l[h]){var p=ui(f,e);Cd(f,t,n,h,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ds(i,this._parents,t,n)}function j4(){var t,e,n=this,i=n._id,s=n.size();return new Promise(function(o,l){var c={value:l},f={value:function(){--s===0&&o()}};n.each(function(){var h=_i(this,i),p=h.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),h.on=e}),s===0&&o()})}var I4=0;function ds(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function QA(){return++I4}var os=Xc.prototype;ds.prototype={constructor:ds,select:b4,selectAll:S4,selectChild:os.selectChild,selectChildren:os.selectChildren,filter:d4,merge:p4,selection:C4,transition:H4,call:os.call,nodes:os.nodes,node:os.node,size:os.size,empty:os.empty,each:os.each,on:y4,attr:KR,attrTween:n4,style:M4,styleTween:D4,text:L4,textTween:P4,remove:v4,tween:qR,delay:r4,duration:a4,ease:u4,easeVarying:h4,end:j4,[Symbol.iterator]:os[Symbol.iterator]};function V4(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var U4={time:null,delay:0,duration:250,ease:V4};function $4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function q4(t){var e,n;t instanceof ds?(e=t._id,t=t._name):(e=QA(),(n=U4).time=qy(),t=t==null?null:t+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var l=i[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&Cd(f,t,e,h,l,n||$4(f,e));return new ds(i,this._parents,t,e)}Xc.prototype.interrupt=VR;Xc.prototype.transition=q4;const Bf=t=>()=>t;function Q4(t,{sourceEvent:e,target:n,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function us(t,e,n){this.k=t,this.x=e,this.y=n}us.prototype={constructor:us,scale:function(t){return t===1?this:new us(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new us(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ad=new us(1,0,0);YA.prototype=us.prototype;function YA(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ad;return t.__zoom}function wm(t){t.stopImmediatePropagation()}function Qa(t){t.preventDefault(),t.stopImmediatePropagation()}function Y4(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function X4(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function iw(){return this.__zoom||Ad}function F4(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function G4(){return navigator.maxTouchPoints||"ontouchstart"in this}function W4(t,e,n){var i=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function XA(){var t=Y4,e=X4,n=W4,i=F4,s=G4,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=hh,h=bd("start","zoom","end"),p,g,y,v=500,b=150,S=0,A=10;function k(B){B.property("__zoom",iw).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",U).on("dblclick.zoom",ne).filter(s).on("touchstart.zoom",$).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(B,V,N,P){var j=B.selection?B.selection():B;j.property("__zoom",iw),B!==j?L(B,V,N,P):j.interrupt().each(function(){_(this,arguments).event(P).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},k.scaleBy=function(B,V,N,P){k.scaleTo(B,function(){var j=this.__zoom.k,z=typeof V=="function"?V.apply(this,arguments):V;return j*z},N,P)},k.scaleTo=function(B,V,N,P){k.transform(B,function(){var j=e.apply(this,arguments),z=this.__zoom,G=N==null?M(j):typeof N=="function"?N.apply(this,arguments):N,D=z.invert(G),H=typeof V=="function"?V.apply(this,arguments):V;return n(O(T(z,H),G,D),j,l)},N,P)},k.translateBy=function(B,V,N,P){k.transform(B,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof N=="function"?N.apply(this,arguments):N),e.apply(this,arguments),l)},null,P)},k.translateTo=function(B,V,N,P,j){k.transform(B,function(){var z=e.apply(this,arguments),G=this.__zoom,D=P==null?M(z):typeof P=="function"?P.apply(this,arguments):P;return n(Ad.translate(D[0],D[1]).scale(G.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof N=="function"?-N.apply(this,arguments):-N),z,l)},P,j)};function T(B,V){return V=Math.max(o[0],Math.min(o[1],V)),V===B.k?B:new us(V,B.x,B.y)}function O(B,V,N){var P=V[0]-N[0]*B.k,j=V[1]-N[1]*B.k;return P===B.x&&j===B.y?B:new us(B.k,P,j)}function M(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function L(B,V,N,P){B.on("start.zoom",function(){_(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(P).end()}).tween("zoom",function(){var j=this,z=arguments,G=_(j,z).event(P),D=e.apply(j,z),H=N==null?M(D):typeof N=="function"?N.apply(j,z):N,ee=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ie=j.__zoom,ce=typeof V=="function"?V.apply(j,z):V,he=f(ie.invert(H).concat(ee/ie.k),ce.invert(H).concat(ee/ce.k));return function(fe){if(fe===1)fe=ce;else{var ue=he(fe),ge=ee/ue[2];fe=new us(ge,H[0]-ue[0]*ge,H[1]-ue[1]*ge)}G.zoom(null,fe)}})}function _(B,V,N){return!N&&B.__zooming||new R(B,V)}function R(B,V){this.that=B,this.args=V,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,V),this.taps=0}R.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,V){return this.mouse&&B!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var V=_n(this.that).datum();h.call(B,this.that,new Q4(B,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:h}),V)}};function X(B,...V){if(!t.apply(this,arguments))return;var N=_(this,V).event(B),P=this.__zoom,j=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,i.apply(this,arguments)))),z=ni(B);if(N.wheel)(N.mouse[0][0]!==z[0]||N.mouse[0][1]!==z[1])&&(N.mouse[1]=P.invert(N.mouse[0]=z)),clearTimeout(N.wheel);else{if(P.k===j)return;N.mouse=[z,P.invert(z)],gh(this),N.start()}Qa(B),N.wheel=setTimeout(G,b),N.zoom("mouse",n(O(T(P,j),N.mouse[0],N.mouse[1]),N.extent,l));function G(){N.wheel=null,N.end()}}function U(B,...V){if(y||!t.apply(this,arguments))return;var N=B.currentTarget,P=_(this,V,!0).event(B),j=_n(B.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",ee,!0),z=ni(B,N),G=B.clientX,D=B.clientY;NA(B.view),wm(B),P.mouse=[z,this.__zoom.invert(z)],gh(this),P.start();function H(ie){if(Qa(ie),!P.moved){var ce=ie.clientX-G,he=ie.clientY-D;P.moved=ce*ce+he*he>S}P.event(ie).zoom("mouse",n(O(P.that.__zoom,P.mouse[0]=ni(ie,N),P.mouse[1]),P.extent,l))}function ee(ie){j.on("mousemove.zoom mouseup.zoom",null),DA(ie.view,P.moved),Qa(ie),P.event(ie).end()}}function ne(B,...V){if(t.apply(this,arguments)){var N=this.__zoom,P=ni(B.changedTouches?B.changedTouches[0]:B,this),j=N.invert(P),z=N.k*(B.shiftKey?.5:2),G=n(O(T(N,z),P,j),e.apply(this,V),l);Qa(B),c>0?_n(this).transition().duration(c).call(L,G,P,B):_n(this).call(k.transform,G,P,B)}}function $(B,...V){if(t.apply(this,arguments)){var N=B.touches,P=N.length,j=_(this,V,B.changedTouches.length===P).event(B),z,G,D,H;for(wm(B),G=0;G<P;++G)D=N[G],H=ni(D,this),H=[H,this.__zoom.invert(H),D.identifier],j.touch0?!j.touch1&&j.touch0[2]!==H[2]&&(j.touch1=H,j.taps=0):(j.touch0=H,z=!0,j.taps=1+!!p);p&&(p=clearTimeout(p)),z&&(j.taps<2&&(g=H[0],p=setTimeout(function(){p=null},v)),gh(this),j.start())}}function Q(B,...V){if(this.__zooming){var N=_(this,V).event(B),P=B.changedTouches,j=P.length,z,G,D,H;for(Qa(B),z=0;z<j;++z)G=P[z],D=ni(G,this),N.touch0&&N.touch0[2]===G.identifier?N.touch0[0]=D:N.touch1&&N.touch1[2]===G.identifier&&(N.touch1[0]=D);if(G=N.that.__zoom,N.touch1){var ee=N.touch0[0],ie=N.touch0[1],ce=N.touch1[0],he=N.touch1[1],fe=(fe=ce[0]-ee[0])*fe+(fe=ce[1]-ee[1])*fe,ue=(ue=he[0]-ie[0])*ue+(ue=he[1]-ie[1])*ue;G=T(G,Math.sqrt(fe/ue)),D=[(ee[0]+ce[0])/2,(ee[1]+ce[1])/2],H=[(ie[0]+he[0])/2,(ie[1]+he[1])/2]}else if(N.touch0)D=N.touch0[0],H=N.touch0[1];else return;N.zoom("touch",n(O(G,D,H),N.extent,l))}}function Z(B,...V){if(this.__zooming){var N=_(this,V).event(B),P=B.changedTouches,j=P.length,z,G;for(wm(B),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),z=0;z<j;++z)G=P[z],N.touch0&&N.touch0[2]===G.identifier?delete N.touch0:N.touch1&&N.touch1[2]===G.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(G=ni(G,this),Math.hypot(g[0]-G[0],g[1]-G[1])<A)){var D=_n(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return k.wheelDelta=function(B){return arguments.length?(i=typeof B=="function"?B:Bf(+B),k):i},k.filter=function(B){return arguments.length?(t=typeof B=="function"?B:Bf(!!B),k):t},k.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:Bf(!!B),k):s},k.extent=function(B){return arguments.length?(e=typeof B=="function"?B:Bf([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),k):e},k.scaleExtent=function(B){return arguments.length?(o[0]=+B[0],o[1]=+B[1],k):[o[0],o[1]]},k.translateExtent=function(B){return arguments.length?(l[0][0]=+B[0][0],l[1][0]=+B[1][0],l[0][1]=+B[0][1],l[1][1]=+B[1][1],k):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},k.constrain=function(B){return arguments.length?(n=B,k):n},k.duration=function(B){return arguments.length?(c=+B,k):c},k.interpolate=function(B){return arguments.length?(f=B,k):f},k.on=function(){var B=h.on.apply(h,arguments);return B===h?k:B},k.clickDistance=function(B){return arguments.length?(S=(B=+B)*B,k):Math.sqrt(S)},k.tapDistance=function(B){return arguments.length?(A=+B,k):A},k}const Ri={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},vc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],FA=["Enter"," ","Escape"],GA={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Tl;(function(t){t.Strict="strict",t.Loose="loose"})(Tl||(Tl={}));var Jr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Jr||(Jr={}));var bc;(function(t){t.Partial="partial",t.Full="full"})(bc||(bc={}));const WA={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Js;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Js||(Js={}));var eo;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(eo||(eo={}));var be;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(be||(be={}));const sw={[be.Left]:be.Right,[be.Right]:be.Left,[be.Top]:be.Bottom,[be.Bottom]:be.Top};function KA(t){return t===null?null:t?"valid":"invalid"}const ZA=t=>"id"in t&&"source"in t&&"target"in t,K4=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Xy=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Gc=(t,e=[0,0])=>{const{width:n,height:i}=vs(t),s=t.origin??e,o=n*s[0],l=i*s[1];return{x:t.position.x-o,y:t.position.y-l}},Z4=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,s)=>{const o=typeof s=="string";let l=!e.nodeLookup&&!o?s:void 0;e.nodeLookup&&(l=o?e.nodeLookup.get(s):Xy(s)?s:e.nodeLookup.get(s.id));const c=l?_h(l,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return kd(i,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Od(n)},Wc=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(s=>{(e.filter===void 0||e.filter(s))&&(n=kd(n,_h(s)),i=!0)}),i?Od(n):{x:0,y:0,width:0,height:0}},Fy=(t,e,[n,i,s]=[0,0,1],o=!1,l=!1)=>{const c={...Zc(e,[n,i,s]),width:e.width/s,height:e.height/s},f=[];for(const h of t.values()){const{measured:p,selectable:g=!0,hidden:y=!1}=h;if(l&&!g||y)continue;const v=p.width??h.width??h.initialWidth??null,b=p.height??h.height??h.initialHeight??null,S=Sc(c,Dl(h)),A=(v??0)*(b??0),k=o&&S>0;(!h.internals.handleBounds||k||S>=A||h.dragging)&&f.push(h)}return f},J4=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function e_(t,e){const n=new Map,i=e?.nodes?new Set(e.nodes.map(s=>s.id)):null;return t.forEach(s=>{s.measured.width&&s.measured.height&&(e?.includeHiddenNodes||!s.hidden)&&(!i||i.has(s.id))&&n.set(s.id,s)}),n}async function t_({nodes:t,width:e,height:n,panZoom:i,minZoom:s,maxZoom:o},l){if(t.size===0)return Promise.resolve(!0);const c=e_(t,l),f=Wc(c),h=Gy(f,e,n,l?.minZoom??s,l?.maxZoom??o,l?.padding??.1);return await i.setViewport(h,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)}function JA({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:s,onError:o}){const l=n.get(t),c=l.parentId?n.get(l.parentId):void 0,{x:f,y:h}=c?c.internals.positionAbsolute:{x:0,y:0},p=l.origin??i;let g=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!c)o?.("005",Ri.error005());else{const v=c.measured.width,b=c.measured.height;v&&b&&(g=[[f,h],[f+v,h+b]])}else c&&Rl(l.extent)&&(g=[[l.extent[0][0]+f,l.extent[0][1]+h],[l.extent[1][0]+f,l.extent[1][1]+h]]);const y=Rl(g)?oo(e,g,l.measured):e;return(l.measured.width===void 0||l.measured.height===void 0)&&o?.("015",Ri.error015()),{position:{x:y.x-f+(l.measured.width??0)*p[0],y:y.y-h+(l.measured.height??0)*p[1]},positionAbsolute:y}}async function n_({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:s}){const o=new Set(t.map(y=>y.id)),l=[];for(const y of n){if(y.deletable===!1)continue;const v=o.has(y.id),b=!v&&y.parentId&&l.find(S=>S.id===y.parentId);(v||b)&&l.push(y)}const c=new Set(e.map(y=>y.id)),f=i.filter(y=>y.deletable!==!1),p=J4(l,f);for(const y of f)c.has(y.id)&&!p.find(b=>b.id===y.id)&&p.push(y);if(!s)return{edges:p,nodes:l};const g=await s({nodes:l,edges:p});return typeof g=="boolean"?g?{edges:p,nodes:l}:{edges:[],nodes:[]}:g}const Nl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),oo=(t={x:0,y:0},e,n)=>({x:Nl(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Nl(t.y,e[0][1],e[1][1]-(n?.height??0))});function ek(t,e,n){const{width:i,height:s}=vs(n),{x:o,y:l}=n.internals.positionAbsolute;return oo(t,[[o,l],[o+i,l+s]],e)}const rw=(t,e,n)=>t<e?Nl(Math.abs(t-e),1,e)/e:t>n?-Nl(Math.abs(t-n),1,e)/e:0,tk=(t,e,n=15,i=40)=>{const s=rw(t.x,i,e.width-i)*n,o=rw(t.y,i,e.height-i)*n;return[s,o]},kd=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),k0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),Od=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Dl=(t,e=[0,0])=>{const{x:n,y:i}=Xy(t)?t.internals.positionAbsolute:Gc(t,e);return{x:n,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},_h=(t,e=[0,0])=>{const{x:n,y:i}=Xy(t)?t.internals.positionAbsolute:Gc(t,e);return{x:n,y:i,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},nk=(t,e)=>Od(kd(k0(t),k0(e))),Sc=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},ow=t=>ri(t.width)&&ri(t.height)&&ri(t.x)&&ri(t.y),ri=t=>!isNaN(t)&&isFinite(t),i_=(t,e)=>{},Kc=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Zc=({x:t,y:e},[n,i,s],o=!1,l=[1,1])=>{const c={x:(t-n)/s,y:(e-i)/s};return o?Kc(c,l):c},Lh=({x:t,y:e},[n,i,s])=>({x:t*s+n,y:e*s+i});function nl(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function s_(t,e,n){if(typeof t=="string"||typeof t=="number"){const i=nl(t,n),s=nl(t,e);return{top:i,right:s,bottom:i,left:s,x:s*2,y:i*2}}if(typeof t=="object"){const i=nl(t.top??t.y??0,n),s=nl(t.bottom??t.y??0,n),o=nl(t.left??t.x??0,e),l=nl(t.right??t.x??0,e);return{top:i,right:l,bottom:s,left:o,x:o+l,y:i+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function r_(t,e,n,i,s,o){const{x:l,y:c}=Lh(t,[e,n,i]),{x:f,y:h}=Lh({x:t.x+t.width,y:t.y+t.height},[e,n,i]),p=s-f,g=o-h;return{left:Math.floor(l),top:Math.floor(c),right:Math.floor(p),bottom:Math.floor(g)}}const Gy=(t,e,n,i,s,o)=>{const l=s_(o,e,n),c=(e-l.x)/t.width,f=(n-l.y)/t.height,h=Math.min(c,f),p=Nl(h,i,s),g=t.x+t.width/2,y=t.y+t.height/2,v=e/2-g*p,b=n/2-y*p,S=r_(t,v,b,p,e,n),A={left:Math.min(S.left-l.left,0),top:Math.min(S.top-l.top,0),right:Math.min(S.right-l.right,0),bottom:Math.min(S.bottom-l.bottom,0)};return{x:v-A.left+A.right,y:b-A.top+A.bottom,zoom:p}},wc=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Rl(t){return t!=null&&t!=="parent"}function vs(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function ik(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function sk(t,e={width:0,height:0},n,i,s){const o={...t},l=i.get(n);if(l){const c=l.origin||s;o.x+=l.internals.positionAbsolute.x-(e.width??0)*c[0],o.y+=l.internals.positionAbsolute.y-(e.height??0)*c[1]}return o}function lw(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function o_(){let t,e;return{promise:new Promise((i,s)=>{t=i,e=s}),resolve:t,reject:e}}function l_(t){return{...GA,...t||{}}}function rc(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i,containerBounds:s}){const{x:o,y:l}=oi(t),c=Zc({x:o-(s?.left??0),y:l-(s?.top??0)},i),{x:f,y:h}=n?Kc(c,e):c;return{xSnapped:f,ySnapped:h,...c}}const Wy=t=>({width:t.offsetWidth,height:t.offsetHeight}),rk=t=>t?.getRootNode?.()||window?.document,a_=["INPUT","SELECT","TEXTAREA"];function ok(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:a_.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const lk=t=>"clientX"in t,oi=(t,e)=>{const n=lk(t),i=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:s-(e?.top??0)}},aw=(t,e,n,i,s)=>{const o=e.querySelectorAll(`.${t}`);return!o||!o.length?null:Array.from(o).map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:t,nodeId:s,position:l.getAttribute("data-handlepos"),x:(c.left-n.left)/i,y:(c.top-n.top)/i,...Wy(l)}})};function ak({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c}){const f=t*.125+s*.375+l*.375+n*.125,h=e*.125+o*.375+c*.375+i*.125,p=Math.abs(f-t),g=Math.abs(h-e);return[f,h,p,g]}function zf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function cw({pos:t,x1:e,y1:n,x2:i,y2:s,c:o}){switch(t){case be.Left:return[e-zf(e-i,o),n];case be.Right:return[e+zf(i-e,o),n];case be.Top:return[e,n-zf(n-s,o)];case be.Bottom:return[e,n+zf(s-n,o)]}}function Ky({sourceX:t,sourceY:e,sourcePosition:n=be.Bottom,targetX:i,targetY:s,targetPosition:o=be.Top,curvature:l=.25}){const[c,f]=cw({pos:n,x1:t,y1:e,x2:i,y2:s,c:l}),[h,p]=cw({pos:o,x1:i,y1:s,x2:t,y2:e,c:l}),[g,y,v,b]=ak({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${t},${e} C${c},${f} ${h},${p} ${i},${s}`,g,y,v,b]}function ck({sourceX:t,sourceY:e,targetX:n,targetY:i}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,l=Math.abs(i-e)/2,c=i<e?i+l:i-l;return[o,c,s,l]}function c_({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:s=!1,zIndexMode:o="basic"}){if(o==="manual")return i;const l=s&&n?i+1e3:i,c=Math.max(t.parentId||s&&t.selected?t.internals.z:0,e.parentId||s&&e.selected?e.internals.z:0);return l+c}function u_({sourceNode:t,targetNode:e,width:n,height:i,transform:s}){const o=kd(_h(t),_h(e));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:i/s[2]};return Sc(l,Od(o))>0}const f_=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,h_=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),d_=(t,e,n={})=>{if(!t.source||!t.target)return e;const i=n.getEdgeId||f_;let s;return ZA(t)?s={...t}:s={...t,id:i(t)},h_(s,e)?e:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,e.concat(s))};function uk({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[s,o,l,c]=ck({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,s,o,l,c]}const uw={[be.Left]:{x:-1,y:0},[be.Right]:{x:1,y:0},[be.Top]:{x:0,y:-1},[be.Bottom]:{x:0,y:1}},p_=({source:t,sourcePosition:e=be.Bottom,target:n})=>e===be.Left||e===be.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},fw=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function g_({source:t,sourcePosition:e=be.Bottom,target:n,targetPosition:i=be.Top,center:s,offset:o,stepPosition:l}){const c=uw[e],f=uw[i],h={x:t.x+c.x*o,y:t.y+c.y*o},p={x:n.x+f.x*o,y:n.y+f.y*o},g=p_({source:h,sourcePosition:e,target:p}),y=g.x!==0?"x":"y",v=g[y];let b=[],S,A;const k={x:0,y:0},T={x:0,y:0},[,,O,M]=ck({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[y]*f[y]===-1){y==="x"?(S=s.x??h.x+(p.x-h.x)*l,A=s.y??(h.y+p.y)/2):(S=s.x??(h.x+p.x)/2,A=s.y??h.y+(p.y-h.y)*l);const _=[{x:S,y:h.y},{x:S,y:p.y}],R=[{x:h.x,y:A},{x:p.x,y:A}];c[y]===v?b=y==="x"?_:R:b=y==="x"?R:_}else{const _=[{x:h.x,y:p.y}],R=[{x:p.x,y:h.y}];if(y==="x"?b=c.x===v?R:_:b=c.y===v?_:R,e===i){const Q=Math.abs(t[y]-n[y]);if(Q<=o){const Z=Math.min(o-1,o-Q);c[y]===v?k[y]=(h[y]>t[y]?-1:1)*Z:T[y]=(p[y]>n[y]?-1:1)*Z}}if(e!==i){const Q=y==="x"?"y":"x",Z=c[y]===f[Q],B=h[Q]>p[Q],V=h[Q]<p[Q];(c[y]===1&&(!Z&&B||Z&&V)||c[y]!==1&&(!Z&&V||Z&&B))&&(b=y==="x"?_:R)}const X={x:h.x+k.x,y:h.y+k.y},U={x:p.x+T.x,y:p.y+T.y},ne=Math.max(Math.abs(X.x-b[0].x),Math.abs(U.x-b[0].x)),$=Math.max(Math.abs(X.y-b[0].y),Math.abs(U.y-b[0].y));ne>=$?(S=(X.x+U.x)/2,A=b[0].y):(S=b[0].x,A=(X.y+U.y)/2)}return[[t,{x:h.x+k.x,y:h.y+k.y},...b,{x:p.x+T.x,y:p.y+T.y},n],S,A,O,M]}function m_(t,e,n,i){const s=Math.min(fw(t,e)/2,fw(e,n)/2,i),{x:o,y:l}=e;if(t.x===o&&o===n.x||t.y===l&&l===n.y)return`L${o} ${l}`;if(t.y===l){const h=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+s*h},${l}Q ${o},${l} ${o},${l+s*p}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${l+s*f}Q ${o},${l} ${o+s*c},${l}`}function O0({sourceX:t,sourceY:e,sourcePosition:n=be.Bottom,targetX:i,targetY:s,targetPosition:o=be.Top,borderRadius:l=5,centerX:c,centerY:f,offset:h=20,stepPosition:p=.5}){const[g,y,v,b,S]=g_({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:s},targetPosition:o,center:{x:c,y:f},offset:h,stepPosition:p});return[g.reduce((k,T,O)=>{let M="";return O>0&&O<g.length-1?M=m_(g[O-1],T,g[O+1],l):M=`${O===0?"M":"L"}${T.x} ${T.y}`,k+=M,k},""),y,v,b,S]}function hw(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function y_(t){const{sourceNode:e,targetNode:n}=t;if(!hw(e)||!hw(n))return null;const i=e.internals.handleBounds||dw(e.handles),s=n.internals.handleBounds||dw(n.handles),o=pw(i?.source??[],t.sourceHandle),l=pw(t.connectionMode===Tl.Strict?s?.target??[]:(s?.target??[]).concat(s?.source??[]),t.targetHandle);if(!o||!l)return t.onError?.("008",Ri.error008(o?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const c=o?.position||be.Bottom,f=l?.position||be.Top,h=lo(e,o,c),p=lo(n,l,f);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:c,targetPosition:f}}function dw(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function lo(t,e,n=be.Left,i=!1){const s=(e?.x??0)+t.internals.positionAbsolute.x,o=(e?.y??0)+t.internals.positionAbsolute.y,{width:l,height:c}=e??vs(t);if(i)return{x:s+l/2,y:o+c/2};switch(e?.position??n){case be.Top:return{x:s+l/2,y:o};case be.Right:return{x:s+l,y:o+c/2};case be.Bottom:return{x:s+l/2,y:o+c};case be.Left:return{x:s,y:o+c/2}}}function pw(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function E0(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function x_(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:s}){const o=new Set;return t.reduce((l,c)=>([c.markerStart||i,c.markerEnd||s].forEach(f=>{if(f&&typeof f=="object"){const h=E0(f,e);o.has(h)||(l.push({id:h,color:f.color||n,...f}),o.add(h))}}),l),[]).sort((l,c)=>l.id.localeCompare(c.id))}const fk=1e3,v_=10,Zy={nodeOrigin:[0,0],nodeExtent:vc,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},b_={...Zy,checkEquality:!0};function Jy(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function S_(t,e,n){const i=Jy(Zy,n);for(const s of t.values())if(s.parentId)tx(s,t,e,i);else{const o=Gc(s,i.nodeOrigin),l=Rl(s.extent)?s.extent:i.nodeExtent,c=oo(o,l,vs(s));s.internals.positionAbsolute=c}}function w_(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],i=[];for(const s of t.handles){const o={id:s.id,width:s.width??1,height:s.height??1,nodeId:t.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?n.push(o):s.type==="target"&&i.push(o)}return{source:n,target:i}}function ex(t){return t==="manual"}function M0(t,e,n,i={}){const s=Jy(b_,i),o={i:0},l=new Map(e),c=s?.elevateNodesOnSelect&&!ex(s.zIndexMode)?fk:0;let f=t.length>0;e.clear(),n.clear();for(const h of t){let p=l.get(h.id);if(s.checkEquality&&h===p?.internals.userNode)e.set(h.id,p);else{const g=Gc(h,s.nodeOrigin),y=Rl(h.extent)?h.extent:s.nodeExtent,v=oo(g,y,vs(h));p={...s.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:v,handleBounds:w_(h,p),z:hk(h,c,s.zIndexMode),userNode:h}},e.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(f=!1),h.parentId&&tx(p,e,n,i,o)}return f}function C_(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function tx(t,e,n,i,s){const{elevateNodesOnSelect:o,nodeOrigin:l,nodeExtent:c,zIndexMode:f}=Jy(Zy,i),h=t.parentId,p=e.get(h);if(!p){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}C_(t,n),s&&!p.parentId&&p.internals.rootParentIndex===void 0&&f==="auto"&&(p.internals.rootParentIndex=++s.i,p.internals.z=p.internals.z+s.i*v_),s&&p.internals.rootParentIndex!==void 0&&(s.i=p.internals.rootParentIndex);const g=o&&!ex(f)?fk:0,{x:y,y:v,z:b}=A_(t,p,l,c,g,f),{positionAbsolute:S}=t.internals,A=y!==S.x||v!==S.y;(A||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:A?{x:y,y:v}:S,z:b}})}function hk(t,e,n){const i=ri(t.zIndex)?t.zIndex:0;return ex(n)?i:i+(t.selected?e:0)}function A_(t,e,n,i,s,o){const{x:l,y:c}=e.internals.positionAbsolute,f=vs(t),h=Gc(t,n),p=Rl(t.extent)?oo(h,t.extent,f):h;let g=oo({x:l+p.x,y:c+p.y},i,f);t.extent==="parent"&&(g=ek(g,f,e));const y=hk(t,s,o),v=e.internals.z??0;return{x:g.x,y:g.y,z:v>=y?v+1:y}}function nx(t,e,n,i=[0,0]){const s=[],o=new Map;for(const l of t){const c=e.get(l.parentId);if(!c)continue;const f=o.get(l.parentId)?.expandedRect??Dl(c),h=nk(f,l.rect);o.set(l.parentId,{expandedRect:h,parent:c})}return o.size>0&&o.forEach(({expandedRect:l,parent:c},f)=>{const h=c.internals.positionAbsolute,p=vs(c),g=c.origin??i,y=l.x<h.x?Math.round(Math.abs(h.x-l.x)):0,v=l.y<h.y?Math.round(Math.abs(h.y-l.y)):0,b=Math.max(p.width,Math.round(l.width)),S=Math.max(p.height,Math.round(l.height)),A=(b-p.width)*g[0],k=(S-p.height)*g[1];(y>0||v>0||A||k)&&(s.push({id:f,type:"position",position:{x:c.position.x-y+A,y:c.position.y-v+k}}),n.get(f)?.forEach(T=>{t.some(O=>O.id===T.id)||s.push({id:T.id,type:"position",position:{x:T.position.x+y,y:T.position.y+v}})})),(p.width<l.width||p.height<l.height||y||v)&&s.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:b+(y?g[0]*y-A:0),height:S+(v?g[1]*v-k:0)}})}),s}function k_(t,e,n,i,s,o,l){const c=i?.querySelector(".xyflow__viewport");let f=!1;if(!c)return{changes:[],updatedInternals:f};const h=[],p=window.getComputedStyle(c),{m22:g}=new window.DOMMatrixReadOnly(p.transform),y=[];for(const v of t.values()){const b=e.get(v.id);if(!b)continue;if(b.hidden){e.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),f=!0;continue}const S=Wy(v.nodeElement),A=b.measured.width!==S.width||b.measured.height!==S.height;if(!!(S.width&&S.height&&(A||!b.internals.handleBounds||v.force))){const T=v.nodeElement.getBoundingClientRect(),O=Rl(b.extent)?b.extent:o;let{positionAbsolute:M}=b.internals;b.parentId&&b.extent==="parent"?M=ek(M,S,e.get(b.parentId)):O&&(M=oo(M,O,S));const L={...b,measured:S,internals:{...b.internals,positionAbsolute:M,handleBounds:{source:aw("source",v.nodeElement,T,g,b.id),target:aw("target",v.nodeElement,T,g,b.id)}}};e.set(b.id,L),b.parentId&&tx(L,e,n,{nodeOrigin:s,zIndexMode:l}),f=!0,A&&(h.push({id:b.id,type:"dimensions",dimensions:S}),b.expandParent&&b.parentId&&y.push({id:b.id,parentId:b.parentId,rect:Dl(L,s)}))}}if(y.length>0){const v=nx(y,e,n,s);h.push(...v)}return{changes:h,updatedInternals:f}}async function O_({delta:t,panZoom:e,transform:n,translateExtent:i,width:s,height:o}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const l=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[s,o]],i),c=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(c)}function gw(t,e,n,i,s,o){let l=s;const c=i.get(l)||new Map;i.set(l,c.set(n,e)),l=`${s}-${t}`;const f=i.get(l)||new Map;if(i.set(l,f.set(n,e)),o){l=`${s}-${t}-${o}`;const h=i.get(l)||new Map;i.set(l,h.set(n,e))}}function dk(t,e,n){t.clear(),e.clear();for(const i of n){const{source:s,target:o,sourceHandle:l=null,targetHandle:c=null}=i,f={edgeId:i.id,source:s,target:o,sourceHandle:l,targetHandle:c},h=`${s}-${l}--${o}-${c}`,p=`${o}-${c}--${s}-${l}`;gw("source",f,p,t,s,l),gw("target",f,h,t,o,c),e.set(i.id,i)}}function pk(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:pk(n,e):!1}function mw(t,e,n){let i=t;do{if(i?.matches?.(e))return!0;if(i===n)return!1;i=i?.parentElement}while(i);return!1}function E_(t,e,n,i){const s=new Map;for(const[o,l]of t)if((l.selected||l.id===i)&&(!l.parentId||!pk(l,t))&&(l.draggable||e&&typeof l.draggable>"u")){const c=t.get(o);c&&s.set(o,{id:o,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return s}function Cm({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){const s=[];for(const[l,c]of e){const f=n.get(l)?.internals.userNode;f&&s.push({...f,position:c.position,dragging:i})}if(!t)return[s[0],s];const o=n.get(t)?.internals.userNode;return[o?{...o,position:e.get(t)?.position||o.position,dragging:i}:s[0],s]}function M_({dragItems:t,snapGrid:e,x:n,y:i}){const s=t.values().next().value;if(!s)return null;const o={x:n-s.distance.x,y:i-s.distance.y},l=Kc(o,e);return{x:l.x-o.x,y:l.y-o.y}}function T_({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:s}){let o={x:null,y:null},l=0,c=new Map,f=!1,h={x:0,y:0},p=null,g=!1,y=null,v=!1,b=!1,S=null;function A({noDragClassName:T,handleSelector:O,domNode:M,isSelectable:L,nodeId:_,nodeClickDistance:R=0}){y=_n(M);function X({x:Q,y:Z}){const{nodeLookup:B,nodeExtent:V,snapGrid:N,snapToGrid:P,nodeOrigin:j,onNodeDrag:z,onSelectionDrag:G,onError:D,updateNodePositions:H}=e();o={x:Q,y:Z};let ee=!1;const ie=c.size>1,ce=ie&&V?k0(Wc(c)):null,he=ie&&P?M_({dragItems:c,snapGrid:N,x:Q,y:Z}):null;for(const[fe,ue]of c){if(!B.has(fe))continue;let ge={x:Q-ue.distance.x,y:Z-ue.distance.y};P&&(ge=he?{x:Math.round(ge.x+he.x),y:Math.round(ge.y+he.y)}:Kc(ge,N));let De=null;if(ie&&V&&!ue.extent&&ce){const{positionAbsolute:Oe}=ue.internals,Pe=Oe.x-ce.x+V[0][0],We=Oe.x+ue.measured.width-ce.x2+V[1][0],Xe=Oe.y-ce.y+V[0][1],_t=Oe.y+ue.measured.height-ce.y2+V[1][1];De=[[Pe,Xe],[We,_t]]}const{position:Te,positionAbsolute:Ae}=JA({nodeId:fe,nextPosition:ge,nodeLookup:B,nodeExtent:De||V,nodeOrigin:j,onError:D});ee=ee||ue.position.x!==Te.x||ue.position.y!==Te.y,ue.position=Te,ue.internals.positionAbsolute=Ae}if(b=b||ee,!!ee&&(H(c,!0),S&&(i||z||!_&&G))){const[fe,ue]=Cm({nodeId:_,dragItems:c,nodeLookup:B});i?.(S,c,fe,ue),z?.(S,fe,ue),_||G?.(S,ue)}}async function U(){if(!p)return;const{transform:Q,panBy:Z,autoPanSpeed:B,autoPanOnNodeDrag:V}=e();if(!V){f=!1,cancelAnimationFrame(l);return}const[N,P]=tk(h,p,B);(N!==0||P!==0)&&(o.x=(o.x??0)-N/Q[2],o.y=(o.y??0)-P/Q[2],await Z({x:N,y:P})&&X(o)),l=requestAnimationFrame(U)}function ne(Q){const{nodeLookup:Z,multiSelectionActive:B,nodesDraggable:V,transform:N,snapGrid:P,snapToGrid:j,selectNodesOnDrag:z,onNodeDragStart:G,onSelectionDragStart:D,unselectNodesAndEdges:H}=e();g=!0,(!z||!L)&&!B&&_&&(Z.get(_)?.selected||H()),L&&z&&_&&t?.(_);const ee=rc(Q.sourceEvent,{transform:N,snapGrid:P,snapToGrid:j,containerBounds:p});if(o=ee,c=E_(Z,V,ee,_),c.size>0&&(n||G||!_&&D)){const[ie,ce]=Cm({nodeId:_,dragItems:c,nodeLookup:Z});n?.(Q.sourceEvent,c,ie,ce),G?.(Q.sourceEvent,ie,ce),_||D?.(Q.sourceEvent,ce)}}const $=RA().clickDistance(R).on("start",Q=>{const{domNode:Z,nodeDragThreshold:B,transform:V,snapGrid:N,snapToGrid:P}=e();p=Z?.getBoundingClientRect()||null,v=!1,b=!1,S=Q.sourceEvent,B===0&&ne(Q),o=rc(Q.sourceEvent,{transform:V,snapGrid:N,snapToGrid:P,containerBounds:p}),h=oi(Q.sourceEvent,p)}).on("drag",Q=>{const{autoPanOnNodeDrag:Z,transform:B,snapGrid:V,snapToGrid:N,nodeDragThreshold:P,nodeLookup:j}=e(),z=rc(Q.sourceEvent,{transform:B,snapGrid:V,snapToGrid:N,containerBounds:p});if(S=Q.sourceEvent,(Q.sourceEvent.type==="touchmove"&&Q.sourceEvent.touches.length>1||_&&!j.has(_))&&(v=!0),!v){if(!f&&Z&&g&&(f=!0,U()),!g){const G=oi(Q.sourceEvent,p),D=G.x-h.x,H=G.y-h.y;Math.sqrt(D*D+H*H)>P&&ne(Q)}(o.x!==z.xSnapped||o.y!==z.ySnapped)&&c&&g&&(h=oi(Q.sourceEvent,p),X(z))}}).on("end",Q=>{if(!(!g||v)&&(f=!1,g=!1,cancelAnimationFrame(l),c.size>0)){const{nodeLookup:Z,updateNodePositions:B,onNodeDragStop:V,onSelectionDragStop:N}=e();if(b&&(B(c,!1),b=!1),s||V||!_&&N){const[P,j]=Cm({nodeId:_,dragItems:c,nodeLookup:Z,dragging:!1});s?.(Q.sourceEvent,c,P,j),V?.(Q.sourceEvent,P,j),_||N?.(Q.sourceEvent,j)}}}).filter(Q=>{const Z=Q.target;return!Q.button&&(!T||!mw(Z,`.${T}`,M))&&(!O||mw(Z,O,M))});y.call($)}function k(){y?.on(".drag",null)}return{update:A,destroy:k}}function N_(t,e,n){const i=[],s={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const o of e.values())Sc(s,Dl(o))>0&&i.push(o);return i}const D_=250;function R_(t,e,n,i){let s=[],o=1/0;const l=N_(t,n,e+D_);for(const c of l){const f=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const h of f){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:p,y:g}=lo(c,h,h.position,!0),y=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(g-t.y,2));y>e||(y<o?(s=[{...h,x:p,y:g}],o=y):y===o&&s.push({...h,x:p,y:g}))}}if(!s.length)return null;if(s.length>1){const c=i.type==="source"?"target":"source";return s.find(f=>f.type===c)??s[0]}return s[0]}function gk(t,e,n,i,s,o=!1){const l=i.get(t);if(!l)return null;const c=s==="strict"?l.internals.handleBounds?.[e]:[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]],f=(n?c?.find(h=>h.id===n):c?.[0])??null;return f&&o?{...f,...lo(l,f,f.position,!0)}:f}function mk(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function __(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const yk=()=>!0;function L_(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:s,edgeUpdaterType:o,isTarget:l,domNode:c,nodeLookup:f,lib:h,autoPanOnConnect:p,flowId:g,panBy:y,cancelConnection:v,onConnectStart:b,onConnect:S,onConnectEnd:A,isValidConnection:k=yk,onReconnectEnd:T,updateConnection:O,getTransform:M,getFromHandle:L,autoPanSpeed:_,dragThreshold:R=1,handleDomNode:X}){const U=rk(t.target);let ne=0,$;const{x:Q,y:Z}=oi(t),B=mk(o,X),V=c?.getBoundingClientRect();let N=!1;if(!V||!B)return;const P=gk(s,B,i,f,e);if(!P)return;let j=oi(t,V),z=!1,G=null,D=!1,H=null;function ee(){if(!p||!V)return;const[Te,Ae]=tk(j,V,_);y({x:Te,y:Ae}),ne=requestAnimationFrame(ee)}const ie={...P,nodeId:s,type:B,position:P.position},ce=f.get(s);let fe={inProgress:!0,isValid:null,from:lo(ce,ie,be.Left,!0),fromHandle:ie,fromPosition:ie.position,fromNode:ce,to:j,toHandle:null,toPosition:sw[ie.position],toNode:null,pointer:j};function ue(){N=!0,O(fe),b?.(t,{nodeId:s,handleId:i,handleType:B})}R===0&&ue();function ge(Te){if(!N){const{x:_t,y:Wn}=oi(Te),wn=_t-Q,Kn=Wn-Z;if(!(wn*wn+Kn*Kn>R*R))return;ue()}if(!L()||!ie){De(Te);return}const Ae=M();j=oi(Te,V),$=R_(Zc(j,Ae,!1,[1,1]),n,f,ie),z||(ee(),z=!0);const Oe=xk(Te,{handle:$,connectionMode:e,fromNodeId:s,fromHandleId:i,fromType:l?"target":"source",isValidConnection:k,doc:U,lib:h,flowId:g,nodeLookup:f});H=Oe.handleDomNode,G=Oe.connection,D=__(!!$,Oe.isValid);const Pe=f.get(s),We=Pe?lo(Pe,ie,be.Left,!0):fe.from,Xe={...fe,from:We,isValid:D,to:Oe.toHandle&&D?Lh({x:Oe.toHandle.x,y:Oe.toHandle.y},Ae):j,toHandle:Oe.toHandle,toPosition:D&&Oe.toHandle?Oe.toHandle.position:sw[ie.position],toNode:Oe.toHandle?f.get(Oe.toHandle.nodeId):null,pointer:j};O(Xe),fe=Xe}function De(Te){if(!("touches"in Te&&Te.touches.length>0)){if(N){($||H)&&G&&D&&S?.(G);const{inProgress:Ae,...Oe}=fe,Pe={...Oe,toPosition:fe.toHandle?fe.toPosition:null};A?.(Te,Pe),o&&T?.(Te,Pe)}v(),cancelAnimationFrame(ne),z=!1,D=!1,G=null,H=null,U.removeEventListener("mousemove",ge),U.removeEventListener("mouseup",De),U.removeEventListener("touchmove",ge),U.removeEventListener("touchend",De)}}U.addEventListener("mousemove",ge),U.addEventListener("mouseup",De),U.addEventListener("touchmove",ge),U.addEventListener("touchend",De)}function xk(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:s,fromType:o,doc:l,lib:c,flowId:f,isValidConnection:h=yk,nodeLookup:p}){const g=o==="target",y=e?l.querySelector(`.${c}-flow__handle[data-id="${f}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:v,y:b}=oi(t),S=l.elementFromPoint(v,b),A=S?.classList.contains(`${c}-flow__handle`)?S:y,k={handleDomNode:A,isValid:!1,connection:null,toHandle:null};if(A){const T=mk(void 0,A),O=A.getAttribute("data-nodeid"),M=A.getAttribute("data-handleid"),L=A.classList.contains("connectable"),_=A.classList.contains("connectableend");if(!O||!T)return k;const R={source:g?O:i,sourceHandle:g?M:s,target:g?i:O,targetHandle:g?s:M};k.connection=R;const U=L&&_&&(n===Tl.Strict?g&&T==="source"||!g&&T==="target":O!==i||M!==s);k.isValid=U&&h(R),k.toHandle=gk(O,T,M,p,n,!0)}return k}const T0={onPointerDown:L_,isValid:xk};function B_({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const s=_n(t);function o({translateExtent:c,width:f,height:h,zoomStep:p=1,pannable:g=!0,zoomable:y=!0,inversePan:v=!1}){const b=O=>{if(O.sourceEvent.type!=="wheel"||!e)return;const M=n(),L=O.sourceEvent.ctrlKey&&wc()?10:1,_=-O.sourceEvent.deltaY*(O.sourceEvent.deltaMode===1?.05:O.sourceEvent.deltaMode?1:.002)*p,R=M[2]*Math.pow(2,_*L);e.scaleTo(R)};let S=[0,0];const A=O=>{(O.sourceEvent.type==="mousedown"||O.sourceEvent.type==="touchstart")&&(S=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY])},k=O=>{const M=n();if(O.sourceEvent.type!=="mousemove"&&O.sourceEvent.type!=="touchmove"||!e)return;const L=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY],_=[L[0]-S[0],L[1]-S[1]];S=L;const R=i()*Math.max(M[2],Math.log(M[2]))*(v?-1:1),X={x:M[0]-_[0]*R,y:M[1]-_[1]*R},U=[[0,0],[f,h]];e.setViewportConstrained({x:X.x,y:X.y,zoom:M[2]},U,c)},T=XA().on("start",A).on("zoom",g?k:null).on("zoom.wheel",y?b:null);s.call(T,{})}function l(){s.on("zoom",null)}return{update:o,destroy:l,pointer:ni}}const Ed=t=>({x:t.x,y:t.y,zoom:t.k}),Am=({x:t,y:e,zoom:n})=>Ad.translate(t,e).scale(n),cl=(t,e)=>t.target.closest(`.${e}`),vk=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),z_=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,km=(t,e=0,n=z_,i=()=>{})=>{const s=typeof e=="number"&&e>0;return s||i(),s?t.transition().duration(e).ease(n).on("end",i):t},bk=t=>{const e=t.ctrlKey&&wc()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function P_({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:l,onPanZoomStart:c,onPanZoom:f,onPanZoomEnd:h}){return p=>{if(cl(p,e))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const g=n.property("__zoom").k||1;if(p.ctrlKey&&l){const A=ni(p),k=bk(p),T=g*Math.pow(2,k);i.scaleTo(n,T,A,p);return}const y=p.deltaMode===1?20:1;let v=s===Jr.Vertical?0:p.deltaX*y,b=s===Jr.Horizontal?0:p.deltaY*y;!wc()&&p.shiftKey&&s!==Jr.Vertical&&(v=p.deltaY*y,b=0),i.translateBy(n,-(v/g)*o,-(b/g)*o,{internal:!0});const S=Ed(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(f?.(p,S),t.panScrollTimeout=setTimeout(()=>{h?.(p,S),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,c?.(p,S))}}function H_({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,s){const o=i.type==="wheel",l=!e&&o&&!i.ctrlKey,c=cl(i,t);if(i.ctrlKey&&o&&c&&i.preventDefault(),l||c)return null;i.preventDefault(),n.call(this,i,s)}}function j_({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{if(i.sourceEvent?.internal)return;const s=Ed(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=s,i.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(i.sourceEvent,s)}}function I_({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:s}){return o=>{t.usedRightMouseButton=!!(n&&vk(e,t.mouseButton??0)),o.sourceEvent?.sync||i([o.transform.x,o.transform.y,o.transform.k]),s&&!o.sourceEvent?.internal&&s?.(o.sourceEvent,Ed(o.transform))}}function V_({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:s,onPaneContextMenu:o}){return l=>{if(!l.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,o&&vk(e,t.mouseButton??0)&&!t.usedRightMouseButton&&l.sourceEvent&&o(l.sourceEvent),t.usedRightMouseButton=!1,i(!1),s)){const c=Ed(l.transform);t.prevViewport=c,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{s?.(l.sourceEvent,c)},n?150:0)}}}function U_({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:l,noWheelClassName:c,noPanClassName:f,lib:h,connectionInProgress:p}){return g=>{const y=t||e,v=n&&g.ctrlKey,b=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(cl(g,`${h}-flow__node`)||cl(g,`${h}-flow__edge`)))return!0;if(!i&&!y&&!s&&!o&&!n||l||p&&!b||cl(g,c)&&b||cl(g,f)&&(!b||s&&b&&!t)||!n&&g.ctrlKey&&b)return!1;if(!n&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!y&&!s&&!v&&b||!i&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(i)&&!i.includes(g.button)&&g.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||b)&&S}}function $_({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),g=XA().scaleExtent([e,n]).translateExtent(i),y=_n(t).call(g);T({x:s.x,y:s.y,zoom:Nl(s.zoom,e,n)},[[0,0],[p.width,p.height]],i);const v=y.on("wheel.zoom"),b=y.on("dblclick.zoom");g.wheelDelta(bk);function S($,Q){return y?new Promise(Z=>{g?.interpolate(Q?.interpolate==="linear"?sc:hh).transform(km(y,Q?.duration,Q?.ease,()=>Z(!0)),$)}):Promise.resolve(!1)}function A({noWheelClassName:$,noPanClassName:Q,onPaneContextMenu:Z,userSelectionActive:B,panOnScroll:V,panOnDrag:N,panOnScrollMode:P,panOnScrollSpeed:j,preventScrolling:z,zoomOnPinch:G,zoomOnScroll:D,zoomOnDoubleClick:H,zoomActivationKeyPressed:ee,lib:ie,onTransformChange:ce,connectionInProgress:he,paneClickDistance:fe,selectionOnDrag:ue}){B&&!h.isZoomingOrPanning&&k();const ge=V&&!ee&&!B;g.clickDistance(ue?1/0:!ri(fe)||fe<0?0:fe);const De=ge?P_({zoomPanValues:h,noWheelClassName:$,d3Selection:y,d3Zoom:g,panOnScrollMode:P,panOnScrollSpeed:j,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:c}):H_({noWheelClassName:$,preventScrolling:z,d3ZoomHandler:v});if(y.on("wheel.zoom",De,{passive:!1}),!B){const Ae=j_({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:l});g.on("start",Ae);const Oe=I_({zoomPanValues:h,panOnDrag:N,onPaneContextMenu:!!Z,onPanZoom:o,onTransformChange:ce});g.on("zoom",Oe);const Pe=V_({zoomPanValues:h,panOnDrag:N,panOnScroll:V,onPaneContextMenu:Z,onPanZoomEnd:c,onDraggingChange:f});g.on("end",Pe)}const Te=U_({zoomActivationKeyPressed:ee,panOnDrag:N,zoomOnScroll:D,panOnScroll:V,zoomOnDoubleClick:H,zoomOnPinch:G,userSelectionActive:B,noPanClassName:Q,noWheelClassName:$,lib:ie,connectionInProgress:he});g.filter(Te),H?y.on("dblclick.zoom",b):y.on("dblclick.zoom",null)}function k(){g.on("zoom",null)}async function T($,Q,Z){const B=Am($),V=g?.constrain()(B,Q,Z);return V&&await S(V),new Promise(N=>N(V))}async function O($,Q){const Z=Am($);return await S(Z,Q),new Promise(B=>B(Z))}function M($){if(y){const Q=Am($),Z=y.property("__zoom");(Z.k!==$.zoom||Z.x!==$.x||Z.y!==$.y)&&g?.transform(y,Q,null,{sync:!0})}}function L(){const $=y?YA(y.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function _($,Q){return y?new Promise(Z=>{g?.interpolate(Q?.interpolate==="linear"?sc:hh).scaleTo(km(y,Q?.duration,Q?.ease,()=>Z(!0)),$)}):Promise.resolve(!1)}function R($,Q){return y?new Promise(Z=>{g?.interpolate(Q?.interpolate==="linear"?sc:hh).scaleBy(km(y,Q?.duration,Q?.ease,()=>Z(!0)),$)}):Promise.resolve(!1)}function X($){g?.scaleExtent($)}function U($){g?.translateExtent($)}function ne($){const Q=!ri($)||$<0?0:$;g?.clickDistance(Q)}return{update:A,destroy:k,setViewport:O,setViewportConstrained:T,getViewport:L,scaleTo:_,scaleBy:R,setScaleExtent:X,setTranslateExtent:U,syncViewport:M,setClickDistance:ne}}var _l;(function(t){t.Line="line",t.Handle="handle"})(_l||(_l={}));function q_({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:s,affectsY:o}){const l=t-e,c=n-i,f=[l>0?1:l<0?-1:0,c>0?1:c<0?-1:0];return l&&s&&(f[0]=f[0]*-1),c&&o&&(f[1]=f[1]*-1),f}function yw(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),s=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:s}}function Gs(t,e){return Math.max(0,e-t)}function Ws(t,e){return Math.max(0,t-e)}function Pf(t,e,n){return Math.max(0,e-t,t-n)}function xw(t,e){return t?!e:e}function Q_(t,e,n,i,s,o,l,c){let{affectsX:f,affectsY:h}=e;const{isHorizontal:p,isVertical:g}=e,y=p&&g,{xSnapped:v,ySnapped:b}=n,{minWidth:S,maxWidth:A,minHeight:k,maxHeight:T}=i,{x:O,y:M,width:L,height:_,aspectRatio:R}=t;let X=Math.floor(p?v-t.pointerX:0),U=Math.floor(g?b-t.pointerY:0);const ne=L+(f?-X:X),$=_+(h?-U:U),Q=-o[0]*L,Z=-o[1]*_;let B=Pf(ne,S,A),V=Pf($,k,T);if(l){let j=0,z=0;f&&X<0?j=Gs(O+X+Q,l[0][0]):!f&&X>0&&(j=Ws(O+ne+Q,l[1][0])),h&&U<0?z=Gs(M+U+Z,l[0][1]):!h&&U>0&&(z=Ws(M+$+Z,l[1][1])),B=Math.max(B,j),V=Math.max(V,z)}if(c){let j=0,z=0;f&&X>0?j=Ws(O+X,c[0][0]):!f&&X<0&&(j=Gs(O+ne,c[1][0])),h&&U>0?z=Ws(M+U,c[0][1]):!h&&U<0&&(z=Gs(M+$,c[1][1])),B=Math.max(B,j),V=Math.max(V,z)}if(s){if(p){const j=Pf(ne/R,k,T)*R;if(B=Math.max(B,j),l){let z=0;!f&&!h||f&&!h&&y?z=Ws(M+Z+ne/R,l[1][1])*R:z=Gs(M+Z+(f?X:-X)/R,l[0][1])*R,B=Math.max(B,z)}if(c){let z=0;!f&&!h||f&&!h&&y?z=Gs(M+ne/R,c[1][1])*R:z=Ws(M+(f?X:-X)/R,c[0][1])*R,B=Math.max(B,z)}}if(g){const j=Pf($*R,S,A)/R;if(V=Math.max(V,j),l){let z=0;!f&&!h||h&&!f&&y?z=Ws(O+$*R+Q,l[1][0])/R:z=Gs(O+(h?U:-U)*R+Q,l[0][0])/R,V=Math.max(V,z)}if(c){let z=0;!f&&!h||h&&!f&&y?z=Gs(O+$*R,c[1][0])/R:z=Ws(O+(h?U:-U)*R,c[0][0])/R,V=Math.max(V,z)}}}U=U+(U<0?V:-V),X=X+(X<0?B:-B),s&&(y?ne>$*R?U=(xw(f,h)?-X:X)/R:X=(xw(f,h)?-U:U)*R:p?(U=X/R,h=f):(X=U*R,f=h));const N=f?O+X:O,P=h?M+U:M;return{width:L+(f?-X:X),height:_+(h?-U:U),x:o[0]*X*(f?-1:1)+N,y:o[1]*U*(h?-1:1)+P}}const Sk={width:0,height:0,x:0,y:0},Y_={...Sk,pointerX:0,pointerY:0,aspectRatio:1};function X_(t){return[[0,0],[t.measured.width,t.measured.height]]}function F_(t,e,n){const i=e.position.x+t.position.x,s=e.position.y+t.position.y,o=t.measured.width??0,l=t.measured.height??0,c=n[0]*o,f=n[1]*l;return[[i-c,s-f],[i+o-c,s+l-f]]}function G_({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:s}){const o=_n(t);let l={controlDirection:yw("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:h,boundaries:p,keepAspectRatio:g,resizeDirection:y,onResizeStart:v,onResize:b,onResizeEnd:S,shouldResize:A}){let k={...Sk},T={...Y_};l={boundaries:p,resizeDirection:y,keepAspectRatio:g,controlDirection:yw(h)};let O,M=null,L=[],_,R,X,U=!1;const ne=RA().on("start",$=>{const{nodeLookup:Q,transform:Z,snapGrid:B,snapToGrid:V,nodeOrigin:N,paneDomNode:P}=n();if(O=Q.get(e),!O)return;M=P?.getBoundingClientRect()??null;const{xSnapped:j,ySnapped:z}=rc($.sourceEvent,{transform:Z,snapGrid:B,snapToGrid:V,containerBounds:M});k={width:O.measured.width??0,height:O.measured.height??0,x:O.position.x??0,y:O.position.y??0},T={...k,pointerX:j,pointerY:z,aspectRatio:k.width/k.height},_=void 0,O.parentId&&(O.extent==="parent"||O.expandParent)&&(_=Q.get(O.parentId),R=_&&O.extent==="parent"?X_(_):void 0),L=[],X=void 0;for(const[G,D]of Q)if(D.parentId===e&&(L.push({id:G,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const H=F_(D,O,D.origin??N);X?X=[[Math.min(H[0][0],X[0][0]),Math.min(H[0][1],X[0][1])],[Math.max(H[1][0],X[1][0]),Math.max(H[1][1],X[1][1])]]:X=H}v?.($,{...k})}).on("drag",$=>{const{transform:Q,snapGrid:Z,snapToGrid:B,nodeOrigin:V}=n(),N=rc($.sourceEvent,{transform:Q,snapGrid:Z,snapToGrid:B,containerBounds:M}),P=[];if(!O)return;const{x:j,y:z,width:G,height:D}=k,H={},ee=O.origin??V,{width:ie,height:ce,x:he,y:fe}=Q_(T,l.controlDirection,N,l.boundaries,l.keepAspectRatio,ee,R,X),ue=ie!==G,ge=ce!==D,De=he!==j&&ue,Te=fe!==z&&ge;if(!De&&!Te&&!ue&&!ge)return;if((De||Te||ee[0]===1||ee[1]===1)&&(H.x=De?he:k.x,H.y=Te?fe:k.y,k.x=H.x,k.y=H.y,L.length>0)){const We=he-j,Xe=fe-z;for(const _t of L)_t.position={x:_t.position.x-We+ee[0]*(ie-G),y:_t.position.y-Xe+ee[1]*(ce-D)},P.push(_t)}if((ue||ge)&&(H.width=ue&&(!l.resizeDirection||l.resizeDirection==="horizontal")?ie:k.width,H.height=ge&&(!l.resizeDirection||l.resizeDirection==="vertical")?ce:k.height,k.width=H.width,k.height=H.height),_&&O.expandParent){const We=ee[0]*(H.width??0);H.x&&H.x<We&&(k.x=We,T.x=T.x-(H.x-We));const Xe=ee[1]*(H.height??0);H.y&&H.y<Xe&&(k.y=Xe,T.y=T.y-(H.y-Xe))}const Ae=q_({width:k.width,prevWidth:G,height:k.height,prevHeight:D,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),Oe={...k,direction:Ae};A?.($,Oe)!==!1&&(U=!0,b?.($,Oe),i(H,P))}).on("end",$=>{U&&(S?.($,{...k}),s?.({...k}),U=!1)});o.call(ne)}function f(){o.on(".drag",null)}return{update:c,destroy:f}}var Om={exports:{}},Em={},Mm={exports:{}},Tm={};var vw;function W_(){if(vw)return Tm;vw=1;var t=Yc();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,s=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(g,y){var v=y(),b=i({inst:{value:v,getSnapshot:y}}),S=b[0].inst,A=b[1];return o(function(){S.value=v,S.getSnapshot=y,f(S)&&A({inst:S})},[g,v,y]),s(function(){return f(S)&&A({inst:S}),g(function(){f(S)&&A({inst:S})})},[g]),l(v),v}function f(g){var y=g.getSnapshot;g=g.value;try{var v=y();return!n(g,v)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Tm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Tm}var bw;function K_(){return bw||(bw=1,Mm.exports=W_()),Mm.exports}var Sw;function Z_(){if(Sw)return Em;Sw=1;var t=Yc(),e=K_();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var i=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return Em.useSyncExternalStoreWithSelector=function(h,p,g,y,v){var b=o(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=c(function(){function k(_){if(!T){if(T=!0,O=_,_=y(_),v!==void 0&&S.hasValue){var R=S.value;if(v(R,_))return M=R}return M=_}if(R=M,i(O,_))return R;var X=y(_);return v!==void 0&&v(R,X)?(O=_,R):(O=_,M=X)}var T=!1,O,M,L=g===void 0?null:g;return[function(){return k(p())},L===null?void 0:function(){return k(L())}]},[p,g,y,v]);var A=s(h,b[0],b[1]);return l(function(){S.hasValue=!0,S.value=A},[A]),f(A),A},Em}var ww;function J_(){return ww||(ww=1,Om.exports=Z_()),Om.exports}var eL=J_();const tL=gA(eL),nL={},Cw=t=>{let e;const n=new Set,i=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const v=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(b=>b(e,v))}},s=()=>e,f={setState:i,getState:s,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(nL?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(i,s,f);return f},iL=t=>t?Cw(t):Cw,{useDebugValue:sL}=a3,{useSyncExternalStoreWithSelector:rL}=tL,oL=t=>t;function wk(t,e=oL,n){const i=rL(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return sL(i),i}const Aw=(t,e)=>{const n=iL(t),i=(s,o=e)=>wk(n,s,o);return Object.assign(i,n),i},lL=(t,e)=>t?Aw(t,e):Aw;function ct(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,s]of t)if(!Object.is(s,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var aL=mA();const Md=q.createContext(null),cL=Md.Provider,Ck=Ri.error001();function Ue(t,e){const n=q.useContext(Md);if(n===null)throw new Error(Ck);return wk(n,t,e)}function ut(){const t=q.useContext(Md);if(t===null)throw new Error(Ck);return q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const kw={display:"none"},uL={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ak="react-flow__node-desc",kk="react-flow__edge-desc",fL="react-flow__aria-live",hL=t=>t.ariaLiveMessage,dL=t=>t.ariaLabelConfig;function pL({rfId:t}){const e=Ue(hL);return C.jsx("div",{id:`${fL}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:uL,children:e})}function gL({rfId:t,disableKeyboardA11y:e}){const n=Ue(dL);return C.jsxs(C.Fragment,{children:[C.jsx("div",{id:`${Ak}-${t}`,style:kw,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),C.jsx("div",{id:`${kk}-${t}`,style:kw,children:n["edge.a11yDescription.default"]}),!e&&C.jsx(pL,{rfId:t})]})}const Td=q.forwardRef(({position:t="top-left",children:e,className:n,style:i,...s},o)=>{const l=`${t}`.split("-");return C.jsx("div",{className:Ot(["react-flow__panel",n,...l]),style:i,ref:o,...s,children:e})});Td.displayName="Panel";function mL({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:C.jsx(Td,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:C.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const yL=t=>{const e=[],n=[];for(const[,i]of t.nodeLookup)i.selected&&e.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&n.push(i);return{selectedNodes:e,selectedEdges:n}},Hf=t=>t.id;function xL(t,e){return ct(t.selectedNodes.map(Hf),e.selectedNodes.map(Hf))&&ct(t.selectedEdges.map(Hf),e.selectedEdges.map(Hf))}function vL({onSelectionChange:t}){const e=ut(),{selectedNodes:n,selectedEdges:i}=Ue(yL,xL);return q.useEffect(()=>{const s={nodes:n,edges:i};t?.(s),e.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[n,i,t]),null}const bL=t=>!!t.onSelectionChangeHandlers;function SL({onSelectionChange:t}){const e=Ue(bL);return t||e?C.jsx(vL,{onSelectionChange:t}):null}const Ok=[0,0],wL={x:0,y:0,zoom:1},CL=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Ow=[...CL,"rfId"],AL=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Ew={translateExtent:vc,nodeOrigin:Ok,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function kL(t){const{setNodes:e,setEdges:n,setMinZoom:i,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:l,reset:c,setDefaultNodesAndEdges:f}=Ue(AL,ct),h=ut();q.useEffect(()=>(f(t.defaultNodes,t.defaultEdges),()=>{p.current=Ew,c()}),[]);const p=q.useRef(Ew);return q.useEffect(()=>{for(const g of Ow){const y=t[g],v=p.current[g];y!==v&&(typeof t[g]>"u"||(g==="nodes"?e(y):g==="edges"?n(y):g==="minZoom"?i(y):g==="maxZoom"?s(y):g==="translateExtent"?o(y):g==="nodeExtent"?l(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:l_(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=t},Ow.map(g=>t[g])),null}function Mw(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function OL(t){const[e,n]=q.useState(t==="system"?null:t);return q.useEffect(()=>{if(t!=="system"){n(t);return}const i=Mw(),s=()=>n(i?.matches?"dark":"light");return s(),i?.addEventListener("change",s),()=>{i?.removeEventListener("change",s)}},[t]),e!==null?e:Mw()?.matches?"dark":"light"}const Tw=typeof document<"u"?document:null;function Cc(t=null,e={target:Tw,actInsideInputWithModifier:!0}){const[n,i]=q.useState(!1),s=q.useRef(!1),o=q.useRef(new Set([])),[l,c]=q.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((g,y)=>g.concat(...y),[]);return[h,p]}return[[],[]]},[t]);return q.useEffect(()=>{const f=e?.target??Tw,h=e?.actInsideInputWithModifier??!0;if(t!==null){const p=v=>{if(s.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!s.current||s.current&&!h)&&ok(v))return!1;const S=Dw(v.code,c);if(o.current.add(v[S]),Nw(l,o.current,!1)){const A=v.composedPath?.()?.[0]||v.target,k=A?.nodeName==="BUTTON"||A?.nodeName==="A";e.preventDefault!==!1&&(s.current||!k)&&v.preventDefault(),i(!0)}},g=v=>{const b=Dw(v.code,c);Nw(l,o.current,!0)?(i(!1),o.current.clear()):o.current.delete(v[b]),v.key==="Meta"&&o.current.clear(),s.current=!1},y=()=>{o.current.clear(),i(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",g),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",g),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[t,i]),n}function Nw(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function Dw(t,e){return e.includes(t)?"code":"key"}const EL=()=>{const t=ut();return q.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[i,s,o],panZoom:l}=t.getState();return l?(await l.setViewport({x:e.x??i,y:e.y??s,zoom:e.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,i]=t.getState().transform;return{x:e,y:n,zoom:i}},setCenter:async(e,n,i)=>t.getState().setCenter(e,n,i),fitBounds:async(e,n)=>{const{width:i,height:s,minZoom:o,maxZoom:l,panZoom:c}=t.getState(),f=Gy(e,i,s,o,l,n?.padding??.1);return c?(await c.setViewport(f,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:i,snapGrid:s,snapToGrid:o,domNode:l}=t.getState();if(!l)return e;const{x:c,y:f}=l.getBoundingClientRect(),h={x:e.x-c,y:e.y-f},p=n.snapGrid??s,g=n.snapToGrid??o;return Zc(h,i,g,p)},flowToScreenPosition:e=>{const{transform:n,domNode:i}=t.getState();if(!i)return e;const{x:s,y:o}=i.getBoundingClientRect(),l=Lh(e,n);return{x:l.x+s,y:l.y+o}}}),[])};function Ek(t,e){const n=[],i=new Map,s=[];for(const o of t)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")i.set(o.id,[o]);else{const l=i.get(o.id);l?l.push(o):i.set(o.id,[o])}for(const o of e){const l=i.get(o.id);if(!l){n.push(o);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const c={...o};for(const f of l)ML(f,c);n.push(c)}return s.length&&s.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function ML(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function Mk(t,e){return Ek(t,e)}function Tk(t,e){return Ek(t,e)}function Ur(t,e){return{id:t,type:"select",selected:e}}function ul(t,e=new Set,n=!1){const i=[];for(const[s,o]of t){const l=e.has(s);!(o.selected===void 0&&!l)&&o.selected!==l&&(n&&(o.selected=l),i.push(Ur(o.id,l)))}return i}function Rw({items:t=[],lookup:e}){const n=[],i=new Map(t.map(s=>[s.id,s]));for(const[s,o]of t.entries()){const l=e.get(o.id),c=l?.internals?.userNode??l;c!==void 0&&c!==o&&n.push({id:o.id,item:o,type:"replace"}),c===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of e)i.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function _w(t){return{id:t.id,type:"remove"}}const Lw=t=>K4(t),TL=t=>ZA(t);function Nk(t){return q.forwardRef(t)}const NL=typeof window<"u"?q.useLayoutEffect:q.useEffect;function Bw(t){const[e,n]=q.useState(BigInt(0)),[i]=q.useState(()=>DL(()=>n(s=>s+BigInt(1))));return NL(()=>{const s=i.get();s.length&&(t(s),i.reset())},[e]),i}function DL(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const Dk=q.createContext(null);function RL({children:t}){const e=ut(),n=q.useCallback(c=>{const{nodes:f=[],setNodes:h,hasDefaultNodes:p,onNodesChange:g,nodeLookup:y,fitViewQueued:v,onNodesChangeMiddlewareMap:b}=e.getState();let S=f;for(const k of c)S=typeof k=="function"?k(S):k;let A=Rw({items:S,lookup:y});for(const k of b.values())A=k(A);p&&h(S),A.length>0?g?.(A):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:k,nodes:T,setNodes:O}=e.getState();k&&O(T)})},[]),i=Bw(n),s=q.useCallback(c=>{const{edges:f=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:g,edgeLookup:y}=e.getState();let v=f;for(const b of c)v=typeof b=="function"?b(v):b;p?h(v):g&&g(Rw({items:v,lookup:y}))},[]),o=Bw(s),l=q.useMemo(()=>({nodeQueue:i,edgeQueue:o}),[]);return C.jsx(Dk.Provider,{value:l,children:t})}function _L(){const t=q.useContext(Dk);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const LL=t=>!!t.panZoom;function Nd(){const t=EL(),e=ut(),n=_L(),i=Ue(LL),s=q.useMemo(()=>{const o=g=>e.getState().nodeLookup.get(g),l=g=>{n.nodeQueue.push(g)},c=g=>{n.edgeQueue.push(g)},f=g=>{const{nodeLookup:y,nodeOrigin:v}=e.getState(),b=Lw(g)?g:y.get(g.id),S=b.parentId?sk(b.position,b.measured,b.parentId,y,v):b.position,A={...b,position:S,width:b.measured?.width??b.width,height:b.measured?.height??b.height};return Dl(A)},h=(g,y,v={replace:!1})=>{l(b=>b.map(S=>{if(S.id===g){const A=typeof y=="function"?y(S):y;return v.replace&&Lw(A)?A:{...S,...A}}return S}))},p=(g,y,v={replace:!1})=>{c(b=>b.map(S=>{if(S.id===g){const A=typeof y=="function"?y(S):y;return v.replace&&TL(A)?A:{...S,...A}}return S}))};return{getNodes:()=>e.getState().nodes.map(g=>({...g})),getNode:g=>o(g)?.internals.userNode,getInternalNode:o,getEdges:()=>{const{edges:g=[]}=e.getState();return g.map(y=>({...y}))},getEdge:g=>e.getState().edgeLookup.get(g),setNodes:l,setEdges:c,addNodes:g=>{const y=Array.isArray(g)?g:[g];n.nodeQueue.push(v=>[...v,...y])},addEdges:g=>{const y=Array.isArray(g)?g:[g];n.edgeQueue.push(v=>[...v,...y])},toObject:()=>{const{nodes:g=[],edges:y=[],transform:v}=e.getState(),[b,S,A]=v;return{nodes:g.map(k=>({...k})),edges:y.map(k=>({...k})),viewport:{x:b,y:S,zoom:A}}},deleteElements:async({nodes:g=[],edges:y=[]})=>{const{nodes:v,edges:b,onNodesDelete:S,onEdgesDelete:A,triggerNodeChanges:k,triggerEdgeChanges:T,onDelete:O,onBeforeDelete:M}=e.getState(),{nodes:L,edges:_}=await n_({nodesToRemove:g,edgesToRemove:y,nodes:v,edges:b,onBeforeDelete:M}),R=_.length>0,X=L.length>0;if(R){const U=_.map(_w);A?.(_),T(U)}if(X){const U=L.map(_w);S?.(L),k(U)}return(X||R)&&O?.({nodes:L,edges:_}),{deletedNodes:L,deletedEdges:_}},getIntersectingNodes:(g,y=!0,v)=>{const b=ow(g),S=b?g:f(g),A=v!==void 0;return S?(v||e.getState().nodes).filter(k=>{const T=e.getState().nodeLookup.get(k.id);if(T&&!b&&(k.id===g.id||!T.internals.positionAbsolute))return!1;const O=Dl(A?k:T),M=Sc(O,S);return y&&M>0||M>=O.width*O.height||M>=S.width*S.height}):[]},isNodeIntersecting:(g,y,v=!0)=>{const S=ow(g)?g:f(g);if(!S)return!1;const A=Sc(S,y);return v&&A>0||A>=y.width*y.height||A>=S.width*S.height},updateNode:h,updateNodeData:(g,y,v={replace:!1})=>{h(g,b=>{const S=typeof y=="function"?y(b):y;return v.replace?{...b,data:S}:{...b,data:{...b.data,...S}}},v)},updateEdge:p,updateEdgeData:(g,y,v={replace:!1})=>{p(g,b=>{const S=typeof y=="function"?y(b):y;return v.replace?{...b,data:S}:{...b,data:{...b.data,...S}}},v)},getNodesBounds:g=>{const{nodeLookup:y,nodeOrigin:v}=e.getState();return Z4(g,{nodeLookup:y,nodeOrigin:v})},getHandleConnections:({type:g,id:y,nodeId:v})=>Array.from(e.getState().connectionLookup.get(`${v}-${g}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:y,nodeId:v})=>Array.from(e.getState().connectionLookup.get(`${v}${g?y?`-${g}-${y}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const y=e.getState().fitViewResolver??o_();return e.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:y}),n.nodeQueue.push(v=>[...v]),y.promise}}},[]);return q.useMemo(()=>({...s,...t,viewportInitialized:i}),[i])}const zw=t=>t.selected,BL=typeof window<"u"?window:void 0;function zL({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=ut(),{deleteElements:i}=Nd(),s=Cc(t,{actInsideInputWithModifier:!1}),o=Cc(e,{target:BL});q.useEffect(()=>{if(s){const{edges:l,nodes:c}=n.getState();i({nodes:c.filter(zw),edges:l.filter(zw)}),n.setState({nodesSelectionActive:!1})}},[s]),q.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function PL(t){const e=ut();q.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=Wy(t.current);(i.height===0||i.width===0)&&e.getState().onError?.("004",Ri.error004()),e.setState({width:i.width||500,height:i.height||500})};if(t.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(t.current),()=>{window.removeEventListener("resize",n),i&&t.current&&i.unobserve(t.current)}}},[])}const Dd={position:"absolute",width:"100%",height:"100%",top:0,left:0},HL=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function jL({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=Jr.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:v=!0,children:b,noWheelClassName:S,noPanClassName:A,onViewportChange:k,isControlledViewport:T,paneClickDistance:O,selectionOnDrag:M}){const L=ut(),_=q.useRef(null),{userSelectionActive:R,lib:X,connectionInProgress:U}=Ue(HL,ct),ne=Cc(y),$=q.useRef();PL(_);const Q=q.useCallback(Z=>{k?.({x:Z[0],y:Z[1],zoom:Z[2]}),T||L.setState({transform:Z})},[k,T]);return q.useEffect(()=>{if(_.current){$.current=$_({domNode:_.current,minZoom:p,maxZoom:g,translateExtent:h,viewport:f,onDraggingChange:N=>L.setState({paneDragging:N}),onPanZoomStart:(N,P)=>{const{onViewportChangeStart:j,onMoveStart:z}=L.getState();z?.(N,P),j?.(P)},onPanZoom:(N,P)=>{const{onViewportChange:j,onMove:z}=L.getState();z?.(N,P),j?.(P)},onPanZoomEnd:(N,P)=>{const{onViewportChangeEnd:j,onMoveEnd:z}=L.getState();z?.(N,P),j?.(P)}});const{x:Z,y:B,zoom:V}=$.current.getViewport();return L.setState({panZoom:$.current,transform:[Z,B,V],domNode:_.current.closest(".react-flow")}),()=>{$.current?.destroy()}}},[]),q.useEffect(()=>{$.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:ne,preventScrolling:v,noPanClassName:A,userSelectionActive:R,noWheelClassName:S,lib:X,onTransformChange:Q,connectionInProgress:U,selectionOnDrag:M,paneClickDistance:O})},[t,e,n,i,s,o,l,c,ne,v,A,R,S,X,Q,U,M,O]),C.jsx("div",{className:"react-flow__renderer",ref:_,style:Dd,children:b})}const IL=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function VL(){const{userSelectionActive:t,userSelectionRect:e}=Ue(IL,ct);return t&&e?C.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const Nm=(t,e)=>n=>{n.target===e.current&&t?.(n)},UL=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function $L({isSelecting:t,selectionKeyPressed:e,selectionMode:n=bc.Full,panOnDrag:i,paneClickDistance:s,selectionOnDrag:o,onSelectionStart:l,onSelectionEnd:c,onPaneClick:f,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:g,onPaneMouseMove:y,onPaneMouseLeave:v,children:b}){const S=ut(),{userSelectionActive:A,elementsSelectable:k,dragging:T,connectionInProgress:O}=Ue(UL,ct),M=k&&(t||A),L=q.useRef(null),_=q.useRef(),R=q.useRef(new Set),X=q.useRef(new Set),U=q.useRef(!1),ne=j=>{if(U.current||O){U.current=!1;return}f?.(j),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},$=j=>{if(Array.isArray(i)&&i?.includes(2)){j.preventDefault();return}h?.(j)},Q=p?j=>p(j):void 0,Z=j=>{U.current&&(j.stopPropagation(),U.current=!1)},B=j=>{const{domNode:z}=S.getState();if(_.current=z?.getBoundingClientRect(),!_.current)return;const G=j.target===L.current;if(!G&&!!j.target.closest(".nokey")||!t||!(o&&G||e)||j.button!==0||!j.isPrimary)return;j.target?.setPointerCapture?.(j.pointerId),U.current=!1;const{x:ee,y:ie}=oi(j.nativeEvent,_.current);S.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:ie,x:ee,y:ie}}),G||(j.stopPropagation(),j.preventDefault())},V=j=>{const{userSelectionRect:z,transform:G,nodeLookup:D,edgeLookup:H,connectionLookup:ee,triggerNodeChanges:ie,triggerEdgeChanges:ce,defaultEdgeOptions:he,resetSelectedElements:fe}=S.getState();if(!_.current||!z)return;const{x:ue,y:ge}=oi(j.nativeEvent,_.current),{startX:De,startY:Te}=z;if(!U.current){const Xe=e?0:s;if(Math.hypot(ue-De,ge-Te)<=Xe)return;fe(),l?.(j)}U.current=!0;const Ae={startX:De,startY:Te,x:ue<De?ue:De,y:ge<Te?ge:Te,width:Math.abs(ue-De),height:Math.abs(ge-Te)},Oe=R.current,Pe=X.current;R.current=new Set(Fy(D,Ae,G,n===bc.Partial,!0).map(Xe=>Xe.id)),X.current=new Set;const We=he?.selectable??!0;for(const Xe of R.current){const _t=ee.get(Xe);if(_t)for(const{edgeId:Wn}of _t.values()){const wn=H.get(Wn);wn&&(wn.selectable??We)&&X.current.add(Wn)}}if(!lw(Oe,R.current)){const Xe=ul(D,R.current,!0);ie(Xe)}if(!lw(Pe,X.current)){const Xe=ul(H,X.current);ce(Xe)}S.setState({userSelectionRect:Ae,userSelectionActive:!0,nodesSelectionActive:!1})},N=j=>{j.button===0&&(j.target?.releasePointerCapture?.(j.pointerId),!A&&j.target===L.current&&S.getState().userSelectionRect&&ne?.(j),S.setState({userSelectionActive:!1,userSelectionRect:null}),U.current&&(c?.(j),S.setState({nodesSelectionActive:R.current.size>0})))},P=i===!0||Array.isArray(i)&&i.includes(0);return C.jsxs("div",{className:Ot(["react-flow__pane",{draggable:P,dragging:T,selection:t}]),onClick:M?void 0:Nm(ne,L),onContextMenu:Nm($,L),onWheel:Nm(Q,L),onPointerEnter:M?void 0:g,onPointerMove:M?V:y,onPointerUp:M?N:void 0,onPointerDownCapture:M?B:void 0,onClickCapture:M?Z:void 0,onPointerLeave:v,ref:L,style:Dd,children:[b,C.jsx(VL,{})]})}function N0({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeLookup:c,onError:f}=e.getState(),h=c.get(t);if(!h){f?.("012",Ri.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):s([t])}function Rk({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:s,isSelectable:o,nodeClickDistance:l}){const c=ut(),[f,h]=q.useState(!1),p=q.useRef();return q.useEffect(()=>{p.current=T_({getStoreItems:()=>c.getState(),onNodeMouseDown:g=>{N0({id:g,store:c,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),q.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:i,domNode:t.current,isSelectable:o,nodeId:s,nodeClickDistance:l}),()=>{p.current?.destroy()}},[n,i,e,o,t,s]),f}const qL=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function _k(){const t=ut();return q.useCallback(n=>{const{nodeExtent:i,snapToGrid:s,snapGrid:o,nodesDraggable:l,onError:c,updateNodePositions:f,nodeLookup:h,nodeOrigin:p}=t.getState(),g=new Map,y=qL(l),v=s?o[0]:5,b=s?o[1]:5,S=n.direction.x*v*n.factor,A=n.direction.y*b*n.factor;for(const[,k]of h){if(!y(k))continue;let T={x:k.internals.positionAbsolute.x+S,y:k.internals.positionAbsolute.y+A};s&&(T=Kc(T,o));const{position:O,positionAbsolute:M}=JA({nodeId:k.id,nextPosition:T,nodeLookup:h,nodeExtent:i,nodeOrigin:p,onError:c});k.position=O,k.internals.positionAbsolute=M,g.set(k.id,k)}f(g)},[])}const ix=q.createContext(null),QL=ix.Provider;ix.Consumer;const Lk=()=>q.useContext(ix),YL=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),XL=(t,e,n)=>i=>{const{connectionClickStartHandle:s,connectionMode:o,connection:l}=i,{fromHandle:c,toHandle:f,isValid:h}=l,p=f?.nodeId===t&&f?.id===e&&f?.type===n;return{connectingFrom:c?.nodeId===t&&c?.id===e&&c?.type===n,connectingTo:p,clickConnecting:s?.nodeId===t&&s?.id===e&&s?.type===n,isPossibleEndHandle:o===Tl.Strict?c?.type!==n:t!==c?.nodeId||e!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!s,valid:p&&h}};function FL({type:t="source",position:e=be.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:c,children:f,className:h,onMouseDown:p,onTouchStart:g,...y},v){const b=l||null,S=t==="target",A=ut(),k=Lk(),{connectOnClick:T,noPanClassName:O,rfId:M}=Ue(YL,ct),{connectingFrom:L,connectingTo:_,clickConnecting:R,isPossibleEndHandle:X,connectionInProcess:U,clickConnectionInProcess:ne,valid:$}=Ue(XL(k,b,t),ct);k||A.getState().onError?.("010",Ri.error010());const Q=V=>{const{defaultEdgeOptions:N,onConnect:P,hasDefaultEdges:j}=A.getState(),z={...N,...V};if(j){const{edges:G,setEdges:D}=A.getState();D(d_(z,G))}P?.(z),c?.(z)},Z=V=>{if(!k)return;const N=lk(V.nativeEvent);if(s&&(N&&V.button===0||!N)){const P=A.getState();T0.onPointerDown(V.nativeEvent,{handleDomNode:V.currentTarget,autoPanOnConnect:P.autoPanOnConnect,connectionMode:P.connectionMode,connectionRadius:P.connectionRadius,domNode:P.domNode,nodeLookup:P.nodeLookup,lib:P.lib,isTarget:S,handleId:b,nodeId:k,flowId:P.rfId,panBy:P.panBy,cancelConnection:P.cancelConnection,onConnectStart:P.onConnectStart,onConnectEnd:P.onConnectEnd,updateConnection:P.updateConnection,onConnect:Q,isValidConnection:n||P.isValidConnection,getTransform:()=>A.getState().transform,getFromHandle:()=>A.getState().connection.fromHandle,autoPanSpeed:P.autoPanSpeed,dragThreshold:P.connectionDragThreshold})}N?p?.(V):g?.(V)},B=V=>{const{onClickConnectStart:N,onClickConnectEnd:P,connectionClickStartHandle:j,connectionMode:z,isValidConnection:G,lib:D,rfId:H,nodeLookup:ee,connection:ie}=A.getState();if(!k||!j&&!s)return;if(!j){N?.(V.nativeEvent,{nodeId:k,handleId:b,handleType:t}),A.setState({connectionClickStartHandle:{nodeId:k,type:t,id:b}});return}const ce=rk(V.target),he=n||G,{connection:fe,isValid:ue}=T0.isValid(V.nativeEvent,{handle:{nodeId:k,id:b,type:t},connectionMode:z,fromNodeId:j.nodeId,fromHandleId:j.id||null,fromType:j.type,isValidConnection:he,flowId:H,doc:ce,lib:D,nodeLookup:ee});ue&&fe&&Q(fe);const ge=structuredClone(ie);delete ge.inProgress,ge.toPosition=ge.toHandle?ge.toHandle.position:null,P?.(V,ge),A.setState({connectionClickStartHandle:null})};return C.jsx("div",{"data-handleid":b,"data-nodeid":k,"data-handlepos":e,"data-id":`${M}-${k}-${b}-${t}`,className:Ot(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",O,h,{source:!S,target:S,connectable:i,connectablestart:s,connectableend:o,clickconnecting:R,connectingfrom:L,connectingto:_,valid:$,connectionindicator:i&&(!U||X)&&(U||ne?o:s)}]),onMouseDown:Z,onTouchStart:Z,onClick:T?B:void 0,ref:v,...y,children:f})}const or=q.memo(Nk(FL));function GL({data:t,isConnectable:e,sourcePosition:n=be.Bottom}){return C.jsxs(C.Fragment,{children:[t?.label,C.jsx(or,{type:"source",position:n,isConnectable:e})]})}function WL({data:t,isConnectable:e,targetPosition:n=be.Top,sourcePosition:i=be.Bottom}){return C.jsxs(C.Fragment,{children:[C.jsx(or,{type:"target",position:n,isConnectable:e}),t?.label,C.jsx(or,{type:"source",position:i,isConnectable:e})]})}function KL(){return null}function ZL({data:t,isConnectable:e,targetPosition:n=be.Top}){return C.jsxs(C.Fragment,{children:[C.jsx(or,{type:"target",position:n,isConnectable:e}),t?.label]})}const Bh={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Pw={input:GL,default:WL,output:ZL,group:KL};function JL(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const eB=t=>{const{width:e,height:n,x:i,y:s}=Wc(t.nodeLookup,{filter:o=>!!o.selected});return{width:ri(e)?e:null,height:ri(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${s}px)`}};function tB({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ut(),{width:s,height:o,transformString:l,userSelectionActive:c}=Ue(eB,ct),f=_k(),h=q.useRef(null);if(q.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),Rk({nodeRef:h}),c||!s||!o)return null;const p=t?y=>{const v=i.getState().nodes.filter(b=>b.selected);t(y,v)}:void 0,g=y=>{Object.prototype.hasOwnProperty.call(Bh,y.key)&&(y.preventDefault(),f({direction:Bh[y.key],factor:y.shiftKey?4:1}))};return C.jsx("div",{className:Ot(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l},children:C.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:o}})})}const Hw=typeof window<"u"?window:void 0,nB=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function Bk({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:f,selectionKeyCode:h,selectionOnDrag:p,selectionMode:g,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:S,zoomActivationKeyCode:A,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:O,panOnScroll:M,panOnScrollSpeed:L,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:X,defaultViewport:U,translateExtent:ne,minZoom:$,maxZoom:Q,preventScrolling:Z,onSelectionContextMenu:B,noWheelClassName:V,noPanClassName:N,disableKeyboardA11y:P,onViewportChange:j,isControlledViewport:z}){const{nodesSelectionActive:G,userSelectionActive:D}=Ue(nB,ct),H=Cc(h,{target:Hw}),ee=Cc(S,{target:Hw}),ie=ee||X,ce=ee||M,he=p&&ie!==!0,fe=H||D||he;return zL({deleteKeyCode:f,multiSelectionKeyCode:b}),C.jsx(jL,{onPaneContextMenu:o,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:O,panOnScroll:ce,panOnScrollSpeed:L,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:!H&&ie,defaultViewport:U,translateExtent:ne,minZoom:$,maxZoom:Q,zoomActivationKeyCode:A,preventScrolling:Z,noWheelClassName:V,noPanClassName:N,onViewportChange:j,isControlledViewport:z,paneClickDistance:c,selectionOnDrag:he,children:C.jsxs($L,{onSelectionStart:y,onSelectionEnd:v,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:ie,isSelecting:!!fe,selectionMode:g,selectionKeyPressed:H,paneClickDistance:c,selectionOnDrag:he,children:[t,G&&C.jsx(tB,{onSelectionContextMenu:B,noPanClassName:N,disableKeyboardA11y:P})]})})}Bk.displayName="FlowRenderer";const iB=q.memo(Bk),sB=t=>e=>t?Fy(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function rB(t){return Ue(q.useCallback(sB(t),[t]),ct)}const oB=t=>t.updateNodeInternals;function lB(){const t=Ue(oB),[e]=q.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(s=>{const o=s.target.getAttribute("data-id");i.set(o,{id:o,nodeElement:s.target,force:!0})}),t(i)}));return q.useEffect(()=>()=>{e?.disconnect()},[e]),e}function aB({node:t,nodeType:e,hasDimensions:n,resizeObserver:i}){const s=ut(),o=q.useRef(null),l=q.useRef(null),c=q.useRef(t.sourcePosition),f=q.useRef(t.targetPosition),h=q.useRef(e),p=n&&!!t.internals.handleBounds;return q.useEffect(()=>{o.current&&!t.hidden&&(!p||l.current!==o.current)&&(l.current&&i?.unobserve(l.current),i?.observe(o.current),l.current=o.current)},[p,t.hidden]),q.useEffect(()=>()=>{l.current&&(i?.unobserve(l.current),l.current=null)},[]),q.useEffect(()=>{if(o.current){const g=h.current!==e,y=c.current!==t.sourcePosition,v=f.current!==t.targetPosition;(g||y||v)&&(h.current=e,c.current=t.sourcePosition,f.current=t.targetPosition,s.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:o.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),o}function cB({id:t,onClick:e,onMouseEnter:n,onMouseMove:i,onMouseLeave:s,onContextMenu:o,onDoubleClick:l,nodesDraggable:c,elementsSelectable:f,nodesConnectable:h,nodesFocusable:p,resizeObserver:g,noDragClassName:y,noPanClassName:v,disableKeyboardA11y:b,rfId:S,nodeTypes:A,nodeClickDistance:k,onError:T}){const{node:O,internals:M,isParent:L}=Ue(ue=>{const ge=ue.nodeLookup.get(t),De=ue.parentLookup.has(t);return{node:ge,internals:ge.internals,isParent:De}},ct);let _=O.type||"default",R=A?.[_]||Pw[_];R===void 0&&(T?.("003",Ri.error003(_)),_="default",R=A?.default||Pw.default);const X=!!(O.draggable||c&&typeof O.draggable>"u"),U=!!(O.selectable||f&&typeof O.selectable>"u"),ne=!!(O.connectable||h&&typeof O.connectable>"u"),$=!!(O.focusable||p&&typeof O.focusable>"u"),Q=ut(),Z=ik(O),B=aB({node:O,nodeType:_,hasDimensions:Z,resizeObserver:g}),V=Rk({nodeRef:B,disabled:O.hidden||!X,noDragClassName:y,handleSelector:O.dragHandle,nodeId:t,isSelectable:U,nodeClickDistance:k}),N=_k();if(O.hidden)return null;const P=vs(O),j=JL(O),z=U||X||e||n||i||s,G=n?ue=>n(ue,{...M.userNode}):void 0,D=i?ue=>i(ue,{...M.userNode}):void 0,H=s?ue=>s(ue,{...M.userNode}):void 0,ee=o?ue=>o(ue,{...M.userNode}):void 0,ie=l?ue=>l(ue,{...M.userNode}):void 0,ce=ue=>{const{selectNodesOnDrag:ge,nodeDragThreshold:De}=Q.getState();U&&(!ge||!X||De>0)&&N0({id:t,store:Q,nodeRef:B}),e&&e(ue,{...M.userNode})},he=ue=>{if(!(ok(ue.nativeEvent)||b)){if(FA.includes(ue.key)&&U){const ge=ue.key==="Escape";N0({id:t,store:Q,unselect:ge,nodeRef:B})}else if(X&&O.selected&&Object.prototype.hasOwnProperty.call(Bh,ue.key)){ue.preventDefault();const{ariaLabelConfig:ge}=Q.getState();Q.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),N({direction:Bh[ue.key],factor:ue.shiftKey?4:1})}}},fe=()=>{if(b||!B.current?.matches(":focus-visible"))return;const{transform:ue,width:ge,height:De,autoPanOnNodeFocus:Te,setCenter:Ae}=Q.getState();if(!Te)return;Fy(new Map([[t,O]]),{x:0,y:0,width:ge,height:De},ue,!0).length>0||Ae(O.position.x+P.width/2,O.position.y+P.height/2,{zoom:ue[2]})};return C.jsx("div",{className:Ot(["react-flow__node",`react-flow__node-${_}`,{[v]:X},O.className,{selected:O.selected,selectable:U,parent:L,draggable:X,dragging:V}]),ref:B,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:z?"all":"none",visibility:Z?"visible":"hidden",...O.style,...j},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:G,onMouseMove:D,onMouseLeave:H,onContextMenu:ee,onClick:ce,onDoubleClick:ie,onKeyDown:$?he:void 0,tabIndex:$?0:void 0,onFocus:$?fe:void 0,role:O.ariaRole??($?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${Ak}-${S}`,"aria-label":O.ariaLabel,...O.domAttributes,children:C.jsx(QL,{value:t,children:C.jsx(R,{id:t,data:O.data,type:_,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:O.selected??!1,selectable:U,draggable:X,deletable:O.deletable??!0,isConnectable:ne,sourcePosition:O.sourcePosition,targetPosition:O.targetPosition,dragging:V,dragHandle:O.dragHandle,zIndex:M.z,parentId:O.parentId,...P})})})}var uB=q.memo(cB);const fB=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function zk(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,onError:o}=Ue(fB,ct),l=rB(t.onlyRenderVisibleElements),c=lB();return C.jsx("div",{className:"react-flow__nodes",style:Dd,children:l.map(f=>C.jsx(uB,{id:f,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:c,nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,nodeClickDistance:t.nodeClickDistance,onError:o},f))})}zk.displayName="NodeRenderer";const hB=q.memo(zk);function dB(t){return Ue(q.useCallback(n=>{if(!t)return n.edges.map(s=>s.id);const i=[];if(n.width&&n.height)for(const s of n.edges){const o=n.nodeLookup.get(s.source),l=n.nodeLookup.get(s.target);o&&l&&u_({sourceNode:o,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&i.push(s.id)}return i},[t]),ct)}const pB=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return C.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},gB=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return C.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},jw={[eo.Arrow]:pB,[eo.ArrowClosed]:gB};function mB(t){const e=ut();return q.useMemo(()=>Object.prototype.hasOwnProperty.call(jw,t)?jw[t]:(e.getState().onError?.("009",Ri.error009(t)),null),[t])}const yB=({id:t,type:e,color:n,width:i=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const f=mB(e);return f?C.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0",children:C.jsx(f,{color:n,strokeWidth:l})}):null},Pk=({defaultColor:t,rfId:e})=>{const n=Ue(o=>o.edges),i=Ue(o=>o.defaultEdgeOptions),s=q.useMemo(()=>x_(n,{id:e,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[n,i,e,t]);return s.length?C.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:C.jsx("defs",{children:s.map(o=>C.jsx(yB,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};Pk.displayName="MarkerDefinitions";var xB=q.memo(Pk);function Hk({x:t,y:e,label:n,labelStyle:i,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...p}){const[g,y]=q.useState({x:1,y:0,width:0,height:0}),v=Ot(["react-flow__edge-textwrapper",h]),b=q.useRef(null);return q.useEffect(()=>{if(b.current){const S=b.current.getBBox();y({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?C.jsxs("g",{transform:`translate(${t-g.width/2} ${e-g.height/2})`,className:v,visibility:g.width?"visible":"hidden",...p,children:[s&&C.jsx("rect",{width:g.width+2*l[0],x:-l[0],y:-l[1],height:g.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),C.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:b,style:i,children:n}),f]}):null}Hk.displayName="EdgeText";const vB=q.memo(Hk);function Jc({path:t,labelX:e,labelY:n,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,interactionWidth:h=20,...p}){return C.jsxs(C.Fragment,{children:[C.jsx("path",{...p,d:t,fill:"none",className:Ot(["react-flow__edge-path",p.className])}),h?C.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,i&&ri(e)&&ri(n)?C.jsx(vB,{x:e,y:n,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f}):null]})}function Iw({pos:t,x1:e,y1:n,x2:i,y2:s}){return t===be.Left||t===be.Right?[.5*(e+i),n]:[e,.5*(n+s)]}function jk({sourceX:t,sourceY:e,sourcePosition:n=be.Bottom,targetX:i,targetY:s,targetPosition:o=be.Top}){const[l,c]=Iw({pos:n,x1:t,y1:e,x2:i,y2:s}),[f,h]=Iw({pos:o,x1:i,y1:s,x2:t,y2:e}),[p,g,y,v]=ak({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${t},${e} C${l},${c} ${f},${h} ${i},${s}`,p,g,y,v]}function Ik(t){return q.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:c,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:A,interactionWidth:k})=>{const[T,O,M]=jk({sourceX:n,sourceY:i,sourcePosition:l,targetX:s,targetY:o,targetPosition:c}),L=t.isInternal?void 0:e;return C.jsx(Jc,{id:L,path:T,labelX:O,labelY:M,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:A,interactionWidth:k})})}const bB=Ik({isInternal:!1}),Vk=Ik({isInternal:!0});bB.displayName="SimpleBezierEdge";Vk.displayName="SimpleBezierEdgeInternal";function Uk(t){return q.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,sourcePosition:v=be.Bottom,targetPosition:b=be.Top,markerEnd:S,markerStart:A,pathOptions:k,interactionWidth:T})=>{const[O,M,L]=O0({sourceX:n,sourceY:i,sourcePosition:v,targetX:s,targetY:o,targetPosition:b,borderRadius:k?.borderRadius,offset:k?.offset,stepPosition:k?.stepPosition}),_=t.isInternal?void 0:e;return C.jsx(Jc,{id:_,path:O,labelX:M,labelY:L,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:S,markerStart:A,interactionWidth:T})})}const $k=Uk({isInternal:!1}),qk=Uk({isInternal:!0});$k.displayName="SmoothStepEdge";qk.displayName="SmoothStepEdgeInternal";function Qk(t){return q.memo(({id:e,...n})=>{const i=t.isInternal?void 0:e;return C.jsx($k,{...n,id:i,pathOptions:q.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const SB=Qk({isInternal:!1}),Yk=Qk({isInternal:!0});SB.displayName="StepEdge";Yk.displayName="StepEdgeInternal";function Xk(t){return q.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:b,interactionWidth:S})=>{const[A,k,T]=uk({sourceX:n,sourceY:i,targetX:s,targetY:o}),O=t.isInternal?void 0:e;return C.jsx(Jc,{id:O,path:A,labelX:k,labelY:T,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:b,interactionWidth:S})})}const wB=Xk({isInternal:!1}),Fk=Xk({isInternal:!0});wB.displayName="StraightEdge";Fk.displayName="StraightEdgeInternal";function Gk(t){return q.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,sourcePosition:l=be.Bottom,targetPosition:c=be.Top,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:A,pathOptions:k,interactionWidth:T})=>{const[O,M,L]=Ky({sourceX:n,sourceY:i,sourcePosition:l,targetX:s,targetY:o,targetPosition:c,curvature:k?.curvature}),_=t.isInternal?void 0:e;return C.jsx(Jc,{id:_,path:O,labelX:M,labelY:L,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:A,interactionWidth:T})})}const CB=Gk({isInternal:!1}),Wk=Gk({isInternal:!0});CB.displayName="BezierEdge";Wk.displayName="BezierEdgeInternal";const Vw={default:Wk,straight:Fk,step:Yk,smoothstep:qk,simplebezier:Vk},Uw={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},AB=(t,e,n)=>n===be.Left?t-e:n===be.Right?t+e:t,kB=(t,e,n)=>n===be.Top?t-e:n===be.Bottom?t+e:t,$w="react-flow__edgeupdater";function qw({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:c}){return C.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:Ot([$w,`${$w}-${c}`]),cx:AB(e,i,t),cy:kB(n,i,t),r:i,stroke:"transparent",fill:"transparent"})}function OB({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:c,targetPosition:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,setReconnecting:y,setUpdateHover:v}){const b=ut(),S=(M,L)=>{if(M.button!==0)return;const{autoPanOnConnect:_,domNode:R,isValidConnection:X,connectionMode:U,connectionRadius:ne,lib:$,onConnectStart:Q,onConnectEnd:Z,cancelConnection:B,nodeLookup:V,rfId:N,panBy:P,updateConnection:j}=b.getState(),z=L.type==="target",G=(ee,ie)=>{y(!1),g?.(ee,n,L.type,ie)},D=ee=>h?.(n,ee),H=(ee,ie)=>{y(!0),p?.(M,n,L.type),Q?.(ee,ie)};T0.onPointerDown(M.nativeEvent,{autoPanOnConnect:_,connectionMode:U,connectionRadius:ne,domNode:R,handleId:L.id,nodeId:L.nodeId,nodeLookup:V,isTarget:z,edgeUpdaterType:L.type,lib:$,flowId:N,cancelConnection:B,panBy:P,isValidConnection:X,onConnect:D,onConnectStart:H,onConnectEnd:Z,onReconnectEnd:G,updateConnection:j,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},A=M=>S(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),k=M=>S(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>v(!0),O=()=>v(!1);return C.jsxs(C.Fragment,{children:[(t===!0||t==="source")&&C.jsx(qw,{position:c,centerX:i,centerY:s,radius:e,onMouseDown:A,onMouseEnter:T,onMouseOut:O,type:"source"}),(t===!0||t==="target")&&C.jsx(qw,{position:f,centerX:o,centerY:l,radius:e,onMouseDown:k,onMouseEnter:T,onMouseOut:O,type:"target"})]})}function EB({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:i,onClick:s,onDoubleClick:o,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,reconnectRadius:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:v,rfId:b,edgeTypes:S,noPanClassName:A,onError:k,disableKeyboardA11y:T}){let O=Ue(Ae=>Ae.edgeLookup.get(t));const M=Ue(Ae=>Ae.defaultEdgeOptions);O=M?{...M,...O}:O;let L=O.type||"default",_=S?.[L]||Vw[L];_===void 0&&(k?.("011",Ri.error011(L)),L="default",_=S?.default||Vw.default);const R=!!(O.focusable||e&&typeof O.focusable>"u"),X=typeof g<"u"&&(O.reconnectable||n&&typeof O.reconnectable>"u"),U=!!(O.selectable||i&&typeof O.selectable>"u"),ne=q.useRef(null),[$,Q]=q.useState(!1),[Z,B]=q.useState(!1),V=ut(),{zIndex:N,sourceX:P,sourceY:j,targetX:z,targetY:G,sourcePosition:D,targetPosition:H}=Ue(q.useCallback(Ae=>{const Oe=Ae.nodeLookup.get(O.source),Pe=Ae.nodeLookup.get(O.target);if(!Oe||!Pe)return{zIndex:O.zIndex,...Uw};const We=y_({id:t,sourceNode:Oe,targetNode:Pe,sourceHandle:O.sourceHandle||null,targetHandle:O.targetHandle||null,connectionMode:Ae.connectionMode,onError:k});return{zIndex:c_({selected:O.selected,zIndex:O.zIndex,sourceNode:Oe,targetNode:Pe,elevateOnSelect:Ae.elevateEdgesOnSelect,zIndexMode:Ae.zIndexMode}),...We||Uw}},[O.source,O.target,O.sourceHandle,O.targetHandle,O.selected,O.zIndex]),ct),ee=q.useMemo(()=>O.markerStart?`url('#${E0(O.markerStart,b)}')`:void 0,[O.markerStart,b]),ie=q.useMemo(()=>O.markerEnd?`url('#${E0(O.markerEnd,b)}')`:void 0,[O.markerEnd,b]);if(O.hidden||P===null||j===null||z===null||G===null)return null;const ce=Ae=>{const{addSelectedEdges:Oe,unselectNodesAndEdges:Pe,multiSelectionActive:We}=V.getState();U&&(V.setState({nodesSelectionActive:!1}),O.selected&&We?(Pe({nodes:[],edges:[O]}),ne.current?.blur()):Oe([t])),s&&s(Ae,O)},he=o?Ae=>{o(Ae,{...O})}:void 0,fe=l?Ae=>{l(Ae,{...O})}:void 0,ue=c?Ae=>{c(Ae,{...O})}:void 0,ge=f?Ae=>{f(Ae,{...O})}:void 0,De=h?Ae=>{h(Ae,{...O})}:void 0,Te=Ae=>{if(!T&&FA.includes(Ae.key)&&U){const{unselectNodesAndEdges:Oe,addSelectedEdges:Pe}=V.getState();Ae.key==="Escape"?(ne.current?.blur(),Oe({edges:[O]})):Pe([t])}};return C.jsx("svg",{style:{zIndex:N},children:C.jsxs("g",{className:Ot(["react-flow__edge",`react-flow__edge-${L}`,O.className,A,{selected:O.selected,animated:O.animated,inactive:!U&&!s,updating:$,selectable:U}]),onClick:ce,onDoubleClick:he,onContextMenu:fe,onMouseEnter:ue,onMouseMove:ge,onMouseLeave:De,onKeyDown:R?Te:void 0,tabIndex:R?0:void 0,role:O.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":O.ariaLabel===null?void 0:O.ariaLabel||`Edge from ${O.source} to ${O.target}`,"aria-describedby":R?`${kk}-${b}`:void 0,ref:ne,...O.domAttributes,children:[!Z&&C.jsx(_,{id:t,source:O.source,target:O.target,type:O.type,selected:O.selected,animated:O.animated,selectable:U,deletable:O.deletable??!0,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,sourceX:P,sourceY:j,targetX:z,targetY:G,sourcePosition:D,targetPosition:H,data:O.data,style:O.style,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerStart:ee,markerEnd:ie,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth}),X&&C.jsx(OB,{edge:O,isReconnectable:X,reconnectRadius:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:v,sourceX:P,sourceY:j,targetX:z,targetY:G,sourcePosition:D,targetPosition:H,setUpdateHover:Q,setReconnecting:B})]})})}var MB=q.memo(EB);const TB=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function Kk({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:i,noPanClassName:s,onReconnect:o,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:g,onEdgeDoubleClick:y,onReconnectStart:v,onReconnectEnd:b,disableKeyboardA11y:S}){const{edgesFocusable:A,edgesReconnectable:k,elementsSelectable:T,onError:O}=Ue(TB,ct),M=dB(e);return C.jsxs("div",{className:"react-flow__edges",children:[C.jsx(xB,{defaultColor:t,rfId:n}),M.map(L=>C.jsx(MB,{id:L,edgesFocusable:A,edgesReconnectable:k,elementsSelectable:T,noPanClassName:s,onReconnect:o,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:p,reconnectRadius:g,onDoubleClick:y,onReconnectStart:v,onReconnectEnd:b,rfId:n,onError:O,edgeTypes:i,disableKeyboardA11y:S},L))]})}Kk.displayName="EdgeRenderer";const NB=q.memo(Kk),DB=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function RB({children:t}){const e=Ue(DB);return C.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function _B(t){const e=Nd(),n=q.useRef(!1);q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const LB=t=>t.panZoom?.syncViewport;function BB(t){const e=Ue(LB),n=ut();return q.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function zB(t){return t.connection.inProgress?{...t.connection,to:Zc(t.connection.to,t.transform)}:{...t.connection}}function PB(t){return zB}function HB(t){const e=PB();return Ue(e,ct)}const jB=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function IB({containerStyle:t,style:e,type:n,component:i}){const{nodesConnectable:s,width:o,height:l,isValid:c,inProgress:f}=Ue(jB,ct);return!(o&&s&&f)?null:C.jsx("svg",{style:t,width:o,height:l,className:"react-flow__connectionline react-flow__container",children:C.jsx("g",{className:Ot(["react-flow__connection",KA(c)]),children:C.jsx(Zk,{style:e,type:n,CustomComponent:i,isValid:c})})})}const Zk=({style:t,type:e=Js.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:s,from:o,fromNode:l,fromHandle:c,fromPosition:f,to:h,toNode:p,toHandle:g,toPosition:y,pointer:v}=HB();if(!s)return;if(n)return C.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:l,fromHandle:c,fromX:o.x,fromY:o.y,toX:h.x,toY:h.y,fromPosition:f,toPosition:y,connectionStatus:KA(i),toNode:p,toHandle:g,pointer:v});let b="";const S={sourceX:o.x,sourceY:o.y,sourcePosition:f,targetX:h.x,targetY:h.y,targetPosition:y};switch(e){case Js.Bezier:[b]=Ky(S);break;case Js.SimpleBezier:[b]=jk(S);break;case Js.Step:[b]=O0({...S,borderRadius:0});break;case Js.SmoothStep:[b]=O0(S);break;default:[b]=uk(S)}return C.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:t})};Zk.displayName="ConnectionLine";const VB={};function Qw(t=VB){q.useRef(t),ut(),q.useEffect(()=>{},[t])}function UB(){ut(),q.useRef(!1),q.useEffect(()=>{},[])}function Jk({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:y,onSelectionEnd:v,connectionLineType:b,connectionLineStyle:S,connectionLineComponent:A,connectionLineContainerStyle:k,selectionKeyCode:T,selectionOnDrag:O,selectionMode:M,multiSelectionKeyCode:L,panActivationKeyCode:_,zoomActivationKeyCode:R,deleteKeyCode:X,onlyRenderVisibleElements:U,elementsSelectable:ne,defaultViewport:$,translateExtent:Q,minZoom:Z,maxZoom:B,preventScrolling:V,defaultMarkerColor:N,zoomOnScroll:P,zoomOnPinch:j,panOnScroll:z,panOnScrollSpeed:G,panOnScrollMode:D,zoomOnDoubleClick:H,panOnDrag:ee,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:he,onPaneMouseLeave:fe,onPaneScroll:ue,onPaneContextMenu:ge,paneClickDistance:De,nodeClickDistance:Te,onEdgeContextMenu:Ae,onEdgeMouseEnter:Oe,onEdgeMouseMove:Pe,onEdgeMouseLeave:We,reconnectRadius:Xe,onReconnect:_t,onReconnectStart:Wn,onReconnectEnd:wn,noDragClassName:Kn,noWheelClassName:Pi,noPanClassName:gr,disableKeyboardA11y:mr,nodeExtent:Pt,rfId:po,viewport:Hi,onViewportChange:bs}){return Qw(t),Qw(e),UB(),_B(n),BB(Hi),C.jsx(iB,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:he,onPaneMouseLeave:fe,onPaneContextMenu:ge,onPaneScroll:ue,paneClickDistance:De,deleteKeyCode:X,selectionKeyCode:T,selectionOnDrag:O,selectionMode:M,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:L,panActivationKeyCode:_,zoomActivationKeyCode:R,elementsSelectable:ne,zoomOnScroll:P,zoomOnPinch:j,zoomOnDoubleClick:H,panOnScroll:z,panOnScrollSpeed:G,panOnScrollMode:D,panOnDrag:ee,defaultViewport:$,translateExtent:Q,minZoom:Z,maxZoom:B,onSelectionContextMenu:g,preventScrolling:V,noDragClassName:Kn,noWheelClassName:Pi,noPanClassName:gr,disableKeyboardA11y:mr,onViewportChange:bs,isControlledViewport:!!Hi,children:C.jsxs(RB,{children:[C.jsx(NB,{edgeTypes:e,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:_t,onReconnectStart:Wn,onReconnectEnd:wn,onlyRenderVisibleElements:U,onEdgeContextMenu:Ae,onEdgeMouseEnter:Oe,onEdgeMouseMove:Pe,onEdgeMouseLeave:We,reconnectRadius:Xe,defaultMarkerColor:N,noPanClassName:gr,disableKeyboardA11y:mr,rfId:po}),C.jsx(IB,{style:S,type:b,component:A,containerStyle:k}),C.jsx("div",{className:"react-flow__edgelabel-renderer"}),C.jsx(hB,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:o,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:Te,onlyRenderVisibleElements:U,noPanClassName:gr,noDragClassName:Kn,disableKeyboardA11y:mr,nodeExtent:Pt,rfId:po}),C.jsx("div",{className:"react-flow__viewport-portal"})]})})}Jk.displayName="GraphView";const $B=q.memo(Jk),Yw=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:g,zIndexMode:y="basic"}={})=>{const v=new Map,b=new Map,S=new Map,A=new Map,k=i??e??[],T=n??t??[],O=p??[0,0],M=g??vc;dk(S,A,k);const L=M0(T,v,b,{nodeOrigin:O,nodeExtent:M,zIndexMode:y});let _=[0,0,1];if(l&&s&&o){const R=Wc(v,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:X,y:U,zoom:ne}=Gy(R,s,o,f,h,c?.padding??.1);_=[X,U,ne]}return{rfId:"1",width:s??0,height:o??0,transform:_,nodes:T,nodesInitialized:L,nodeLookup:v,parentLookup:b,edges:k,edgeLookup:A,connectionLookup:S,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:f,maxZoom:h,translateExtent:vc,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Tl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:O,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:c,fitViewResolver:null,connection:{...WA},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:i_,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:GA,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},qB=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g,zIndexMode:y})=>lL((v,b)=>{async function S(){const{nodeLookup:A,panZoom:k,fitViewOptions:T,fitViewResolver:O,width:M,height:L,minZoom:_,maxZoom:R}=b();k&&(await t_({nodes:A,width:M,height:L,panZoom:k,minZoom:_,maxZoom:R},T),O?.resolve(!0),v({fitViewResolver:null}))}return{...Yw({nodes:t,edges:e,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g,defaultNodes:n,defaultEdges:i,zIndexMode:y}),setNodes:A=>{const{nodeLookup:k,parentLookup:T,nodeOrigin:O,elevateNodesOnSelect:M,fitViewQueued:L,zIndexMode:_}=b(),R=M0(A,k,T,{nodeOrigin:O,nodeExtent:g,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:_});L&&R?(S(),v({nodes:A,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:A,nodesInitialized:R})},setEdges:A=>{const{connectionLookup:k,edgeLookup:T}=b();dk(k,T,A),v({edges:A})},setDefaultNodesAndEdges:(A,k)=>{if(A){const{setNodes:T}=b();T(A),v({hasDefaultNodes:!0})}if(k){const{setEdges:T}=b();T(k),v({hasDefaultEdges:!0})}},updateNodeInternals:A=>{const{triggerNodeChanges:k,nodeLookup:T,parentLookup:O,domNode:M,nodeOrigin:L,nodeExtent:_,debug:R,fitViewQueued:X,zIndexMode:U}=b(),{changes:ne,updatedInternals:$}=k_(A,T,O,M,L,_,U);$&&(S_(T,O,{nodeOrigin:L,nodeExtent:_,zIndexMode:U}),X?(S(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),ne?.length>0&&(R&&console.log("React Flow: trigger node changes",ne),k?.(ne)))},updateNodePositions:(A,k=!1)=>{const T=[];let O=[];const{nodeLookup:M,triggerNodeChanges:L,connection:_,updateConnection:R,onNodesChangeMiddlewareMap:X}=b();for(const[U,ne]of A){const $=M.get(U),Q=!!($?.expandParent&&$?.parentId&&ne?.position),Z={id:U,type:"position",position:Q?{x:Math.max(0,ne.position.x),y:Math.max(0,ne.position.y)}:ne.position,dragging:k};if($&&_.inProgress&&_.fromNode.id===$.id){const B=lo($,_.fromHandle,be.Left,!0);R({..._,from:B})}Q&&$.parentId&&T.push({id:U,parentId:$.parentId,rect:{...ne.internals.positionAbsolute,width:ne.measured.width??0,height:ne.measured.height??0}}),O.push(Z)}if(T.length>0){const{parentLookup:U,nodeOrigin:ne}=b(),$=nx(T,M,U,ne);O.push(...$)}for(const U of X.values())O=U(O);L(O)},triggerNodeChanges:A=>{const{onNodesChange:k,setNodes:T,nodes:O,hasDefaultNodes:M,debug:L}=b();if(A?.length){if(M){const _=Mk(A,O);T(_)}L&&console.log("React Flow: trigger node changes",A),k?.(A)}},triggerEdgeChanges:A=>{const{onEdgesChange:k,setEdges:T,edges:O,hasDefaultEdges:M,debug:L}=b();if(A?.length){if(M){const _=Tk(A,O);T(_)}L&&console.log("React Flow: trigger edge changes",A),k?.(A)}},addSelectedNodes:A=>{const{multiSelectionActive:k,edgeLookup:T,nodeLookup:O,triggerNodeChanges:M,triggerEdgeChanges:L}=b();if(k){const _=A.map(R=>Ur(R,!0));M(_);return}M(ul(O,new Set([...A]),!0)),L(ul(T))},addSelectedEdges:A=>{const{multiSelectionActive:k,edgeLookup:T,nodeLookup:O,triggerNodeChanges:M,triggerEdgeChanges:L}=b();if(k){const _=A.map(R=>Ur(R,!0));L(_);return}L(ul(T,new Set([...A]))),M(ul(O,new Set,!0))},unselectNodesAndEdges:({nodes:A,edges:k}={})=>{const{edges:T,nodes:O,nodeLookup:M,triggerNodeChanges:L,triggerEdgeChanges:_}=b(),R=A||O,X=k||T,U=R.map($=>{const Q=M.get($.id);return Q&&(Q.selected=!1),Ur($.id,!1)}),ne=X.map($=>Ur($.id,!1));L(U),_(ne)},setMinZoom:A=>{const{panZoom:k,maxZoom:T}=b();k?.setScaleExtent([A,T]),v({minZoom:A})},setMaxZoom:A=>{const{panZoom:k,minZoom:T}=b();k?.setScaleExtent([T,A]),v({maxZoom:A})},setTranslateExtent:A=>{b().panZoom?.setTranslateExtent(A),v({translateExtent:A})},resetSelectedElements:()=>{const{edges:A,nodes:k,triggerNodeChanges:T,triggerEdgeChanges:O,elementsSelectable:M}=b();if(!M)return;const L=k.reduce((R,X)=>X.selected?[...R,Ur(X.id,!1)]:R,[]),_=A.reduce((R,X)=>X.selected?[...R,Ur(X.id,!1)]:R,[]);T(L),O(_)},setNodeExtent:A=>{const{nodes:k,nodeLookup:T,parentLookup:O,nodeOrigin:M,elevateNodesOnSelect:L,nodeExtent:_,zIndexMode:R}=b();A[0][0]===_[0][0]&&A[0][1]===_[0][1]&&A[1][0]===_[1][0]&&A[1][1]===_[1][1]||(M0(k,T,O,{nodeOrigin:M,nodeExtent:A,elevateNodesOnSelect:L,checkEquality:!1,zIndexMode:R}),v({nodeExtent:A}))},panBy:A=>{const{transform:k,width:T,height:O,panZoom:M,translateExtent:L}=b();return O_({delta:A,panZoom:M,transform:k,translateExtent:L,width:T,height:O})},setCenter:async(A,k,T)=>{const{width:O,height:M,maxZoom:L,panZoom:_}=b();if(!_)return Promise.resolve(!1);const R=typeof T?.zoom<"u"?T.zoom:L;return await _.setViewport({x:O/2-A*R,y:M/2-k*R,zoom:R},{duration:T?.duration,ease:T?.ease,interpolate:T?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...WA}})},updateConnection:A=>{v({connection:A})},reset:()=>v({...Yw()})}},Object.is);function eO({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:i,initialWidth:s,initialHeight:o,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:f,fitView:h,nodeOrigin:p,nodeExtent:g,zIndexMode:y,children:v}){const[b]=q.useState(()=>qB({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:s,height:o,fitView:h,minZoom:l,maxZoom:c,fitViewOptions:f,nodeOrigin:p,nodeExtent:g,zIndexMode:y}));return C.jsx(cL,{value:b,children:C.jsx(RL,{children:v})})}function QB({children:t,nodes:e,edges:n,defaultNodes:i,defaultEdges:s,width:o,height:l,fitView:c,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:g,nodeExtent:y,zIndexMode:v}){return q.useContext(Md)?C.jsx(C.Fragment,{children:t}):C.jsx(eO,{initialNodes:e,initialEdges:n,defaultNodes:i,defaultEdges:s,initialWidth:o,initialHeight:l,fitView:c,initialFitViewOptions:f,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:g,nodeExtent:y,zIndexMode:v,children:t})}const YB={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function XB({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:s,nodeTypes:o,edgeTypes:l,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:g,onMoveEnd:y,onConnect:v,onConnectStart:b,onConnectEnd:S,onClickConnectStart:A,onClickConnectEnd:k,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:L,onNodeDoubleClick:_,onNodeDragStart:R,onNodeDrag:X,onNodeDragStop:U,onNodesDelete:ne,onEdgesDelete:$,onDelete:Q,onSelectionChange:Z,onSelectionDragStart:B,onSelectionDrag:V,onSelectionDragStop:N,onSelectionContextMenu:P,onSelectionStart:j,onSelectionEnd:z,onBeforeDelete:G,connectionMode:D,connectionLineType:H=Js.Bezier,connectionLineStyle:ee,connectionLineComponent:ie,connectionLineContainerStyle:ce,deleteKeyCode:he="Backspace",selectionKeyCode:fe="Shift",selectionOnDrag:ue=!1,selectionMode:ge=bc.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Te=wc()?"Meta":"Control",zoomActivationKeyCode:Ae=wc()?"Meta":"Control",snapToGrid:Oe,snapGrid:Pe,onlyRenderVisibleElements:We=!1,selectNodesOnDrag:Xe,nodesDraggable:_t,autoPanOnNodeFocus:Wn,nodesConnectable:wn,nodesFocusable:Kn,nodeOrigin:Pi=Ok,edgesFocusable:gr,edgesReconnectable:mr,elementsSelectable:Pt=!0,defaultViewport:po=wL,minZoom:Hi=.5,maxZoom:bs=2,translateExtent:yr=vc,preventScrolling:Wd=!0,nodeExtent:go,defaultMarkerColor:Kd="#b1b1b7",zoomOnScroll:Zd=!0,zoomOnPinch:xr=!0,panOnScroll:Zt=!1,panOnScrollSpeed:di=.5,panOnScrollMode:Jt=Jr.Free,zoomOnDoubleClick:Jd=!0,panOnDrag:ep=!0,onPaneClick:tp,onPaneMouseEnter:mo,onPaneMouseMove:yo,onPaneMouseLeave:xo,onPaneScroll:ji,onPaneContextMenu:vo,paneClickDistance:vr=1,nodeClickDistance:np=0,children:lu,onReconnect:Gl,onReconnectStart:br,onReconnectEnd:ip,onEdgeContextMenu:au,onEdgeDoubleClick:cu,onEdgeMouseEnter:uu,onEdgeMouseMove:Wl,onEdgeMouseLeave:Kl,reconnectRadius:fu=10,onNodesChange:hu,onEdgesChange:pi,noDragClassName:Et="nodrag",noWheelClassName:Yt="nowheel",noPanClassName:Ii="nopan",fitView:bo,fitViewOptions:du,connectOnClick:sp,attributionPosition:pu,proOptions:Sr,defaultEdgeOptions:Zl,elevateNodesOnSelect:Ss=!0,elevateEdgesOnSelect:ws=!1,disableKeyboardA11y:Cs=!1,autoPanOnConnect:As,autoPanOnNodeDrag:vt,autoPanSpeed:gu,connectionRadius:mu,isValidConnection:Vi,onError:ks,style:rp,id:Jl,nodeDragThreshold:yu,connectionDragThreshold:op,viewport:So,onViewportChange:wo,width:Zn,height:on,colorMode:xu="light",debug:lp,onScroll:Co,ariaLabelConfig:vu,zIndexMode:wr="basic",...ap},ln){const Cr=Jl||"1",bu=OL(xu),ea=q.useCallback(Ui=>{Ui.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Co?.(Ui)},[Co]);return C.jsx("div",{"data-testid":"rf__wrapper",...ap,onScroll:ea,style:{...rp,...YB},ref:ln,className:Ot(["react-flow",s,bu]),id:Jl,role:"application",children:C.jsxs(QB,{nodes:t,edges:e,width:Zn,height:on,fitView:bo,fitViewOptions:du,minZoom:Hi,maxZoom:bs,nodeOrigin:Pi,nodeExtent:go,zIndexMode:wr,children:[C.jsx($B,{onInit:h,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:T,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:L,onNodeDoubleClick:_,nodeTypes:o,edgeTypes:l,connectionLineType:H,connectionLineStyle:ee,connectionLineComponent:ie,connectionLineContainerStyle:ce,selectionKeyCode:fe,selectionOnDrag:ue,selectionMode:ge,deleteKeyCode:he,multiSelectionKeyCode:Te,panActivationKeyCode:De,zoomActivationKeyCode:Ae,onlyRenderVisibleElements:We,defaultViewport:po,translateExtent:yr,minZoom:Hi,maxZoom:bs,preventScrolling:Wd,zoomOnScroll:Zd,zoomOnPinch:xr,zoomOnDoubleClick:Jd,panOnScroll:Zt,panOnScrollSpeed:di,panOnScrollMode:Jt,panOnDrag:ep,onPaneClick:tp,onPaneMouseEnter:mo,onPaneMouseMove:yo,onPaneMouseLeave:xo,onPaneScroll:ji,onPaneContextMenu:vo,paneClickDistance:vr,nodeClickDistance:np,onSelectionContextMenu:P,onSelectionStart:j,onSelectionEnd:z,onReconnect:Gl,onReconnectStart:br,onReconnectEnd:ip,onEdgeContextMenu:au,onEdgeDoubleClick:cu,onEdgeMouseEnter:uu,onEdgeMouseMove:Wl,onEdgeMouseLeave:Kl,reconnectRadius:fu,defaultMarkerColor:Kd,noDragClassName:Et,noWheelClassName:Yt,noPanClassName:Ii,rfId:Cr,disableKeyboardA11y:Cs,nodeExtent:go,viewport:So,onViewportChange:wo}),C.jsx(kL,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:v,onConnectStart:b,onConnectEnd:S,onClickConnectStart:A,onClickConnectEnd:k,nodesDraggable:_t,autoPanOnNodeFocus:Wn,nodesConnectable:wn,nodesFocusable:Kn,edgesFocusable:gr,edgesReconnectable:mr,elementsSelectable:Pt,elevateNodesOnSelect:Ss,elevateEdgesOnSelect:ws,minZoom:Hi,maxZoom:bs,nodeExtent:go,onNodesChange:hu,onEdgesChange:pi,snapToGrid:Oe,snapGrid:Pe,connectionMode:D,translateExtent:yr,connectOnClick:sp,defaultEdgeOptions:Zl,fitView:bo,fitViewOptions:du,onNodesDelete:ne,onEdgesDelete:$,onDelete:Q,onNodeDragStart:R,onNodeDrag:X,onNodeDragStop:U,onSelectionDrag:V,onSelectionDragStart:B,onSelectionDragStop:N,onMove:p,onMoveStart:g,onMoveEnd:y,noPanClassName:Ii,nodeOrigin:Pi,rfId:Cr,autoPanOnConnect:As,autoPanOnNodeDrag:vt,autoPanSpeed:gu,onError:ks,connectionRadius:mu,isValidConnection:Vi,selectNodesOnDrag:Xe,nodeDragThreshold:yu,connectionDragThreshold:op,onBeforeDelete:G,debug:lp,ariaLabelConfig:vu,zIndexMode:wr}),C.jsx(SL,{onSelectionChange:Z}),lu,C.jsx(mL,{proOptions:Sr,position:pu}),C.jsx(gL,{rfId:Cr,disableKeyboardA11y:Cs})]})})}var FB=Nk(XB);const GB=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function WB({children:t}){const e=Ue(GB);return e?aL.createPortal(t,e):null}function KB(t){const[e,n]=q.useState(t),i=q.useCallback(s=>n(o=>Mk(s,o)),[]);return[e,n,i]}function ZB(t){const[e,n]=q.useState(t),i=q.useCallback(s=>n(o=>Tk(s,o)),[]);return[e,n,i]}function JB({dimensions:t,lineWidth:e,variant:n,className:i}){return C.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ot(["react-flow__background-pattern",n,i])})}function e6({radius:t,className:e}){return C.jsx("circle",{cx:t,cy:t,r:t,className:Ot(["react-flow__background-pattern","dots",e])})}var hs;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(hs||(hs={}));const t6={[hs.Dots]:1,[hs.Lines]:1,[hs.Cross]:6},n6=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function tO({id:t,variant:e=hs.Dots,gap:n=20,size:i,lineWidth:s=1,offset:o=0,color:l,bgColor:c,style:f,className:h,patternClassName:p}){const g=q.useRef(null),{transform:y,patternId:v}=Ue(n6,ct),b=i||t6[e],S=e===hs.Dots,A=e===hs.Cross,k=Array.isArray(n)?n:[n,n],T=[k[0]*y[2]||1,k[1]*y[2]||1],O=b*y[2],M=Array.isArray(o)?o:[o,o],L=A?[O,O]:T,_=[M[0]*y[2]||1+L[0]/2,M[1]*y[2]||1+L[1]/2],R=`${v}${t||""}`;return C.jsxs("svg",{className:Ot(["react-flow__background",h]),style:{...f,...Dd,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:g,"data-testid":"rf__background",children:[C.jsx("pattern",{id:R,x:y[0]%T[0],y:y[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?C.jsx(e6,{radius:O/2,className:p}):C.jsx(JB,{dimensions:L,lineWidth:s,variant:e,className:p})}),C.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}tO.displayName="Background";const i6=q.memo(tO);function s6(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:C.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function r6(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:C.jsx("path",{d:"M0 0h32v4.2H0z"})})}function o6(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:C.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function l6(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:C.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function a6(){return C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:C.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function jf({children:t,className:e,...n}){return C.jsx("button",{type:"button",className:Ot(["react-flow__controls-button",e]),...n,children:t})}const c6=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function nO({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:c,onInteractiveChange:f,className:h,children:p,position:g="bottom-left",orientation:y="vertical","aria-label":v}){const b=ut(),{isInteractive:S,minZoomReached:A,maxZoomReached:k,ariaLabelConfig:T}=Ue(c6,ct),{zoomIn:O,zoomOut:M,fitView:L}=Nd(),_=()=>{O(),o?.()},R=()=>{M(),l?.()},X=()=>{L(s),c?.()},U=()=>{b.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),f?.(!S)},ne=y==="horizontal"?"horizontal":"vertical";return C.jsxs(Td,{className:Ot(["react-flow__controls",ne,h]),position:g,style:t,"data-testid":"rf__controls","aria-label":v??T["controls.ariaLabel"],children:[e&&C.jsxs(C.Fragment,{children:[C.jsx(jf,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:k,children:C.jsx(s6,{})}),C.jsx(jf,{onClick:R,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:A,children:C.jsx(r6,{})})]}),n&&C.jsx(jf,{className:"react-flow__controls-fitview",onClick:X,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:C.jsx(o6,{})}),i&&C.jsx(jf,{className:"react-flow__controls-interactive",onClick:U,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:S?C.jsx(a6,{}):C.jsx(l6,{})}),p]})}nO.displayName="Controls";const u6=q.memo(nO);function f6({id:t,x:e,y:n,width:i,height:s,style:o,color:l,strokeColor:c,strokeWidth:f,className:h,borderRadius:p,shapeRendering:g,selected:y,onClick:v}){const{background:b,backgroundColor:S}=o||{},A=l||b||S;return C.jsx("rect",{className:Ot(["react-flow__minimap-node",{selected:y},h]),x:e,y:n,rx:p,ry:p,width:i,height:s,style:{fill:A,stroke:c,strokeWidth:f},shapeRendering:g,onClick:v?k=>v(k,t):void 0})}const h6=q.memo(f6),d6=t=>t.nodes.map(e=>e.id),Dm=t=>t instanceof Function?t:()=>t;function p6({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:o=h6,onClick:l}){const c=Ue(d6,ct),f=Dm(e),h=Dm(t),p=Dm(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return C.jsx(C.Fragment,{children:c.map(y=>C.jsx(m6,{id:y,nodeColorFunc:f,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:i,nodeStrokeWidth:s,NodeComponent:o,onClick:l,shapeRendering:g},y))})}function g6({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:l,NodeComponent:c,onClick:f}){const{node:h,x:p,y:g,width:y,height:v}=Ue(b=>{const{internals:S}=b.nodeLookup.get(t),A=S.userNode,{x:k,y:T}=S.positionAbsolute,{width:O,height:M}=vs(A);return{node:A,x:k,y:T,width:O,height:M}},ct);return!h||h.hidden||!ik(h)?null:C.jsx(c,{x:p,y:g,width:y,height:v,style:h.style,selected:!!h.selected,className:i(h),color:e(h),borderRadius:s,strokeColor:n(h),strokeWidth:o,shapeRendering:l,onClick:f,id:h.id})}const m6=q.memo(g6);var y6=q.memo(p6);const x6=200,v6=150,b6=t=>!t.hidden,S6=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?nk(Wc(t.nodeLookup,{filter:b6}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},w6="react-flow__minimap-desc";function iO({style:t,className:e,nodeStrokeColor:n,nodeColor:i,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:l,nodeComponent:c,bgColor:f,maskColor:h,maskStrokeColor:p,maskStrokeWidth:g,position:y="bottom-right",onClick:v,onNodeClick:b,pannable:S=!1,zoomable:A=!1,ariaLabel:k,inversePan:T,zoomStep:O=1,offsetScale:M=5}){const L=ut(),_=q.useRef(null),{boundingRect:R,viewBB:X,rfId:U,panZoom:ne,translateExtent:$,flowWidth:Q,flowHeight:Z,ariaLabelConfig:B}=Ue(S6,ct),V=t?.width??x6,N=t?.height??v6,P=R.width/V,j=R.height/N,z=Math.max(P,j),G=z*V,D=z*N,H=M*z,ee=R.x-(G-R.width)/2-H,ie=R.y-(D-R.height)/2-H,ce=G+H*2,he=D+H*2,fe=`${w6}-${U}`,ue=q.useRef(0),ge=q.useRef();ue.current=z,q.useEffect(()=>{if(_.current&&ne)return ge.current=B_({domNode:_.current,panZoom:ne,getTransform:()=>L.getState().transform,getViewScale:()=>ue.current}),()=>{ge.current?.destroy()}},[ne]),q.useEffect(()=>{ge.current?.update({translateExtent:$,width:Q,height:Z,inversePan:T,pannable:S,zoomStep:O,zoomable:A})},[S,A,T,O,$,Q,Z]);const De=v?Oe=>{const[Pe,We]=ge.current?.pointer(Oe)||[0,0];v(Oe,{x:Pe,y:We})}:void 0,Te=b?q.useCallback((Oe,Pe)=>{const We=L.getState().nodeLookup.get(Pe).internals.userNode;b(Oe,We)},[]):void 0,Ae=k??B["minimap.ariaLabel"];return C.jsx(Td,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*z:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Ot(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:C.jsxs("svg",{width:V,height:N,viewBox:`${ee} ${ie} ${ce} ${he}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":fe,ref:_,onClick:De,children:[Ae&&C.jsx("title",{id:fe,children:Ae}),C.jsx(y6,{onClick:Te,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:c}),C.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-H},${ie-H}h${ce+H*2}v${he+H*2}h${-ce-H*2}z
        M${X.x},${X.y}h${X.width}v${X.height}h${-X.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}iO.displayName="MiniMap";q.memo(iO);const C6=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,A6={[_l.Line]:"right",[_l.Handle]:"bottom-right"};function k6({nodeId:t,position:e,variant:n=_l.Handle,className:i,style:s=void 0,children:o,color:l,minWidth:c=10,minHeight:f=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:y,autoScale:v=!0,shouldResize:b,onResizeStart:S,onResize:A,onResizeEnd:k}){const T=Lk(),O=typeof t=="string"?t:T,M=ut(),L=q.useRef(null),_=n===_l.Handle,R=Ue(q.useCallback(C6(_&&v),[_,v]),ct),X=q.useRef(null),U=e??A6[n];q.useEffect(()=>{if(!(!L.current||!O))return X.current||(X.current=G_({domNode:L.current,nodeId:O,getStoreItems:()=>{const{nodeLookup:$,transform:Q,snapGrid:Z,snapToGrid:B,nodeOrigin:V,domNode:N}=M.getState();return{nodeLookup:$,transform:Q,snapGrid:Z,snapToGrid:B,nodeOrigin:V,paneDomNode:N}},onChange:($,Q)=>{const{triggerNodeChanges:Z,nodeLookup:B,parentLookup:V,nodeOrigin:N}=M.getState(),P=[],j={x:$.x,y:$.y},z=B.get(O);if(z&&z.expandParent&&z.parentId){const G=z.origin??N,D=$.width??z.measured.width??0,H=$.height??z.measured.height??0,ee={id:z.id,parentId:z.parentId,rect:{width:D,height:H,...sk({x:$.x??z.position.x,y:$.y??z.position.y},{width:D,height:H},z.parentId,B,G)}},ie=nx([ee],B,V,N);P.push(...ie),j.x=$.x?Math.max(G[0]*D,$.x):void 0,j.y=$.y?Math.max(G[1]*H,$.y):void 0}if(j.x!==void 0&&j.y!==void 0){const G={id:O,type:"position",position:{...j}};P.push(G)}if($.width!==void 0&&$.height!==void 0){const D={id:O,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:$.width,height:$.height}};P.push(D)}for(const G of Q){const D={...G,type:"position"};P.push(D)}Z(P)},onEnd:({width:$,height:Q})=>{const Z={id:O,type:"dimensions",resizing:!1,dimensions:{width:$,height:Q}};M.getState().triggerNodeChanges([Z])}})),X.current.update({controlPosition:U,boundaries:{minWidth:c,minHeight:f,maxWidth:h,maxHeight:p},keepAspectRatio:g,resizeDirection:y,onResizeStart:S,onResize:A,onResizeEnd:k,shouldResize:b}),()=>{X.current?.destroy()}},[U,c,f,h,p,g,S,A,k,b]);const ne=U.split("-");return C.jsx("div",{className:Ot(["react-flow__resize-control","nodrag",...ne,n,i]),ref:L,style:{...s,scale:R,...l&&{[_?"backgroundColor":"borderColor"]:l}},children:o})}q.memo(k6);function D0(){return D0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},D0.apply(null,arguments)}function O6(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}let R0=[],sO=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?sO:R0).push(n=n+t[e])})();function E6(t){if(t<768)return!1;for(let e=0,n=R0.length;;){let i=e+n>>1;if(t<R0[i])n=i;else if(t>=sO[i])e=i+1;else return!0;if(e==n)return!1}}function Xw(t){return t>=127462&&t<=127487}const Fw=8205;function M6(t,e,n=!0,i=!0){return(n?rO:T6)(t,e,i)}function rO(t,e,n){if(e==t.length)return e;e&&oO(t.charCodeAt(e))&&lO(t.charCodeAt(e-1))&&e--;let i=Rm(t,e);for(e+=Gw(i);e<t.length;){let s=Rm(t,e);if(i==Fw||s==Fw||n&&E6(s))e+=Gw(s),i=s;else if(Xw(s)){let o=0,l=e-2;for(;l>=0&&Xw(Rm(t,l));)o++,l-=2;if(o%2==0)break;e+=2}else break}return e}function T6(t,e,n){for(;e>0;){let i=rO(t,e-2,n);if(i<e)return i;e--}return 0}function Rm(t,e){let n=t.charCodeAt(e);if(!lO(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return oO(i)?(n-55296<<10)+(i-56320)+65536:n}function oO(t){return t>=56320&&t<57344}function lO(t){return t>=55296&&t<56320}function Gw(t){return t<65536?1:2}class Qe{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Ll(this,e,n);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(n,this.length,s,1),Ai.from(s,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Ll(this,e,n);let i=[];return this.decompose(e,n,i,0),Ai.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new oc(this),o=new oc(e);for(let l=n,c=n;;){if(s.next(l),o.next(l),l=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(c+=s.value.length,s.done||c>=i)return!0}}iter(e=1){return new oc(this,e)}iterRange(e,n=this.length){return new aO(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new cO(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Qe.empty:e.length<=32?new mt(e):Ai.from(mt.split(e,[]))}}class mt extends Qe{constructor(e,n=N6(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,s){for(let o=0;;o++){let l=this.text[o],c=s+l.length;if((n?i:c)>=e)return new D6(s,c,i,l);s=c+1,i++}}decompose(e,n,i,s){let o=e<=0&&n>=this.length?this:new mt(Ww(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let l=i.pop(),c=mh(o.text,l.text.slice(),0,o.length);if(c.length<=32)i.push(new mt(c,l.length+o.length));else{let f=c.length>>1;i.push(new mt(c.slice(0,f)),new mt(c.slice(f)))}}else i.push(o)}replace(e,n,i){if(!(i instanceof mt))return super.replace(e,n,i);[e,n]=Ll(this,e,n);let s=mh(this.text,mh(i.text,Ww(this.text,0,e)),n),o=this.length+i.length-(n-e);return s.length<=32?new mt(s,o):Ai.from(mt.split(s,[]),o)}sliceString(e,n=this.length,i=`
`){[e,n]=Ll(this,e,n);let s="";for(let o=0,l=0;o<=n&&l<this.text.length;l++){let c=this.text[l],f=o+c.length;o>e&&l&&(s+=i),e<f&&n>o&&(s+=c.slice(Math.max(0,e-o),n-o)),o=f+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(n.push(new mt(i,s)),i=[],s=-1);return s>-1&&n.push(new mt(i,s)),n}}class Ai extends Qe{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,s){for(let o=0;;o++){let l=this.children[o],c=s+l.length,f=i+l.lines-1;if((n?f:c)>=e)return l.lineInner(e,n,i,s);s=c+1,i=f+1}}decompose(e,n,i,s){for(let o=0,l=0;l<=n&&o<this.children.length;o++){let c=this.children[o],f=l+c.length;if(e<=f&&n>=l){let h=s&((l<=e?1:0)|(f>=n?2:0));l>=e&&f<=n&&!h?i.push(c):c.decompose(e-l,n-l,i,h)}l=f+1}}replace(e,n,i){if([e,n]=Ll(this,e,n),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let l=this.children[s],c=o+l.length;if(e>=o&&n<=c){let f=l.replace(e-o,n-o,i),h=this.lines-l.lines+f.lines;if(f.lines<h>>4&&f.lines>h>>6){let p=this.children.slice();return p[s]=f,new Ai(p,this.length-(n-e)+i.length)}return super.replace(o,c,f)}o=c+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Ll(this,e,n);let s="";for(let o=0,l=0;o<this.children.length&&l<=n;o++){let c=this.children[o],f=l+c.length;l>e&&o&&(s+=i),e<f&&n>l&&(s+=c.sliceString(e-l,n-l,i)),l=f+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ai))return 0;let i=0,[s,o,l,c]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,o+=n){if(s==l||o==c)return i;let f=this.children[s],h=e.children[o];if(f!=h)return i+f.scanIdentical(h,n);i+=f.length+1}}static from(e,n=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let v of e)i+=v.lines;if(i<32){let v=[];for(let b of e)b.flatten(v);return new mt(v,n)}let s=Math.max(32,i>>5),o=s<<1,l=s>>1,c=[],f=0,h=-1,p=[];function g(v){let b;if(v.lines>o&&v instanceof Ai)for(let S of v.children)g(S);else v.lines>l&&(f>l||!f)?(y(),c.push(v)):v instanceof mt&&f&&(b=p[p.length-1])instanceof mt&&v.lines+b.lines<=32?(f+=v.lines,h+=v.length+1,p[p.length-1]=new mt(b.text.concat(v.text),b.length+1+v.length)):(f+v.lines>s&&y(),f+=v.lines,h+=v.length+1,p.push(v))}function y(){f!=0&&(c.push(p.length==1?p[0]:Ai.from(p,h)),h=-1,f=p.length=0)}for(let v of e)g(v);return y(),c.length==1?c[0]:new Ai(c,n)}}Qe.empty=new mt([""],0);function N6(t){let e=-1;for(let n of t)e+=n.length+1;return e}function mh(t,e,n=0,i=1e9){for(let s=0,o=0,l=!0;o<t.length&&s<=i;o++){let c=t[o],f=s+c.length;f>=n&&(f>i&&(c=c.slice(0,i-s)),s<n&&(c=c.slice(n-s)),l?(e[e.length-1]+=c,l=!1):e.push(c)),s=f+1}return e}function Ww(t,e,n){return mh(t,[""],e,n)}class oc{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof mt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],l=o>>1,c=s instanceof mt?s.text.length:s.children.length;if(l==(n>0?c:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof mt){let f=s.text[l+(n<0?-1:0)];if(this.offsets[i]+=n,f.length>Math.max(0,e))return this.value=e==0?f:n>0?f.slice(e):f.slice(0,f.length-e),this;e-=f.length}else{let f=s.children[l+(n<0?-1:0)];e>f.length?(e-=f.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(f),this.offsets.push(n>0?1:(f instanceof mt?f.text.length:f.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class aO{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new oc(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=i?s:n<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class cO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this.iter()},oc.prototype[Symbol.iterator]=aO.prototype[Symbol.iterator]=cO.prototype[Symbol.iterator]=function(){return this});class D6{constructor(e,n,i,s){this.from=e,this.to=n,this.number=i,this.text=s}get length(){return this.to-this.from}}function Ll(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Dt(t,e,n=!0,i=!0){return M6(t,e,n,i)}function R6(t){return t>=56320&&t<57344}function _6(t){return t>=55296&&t<56320}function pn(t,e){let n=t.charCodeAt(e);if(!_6(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return R6(i)?(n-55296<<10)+(i-56320)+65536:n}function sx(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function ki(t){return t<65536?1:2}const _0=/\r\n?|\n/;var nn=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(nn||(nn={}));class Ni{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,s=0;n<this.sections.length;){let o=this.sections[n++],l=this.sections[n++];l<0?(e(i,s,o),s+=o):s+=l,i+=o}}iterChangedRanges(e,n=!1){L0(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];s<0?e.push(i,s):e.push(s,i)}return new Ni(e)}composeDesc(e){return this.empty?e:e.empty?this:uO(this,e)}mapDesc(e,n=!1){return e.empty?this:B0(this,e,n)}mapPos(e,n=-1,i=nn.Simple){let s=0,o=0;for(let l=0;l<this.sections.length;){let c=this.sections[l++],f=this.sections[l++],h=s+c;if(f<0){if(h>e)return o+(e-s);o+=c}else{if(i!=nn.Simple&&h>=e&&(i==nn.TrackDel&&s<e&&h>e||i==nn.TrackBefore&&s<e||i==nn.TrackAfter&&h>e))return null;if(h>e||h==e&&n<0&&!c)return e==s||n<0?o:o+f;o+=f}s=h}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,n=e){for(let i=0,s=0;i<this.sections.length&&s<=n;){let o=this.sections[i++],l=this.sections[i++],c=s+o;if(l>=0&&s<=n&&c>=e)return s<e&&c>n?"cover":!0;s=c}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ni(e)}static create(e){return new Ni(e)}}class Tt extends Ni{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return L0(this,(n,i,s,o,l)=>e=e.replace(s,s+(i-n),l),!1),e}mapDesc(e,n=!1){return B0(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let s=0,o=0;s<n.length;s+=2){let l=n[s],c=n[s+1];if(c>=0){n[s]=c,n[s+1]=l;let f=s>>1;for(;i.length<f;)i.push(Qe.empty);i.push(l?e.slice(o,o+l):Qe.empty)}o+=l}return new Tt(n,i)}compose(e){return this.empty?e:e.empty?this:uO(this,e,!0)}map(e,n=!1){return e.empty?this:B0(this,e,n,!0)}iterChanges(e,n=!1){L0(this,e,n)}get desc(){return Ni.create(this.sections)}filter(e){let n=[],i=[],s=[],o=new Ac(this);e:for(let l=0,c=0;;){let f=l==e.length?1e9:e[l++];for(;c<f||c==f&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,f-c);Ft(s,p,-1);let g=o.ins==-1?-1:o.off==0?o.ins:0;Ft(n,p,g),g>0&&tr(i,n,o.text),o.forward(p),c+=p}let h=e[l++];for(;c<h;){if(o.done)break e;let p=Math.min(o.len,h-c);Ft(n,p,-1),Ft(s,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),c+=p}}return{changes:new Tt(n,i),filtered:Ni.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],s=this.sections[n+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let s=[],o=[],l=0,c=null;function f(p=!1){if(!p&&!s.length)return;l<n&&Ft(s,n-l,-1);let g=new Tt(s,o);c=c?c.compose(g.map(c)):g,s=[],o=[],l=0}function h(p){if(Array.isArray(p))for(let g of p)h(g);else if(p instanceof Tt){if(p.length!=n)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${n})`);f(),c=c?c.compose(p.map(c)):p}else{let{from:g,to:y=g,insert:v}=p;if(g>y||g<0||y>n)throw new RangeError(`Invalid change range ${g} to ${y} (in doc of length ${n})`);let b=v?typeof v=="string"?Qe.of(v.split(i||_0)):v:Qe.empty,S=b.length;if(g==y&&S==0)return;g<l&&f(),g>l&&Ft(s,g-l,-1),Ft(s,y-g,S),tr(o,s,b),l=y}}return h(e),f(!c),c}static empty(e){return new Tt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((l,c)=>c&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;i.length<s;)i.push(Qe.empty);i[s]=Qe.of(o.slice(1)),n.push(o[0],i[s].length)}}}return new Tt(n,i)}static createSet(e,n){return new Tt(e,n)}}function Ft(t,e,n,i=!1){if(e==0&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=n:i?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function tr(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Qe.empty);t.push(n)}}function L0(t,e,n){let i=t.inserted;for(let s=0,o=0,l=0;l<t.sections.length;){let c=t.sections[l++],f=t.sections[l++];if(f<0)s+=c,o+=c;else{let h=s,p=o,g=Qe.empty;for(;h+=c,p+=f,f&&i&&(g=g.append(i[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)c=t.sections[l++],f=t.sections[l++];e(s,h,o,p,g),s=h,o=p}}}function B0(t,e,n,i=!1){let s=[],o=i?[]:null,l=new Ac(t),c=new Ac(e);for(let f=-1;;){if(l.done&&c.len||c.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&c.ins==-1){let h=Math.min(l.len,c.len);Ft(s,h,-1),l.forward(h),c.forward(h)}else if(c.ins>=0&&(l.ins<0||f==l.i||l.off==0&&(c.len<l.len||c.len==l.len&&!n))){let h=c.len;for(Ft(s,c.ins,-1);h;){let p=Math.min(l.len,h);l.ins>=0&&f<l.i&&l.len<=p&&(Ft(s,0,l.ins),o&&tr(o,s,l.text),f=l.i),l.forward(p),h-=p}c.next()}else if(l.ins>=0){let h=0,p=l.len;for(;p;)if(c.ins==-1){let g=Math.min(p,c.len);h+=g,p-=g,c.forward(g)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;Ft(s,h,f<l.i?l.ins:0),o&&f<l.i&&tr(o,s,l.text),f=l.i,l.forward(l.len-p)}else{if(l.done&&c.done)return o?Tt.createSet(s,o):Ni.create(s);throw new Error("Mismatched change set lengths")}}}function uO(t,e,n=!1){let i=[],s=n?[]:null,o=new Ac(t),l=new Ac(e);for(let c=!1;;){if(o.done&&l.done)return s?Tt.createSet(i,s):Ni.create(i);if(o.ins==0)Ft(i,o.len,0,c),o.next();else if(l.len==0&&!l.done)Ft(i,0,l.ins,c),s&&tr(s,i,l.text),l.next();else{if(o.done||l.done)throw new Error("Mismatched change set lengths");{let f=Math.min(o.len2,l.len),h=i.length;if(o.ins==-1){let p=l.ins==-1?-1:l.off?0:l.ins;Ft(i,f,p,c),s&&p&&tr(s,i,l.text)}else l.ins==-1?(Ft(i,o.off?0:o.len,f,c),s&&tr(s,i,o.textBit(f))):(Ft(i,o.off?0:o.len,l.off?0:l.ins,c),s&&!l.off&&tr(s,i,l.text));c=(o.ins>f||l.ins>=0&&l.len>f)&&(c||i.length>h),o.forward2(f),l.forward(f)}}}}class Ac{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Qe.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Qe.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Fr{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Fr(i,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ae.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ae.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ae.range(e.anchor,e.head)}static create(e,n,i){return new Fr(e,n,i)}}class ae{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ae.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ae([this.main],0)}addRange(e,n=!0){return ae.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ae.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ae(e.ranges.map(n=>Fr.fromJSON(n)),e.main)}static single(e,n=e){return new ae([ae.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return ae.normalized(e.slice(),n);i=o.to}return new ae(e,n)}static cursor(e,n=0,i,s){return Fr.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,n,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?Fr.create(n,e,48|o):Fr.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let i=e[n];e.sort((s,o)=>s.from-o.from),n=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],l=e[s-1];if(o.empty?o.from<=l.to:o.from<l.to){let c=l.from,f=Math.max(o.to,l.to);s<=n&&n--,e.splice(--s,2,o.anchor>o.head?ae.range(f,c):ae.range(c,f))}}return new ae(e,n)}}function fO(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let rx=0;class ye{constructor(e,n,i,s,o){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=s,this.id=rx++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ye(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:ox),!!e.static,e.enables)}of(e){return new yh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new yh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new yh(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function ox(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class yh{constructor(e,n,i,s){this.dependencies=e,this.facet=n,this.type=i,this.value=s,this.id=rx++}dynamicSlot(e){var n;let i=this.value,s=this.facet.compareInput,o=this.id,l=e[o]>>1,c=this.type==2,f=!1,h=!1,p=[];for(let g of this.dependencies)g=="doc"?f=!0:g=="selection"?h=!0:(((n=e[g.id])!==null&&n!==void 0?n:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[l]=i(g),1},update(g,y){if(f&&y.docChanged||h&&(y.docChanged||y.selection)||z0(g,p)){let v=i(g);if(c?!Kw(v,g.values[l],s):!s(v,g.values[l]))return g.values[l]=v,1}return 0},reconfigure:(g,y)=>{let v,b=y.config.address[o];if(b!=null){let S=Ph(y,b);if(this.dependencies.every(A=>A instanceof ye?y.facet(A)===g.facet(A):A instanceof zt?y.field(A,!1)==g.field(A,!1):!0)||(c?Kw(v=i(g),S,s):s(v=i(g),S)))return g.values[l]=S,0}else v=i(g);return g.values[l]=v,1}}}}function Kw(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function z0(t,e){let n=!1;for(let i of e)lc(t,i)&1&&(n=!0);return n}function L6(t,e,n){let i=n.map(f=>t[f.id]),s=n.map(f=>f.type),o=i.filter(f=>!(f&1)),l=t[e.id]>>1;function c(f){let h=[];for(let p=0;p<i.length;p++){let g=Ph(f,i[p]);if(s[p]==2)for(let y of g)h.push(y);else h.push(g)}return e.combine(h)}return{create(f){for(let h of i)lc(f,h);return f.values[l]=c(f),1},update(f,h){if(!z0(f,o))return 0;let p=c(f);return e.compare(p,f.values[l])?0:(f.values[l]=p,1)},reconfigure(f,h){let p=z0(f,i),g=h.config.facets[e.id],y=h.facet(e);if(g&&!p&&ox(n,g))return f.values[l]=y,0;let v=c(f);return e.compare(v,y)?(f.values[l]=y,0):(f.values[l]=v,1)}}}const If=ye.define({static:!0});class zt{constructor(e,n,i,s,o){this.id=e,this.createF=n,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let n=new zt(rx++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(If).find(i=>i.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,s)=>{let o=i.values[n],l=this.updateF(o,s);return this.compareF(o,l)?0:(i.values[n]=l,1)},reconfigure:(i,s)=>{let o=i.facet(If),l=s.facet(If),c;return(c=o.find(f=>f.field==this))&&c!=l.find(f=>f.field==this)?(i.values[n]=c.create(i),1):s.config.address[this.id]!=null?(i.values[n]=s.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,If.of({field:this,create:e})]}get extension(){return this}}const qr={lowest:4,low:3,default:2,high:1,highest:0};function Ya(t){return e=>new hO(e,t)}const ho={highest:Ya(qr.highest),high:Ya(qr.high),default:Ya(qr.default),low:Ya(qr.low),lowest:Ya(qr.lowest)};class hO{constructor(e,n){this.inner=e,this.prec=n}}class Rd{of(e){return new P0(this,e)}reconfigure(e){return Rd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class P0{constructor(e,n){this.compartment=e,this.inner=n}}class zh{constructor(e,n,i,s,o,l){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let s=[],o=Object.create(null),l=new Map;for(let y of B6(e,n,l))y instanceof zt?s.push(y):(o[y.facet.id]||(o[y.facet.id]=[])).push(y);let c=Object.create(null),f=[],h=[];for(let y of s)c[y.id]=h.length<<1,h.push(v=>y.slot(v));let p=i?.config.facets;for(let y in o){let v=o[y],b=v[0].facet,S=p&&p[y]||[];if(v.every(A=>A.type==0))if(c[b.id]=f.length<<1|1,ox(S,v))f.push(i.facet(b));else{let A=b.combine(v.map(k=>k.value));f.push(i&&b.compare(A,i.facet(b))?i.facet(b):A)}else{for(let A of v)A.type==0?(c[A.id]=f.length<<1|1,f.push(A.value)):(c[A.id]=h.length<<1,h.push(k=>A.dynamicSlot(k)));c[b.id]=h.length<<1,h.push(A=>L6(A,b,v))}}let g=h.map(y=>y(c));return new zh(e,l,g,c,f,o)}}function B6(t,e,n){let i=[[],[],[],[],[]],s=new Map;function o(l,c){let f=s.get(l);if(f!=null){if(f<=c)return;let h=i[f].indexOf(l);h>-1&&i[f].splice(h,1),l instanceof P0&&n.delete(l.compartment)}if(s.set(l,c),Array.isArray(l))for(let h of l)o(h,c);else if(l instanceof P0){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(l.compartment)||l.inner;n.set(l.compartment,h),o(h,c)}else if(l instanceof hO)o(l.inner,l.prec);else if(l instanceof zt)i[c].push(l),l.provides&&o(l.provides,c);else if(l instanceof yh)i[c].push(l),l.facet.extensions&&o(l.facet.extensions,qr.default);else{let h=l.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,c)}}return o(t,qr.default),i.reduce((l,c)=>l.concat(c))}function lc(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function Ph(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const dO=ye.define(),H0=ye.define({combine:t=>t.some(e=>e),static:!0}),pO=ye.define({combine:t=>t.length?t[0]:void 0,static:!0}),gO=ye.define(),mO=ye.define(),yO=ye.define(),xO=ye.define({combine:t=>t.length?t[0]:!1});class Li{constructor(e,n){this.type=e,this.value=n}static define(){return new z6}}class z6{of(e){return new Li(this,e)}}class P6{constructor(e){this.map=e}of(e){return new Me(this,e)}}class Me{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Me(this.type,n)}is(e){return this.type==e}static define(e={}){return new P6(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(n);o&&i.push(o)}return i}}Me.reconfigure=Me.define();Me.appendConfig=Me.define();class Rt{constructor(e,n,i,s,o,l){this.startState=e,this.changes=n,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=l,this._doc=null,this._state=null,i&&fO(i,n.newLength),o.some(c=>c.type==Rt.time)||(this.annotations=o.concat(Rt.time.of(Date.now())))}static create(e,n,i,s,o,l){return new Rt(e,n,i,s,o,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Rt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Rt.time=Li.define();Rt.userEvent=Li.define();Rt.addToHistory=Li.define();Rt.remote=Li.define();function H6(t,e){let n=[];for(let i=0,s=0;;){let o,l;if(i<t.length&&(s==e.length||e[s]>=t[i]))o=t[i++],l=t[i++];else if(s<e.length)o=e[s++],l=e[s++];else return n;!n.length||n[n.length-1]<o?n.push(o,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function vO(t,e,n){var i;let s,o,l;return n?(s=e.changes,o=Tt.empty(e.changes.length),l=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(s)),{changes:l,selection:e.selection?e.selection.map(o):(i=t.selection)===null||i===void 0?void 0:i.map(s),effects:Me.mapEffects(t.effects,s).concat(Me.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function j0(t,e,n){let i=e.selection,s=vl(e.annotations);return e.userEvent&&(s=s.concat(Rt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Tt?e.changes:Tt.of(e.changes||[],n,t.facet(pO)),selection:i&&(i instanceof ae?i:ae.single(i.anchor,i.head)),effects:vl(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function bO(t,e,n){let i=j0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let l=!!e[o].sequential;i=vO(i,j0(t,e[o],l?i.changes.newLength:t.doc.length),l)}let s=Rt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return I6(n?j6(s):s)}function j6(t){let e=t.startState,n=!0;for(let s of e.facet(gO)){let o=s(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:H6(n,o))}if(n!==!0){let s,o;if(n===!1)o=t.changes.invertedDesc,s=Tt.empty(e.doc.length);else{let l=t.changes.filter(n);s=l.changes,o=l.filtered.mapDesc(l.changes).invertedDesc}t=Rt.create(e,s,t.selection&&t.selection.map(o),Me.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let i=e.facet(mO);for(let s=i.length-1;s>=0;s--){let o=i[s](t);o instanceof Rt?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Rt?t=o[0]:t=bO(e,vl(o),!1)}return t}function I6(t){let e=t.startState,n=e.facet(yO),i=t;for(let s=n.length-1;s>=0;s--){let o=n[s](t);o&&Object.keys(o).length&&(i=vO(i,j0(e,o,t.changes.newLength),!0))}return i==t?t:Rt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const V6=[];function vl(t){return t==null?V6:Array.isArray(t)?t:[t]}var at=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(at||(at={}));const U6=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let I0;try{I0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $6(t){if(I0)return I0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||U6.test(n)))return!0}return!1}function q6(t){return e=>{if(!/\S/.test(e))return at.Space;if($6(e))return at.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return at.Word;return at.Other}}class Ve{constructor(e,n,i,s,o,l){this.config=e,this.doc=n,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)lc(this,c<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return lc(this,i),Ph(this,i)}update(...e){return bO(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:s}=n;for(let c of e.effects)c.is(Rd.reconfigure)?(n&&(s=new Map,n.compartments.forEach((f,h)=>s.set(h,f)),n=null),s.set(c.value.compartment,c.value.extension)):c.is(Me.reconfigure)?(n=null,i=c.value):c.is(Me.appendConfig)&&(n=null,i=vl(i).concat(c.value));let o;n?o=e.startState.values.slice():(n=zh.resolve(i,s,this),o=new Ve(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(f,h)=>h.reconfigure(f,this),null).values);let l=e.startState.facet(H0)?e.newSelection:e.newSelection.asSingle();new Ve(n,e.newDoc,l,o,(c,f)=>f.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ae.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),s=this.changes(i.changes),o=[i.range],l=vl(i.effects);for(let c=1;c<n.ranges.length;c++){let f=e(n.ranges[c]),h=this.changes(f.changes),p=h.map(s);for(let y=0;y<c;y++)o[y]=o[y].map(p);let g=s.mapDesc(h,!0);o.push(f.range.map(g)),s=s.compose(p),l=Me.mapEffects(l,p).concat(Me.mapEffects(vl(f.effects),g))}return{changes:s,selection:ae.create(o,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Tt?e:Tt.of(e,this.doc.length,this.facet(Ve.lineSeparator))}toText(e){return Qe.of(e.split(this.facet(Ve.lineSeparator)||_0))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(lc(this,n),Ph(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof zt&&this.config.address[s.id]!=null&&(n[i]=s.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let l=i[o],c=e[o];s.push(l.init(f=>l.spec.fromJSON(c,f)))}}return Ve.create({doc:e.doc,selection:ae.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=zh.resolve(e.extensions||[],new Map),i=e.doc instanceof Qe?e.doc:Qe.of((e.doc||"").split(n.staticFacet(Ve.lineSeparator)||_0)),s=e.selection?e.selection instanceof ae?e.selection:ae.single(e.selection.anchor,e.selection.head):ae.single(0);return fO(s,i.length),n.staticFacet(H0)||(s=s.asSingle()),new Ve(n,i,s,n.dynamicSlots.map(()=>null),(o,l)=>l.create(o),null)}get tabSize(){return this.facet(Ve.tabSize)}get lineBreak(){return this.facet(Ve.lineSeparator)||`
`}get readOnly(){return this.facet(xO)}phrase(e,...n){for(let i of this.facet(Ve.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>n.length?i:n[o-1]})),e}languageDataAt(e,n,i=-1){let s=[];for(let o of this.facet(dO))for(let l of o(this,n,i))Object.prototype.hasOwnProperty.call(l,e)&&s.push(l[e]);return s}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return q6(n.length?n[0]:"")}wordAt(e){let{text:n,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),l=e-i,c=e-i;for(;l>0;){let f=Dt(n,l,!1);if(o(n.slice(f,l))!=at.Word)break;l=f}for(;c<s;){let f=Dt(n,c);if(o(n.slice(c,f))!=at.Word)break;c=f}return l==c?null:ae.range(l+i,c+i)}}Ve.allowMultipleSelections=H0;Ve.tabSize=ye.define({combine:t=>t.length?t[0]:4});Ve.lineSeparator=pO;Ve.readOnly=xO;Ve.phrases=ye.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(s=>t[s]==e[s])}});Ve.languageData=dO;Ve.changeFilter=gO;Ve.transactionFilter=mO;Ve.transactionExtender=yO;Rd.reconfigure=Me.define();function Bi(t,e,n={}){let i={};for(let s of t)for(let o of Object.keys(s)){let l=s[o],c=i[o];if(c===void 0)i[o]=l;else if(!(c===l||l===void 0))if(Object.hasOwnProperty.call(n,o))i[o]=n[o](c,l);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class lr{eq(e){return this==e}range(e,n=e){return V0.create(e,n,this)}}lr.prototype.startSide=lr.prototype.endSide=0;lr.prototype.point=!1;lr.prototype.mapMode=nn.TrackDel;function lx(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let V0=class SO{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new SO(e,n,i)}};function U0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class ax{constructor(e,n,i,s){this.from=e,this.to=n,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,s=0){let o=i?this.to:this.from;for(let l=s,c=o.length;;){if(l==c)return l;let f=l+c>>1,h=o[f]-e||(i?this.value[f].endSide:this.value[f].startSide)-n;if(f==l)return h>=0?l:c;h>=0?c=f:l=f+1}}between(e,n,i,s){for(let o=this.findIndex(n,-1e9,!0),l=this.findIndex(i,1e9,!1,o);o<l;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let i=[],s=[],o=[],l=-1,c=-1;for(let f=0;f<this.value.length;f++){let h=this.value[f],p=this.from[f]+e,g=this.to[f]+e,y,v;if(p==g){let b=n.mapPos(p,h.startSide,h.mapMode);if(b==null||(y=v=b,h.startSide!=h.endSide&&(v=n.mapPos(p,h.endSide),v<y)))continue}else if(y=n.mapPos(p,h.startSide),v=n.mapPos(g,h.endSide),y>v||y==v&&h.startSide>0&&h.endSide<=0)continue;(v-y||h.endSide-h.startSide)<0||(l<0&&(l=y),h.point&&(c=Math.max(c,v-y)),i.push(h),s.push(y-l),o.push(v-l))}return{mapped:i.length?new ax(s,o,i,c):null,pos:l}}}class ze{constructor(e,n,i,s){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=s}static create(e,n,i,s){return new ze(e,n,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(i&&(n=n.slice().sort(U0)),this.isEmpty)return n.length?ze.of(n):this;let c=new wO(this,null,-1).goto(0),f=0,h=[],p=new ps;for(;c.value||f<n.length;)if(f<n.length&&(c.from-n[f].from||c.startSide-n[f].value.startSide)>=0){let g=n[f++];p.addInner(g.from,g.to,g.value)||h.push(g)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(f==n.length||this.chunkEnd(c.chunkIndex)<n[f].from)&&(!l||s>this.chunkEnd(c.chunkIndex)||o<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!l||s>c.to||o<c.from||l(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||h.push(V0.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!h.length?ze.empty:this.nextLayer.update({add:h,filter:l,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],s=-1;for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],f=this.chunk[l],h=e.touchesRange(c,c+f.length);if(h===!1)s=Math.max(s,f.maxPoint),n.push(f),i.push(e.mapPos(c));else if(h===!0){let{mapped:p,pos:g}=f.map(c,e);p&&(s=Math.max(s,p.maxPoint),n.push(p),i.push(g))}}let o=this.nextLayer.map(e);return n.length==0?o:new ze(i,n,o||ze.empty,s)}between(e,n,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],l=this.chunk[s];if(n>=o&&e<=o+l.length&&l.between(o,e-o,n-o,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return kc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return kc.from(e).goto(n)}static compare(e,n,i,s,o=-1){let l=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),c=n.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),f=Zw(l,c,i),h=new Xa(l,f,o),p=new Xa(c,f,o);i.iterGaps((g,y,v)=>Jw(h,g,p,y,v,s)),i.empty&&i.length==0&&Jw(h,0,p,0,0,s)}static eq(e,n,i=0,s){s==null&&(s=999999999);let o=e.filter(p=>!p.isEmpty&&n.indexOf(p)<0),l=n.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=l.length)return!1;if(!o.length)return!0;let c=Zw(o,l),f=new Xa(o,c,0).goto(i),h=new Xa(l,c,0).goto(i);for(;;){if(f.to!=h.to||!$0(f.active,h.active)||f.point&&(!h.point||!lx(f.point,h.point)))return!1;if(f.to>s)return!0;f.next(),h.next()}}static spans(e,n,i,s,o=-1){let l=new Xa(e,null,o).goto(n),c=n,f=l.openStart;for(;;){let h=Math.min(l.to,i);if(l.point){let p=l.activeForPoint(l.to),g=l.pointFrom<n?p.length+1:l.point.startSide<0?p.length:Math.min(p.length,f);s.point(c,h,l.point,p,g,l.pointRank),f=Math.min(l.openEnd(h),p.length)}else h>c&&(s.span(c,h,l.active,f),f=l.openEnd(h));if(l.to>i)return f+(l.point&&l.to>i?1:0);c=l.to,l.next()}}static of(e,n=!1){let i=new ps;for(let s of e instanceof V0?[e]:n?Q6(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return ze.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=ze.empty;s=s.nextLayer)n=new ze(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}ze.empty=new ze([],[],null,-1);function Q6(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(U0(e,i)>0)return t.slice().sort(U0);e=i}return t}ze.empty.nextLayer=ze.empty;class ps{finishChunk(e){this.chunks.push(new ax(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new ps)).add(e,n,i)}addInner(e,n,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ze.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ze.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Zw(t,e,n){let i=new Map;for(let o of t)for(let l=0;l<o.chunk.length;l++)o.chunk[l].maxPoint<=0&&i.set(o.chunk[l],o.chunkPos[l]);let s=new Set;for(let o of e)for(let l=0;l<o.chunk.length;l++){let c=i.get(o.chunk[l]);c!=null&&(n?n.mapPos(c):c)==o.chunkPos[l]&&!n?.touchesRange(c,c+o.chunk[l].length)&&s.add(o.chunk[l])}return s}class wO{constructor(e,n,i,s=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class kc{constructor(e){this.heap=e}static from(e,n=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let l=e[o];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&s.push(new wO(l,n,i,o));return s.length==1?s[0]:new kc(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)_m(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)_m(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_m(this.heap,0)}}}function _m(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let s=t[i];if(i+1<t.length&&s.compare(t[i+1])>=0&&(s=t[i+1],i++),n.compare(s)<0)break;t[i]=n,t[e]=s,e=i}}class Xa{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=kc.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Vf(this.active,e),Vf(this.activeTo,e),Vf(this.activeRank,e),this.minActive=e2(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:s,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||s-this.activeTo[n])>0;)n++;Uf(this.active,n,i),Uf(this.activeTo,n,s),Uf(this.activeRank,n,o),e&&Uf(e,n,this.cursor.from),this.minActive=e2(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&Vf(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function Jw(t,e,n,i,s,o){t.goto(e),n.goto(i);let l=i+s,c=i,f=i-e,h=!!o.boundChange;for(let p=!1;;){let g=t.to+f-n.to,y=g||t.endSide-n.endSide,v=y<0?t.to+f:n.to,b=Math.min(v,l);if(t.point||n.point?(t.point&&n.point&&lx(t.point,n.point)&&$0(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(c,b,t.point,n.point),p=!1):(p&&o.boundChange(c),b>c&&!$0(t.active,n.active)&&o.compareRange(c,b,t.active,n.active),h&&b<l&&(g||t.openEnd(v)!=n.openEnd(v))&&(p=!0)),v>l)break;c=v,y<=0&&t.next(),y>=0&&n.next()}}function $0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!lx(t[n],e[n]))return!1;return!0}function Vf(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Uf(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function e2(t,e){let n=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||t[s].endSide-t[n].endSide)<0&&(n=s,i=e[s]);return n}function ql(t,e,n=t.length){let i=0;for(let s=0;s<n&&s<t.length;)t.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Dt(t,s));return i}function q0(t,e,n,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==t.length)break;o+=t.charCodeAt(s)==9?n-o%n:1,s=Dt(t,s)}return i===!0?-1:t.length}const Q0="",t2=typeof Symbol>"u"?"__"+Q0:Symbol.for(Q0),Y0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),n2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ar{constructor(e,n){this.rules=[];let{finish:i}=n||{};function s(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function o(l,c,f,h){let p=[],g=/^@(\w+)\b/.exec(l[0]),y=g&&g[1]=="keyframes";if(g&&c==null)return f.push(l[0]+";");for(let v in c){let b=c[v];if(/&/.test(v))o(v.split(/,\s*/).map(S=>l.map(A=>S.replace(/&/,A))).reduce((S,A)=>S.concat(A)),b,f);else if(b&&typeof b=="object"){if(!g)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(s(v),b,p,y)}else b!=null&&p.push(v.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+b+";")}(p.length||y)&&f.push((i&&!g&&!h?l.map(i):l).join(", ")+" {"+p.join(" ")+"}")}for(let l in e)o(s(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=n2[t2]||1;return n2[t2]=e+1,Q0+e.toString(36)}static mount(e,n,i){let s=e[Y0],o=i&&i.nonce;s?o&&s.setNonce(o):s=new Y6(e,o),s.mount(Array.isArray(n)?n:[n],e)}}let i2=new Map;class Y6{constructor(e,n){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=i2.get(i);if(o)return e[Y0]=o;this.sheet=new s.CSSStyleSheet,i2.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Y0]=this}mount(e,n){let i=this.sheet,s=0,o=0;for(let l=0;l<e.length;l++){let c=e[l],f=this.modules.indexOf(c);if(f<o&&f>-1&&(this.modules.splice(f,1),o--,f=-1),f==-1){if(this.modules.splice(o++,0,c),i)for(let h=0;h<c.rules.length;h++)i.insertRule(c.rules[h],s++)}else{for(;o<f;)s+=this.modules[o++].rules.length;s+=c.rules.length,o++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let f=0;f<this.modules.length;f++)l+=this.modules[f].getRules()+`
`;this.styleTag.textContent=l;let c=n.head||n;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var cr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Oc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},X6=typeof navigator<"u"&&/Mac/.test(navigator.platform),F6=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $t=0;$t<10;$t++)cr[48+$t]=cr[96+$t]=String($t);for(var $t=1;$t<=24;$t++)cr[$t+111]="F"+$t;for(var $t=65;$t<=90;$t++)cr[$t]=String.fromCharCode($t+32),Oc[$t]=String.fromCharCode($t);for(var Lm in cr)Oc.hasOwnProperty(Lm)||(Oc[Lm]=cr[Lm]);function G6(t){var e=X6&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||F6&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Oc:cr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function et(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];typeof s=="string"?t.setAttribute(i,s):s!=null&&(t[i]=s)}e++}for(;e<arguments.length;e++)CO(t,arguments[e]);return t}function CO(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)CO(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let tn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},X0=typeof document<"u"?document:{documentElement:{style:{}}};const F0=/Edge\/(\d+)/.exec(tn.userAgent),AO=/MSIE \d/.test(tn.userAgent),G0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tn.userAgent),_d=!!(AO||G0||F0),s2=!_d&&/gecko\/(\d+)/i.test(tn.userAgent),Bm=!_d&&/Chrome\/(\d+)/.exec(tn.userAgent),W6="webkitFontSmoothing"in X0.documentElement.style,W0=!_d&&/Apple Computer/.test(tn.vendor),r2=W0&&(/Mobile\/\w+/.test(tn.userAgent)||tn.maxTouchPoints>2);var me={mac:r2||/Mac/.test(tn.platform),windows:/Win/.test(tn.platform),linux:/Linux|X11/.test(tn.platform),ie:_d,ie_version:AO?X0.documentMode||6:G0?+G0[1]:F0?+F0[1]:0,gecko:s2,gecko_version:s2?+(/Firefox\/(\d+)/.exec(tn.userAgent)||[0,0])[1]:0,chrome:!!Bm,chrome_version:Bm?+Bm[1]:0,ios:r2,android:/Android\b/.test(tn.userAgent),webkit_version:W6?+(/\bAppleWebKit\/(\d+)/.exec(tn.userAgent)||[0,0])[1]:0,safari:W0,safari_version:W0?+(/\bVersion\/(\d+(\.\d+)?)/.exec(tn.userAgent)||[0,0])[1]:0,tabSize:X0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function cx(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Hh=Object.create(null);function ux(t,e,n){if(t==e)return!0;t||(t=Hh),e||(e=Hh);let i=Object.keys(t),s=Object.keys(e);if(i.length-0!=s.length-0)return!1;for(let o of i)if(o!=n&&(s.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function K6(t,e){for(let n=t.attributes.length-1;n>=0;n--){let i=t.attributes[n].name;e[i]==null&&t.removeAttribute(i)}for(let n in e){let i=e[n];n=="style"?t.style.cssText=i:t.getAttribute(n)!=i&&t.setAttribute(n,i)}}function o2(t,e,n){let i=!1;if(e)for(let s in e)n&&s in n||(i=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(i=!0,s=="style"?t.style.cssText=n[s]:t.setAttribute(s,n[s]));return i}function Z6(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class zi{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var qt=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(qt||(qt={}));class Se extends lr{constructor(e,n,i,s){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new eu(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ao(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:l}=kO(e,n);i=(o?n?-3e8:-1:5e8)-1,s=(l?n?2e8:1:-6e8)+1}return new ao(e,i,s,n,e.widget||null,!0)}static line(e){return new tu(e)}static set(e,n=!1){return ze.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Se.none=ze.empty;class eu extends Se{constructor(e){let{start:n,end:i}=kO(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?cx(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Hh}eq(e){return this==e||e instanceof eu&&this.tagName==e.tagName&&ux(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}eu.prototype.point=!1;class tu extends Se{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof tu&&this.spec.class==e.spec.class&&ux(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}tu.prototype.mapMode=nn.TrackBefore;tu.prototype.point=!0;class ao extends Se{constructor(e,n,i,s,o,l){super(n,i,o,e),this.block=s,this.isReplace=l,this.mapMode=s?n<=0?nn.TrackBefore:nn.TrackAfter:nn.TrackDel}get type(){return this.startSide!=this.endSide?qt.WidgetRange:this.startSide<=0?qt.WidgetBefore:qt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ao&&J6(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ao.prototype.point=!0;function kO(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function J6(t,e){return t==e||!!(t&&e&&t.compare(e))}function bl(t,e,n,i=0){let s=n.length-1;s>=0&&n[s]+i>=t?n[s]=Math.max(n[s],e):n.push(t,e)}class Ec extends lr{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof Ec&&this.tagName==e.tagName&&ux(this.attributes,e.attributes)}static create(e){return new Ec(e.tagName,e.attributes||Hh)}static set(e,n=!1){return ze.of(e,n)}}Ec.prototype.startSide=Ec.prototype.endSide=-1;function Bl(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function K0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function ac(t,e){if(!e.anchorNode)return!1;try{return K0(t,e.anchorNode)}catch{return!1}}function cc(t){return t.nodeType==3?Tc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function uc(t,e,n,i){return n?l2(t,e,n,i,-1)||l2(t,e,n,i,1):!1}function ur(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function jh(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function l2(t,e,n,i,s){for(;;){if(t==n&&e==i)return!0;if(e==(s<0?0:gs(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=ur(t)+(s<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?gs(t):0}else return!1}}function gs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Mc(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function e8(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function OO(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function t8(t,e,n,i,s,o,l,c){let f=t.ownerDocument,h=f.defaultView||window;for(let p=t,g=!1;p&&!g;)if(p.nodeType==1){let y,v=p==f.body,b=1,S=1;if(v)y=e8(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let T=p.getBoundingClientRect();({scaleX:b,scaleY:S}=OO(p,T)),y={left:T.left,right:T.left+p.clientWidth*b,top:T.top,bottom:T.top+p.clientHeight*S}}let A=0,k=0;if(s=="nearest")e.top<y.top?(k=e.top-(y.top+l),n>0&&e.bottom>y.bottom+k&&(k=e.bottom-y.bottom+l)):e.bottom>y.bottom&&(k=e.bottom-y.bottom+l,n<0&&e.top-k<y.top&&(k=e.top-(y.top+l)));else{let T=e.bottom-e.top,O=y.bottom-y.top;k=(s=="center"&&T<=O?e.top+T/2-O/2:s=="start"||s=="center"&&n<0?e.top-l:e.bottom-O+l)-y.top}if(i=="nearest"?e.left<y.left?(A=e.left-(y.left+o),n>0&&e.right>y.right+A&&(A=e.right-y.right+o)):e.right>y.right&&(A=e.right-y.right+o,n<0&&e.left<y.left+A&&(A=e.left-(y.left+o))):A=(i=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:i=="start"==c?e.left-o:e.right-(y.right-y.left)+o)-y.left,A||k)if(v)h.scrollBy(A,k);else{let T=0,O=0;if(k){let M=p.scrollTop;p.scrollTop+=k/S,O=(p.scrollTop-M)*S}if(A){let M=p.scrollLeft;p.scrollLeft+=A/b,T=(p.scrollLeft-M)*b}e={left:e.left-T,top:e.top-O,right:e.right-T,bottom:e.bottom-O},T&&Math.abs(T-A)<1&&(i="nearest"),O&&Math.abs(O-k)<1&&(s="nearest")}if(v)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function n8(t){let e=t.ownerDocument,n,i;for(let s=t.parentNode;s&&!(s==e.body||n&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:i}}class i8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?gs(n):0),i,Math.min(e.focusOffset,i?gs(i):0))}set(e,n,i,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=s}}let $r=null;me.safari&&me.safari_version>=26&&($r=!1);function EO(t){if(t.setActive)return t.setActive();if($r)return t.focus($r);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus($r==null?{get preventScroll(){return $r={preventScroll:!0},!0}}:void 0),!$r){$r=!1;for(let n=0;n<e.length;){let i=e[n++],s=e[n++],o=e[n++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let a2;function Tc(t,e,n=e){let i=a2||(a2=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Sl(t,e,n,i){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,t.dispatchEvent(o);let l=new KeyboardEvent("keyup",s);return l.synthetic=!0,t.dispatchEvent(l),o.defaultPrevented||l.defaultPrevented}function s8(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function r8(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,gs(n));;)if(i){if(n.nodeType!=1)return!1;let s=n.childNodes[i-1];s.contentEditable=="false"?i--:(n=s,i=gs(n))}else{if(n==t)return!0;i=ur(n),n=n.parentNode}}function MO(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function TO(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=gs(n)}else if(n.parentNode&&!jh(n))i=ur(n),n=n.parentNode;else return null}}function NO(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!jh(n))i=ur(n)+1,n=n.parentNode;else return null}}class li{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new li(e.parentNode,ur(e),n)}static after(e,n){return new li(e.parentNode,ur(e)+1,n)}}var it=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(it||(it={}));const co=it.LTR,fx=it.RTL;function DO(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const o8=DO("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),l8=DO("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Z0=Object.create(null),vi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Z0[e]=n,Z0[n]=-e}function RO(t){return t<=247?o8[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?l8[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const a8=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class fs{get dir(){return this.level%2?fx:co}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,s){let o=-1;for(let l=0;l<e.length;l++){let c=e[l];if(c.from<=n&&c.to>=n){if(c.level==i)return l;(o<0||(s!=0?s<0?c.from<n:c.to>n:e[o].level>c.level))&&(o=l)}}if(o<0)throw new RangeError("Index out of range");return o}}function _O(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=e[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!_O(i.inner,s.inner))return!1}return!0}const nt=[];function c8(t,e,n,i,s){for(let o=0;o<=i.length;o++){let l=o?i[o-1].to:e,c=o<i.length?i[o].from:n,f=o?256:s;for(let h=l,p=f,g=f;h<c;h++){let y=RO(t.charCodeAt(h));y==512?y=p:y==8&&g==4&&(y=16),nt[h]=y==4?2:y,y&7&&(g=y),p=y}for(let h=l,p=f,g=f;h<c;h++){let y=nt[h];if(y==128)h<c-1&&p==nt[h+1]&&p&24?y=nt[h]=p:nt[h]=256;else if(y==64){let v=h+1;for(;v<c&&nt[v]==64;)v++;let b=h&&p==8||v<n&&nt[v]==8?g==1?1:8:256;for(let S=h;S<v;S++)nt[S]=b;h=v-1}else y==8&&g==1&&(nt[h]=1);p=y,y&7&&(g=y)}}}function u8(t,e,n,i,s){let o=s==1?2:1;for(let l=0,c=0,f=0;l<=i.length;l++){let h=l?i[l-1].to:e,p=l<i.length?i[l].from:n;for(let g=h,y,v,b;g<p;g++)if(v=Z0[y=t.charCodeAt(g)])if(v<0){for(let S=c-3;S>=0;S-=3)if(vi[S+1]==-v){let A=vi[S+2],k=A&2?s:A&4?A&1?o:s:0;k&&(nt[g]=nt[vi[S]]=k),c=S;break}}else{if(vi.length==189)break;vi[c++]=g,vi[c++]=y,vi[c++]=f}else if((b=nt[g])==2||b==1){let S=b==s;f=S?0:1;for(let A=c-3;A>=0;A-=3){let k=vi[A+2];if(k&2)break;if(S)vi[A+2]|=2;else{if(k&4)break;vi[A+2]|=4}}}}}function f8(t,e,n,i){for(let s=0,o=i;s<=n.length;s++){let l=s?n[s-1].to:t,c=s<n.length?n[s].from:e;for(let f=l;f<c;){let h=nt[f];if(h==256){let p=f+1;for(;;)if(p==c){if(s==n.length)break;p=n[s++].to,c=s<n.length?n[s].from:e}else if(nt[p]==256)p++;else break;let g=o==1,y=(p<e?nt[p]:i)==1,v=g==y?g?1:2:i;for(let b=p,S=s,A=S?n[S-1].to:t;b>f;)b==A&&(b=n[--S].from,A=S?n[S-1].to:t),nt[--b]=v;f=p}else o=h,f++}}}function J0(t,e,n,i,s,o,l){let c=i%2?2:1;if(i%2==s%2)for(let f=e,h=0;f<n;){let p=!0,g=!1;if(h==o.length||f<o[h].from){let S=nt[f];S!=c&&(p=!1,g=S==16)}let y=!p&&c==1?[]:null,v=p?i:i+1,b=f;e:for(;;)if(h<o.length&&b==o[h].from){if(g)break e;let S=o[h];if(!p)for(let A=S.to,k=h+1;;){if(A==n)break e;if(k<o.length&&o[k].from==A)A=o[k++].to;else{if(nt[A]==c)break e;break}}if(h++,y)y.push(S);else{S.from>f&&l.push(new fs(f,S.from,v));let A=S.direction==co!=!(v%2);ey(t,A?i+1:i,s,S.inner,S.from,S.to,l),f=S.to}b=S.to}else{if(b==n||(p?nt[b]!=c:nt[b]==c))break;b++}y?J0(t,f,b,i+1,s,y,l):f<b&&l.push(new fs(f,b,v)),f=b}else for(let f=n,h=o.length;f>e;){let p=!0,g=!1;if(!h||f>o[h-1].to){let S=nt[f-1];S!=c&&(p=!1,g=S==16)}let y=!p&&c==1?[]:null,v=p?i:i+1,b=f;e:for(;;)if(h&&b==o[h-1].to){if(g)break e;let S=o[--h];if(!p)for(let A=S.from,k=h;;){if(A==e)break e;if(k&&o[k-1].to==A)A=o[--k].from;else{if(nt[A-1]==c)break e;break}}if(y)y.push(S);else{S.to<f&&l.push(new fs(S.to,f,v));let A=S.direction==co!=!(v%2);ey(t,A?i+1:i,s,S.inner,S.from,S.to,l),f=S.from}b=S.from}else{if(b==e||(p?nt[b-1]!=c:nt[b-1]==c))break;b--}y?J0(t,b,f,i+1,s,y,l):b<f&&l.push(new fs(b,f,v)),f=b}}function ey(t,e,n,i,s,o,l){let c=e%2?2:1;c8(t,s,o,i,c),u8(t,s,o,i,c),f8(s,o,i,c),J0(t,s,o,e,n,i,l)}function h8(t,e,n){if(!t)return[new fs(0,0,e==fx?1:0)];if(e==co&&!n.length&&!a8.test(t))return LO(t.length);if(n.length)for(;t.length>nt.length;)nt[nt.length]=256;let i=[],s=e==co?0:1;return ey(t,s,s,n,0,t.length,i),i}function LO(t){return[new fs(0,t,0)]}let BO="";function d8(t,e,n,i,s){var o;let l=i.head-t.from,c=fs.find(e,l,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),f=e[c],h=f.side(s,n);if(l==h){let y=c+=s?1:-1;if(y<0||y>=e.length)return null;f=e[c=y],l=f.side(!s,n),h=f.side(s,n)}let p=Dt(t.text,l,f.forward(s,n));(p<f.from||p>f.to)&&(p=h),BO=t.text.slice(Math.min(l,p),Math.max(l,p));let g=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return g&&p==h&&g.level+(s?0:1)<f.level?ae.cursor(g.side(!s,n)+t.from,g.forward(s,n)?1:-1,g.level):ae.cursor(p+t.from,f.forward(s,n)?-1:1,f.level)}function p8(t,e,n){for(let i=e;i<n;i++){let s=RO(t.charCodeAt(i));if(s==1)return co;if(s==2||s==4)return fx}return co}const zO=ye.define(),PO=ye.define(),HO=ye.define(),jO=ye.define(),ty=ye.define(),IO=ye.define(),VO=ye.define(),hx=ye.define(),dx=ye.define(),UO=ye.define({combine:t=>t.some(e=>e)}),$O=ye.define({combine:t=>t.some(e=>e)}),qO=ye.define();class wl{constructor(e,n="nearest",i="nearest",s=5,o=5,l=!1){this.range=e,this.y=n,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=l}map(e){return e.empty?this:new wl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new wl(ae.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const $f=Me.define({map:(t,e)=>t.map(e)}),QO=Me.define();function xn(t,e,n){let i=t.facet(jO);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const cs=ye.define({combine:t=>t.length?t[0]:!0});let g8=0;const fl=ye.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class xt{constructor(e,n,i,s,o){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(fl.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(fl.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:s,provide:o,decorations:l}=n||{};return new xt(g8++,e,i,s,c=>{let f=[];return l&&f.push(Ld.of(h=>{let p=h.plugin(c);return p?l(p):Se.none})),o&&f.push(o(c)),f})}static fromClass(e,n){return xt.define((i,s)=>new e(i,s),n)}}class zm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(xn(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){xn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){xn(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const YO=ye.define(),px=ye.define(),Ld=ye.define(),XO=ye.define(),gx=ye.define(),nu=ye.define(),FO=ye.define();function c2(t,e){let n=t.state.facet(FO);if(!n.length)return n;let i=n.map(o=>o instanceof Function?o(t):o),s=[];return ze.spans(i,e.from,e.to,{point(){},span(o,l,c,f){let h=o-e.from,p=l-e.from,g=s;for(let y=c.length-1;y>=0;y--,f--){let v=c[y].spec.bidiIsolate,b;if(v==null&&(v=p8(e.text,h,p)),f>0&&g.length&&(b=g[g.length-1]).to==h&&b.direction==v)b.to=p,g=b.inner;else{let S={from:h,to:p,direction:v,inner:[]};g.push(S),g=S.inner}}}}),s}const GO=ye.define();function mx(t){let e=0,n=0,i=0,s=0;for(let o of t.state.facet(GO)){let l=o(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(i=Math.max(i,l.top)),l.bottom!=null&&(s=Math.max(s,l.bottom)))}return{left:e,right:n,top:i,bottom:s}}const Ja=ye.define();class qn{constructor(e,n,i,s){this.fromA=e,this.toA=n,this.fromB=i,this.toB=s}join(e){return new qn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let s=0,o=0,l=0;;){let c=s<e.length?e[s].fromB:1e9,f=o<n.length?n[o]:1e9,h=Math.min(c,f);if(h==1e9)break;let p=h+l,g=h,y=p;for(;;)if(o<n.length&&n[o]<=g){let v=n[o+1];o+=2,g=Math.max(g,v);for(let b=s;b<e.length&&e[b].fromB<=g;b++)l=e[b].toA-e[b].toB;y=Math.max(y,v+l)}else if(s<e.length&&e[s].fromB<=g){let v=e[s++];g=Math.max(g,v.toB),y=Math.max(y,v.toA),l=v.toA-v.toB}else break;i.push(new qn(p,y,h,g))}return i}}class Ih{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Tt.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,l,c,f)=>s.push(new qn(o,l,c,f))),this.changedRanges=s}static create(e,n,i){return new Ih(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const m8=[];class kt{constructor(e,n,i=0){this.dom=e,this.length=n,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return m8}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&K6(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let i=n;for(let s of this.children){if(s==e)return i;i+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let i=ur(this.dom),s=this.length?e>0:n>0;return new li(this.parent.dom,i+(s?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof zd)return e;return null}static get(e){return e.cmTile}}class Bd extends kt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,i=null,s,o=e?.node==n?e:null,l=0;for(let c of this.children){if(c.sync(e),l+=c.length+c.breakAfter,s=i?i.nextSibling:n.firstChild,o&&s!=c.dom&&(o.written=!0),c.dom.parentNode==n)for(;s&&s!=c.dom;)s=u2(s);else n.insertBefore(c.dom,s);i=c.dom}for(s=i?i.nextSibling:n.firstChild,o&&s&&(o.written=!0);s;)s=u2(s);this.length=l}}function u2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class zd extends Bd{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=kt.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],i=this,s=0,o=0;;)if(s==i.children.length){if(!n.length)return;i=i.parent,i.breakAfter&&o++,s=n.pop()}else{let l=i.children[s++];if(l instanceof ir)n.push(s),i=l,s=0;else{let c=o+l.length,f=e(l,o);if(f!==void 0)return f;o=c+l.breakAfter}}}resolveBlock(e,n){let i,s=-1,o,l=-1;if(this.blockTiles((c,f)=>{let h=f+c.length;if(e>=f&&e<=h){if(c.isWidget()&&n>=-1&&n<=1){if(c.flags&32)return!0;c.flags&16&&(i=void 0)}(f<e||e==h&&(n<-1?c.length:c.covers(1)))&&(!i||!c.isWidget()&&i.isWidget())&&(i=c,s=e-f),(h>e||e==f&&(n>1?c.length:c.covers(-1)))&&(!o||!c.isWidget()&&o.isWidget())&&(o=c,l=e-f)}}),!i&&!o)throw new Error("No tile at position "+e);return i&&n<0||!o?{tile:i,offset:s}:{tile:o,offset:l}}}class ir extends Bd{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let i=new ir(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class zl extends Bd{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,i){let s=new zl(n||document.createElement("div"),e);return(!n||!i)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(e,n,i){let s=null,o=-1,l=null,c=-1;function f(p,g){for(let y=0,v=0;y<p.children.length&&v<=g;y++){let b=p.children[y],S=v+b.length;S>=g&&(b.isComposite()?f(b,g-v):(!l||l.isHidden&&(n>0||i&&x8(l,b)))&&(S>g||b.flags&32)?(l=b,c=g-v):(v<g||b.flags&16&&!b.isHidden)&&(s=b,o=g-v)),v=S}}f(this,e);let h=(n<0?s:l)||s||l;return h?{tile:h,offset:h==s?o:c}:null}coordsIn(e,n){let i=this.resolveInline(e,n,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),n):y8(this)}domIn(e,n){let i=this.resolveInline(e,n);if(i){let{tile:s,offset:o}=i;if(this.dom.contains(s.dom))return s.isText()?new li(s.dom,Math.min(s.dom.nodeValue.length,o)):s.domPosFor(o,s.flags&16?1:s.flags&32?-1:n);let l=i.tile.parent,c=!1;for(let f of l.children){if(c)return new li(f.dom,0);f==i.tile&&(c=!0)}}return new li(this.dom,0)}}function y8(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=cc(e);return n[n.length-1]||null}function x8(t,e){let n=t.coordsIn(0,1),i=e.coordsIn(0,1);return n&&i&&i.top<n.bottom}class mn extends Bd{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let i=new mn(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class Gr extends kt{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let i=this.dom.nodeValue.length;e>i&&(e=i);let s=e,o=e,l=0;e==0&&n<0||e==i&&n>=0?me.chrome||me.gecko||(e?(s--,l=1):o<i&&(o++,l=-1)):n<0?s--:o<i&&o++;let c=Tc(this.dom,s,o).getClientRects();if(!c.length)return null;let f=c[(l?l<0:n>=0)?0:c.length-1];return me.safari&&!l&&f.width==0&&(f=Array.prototype.find.call(c,h=>h.width)||f),l?Mc(f,l<0):f||null}static of(e,n){let i=new Gr(n||document.createTextNode(e),e);return n||(i.flags|=2),i}}class uo extends kt{constructor(e,n,i,s){super(e,n,s),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,i){let s=this.widget.coordsAt(this.dom,e,n);if(s)return s;if(i)return Mc(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let o=this.dom.getClientRects(),l=null;if(!o.length)return null;let c=this.flags&16?!0:this.flags&32?!1:e>0;for(let f=c?o.length-1:0;l=o[f],!(e>0?f==0:f==o.length-1||l.top<l.bottom);f+=c?-1:1);return Mc(l,!c)}}get overrideDOMText(){if(!this.length)return Qe.empty;let{root:e}=this;if(!e)return Qe.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,i,s,o){return o||(o=e.toDOM(n),e.editable||(o.contentEditable="false")),new uo(o,i,e,s)}}class Vh extends kt{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return Qe.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class v8{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,i){let{tile:s,index:o,beforeBreak:l,parents:c}=this;for(;e||n>0;)if(s.isComposite())if(l){if(!e)break;i&&i.break(),e--,l=!1}else if(o==s.children.length){if(!e&&!c.length)break;i&&i.leave(s),l=!!s.breakAfter,{tile:s,index:o}=c.pop(),o++}else{let f=s.children[o],h=f.breakAfter;(n>0?f.length<=e:f.length<e)&&(!i||i.skip(f,0,f.length)!==!1||!f.isComposite)?(l=!!h,o++,e-=f.length):(c.push({tile:s,index:o}),s=f,o=0,i&&f.isComposite()&&i.enter(f))}else if(o==s.length)l=!!s.breakAfter,{tile:s,index:o}=c.pop(),o++;else if(e){let f=Math.min(e,s.length-o);i&&i.skip(s,o,o+f),e-=f,o+=f}else break;return this.tile=s,this.index=o,this.beforeBreak=l,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class b8{constructor(e,n,i,s){this.from=e,this.to=n,this.wrapper=i,this.rank=s}}class S8{constructor(e,n,i){this.cache=e,this.root=n,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,i,s){var o;this.flushBuffer();let l=this.ensureMarks(n,i),c=l.lastChild;if(c&&c.isText()&&!(c.flags&8)&&c.length+e.length<512){this.cache.reused.set(c,2);let f=l.children[l.children.length-1]=new Gr(c.dom,c.text+e);f.parent=l}else l.append(s||Gr.of(e,(o=this.cache.find(Gr))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let i=this.curLine;i.dom!=n.line.dom&&(i.setDOM(this.cache.reused.has(n.line)?Pm(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let s=i;for(let c=n.marks.length-1;c>=0;c--){let f=n.marks[c],h=s.lastChild;if(h instanceof mn&&h.mark.eq(f.mark))h.dom!=f.dom&&h.setDOM(Pm(f.dom)),s=h;else{if(this.cache.reused.get(f)){let g=kt.get(f.dom);g&&g.setDOM(Pm(f.dom))}let p=mn.of(f.mark,f.dom);s.append(p),s=p}this.cache.reused.set(f,2)}let o=kt.get(e.text);o&&this.cache.reused.set(o,2);let l=new Gr(e.text,e.text.nodeValue);l.flags|=8,s.append(l)}addInlineWidget(e,n,i){let s=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);s||this.flushBuffer();let o=this.ensureMarks(n,i);!s&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,i){this.flushBuffer(),this.ensureMarks(n,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var i;e||(e=WO);let s=zl.start(e,n||((i=this.cache.find(zl))===null||i===void 0?void 0:i.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var i;let s=this.curLine;for(let o=e.length-1;o>=0;o--){let l=e[o],c;if(n>0&&(c=s.lastChild)&&c instanceof mn&&c.mark.eq(l))s=c,n--;else{let f=mn.of(l,(i=this.cache.find(mn,h=>h.mark.eq(l)))===null||i===void 0?void 0:i.dom);s.append(f),s=f,n=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!f2(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(me.ios&&f2(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Hm,0,32)||new uo(Hm.toDOM(),0,Hm,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new b8(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-n.rank||this.wrappers[i-1].to-n.to)<0;)i--;this.wrappers.splice(i,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let i of this.wrappers){let s=n.lastChild;if(i.from<this.pos&&s instanceof ir&&s.wrapper.eq(i.wrapper))n=s;else{let o=ir.of(i.wrapper,(e=this.cache.find(ir,l=>l.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);n.append(o),n=o}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),i=this.cache.find(Vh,void 0,1);return i&&(i.flags=n),i||new Vh(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class w8{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skipCount);if(this.skipCount=0,l)throw new Error("Ran out of text content when drawing inline views");this.text=s;let c=this.textOff=Math.min(e,s.length);return o?null:s.slice(0,c)}let n=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,n);return this.textOff=n,i}}const Uh=[uo,zl,Gr,mn,Vh,ir,zd];for(let t=0;t<Uh.length;t++)Uh[t].bucket=t;class C8{constructor(e){this.view=e,this.buckets=Uh.map(()=>[]),this.index=Uh.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,i=this.buckets[n];i.length<6?i.push(e):i[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,i=2){let s=e.bucket,o=this.buckets[s],l=this.index[s];for(let c=o.length-1;c>=0;c--){let f=(c+l)%o.length,h=o[f];if((!n||n(h))&&!this.reused.has(h))return o.splice(f,1),f<l&&this.index[s]--,this.reused.set(h,i),h}return null}findWidget(e,n,i){let s=this.buckets[0];if(s.length)for(let o=0,l=0;;o++){if(o==s.length){if(l)return null;l=1,o=0}let c=s[o];if(!this.reused.has(c)&&(l==0?c.widget.compare(e):c.widget.constructor==e.constructor&&e.updateDOM(c.dom,this.view)))return s.splice(o,1),o<this.index[0]&&this.index[0]--,c.widget==e&&c.length==n&&(c.flags&497)==i?(this.reused.set(c,1),c):(this.reused.set(c,2),new uo(c.dom,n,e,c.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class A8{constructor(e,n,i,s,o){this.view=e,this.decorations=s,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new C8(e),this.text=new w8(e.state.doc),this.builder=new S8(this.cache,new zd(e,e.contentDOM),ze.iter(i)),this.cache.reused.set(n,2),this.old=new v8(n),this.reuseWalker={skip:(l,c,f)=>{if(this.cache.add(l),l.isComposite())return!1},enter:l=>this.cache.add(l),leave:()=>{},break:()=>{}}}run(e,n){let i=n&&this.getCompositionContext(n.text);for(let s=0,o=0,l=0;;){let c=l<e.length?e[l++]:null,f=c?c.fromA:this.old.root.length;if(f>s){let h=f-s;this.preserve(h,!l,!c),s=f,o+=h}if(!c)break;n&&c.fromA<=n.range.fromA&&c.toA>=n.range.toA?(this.forward(c.fromA,n.range.fromA,n.range.fromA<n.range.toA?1:-1),this.emit(o,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,i),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,c.toA),this.emit(n.range.toB,c.toB)):(this.forward(c.fromA,c.toA),this.emit(o,c.toB)),o=c.toB,s=c.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,i){let s=E8(this.old),o=this.openMarks;this.old.advance(e,i?1:-1,{skip:(l,c,f)=>{if(l.isWidget())if(this.openWidget)this.builder.continueWidget(f-c);else{let h=f>0||c<l.length?uo.of(l.widget,this.view,f-c,l.flags&496,this.cache.maybeReuse(l)):this.cache.reuse(l);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,s,o),o=s.length)}else if(l.isText())this.builder.ensureLine(null),!c&&f==l.length?this.builder.addText(l.text,s,o,this.cache.reuse(l)):(this.cache.add(l),this.builder.addText(l.text.slice(c,f),s,o)),o=s.length;else if(l.isLine())l.flags&=-2,this.cache.reused.set(l,1),this.builder.addLine(l);else if(l instanceof Vh)this.cache.add(l);else if(l instanceof mn)this.builder.ensureLine(null),this.builder.addMark(l,s,o),this.cache.reused.set(l,1),o=s.length;else return!1;this.openWidget=!1},enter:l=>{l.isLine()?this.builder.addLineStart(l.attrs,this.cache.maybeReuse(l)):(this.cache.add(l),l instanceof mn&&s.unshift(l.mark)),this.openWidget=!1},leave:l=>{l.isLine()?s.length&&(s.length=o=0):l instanceof mn&&(s.shift(),o=Math.min(o,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let i=null,s=this.builder,o=0,l=ze.spans(this.decorations,e,n,{point:(c,f,h,p,g,y)=>{if(h instanceof ao){if(this.disallowBlockEffectsFor[y]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(f>this.view.state.doc.lineAt(c).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,g>p.length)s.continueWidget(f-c);else{let v=h.widget||(h.block?Pl.block:Pl.inline),b=k8(h),S=this.cache.findWidget(v,f-c,b)||uo.of(v,this.view,f-c,b);h.block?(h.startSide>0&&s.addLineStartIfNotCovered(i),s.addBlockWidget(S)):(s.ensureLine(i),s.addInlineWidget(S,p,g))}i=null}else i=O8(i,h);f>c&&this.text.skip(f-c)},span:(c,f,h,p)=>{for(let g=c;g<f;){let y=this.text.next(Math.min(512,f-g));y==null?(s.addLineStartIfNotCovered(i),s.addBreak(),g++):(s.ensureLine(i),s.addText(y,h,g==c?p:h.length),g+=y.length),i=null}}});s.addLineStartIfNotCovered(i),this.openWidget=l>o,this.openMarks=l}forward(e,n,i=1){n-e<=10?this.old.advance(n-e,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(e){let n=[],i=null;for(let s=e.parentNode;;s=s.parentNode){let o=kt.get(s);if(s==this.view.contentDOM)break;o instanceof mn?n.push(o):o?.isLine()?i=o:s.nodeName=="DIV"&&!i&&s!=this.view.contentDOM?i=new zl(s,WO):n.push(mn.of(new eu({tagName:s.nodeName.toLowerCase(),attributes:Z6(s)}),s))}return{line:i,marks:n}}}function f2(t,e){let n=i=>{for(let s of i.children)if((e?s.isText():s.length)||n(s))return!0;return!1};return n(t)}function k8(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const WO={class:"cm-line"};function O8(t,e){let n=e.spec.attributes,i=e.spec.class;return!n&&!i||(t||(t={class:"cm-line"}),n&&cx(n,t),i&&(t.class+=" "+i)),t}function E8(t){let e=[];for(let n=t.parents.length;n>1;n--){let i=n==t.parents.length?t.tile:t.parents[n].tile;i instanceof mn&&e.push(i.mark)}return e}function Pm(t){let e=kt.get(t);return e&&e.setDOM(t.cloneNode()),t}class Pl extends zi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Pl.inline=new Pl("span");Pl.block=new Pl("div");const Hm=new class extends zi{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class h2{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Se.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new zd(e,e.contentDOM),this.updateInner([new qn(0,0,0,e.state.doc.length)],null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!z8(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?T8(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:g}=this.hasComposition;i=new qn(p,g,e.changes.mapPos(p,-1),e.changes.mapPos(g,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(me.ie||me.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,c=this.blockWrappers;this.updateDeco();let f=R8(l,this.decorations,e.changes);f.length&&(i=qn.extendWithRanges(i,f));let h=L8(c,this.blockWrappers,e.changes);return h.length&&(i=qn.extendWithRanges(i,h)),o&&!i.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(n||e.length){let l=this.tile,c=new A8(this.view,l,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=c.run(e,n),ny(l,c.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=me.chrome||me.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof jm&&s.push(o.dom);i.updateGaps(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(QO)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,s=this.view.root.activeElement,o=s==i,l=!o&&!(this.view.state.facet(cs)||i.tabIndex>-1)&&ac(i,this.view.observer.selectionRange)&&!(s&&i.contains(s));if(!(o||n||l))return;let c=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,h,p;if(f.empty?p=h=this.inlineDOMNearPos(f.anchor,f.assoc||1):(p=this.inlineDOMNearPos(f.head,f.head==f.from?1:-1),h=this.inlineDOMNearPos(f.anchor,f.anchor==f.from?1:-1)),me.gecko&&f.empty&&!this.hasComposition&&M8(h)){let y=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(y,h.node.childNodes[h.offset]||null)),h=p=new li(y,0),c=!0}let g=this.view.observer.selectionRange;(c||!g.focusNode||(!uc(h.node,h.offset,g.anchorNode,g.anchorOffset)||!uc(p.node,p.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,f))&&(this.view.observer.ignore(()=>{me.android&&me.chrome&&i.contains(g.focusNode)&&B8(g.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let y=Bl(this.view.root);if(y)if(f.empty){if(me.gecko){let v=N8(h.node,h.offset);if(v&&v!=3){let b=(v==1?TO:NO)(h.node,h.offset);b&&(h=new li(b.node,b.offset))}}y.collapse(h.node,h.offset),f.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=f.bidiLevel)}else if(y.extend){y.collapse(h.node,h.offset);try{y.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();f.anchor>f.head&&([h,p]=[p,h]),v.setEnd(p.node,p.offset),v.setStart(h.node,h.offset),y.removeAllRanges(),y.addRange(v)}l&&this.view.root.activeElement==i&&(i.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new li(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new li(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&uc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Bl(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let l=this.lineAt(n.head,n.assoc);if(!l)return;let c=l.posAtStart;if(n.head==c||n.head==c+l.length)return;let f=this.coordsAt(n.head,-1),h=this.coordsAt(n.head,1);if(!f||!h||f.bottom>h.top)return;let p=this.domAtPos(n.head+n.assoc,n.assoc);i.collapse(p.node,p.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=n.from&&i.collapse(s,o)}posFromDOM(e,n){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let s=i.posAtStart;if(i.isComposite()){let o;if(e==i.dom)o=i.dom.childNodes[n];else{let l=gs(e)==0?0:n==0?-1:1;for(;;){let c=e.parentNode;if(c==i.dom)break;l==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?l=-1:l=1),e=c}l<0?o=e:o=e.nextSibling}if(o==i.dom.firstChild)return s;for(;o&&!kt.get(o);)o=o.nextSibling;if(!o)return s+i.length;for(let l=0,c=s;;l++){let f=i.children[l];if(f.dom==o)return c;c+=f.length+f.breakAfter}}else return i.isText()?e==i.dom?s+n:s+(n?i.length:0):s}domAtPos(e,n){let{tile:i,offset:s}=this.tile.resolveBlock(e,n);return i.isWidget()?i.domPosFor(e,n):i.domIn(s,n)}inlineDOMNearPos(e,n){let i,s=-1,o=!1,l,c=-1,f=!1;return this.tile.blockTiles((h,p)=>{if(h.isWidget()){if(h.flags&32&&p>=e)return!0;h.flags&16&&(o=!0)}else{let g=p+h.length;if(p<=e&&(i=h,s=e-p,o=g<e),g>=e&&!l&&(l=h,c=e-p,f=p>e),p>e&&l)return!0}}),!i&&!l?this.domAtPos(e,n):(o&&l?i=null:f&&i&&(l=null),i&&n<0||!l?i.domIn(s,n):l.domIn(c,n))}coordsAt(e,n){let{tile:i,offset:s}=this.tile.resolveBlock(e,n);return i.isWidget()?i.widget instanceof jm?null:i.coordsInWidget(s,n,!0):i.coordsIn(s,n)}lineAt(e,n){let{tile:i}=this.tile.resolveBlock(e,n);return i.isLine()?i:null}coordsForChar(e){let{tile:n,offset:i}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function s(o,l){if(o.isComposite())for(let c of o.children){if(c.length>=l){let f=s(c,l);if(f)return f}if(l-=c.length,l<0)break}else if(o.isText()&&l<o.length){let c=Dt(o.text,l);if(c==l)return null;let f=Tc(o.dom,l,c).getClientRects();for(let h=0;h<f.length;h++){let p=f[h];if(h==f.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return s(n,i)}measureVisibleLineHeights(e){let n=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,l=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,f=this.view.textDirection==it.LTR,h=0,p=(g,y,v)=>{for(let b=0;b<g.children.length&&!(y>s);b++){let S=g.children[b],A=y+S.length,k=S.dom.getBoundingClientRect(),{height:T}=k;if(v&&!b&&(h+=k.top-v.top),S instanceof ir)A>i&&p(S,y,k);else if(y>=i&&(h>0&&n.push(-h),n.push(T+h),h=0,l)){let O=S.dom.lastChild,M=O?cc(O):[];if(M.length){let L=M[M.length-1],_=f?L.right-k.left:k.right-L.left;_>c&&(c=_,this.minWidth=o,this.minWidthFrom=y,this.minWidthTo=A)}}v&&b==g.children.length-1&&(h+=v.bottom-k.bottom),y=A+S.breakAfter}};return p(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?it.RTL:it.LTR}measureTextSize(){let e=this.tile.blockTiles(l=>{if(l.isLine()&&l.children.length&&l.length<=20){let c=0,f;for(let h of l.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let p=cc(h.dom);if(p.length!=1)return;c+=p[0].width,f=p[0].height}if(c)return{lineHeight:l.dom.getBoundingClientRect().height,charWidth:c/l.length,textHeight:f}}});if(e)return e;let n=document.createElement("div"),i,s,o;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let l=cc(n.firstChild)[0];i=n.getBoundingClientRect().height,s=l&&l.width?l.width/27:7,o=l&&l.height?l.height:i,n.remove()}),{lineHeight:i,charWidth:s,textHeight:o}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,s=0;;s++){let o=s==n.viewports.length?null:n.viewports[s],l=o?o.from-1:this.view.state.doc.length;if(l>i){let c=(n.lineBlockAt(l).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Se.replace({widget:new jm(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!o)break;i=o.to+1}return Se.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Ld).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(gx).map((o,l)=>{let c=typeof o=="function";return c&&(i=!0),c?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,n.push(ze.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(XO).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(qO))try{if(h(this.view,e.range,e))return!0}catch(p){xn(this.view.state,p,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!i)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=mx(this.view),l={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:c,offsetHeight:f}=this.view.scrollDOM;t8(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,f),-f),this.view.textDirection==it.LTR)}lineHasWidget(e){let n=i=>i.isWidget()||i.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){ny(this.tile)}}function ny(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let i of t.children)ny(i,e)}}function M8(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function KO(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=TO(n.focusNode,n.focusOffset),s=NO(n.focusNode,n.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let c=kt.get(s.node);if(!c||c.isText()&&c.text!=s.node.nodeValue)o=s;else if(t.docView.lastCompositionAfterCursor){let f=kt.get(i.node);!f||f.isText()&&f.text!=i.node.nodeValue||(o=s)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let l=e-o.offset;return{from:l,to:l+o.node.nodeValue.length,node:o.node}}function T8(t,e,n){let i=KO(t,n);if(!i)return null;let{node:s,from:o,to:l}=i,c=s.nodeValue;if(/[\n\r]/.test(c)||t.state.doc.sliceString(i.from,i.to)!=c)return null;let f=e.invertedDesc;return{range:new qn(f.mapPos(o),f.mapPos(l),o,l),text:s}}function N8(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let D8=class{constructor(){this.changes=[]}compareRange(e,n){bl(e,n,this.changes)}comparePoint(e,n){bl(e,n,this.changes)}boundChange(e){bl(e,e,this.changes)}};function R8(t,e,n){let i=new D8;return ze.compare(t,e,n,i),i.changes}class _8{constructor(){this.changes=[]}compareRange(e,n){bl(e,n,this.changes)}comparePoint(){}boundChange(e){bl(e,e,this.changes)}}function L8(t,e,n){let i=new _8;return ze.compare(t,e,n,i),i.changes}function B8(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function z8(t,e){let n=!1;return e&&t.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(n=!0)}),n}class jm extends zi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function P8(t,e,n=1){let i=t.charCategorizer(e),s=t.doc.lineAt(e),o=e-s.from;if(s.length==0)return ae.cursor(e);o==0?n=1:o==s.length&&(n=-1);let l=o,c=o;n<0?l=Dt(s.text,o,!1):c=Dt(s.text,o);let f=i(s.text.slice(l,c));for(;l>0;){let h=Dt(s.text,l,!1);if(i(s.text.slice(h,l))!=f)break;l=h}for(;c<s.length;){let h=Dt(s.text,c);if(i(s.text.slice(c,h))!=f)break;c=h}return ae.range(l+s.from,c+s.from)}function H8(t,e,n,i,s){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let c=t.viewState.heightOracle.textHeight,f=Math.floor((s-n.top-(t.defaultLineHeight-c)*.5)/c);o+=f*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+q0(l,o,t.state.tabSize)}function iy(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let s;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!s||o.type==qt.Text&&(s.type!=o.type||(n<0?o.from<e:o.to>e)))&&(s=o)}}return s||i}return i}function j8(t,e,n,i){let s=iy(t,e.head,e.assoc||-1),o=!i||s.type!=qt.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let l=t.dom.getBoundingClientRect(),c=t.textDirectionAt(s.from),f=t.posAtCoords({x:n==(c==it.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(f!=null)return ae.cursor(f,n?-1:1)}return ae.cursor(n?s.to:s.from,n?-1:1)}function d2(t,e,n,i){let s=t.state.doc.lineAt(e.head),o=t.bidiSpans(s),l=t.textDirectionAt(s.from);for(let c=e,f=null;;){let h=d8(s,o,l,c,n),p=BO;if(!h){if(s.number==(n?t.state.doc.lines:1))return c;p=`
`,s=t.state.doc.line(s.number+(n?1:-1)),o=t.bidiSpans(s),h=t.visualLineSide(s,!n)}if(f){if(!f(p))return c}else{if(!i)return h;f=i(p)}c=h}}function I8(t,e,n){let i=t.state.charCategorizer(e),s=i(n);return o=>{let l=i(o);return s==at.Space&&(s=l),s==l}}function V8(t,e,n,i){let s=e.head,o=n?1:-1;if(s==(n?t.state.doc.length:0))return ae.cursor(s,e.assoc);let l=e.goalColumn,c,f=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(s,e.assoc||-1),p=t.documentTop;if(h)l==null&&(l=h.left-f.left),c=o<0?h.top:h.bottom;else{let b=t.viewState.lineBlockAt(s);l==null&&(l=Math.min(f.right-f.left,t.defaultCharacterWidth*(s-b.from))),c=(o<0?b.top:b.bottom)+p}let g=f.left+l,y=i??t.viewState.heightOracle.textHeight>>1,v=sy(t,{x:g,y:c+y*o},!1,o);return ae.cursor(v.pos,v.assoc,void 0,l)}function fc(t,e,n){for(;;){let i=0;for(let s of t)s.between(e-1,e+1,(o,l,c)=>{if(e>o&&e<l){let f=i||n||(e-o<l-e?-1:1);e=f<0?o:l,i=f}});if(!i)return e}}function ZO(t,e){let n=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let l=fc(t,s.from,0);l!=s.from&&(o=ae.cursor(l,-1))}else{let l=fc(t,s.from,-1),c=fc(t,s.to,1);(l!=s.from||c!=s.to)&&(o=ae.range(s.from==s.anchor?l:c,s.from==s.head?l:c))}o&&(n||(n=e.ranges.slice()),n[i]=o)}return n?ae.create(n,e.mainIndex):e}function Im(t,e,n){let i=fc(t.state.facet(nu).map(s=>s(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ae.cursor(i,i<n.from?1:-1)}class Oi{constructor(e,n){this.pos=e,this.assoc=n}}function sy(t,e,n,i){let s=t.contentDOM.getBoundingClientRect(),o=s.top+t.viewState.paddingTop,{x:l,y:c}=e,f=c-o,h;for(;;){if(f<0)return new Oi(0,1);if(f>t.viewState.docHeight)return new Oi(t.state.doc.length,-1);if(h=t.elementAtHeight(f),i==null)break;if(h.type==qt.Text){if(i<0?h.to<t.viewport.from:h.from>t.viewport.to)break;let y=t.docView.coordsAt(i<0?h.from:h.to,i);if(y&&(i<0?y.top<=f+o:y.bottom>=f+o))break}let g=t.viewState.heightOracle.textHeight/2;f=i>0?h.bottom+g:h.top-g}if(t.viewport.from>=h.to||t.viewport.to<=h.from){if(n)return null;if(h.type==qt.Text){let g=H8(t,s,h,l,c);return new Oi(g,g==h.from?1:-1)}}if(h.type!=qt.Text)return f<(h.top+h.bottom)/2?new Oi(h.from,1):new Oi(h.to,-1);let p=t.docView.lineAt(h.from,2);return(!p||p.length!=h.length)&&(p=t.docView.lineAt(h.from,-2)),JO(t,p,h.from,l,c)}function JO(t,e,n,i,s){let o=-1,l=null,c=1e9,f=1e9,h=s,p=s,g=(y,v)=>{for(let b=0;b<y.length;b++){let S=y[b];if(S.top==S.bottom)continue;let A=S.left>i?S.left-i:S.right<i?i-S.right:0,k=S.top>s?S.top-s:S.bottom<s?s-S.bottom:0;S.top<=p&&S.bottom>=h&&(h=Math.min(S.top,h),p=Math.max(S.bottom,p),k=0),(o<0||(k-f||A-c)<0)&&(o>=0&&f&&c<A&&l.top<=p-2&&l.bottom>=h+2?f=0:(o=v,c=A,f=k,l=S))}};if(e.isText()){for(let v=0;v<e.length;){let b=Dt(e.text,v);if(g(Tc(e.dom,v,b).getClientRects(),v),!c&&!f)break;v=b}return i>(l.left+l.right)/2==(p2(t,o+n)==it.LTR)?new Oi(n+Dt(e.text,o),-1):new Oi(n+o,1)}else{if(!e.length)return new Oi(n,1);for(let S=0;S<e.children.length;S++){let A=e.children[S];if(A.flags&48)continue;let k=(A.dom.nodeType==1?A.dom:Tc(A.dom,0,A.length)).getClientRects();if(g(k,S),!c&&!f)break}let y=e.children[o],v=e.posBefore(y,n);return y.isComposite()||y.isText()?JO(t,y,v,Math.max(l.left,Math.min(l.right,i)),s):i>(l.left+l.right)/2==(p2(t,o+n)==it.LTR)?new Oi(v+y.length,-1):new Oi(v,1)}}function p2(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[fs.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const ec="";class U8{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(Ve.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ec}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let l=kt.get(s),c=s.nextSibling;if(c==n){l?.breakAfter&&!c&&i!=this.view.contentDOM&&this.lineBreak();break}let f=kt.get(c);(l&&f?l.breakAfter:(l?l.breakAfter:jh(s))||jh(c)&&(s.nodeName!="BR"||l?.isWidget())&&this.text.length>o)&&!q8(c,n)&&this.lineBreak(),s=c}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,l=1,c;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(c=s.exec(n))&&(o=c.index,l=c[0].length),this.append(n.slice(i,o<0?n.length:o)),o<0)break;if(this.lineBreak(),l>1)for(let f of this.points)f.node==e&&f.pos>this.text.length&&(f.pos-=l-1);i=o+l}}readNode(e){let n=kt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+($8(e,i.node,i.offset)?n:0))}}function $8(t,e,n){for(;;){if(!e||n<gs(e))return!1;if(e==t)return!0;n=ur(e)+1,e=e.parentNode}}function q8(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let i=kt.get(t);if(!i?.isWidget())return!1;i&&(n||(n=[])).push(i)}if(n)for(let i of n){let s=i.overrideDOMText;if(s?.length)return!1}return!0}class g2{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class Q8{constructor(e,n,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=eE(e.docView.tile,n,i,0))){let c=o||l?[]:X8(e),f=new U8(c,e);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=F8(c,this.bounds.from)}else{let c=e.observer.selectionRange,f=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!K0(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),h=l&&l.node==c.anchorNode&&l.offset==c.anchorOffset||!K0(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((me.ios||me.chrome)&&e.state.selection.main.empty&&f!=h&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(f,h),y=Math.max(f,h),v=p.from-g,b=p.to-y;(v==0||v==1||g==0)&&(b==0||b==-1||y==e.state.doc.length)&&(f=0,h=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ae.range(h,f)):this.newSel=ae.single(h,f)}}}function eE(t,e,n,i){if(t.isComposite()){let s=-1,o=-1,l=-1,c=-1;for(let f=0,h=i,p=i;f<t.children.length;f++){let g=t.children[f],y=h+g.length;if(h<e&&y>n)return eE(g,e,n,h);if(y>=e&&s==-1&&(s=f,o=h),h>n&&g.dom.parentNode==t.dom){l=f,c=p;break}p=y,h=y+g.breakAfter}return{from:o,to:c<0?i+t.length:c,startDOM:(s?t.children[s-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:l<t.children.length&&l>=0?t.children[l].dom:null}}else return t.isText()?{from:i,to:i+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function tE(t,e){let n,{newSel:i}=e,s=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:c}=e.bounds,f=s.from,h=null;(o===8||me.android&&e.text.length<c-l)&&(f=s.to,h="end");let p=nE(t.state.doc.sliceString(l,c,ec),e.text,f-l,h);p&&(me.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==ec+ec&&p.toB--,n={from:l+p.from,to:l+p.toA,insert:Qe.of(e.text.slice(p.from,p.toB).split(ec))})}else i&&(!t.hasFocus&&t.state.facet(cs)||$h(i,s))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!s.empty&&i&&i.main.empty?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(me.mac||me.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ae.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Qe.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,s.to))}:t.state.doc.lineAt(s.from).to<s.to&&t.docView.lineHasWidget(s.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:s.from,to:s.to,insert:t.state.toText(t.inputState.insertingText)}:me.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ae.single(i.main.anchor-1,i.main.head-1)),n={from:s.from,to:s.to,insert:Qe.of([" "])}),n)return yx(t,n,i,o);if(i&&!$h(i,s)){let l=!1,c="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),c=t.inputState.lastSelectionOrigin,c=="select.pointer"&&(i=ZO(t.state.facet(nu).map(f=>f(t)),i))),t.dispatch({selection:i,scrollIntoView:l,userEvent:c}),!0}else return!1}function yx(t,e,n,i=-1){if(me.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(me.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Sl(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Sl(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Sl(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,c=()=>l||(l=Y8(t,e,n));return t.state.facet(IO).some(f=>f(t,e.from,e.to,o,c))||t.dispatch(c()),!0}function Y8(t,e,n){let i,s=t.state,o=s.selection.main,l=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let f=e.from<o.from?-1:1,h=f<0?o.from:o.to,p=fc(s.facet(nu).map(g=>g(t)),h,f);e.from==p&&(l=p)}if(l>-1)i={changes:e,selection:ae.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let f=o.from<e.from?s.sliceDoc(o.from,e.from):"",h=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(t.state.toText(f+e.insert.sliceString(0,void 0,t.state.lineBreak)+h))}else{let f=s.changes(e),h=n&&n.main.to<=f.newLength?n.main:void 0;if(s.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=t.state.sliceDoc(e.from,e.to),g,y=n&&KO(t,n.main.head);if(y){let b=e.insert.length-(e.to-e.from);g={from:y.from,to:y.to-b}}else g=t.state.doc.lineAt(o.head);let v=o.to-e.to;i=s.changeByRange(b=>{if(b.from==o.from&&b.to==o.to)return{changes:f,range:h||b.map(f)};let S=b.to-v,A=S-p.length;if(t.state.sliceDoc(A,S)!=p||S>=g.from&&A<=g.to)return{range:b};let k=s.changes({from:A,to:S,insert:e.insert}),T=b.to-o.to;return{changes:k,range:h?ae.range(Math.max(0,h.anchor+T),Math.max(0,h.head+T)):b.map(k)}})}else i={changes:f,selection:h&&s.selection.replaceRange(h)}}let c="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,c+=".compose",t.inputState.compositionFirstChange&&(c+=".start",t.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:c,scrollIntoView:!0})}function nE(t,e,n,i){let s=Math.min(t.length,e.length),o=0;for(;o<s&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&t.length==e.length)return null;let l=t.length,c=e.length;for(;l>0&&c>0&&t.charCodeAt(l-1)==e.charCodeAt(c-1);)l--,c--;if(i=="end"){let f=Math.max(0,o-Math.min(l,c));n-=l+f-o}if(l<o&&t.length<e.length){let f=n<=o&&n>=l?o-n:0;o-=f,c=o+(c-l),l=o}else if(c<o){let f=n<=o&&n>=c?o-n:0;o-=f,l=o+(l-c),c=o}return{from:o,toA:l,toB:c}}function X8(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new g2(n,i)),(s!=n||o!=i)&&e.push(new g2(s,o))),e}function F8(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ae.single(n+e,i+e):null}function $h(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class G8{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,me.safari&&e.contentDOM.addEventListener("input",()=>null),me.gecko&&uz(e.contentDOM.ownerDocument)}handleEvent(e){!iz(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,n);for(let s of i.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=W8(e),i=this.handlers,s=this.view.contentDOM;for(let o in n)if(o!="scroll"){let l=!n[o].handlers.length,c=i[o];c&&l!=!c.handlers.length&&(s.removeEventListener(o,this.handleEvent),c=null),c||s.addEventListener(o,this.handleEvent,{passive:l})}for(let o in i)o!="scroll"&&!n[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&sE.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),me.android&&me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=iE.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||K8.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Sl(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:me.safari&&!me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function m2(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(s){xn(n.state,s)}}}function W8(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let s=i.spec,o=s&&s.plugin.domEventHandlers,l=s&&s.plugin.domEventObservers;if(o)for(let c in o){let f=o[c];f&&n(c).handlers.push(m2(i.value,f))}if(l)for(let c in l){let f=l[c];f&&n(c).observers.push(m2(i.value,f))}}for(let i in ci)n(i).handlers.push(ci[i]);for(let i in Fn)n(i).observers.push(Fn[i]);return e}const iE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],K8="dthko",sE=[16,17,18,20,91,92,224,225],qf=6;function Qf(t){return Math.max(0,t)*.7+8}function Z8(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class J8{constructor(e,n,i,s){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=n8(e.contentDOM),this.atoms=e.state.facet(nu).map(l=>l(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ve.allowMultipleSelections)&&ez(e,n),this.dragging=nz(e,n)&&lE(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Z8(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,s=0,o=0,l=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:c}=this.scrollParents.y.getBoundingClientRect());let f=mx(this.view);e.clientX-f.left<=s+qf?n=-Qf(s-e.clientX):e.clientX+f.right>=l-qf&&(n=Qf(e.clientX-l)),e.clientY-f.top<=o+qf?i=-Qf(o-e.clientY):e.clientY+f.bottom>=c-qf&&(i=Qf(e.clientY-c)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,i=ZO(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ez(t,e){let n=t.state.facet(zO);return n.length?n[0](e):me.mac?e.metaKey:e.ctrlKey}function tz(t,e){let n=t.state.facet(PO);return n.length?n[0](e):me.mac?!e.altKey:!e.ctrlKey}function nz(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Bl(t.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let l=s[o];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function iz(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=kt.get(n))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const ci=Object.create(null),Fn=Object.create(null),rE=me.ie&&me.ie_version<15||me.ios&&me.webkit_version<604;function sz(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),oE(t,n.value)},50)}function Pd(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function oE(t,e){e=Pd(t.state,hx,e);let{state:n}=t,i,s=1,o=n.toText(e),l=o.lines==n.selection.ranges.length;if(ry!=null&&n.selection.ranges.every(f=>f.empty)&&ry==o.toString()){let f=-1;i=n.changeByRange(h=>{let p=n.doc.lineAt(h.from);if(p.from==f)return{range:h};f=p.from;let g=n.toText((l?o.line(s++).text:e)+n.lineBreak);return{changes:{from:p.from,insert:g},range:ae.cursor(h.from+g.length)}})}else l?i=n.changeByRange(f=>{let h=o.line(s++);return{changes:{from:f.from,to:f.to,insert:h.text},range:ae.cursor(f.from+h.length)}}):i=n.replaceSelection(o);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Fn.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ci.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Fn.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Fn.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ci.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(HO))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=oz(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new J8(t,e,n,i)),i&&t.observer.ignore(()=>{EO(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function y2(t,e,n,i){if(i==1)return ae.cursor(e,n);if(i==2)return P8(t.state,e,n);{let s=t.docView.lineAt(e,n),o=t.state.doc.lineAt(s?s.posAtEnd:e),l=s?s.posAtStart:o.from,c=s?s.posAtEnd:o.to;return c<t.state.doc.length&&c==o.to&&c++,ae.range(l,c)}}const rz=me.ie&&me.ie_version<=11;let x2=null,v2=0,b2=0;function lE(t){if(!rz)return t.detail;let e=x2,n=b2;return x2=t,b2=Date.now(),v2=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(v2+1)%3:1}function oz(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=lE(e),s=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),s=s.map(o.changes))},get(o,l,c){let f=t.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),h,p=y2(t,f.pos,f.assoc,i);if(n.pos!=f.pos&&!l){let g=y2(t,n.pos,n.assoc,i),y=Math.min(g.from,p.from),v=Math.max(g.to,p.to);p=y<p.from?ae.range(y,v):ae.range(v,y)}return l?s.replaceRange(s.main.extend(p.from,p.to)):c&&i==1&&s.ranges.length>1&&(h=lz(s,f.pos))?h:c?s.addRange(p):ae.create([p])}}}function lz(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:s}=t.ranges[n];if(i<=e&&s>=e)return ae.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ci.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let s=t.docView.tile.nearest(e.target);if(s&&s.isWidget()){let o=s.posAtStart,l=o+s.length;(o>=n.to||l<=n.from)&&(n=ae.range(o,l))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Pd(t.state,dx,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ci.dragend=t=>(t.inputState.draggedContent=null,!1);function S2(t,e,n,i){if(n=Pd(t.state,hx,n),!n)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,l=i&&o&&tz(t,e)?{from:o.from,to:o.to}:null,c={from:s,insert:n},f=t.state.changes(l?[l,c]:c);t.focus(),t.dispatch({changes:f,selection:{anchor:f.mapPos(s,-1),head:f.mapPos(s,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ci.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),s=0,o=()=>{++s==n.length&&S2(t,e,i.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let c=new FileReader;c.onerror=o,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[l]=c.result),o()},c.readAsText(n[l])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return S2(t,e,i,!0),!0}return!1};ci.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=rE?null:e.clipboardData;return n?(oE(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(sz(t),!1)};function az(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function cz(t){let e=[],n=[],i=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:o}of t.selection.ranges){let l=t.doc.lineAt(o);l.number>s&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),s=l.number}i=!0}return{text:Pd(t,dx,e.join(t.lineBreak)),ranges:n,linewise:i}}let ry=null;ci.copy=ci.cut=(t,e)=>{let n=Bl(t.root);if(n&&!ac(t.contentDOM,n))return!1;let{text:i,ranges:s,linewise:o}=cz(t.state);if(!i&&!o)return!1;ry=o?i:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let l=rE?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",i),!0):(az(t,i),!1)};const aE=Li.define();function cE(t,e){let n=[];for(let i of t.facet(VO)){let s=i(t,e);s&&n.push(s)}return n.length?t.update({effects:n,annotations:aE.of(!0)}):null}function uE(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=cE(t.state,e);n?t.dispatch(n):t.update([])}},10)}Fn.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),uE(t)};Fn.blur=t=>{t.observer.clearSelectionRange(),uE(t)};Fn.compositionstart=Fn.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Fn.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,me.chrome&&me.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Fn.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ci.beforeinput=(t,e)=>{var n,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(o&&l.length){let c=l[0],f=t.posAtDOM(c.startContainer,c.startOffset),h=t.posAtDOM(c.endContainer,c.endOffset);return yx(t,{from:f,to:h,insert:t.state.toText(o)},null),!0}}let s;if(me.chrome&&me.android&&(s=iE.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return me.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),me.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Fn.compositionend(t,e),20),!1};const w2=new Set;function uz(t){w2.has(t)||(w2.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const C2=["pre-wrap","normal","pre-line","break-spaces"];let Hl=!1;function A2(){Hl=!1}class fz{constructor(e){this.lineWrapping=e,this.doc=Qe.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return C2.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,i,s,o,l){let c=C2.indexOf(e)>-1,f=Math.abs(n-this.lineHeight)>.3||this.lineWrapping!=c||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=c,this.lineHeight=n,this.charWidth=i,this.textHeight=s,this.lineLength=o,f){this.heightSamples={};for(let h=0;h<l.length;h++){let p=l[h];p<0?h++:this.heightSamples[Math.floor(p*10)]=!0}}return f}}class hz{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class si{constructor(e,n,i,s,o){this.from=e,this.length=n,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?qt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ao?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new si(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var st=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(st||(st={}));const xh=.001;class rn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>xh&&(Hl=!0),this.height=e)}replace(e,n,i){return rn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,s){let o=this,l=i.doc;for(let c=s.length-1;c>=0;c--){let{fromA:f,toA:h,fromB:p,toB:g}=s[c],y=o.lineAt(f,st.ByPosNoHeight,i.setDoc(n),0,0),v=y.to>=h?y:o.lineAt(h,st.ByPosNoHeight,i,0,0);for(g+=v.to-h,h=v.to;c>0&&y.from<=s[c-1].toA;)f=s[c-1].fromA,p=s[c-1].fromB,c--,f<y.from&&(y=o.lineAt(f,st.ByPosNoHeight,i,0,0));p+=y.from-f,f=y.from;let b=xx.build(i.setDoc(l),e,p,g);o=qh(o,o.replace(f,h,b))}return o.updateHeight(i,0)}static empty(){return new Rn(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,s=0,o=0;for(;;)if(n==i)if(s>o*2){let c=e[n-1];c.break?e.splice(--n,1,c.left,null,c.right):e.splice(--n,1,c.left,c.right),i+=1+c.break,s-=c.size}else if(o>s*2){let c=e[i];c.break?e.splice(i,1,c.left,null,c.right):e.splice(i,1,c.left,c.right),i+=2+c.break,o-=c.size}else break;else if(s<o){let c=e[n++];c&&(s+=c.size)}else{let c=e[--i];c&&(o+=c.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,i++),new pz(rn.of(e.slice(0,n)),l,rn.of(e.slice(i)))}}function qh(t,e){return t==e?t:(t.constructor!=e.constructor&&(Hl=!0),e)}rn.prototype.size=1;const dz=Se.replace({});class fE extends rn{constructor(e,n,i){super(e,n),this.deco=i,this.spaceAbove=0}mainBlock(e,n){return new si(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,i,s){return this.spaceAbove&&e<i+this.spaceAbove?new si(s,0,i,this.spaceAbove,dz):this.mainBlock(i,s)}lineAt(e,n,i,s,o){let l=this.mainBlock(s,o);return this.spaceAbove?this.blockAt(0,i,s,o).join(l):l}forEachLine(e,n,i,s,o,l){e<=o+this.length&&n>=o&&l(this.lineAt(0,st.ByPos,i,s,o))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Rn extends fE{constructor(e,n,i){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,n){return new si(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,i){let s=i[0];return i.length==1&&(s instanceof Rn||s instanceof Ut&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Ut?s=new Rn(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):rn.of(i)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more?this.setMeasuredHeight(s):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ut extends rn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,o=s-i+1,l,c=0;if(e.lineWrapping){let f=Math.min(this.height,e.lineHeight*o);l=f/o,this.length>o+1&&(c=(this.height-f)/(this.length-o-1))}else l=this.height/o;return{firstLine:i,lastLine:s,perLine:l,perChar:c}}blockAt(e,n,i,s){let{firstLine:o,lastLine:l,perLine:c,perChar:f}=this.heightMetrics(n,s);if(n.lineWrapping){let h=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),p=n.doc.lineAt(h),g=c+p.length*f,y=Math.max(i,e-g/2);return new si(p.from,p.length,y,g,0)}else{let h=Math.max(0,Math.min(l-o,Math.floor((e-i)/c))),{from:p,length:g}=n.doc.line(o+h);return new si(p,g,i+c*h,c,0)}}lineAt(e,n,i,s,o){if(n==st.ByHeight)return this.blockAt(e,i,s,o);if(n==st.ByPosNoHeight){let{from:v,to:b}=i.doc.lineAt(e);return new si(v,b-v,0,0,0)}let{firstLine:l,perLine:c,perChar:f}=this.heightMetrics(i,o),h=i.doc.lineAt(e),p=c+h.length*f,g=h.number-l,y=s+c*g+f*(h.from-o-g);return new si(h.from,h.length,Math.max(s,Math.min(y,s+this.height-p)),p,0)}forEachLine(e,n,i,s,o,l){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:c,perLine:f,perChar:h}=this.heightMetrics(i,o);for(let p=e,g=s;p<=n;){let y=i.doc.lineAt(p);if(p==e){let b=y.number-c;g+=f*b+h*(e-o-b)}let v=f+h*y.length;l(new si(y.from,y.length,g,v,0)),g+=v,p=y.to+1}}replace(e,n,i){let s=this.length-n;if(s>0){let o=i[i.length-1];o instanceof Ut?i[i.length-1]=new Ut(o.length+s):i.push(null,new Ut(s-1))}if(e>0){let o=i[0];o instanceof Ut?i[0]=new Ut(e+o.length):i.unshift(new Ut(e-1),null)}return rn.of(i)}decomposeLeft(e,n){n.push(new Ut(e-1),null)}decomposeRight(e,n){n.push(null,new Ut(this.length-e-1))}updateHeight(e,n=0,i=!1,s){let o=n+this.length;if(s&&s.from<=n+this.length&&s.more){let l=[],c=Math.max(n,s.from),f=-1;for(s.from>n&&l.push(new Ut(s.from-n-1).updateHeight(e,n));c<=o&&s.more;){let p=e.doc.lineAt(c).length;l.length&&l.push(null);let g=s.heights[s.index++],y=0;g<0&&(y=-g,g=s.heights[s.index++]),f==-1?f=g:Math.abs(g-f)>=xh&&(f=-2);let v=new Rn(p,g,y);v.outdated=!1,l.push(v),c+=p+1}c<=o&&l.push(null,new Ut(o-c).updateHeight(e,c));let h=rn.of(l);return(f<0||Math.abs(h.height-this.height)>=xh||Math.abs(f-this.heightMetrics(e,n).perLine)>=xh)&&(Hl=!0),qh(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class pz extends rn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,n,i,s):this.right.blockAt(e,n,o,s+this.left.length+this.break)}lineAt(e,n,i,s,o){let l=s+this.left.height,c=o+this.left.length+this.break,f=n==st.ByHeight?e<l:e<c,h=f?this.left.lineAt(e,n,i,s,o):this.right.lineAt(e,n,i,l,c);if(this.break||(f?h.to<c:h.from>c))return h;let p=n==st.ByPosNoHeight?st.ByPosNoHeight:st.ByPos;return f?h.join(this.right.lineAt(c,p,i,l,c)):this.left.lineAt(c,p,i,s,o).join(h)}forEachLine(e,n,i,s,o,l){let c=s+this.left.height,f=o+this.left.length+this.break;if(this.break)e<f&&this.left.forEachLine(e,n,i,s,o,l),n>=f&&this.right.forEachLine(e,n,i,c,f,l);else{let h=this.lineAt(f,st.ByPos,i,s,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,s,o,l),h.to>=e&&h.from<=n&&l(h),n>h.to&&this.right.forEachLine(h.to+1,n,i,c,f,l)}}replace(e,n,i){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let l=o.length;for(let c of i)o.push(c);if(e>0&&k2(o,l-1),n<this.length){let c=o.length;this.decomposeRight(n,o),k2(o,c)}return rn.of(o)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?rn.of(this.break?[e,null,n]:[e,n]):(this.left=qh(this.left,e),this.right=qh(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,s){let{left:o,right:l}=this,c=n+o.length+this.break,f=null;return s&&s.from<=n+o.length&&s.more?f=o=o.updateHeight(e,n,i,s):o.updateHeight(e,n,i),s&&s.from<=c+l.length&&s.more?f=l=l.updateHeight(e,c,i,s):l.updateHeight(e,c,i),f?this.balanced(o,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function k2(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Ut&&(i=t[e+1])instanceof Ut&&t.splice(e-1,3,new Ut(n.length+1+i.length))}const gz=5;class xx{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Rn?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Rn(i-this.pos,-1,0)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let l=n-e;i.block?this.addBlock(new fE(l,s,i)):(l||o||s>=gz)&&this.addLineDeco(s,o,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Rn(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let i=new Ut(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Rn)return e;let n=new Rn(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Rn)&&!this.isCovered?this.nodes.push(new Rn(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Rn&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,n,i,s){let o=new xx(i,e);return ze.spans(n,i,s,o,0),o.finish(i)}}function mz(t,e,n){let i=new yz;return ze.compare(t,e,n,i,0),i.changes}class yz{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,s){(e<n||i&&i.heightRelevant||s&&s.heightRelevant)&&bl(e,n,this.changes,5)}}function xz(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,s=i.defaultView||window,o=Math.max(0,n.left),l=Math.min(s.innerWidth,n.right),c=Math.max(0,n.top),f=Math.min(s.innerHeight,n.bottom);for(let h=t.parentNode;h&&h!=i.body;)if(h.nodeType==1){let p=h,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let y=p.getBoundingClientRect();o=Math.max(o,y.left),l=Math.min(l,y.right),c=Math.max(c,y.top),f=Math.min(h==t.parentNode?s.innerHeight:f,y.bottom)}h=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-n.left,right:Math.max(o,l)-n.left,top:c-(n.top+e),bottom:Math.max(c,f)-(n.top+e)}}function vz(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function bz(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Vm{constructor(e,n,i,s){this.from=e,this.to=n,this.size=i,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=n[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,n){return Se.replace({widget:new Sz(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Sz extends zi{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class O2{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=E2,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=it.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(px).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new fz(n),this.stateDeco=M2(e),this.heightMap=rn.empty().applyChanges(this.stateDeco,Qe.empty,this.heightOracle.setDoc(e.doc),[new qn(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Se.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let s=i?n.head:n.anchor;if(!e.some(({from:o,to:l})=>s>=o&&s<=l)){let{from:o,to:l}=this.lineBlockAt(s);e.push(new Yf(o,l))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?E2:new vx(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(tc(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=M2(this.state);let s=e.changedRanges,o=qn.extendWithRanges(s,mz(i,this.stateDeco,e?e.changes:Tt.empty(this.state.doc.length))),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);A2(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=l||Hl)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let f=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<f.from||n.range.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,n));let h=f.from!=this.viewport.from||f.to!=this.viewport.to;this.viewport=f,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet($O)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?it.RTL:it.LTR;let l=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,c=n.getBoundingClientRect(),f=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let h=0,p=0;if(c.width&&c.height){let{scaleX:M,scaleY:L}=OO(n,c);(M>.005&&Math.abs(this.scaleX-M)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=M,this.scaleY=L,h|=16,l=f=!0)}let g=(parseInt(i.paddingTop)||0)*this.scaleY,y=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=y)&&(this.paddingTop=g,this.paddingBottom=y,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(f=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=MO(e.scrollDOM);let b=(this.printing?bz:xz)(n,this.paddingTop),S=b.top-this.pixelViewport.top,A=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(f=!0)),!this.inView&&!this.scrollTarget&&!vz(e.dom))return 0;let T=c.width;if((this.contentDOMWidth!=T||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),f){let M=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(M)&&(l=!0),l||s.lineWrapping&&Math.abs(T-this.contentDOMWidth)>s.charWidth){let{lineHeight:L,charWidth:_,textHeight:R}=e.docView.measureTextSize();l=L>0&&s.refresh(o,L,_,R,Math.max(5,T/_),M),l&&(e.docView.minWidth=0,h|=16)}S>0&&A>0?p=Math.max(S,A):S<0&&A<0&&(p=Math.min(S,A)),A2();for(let L of this.viewports){let _=L.from==this.viewport.from?M:e.docView.measureVisibleLineHeights(L);this.heightMap=(l?rn.empty().applyChanges(this.stateDeco,Qe.empty,this.heightOracle,[new qn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,l,new hz(L.from,_))}Hl&&(h|=2)}let O=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),h|=this.updateForViewport()),(h&2||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:l,visibleBottom:c}=this,f=new Yf(s.lineAt(l-i*1e3,st.ByHeight,o,0,0).from,s.lineAt(c+(1-i)*1e3,st.ByHeight,o,0,0).to);if(n){let{head:h}=n.range;if(h<f.from||h>f.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=s.lineAt(h,st.ByPos,o,0,0),y;n.y=="center"?y=(g.top+g.bottom)/2-p/2:n.y=="start"||n.y=="nearest"&&h<f.from?y=g.top:y=g.bottom-p,f=new Yf(s.lineAt(y-1e3/2,st.ByHeight,o,0,0).from,s.lineAt(y+p+1e3/2,st.ByHeight,o,0,0).to)}}return f}mapViewport(e,n){let i=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new Yf(this.heightMap.lineAt(i,st.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,st.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,st.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,st.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:c}=this;return(e==0||s<=l-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||o>=c+Math.max(10,Math.min(i,250)))&&s>l-2*1e3&&o<c+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let s of e)n.touchesRange(s.from,s.to)||i.push(new Vm(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,l=s<<1;if(this.defaultTextDirection!=it.LTR&&!i)return[];let c=[],f=(p,g,y,v)=>{if(g-p<o)return;let b=this.state.selection.main,S=[b.from];b.empty||S.push(b.to);for(let k of S)if(k>p&&k<g){f(p,k-10,y,v),f(k+10,g,y,v);return}let A=Cz(e,k=>k.from>=y.from&&k.to<=y.to&&Math.abs(k.from-p)<o&&Math.abs(k.to-g)<o&&!S.some(T=>k.from<T&&k.to>T));if(!A){if(g<y.to&&n&&i&&n.visibleRanges.some(O=>O.from<=g&&O.to>=g)){let O=n.moveToLineBoundary(ae.cursor(g),!1,!0).head;O>p&&(g=O)}let k=this.gapSize(y,p,g,v),T=i||k<2e6?k:2e6;A=new Vm(p,g,k,T)}c.push(A)},h=p=>{if(p.length<l||p.type!=qt.Text)return;let g=wz(p.from,p.to,this.stateDeco);if(g.total<l)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,v,b;if(i){let S=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,A,k;if(y!=null){let T=Ff(g,y),O=((this.visibleBottom-this.visibleTop)/2+S)/p.height;A=T-O,k=T+O}else A=(this.visibleTop-p.top-S)/p.height,k=(this.visibleBottom-p.top+S)/p.height;v=Xf(g,A),b=Xf(g,k)}else{let S=g.total*this.heightOracle.charWidth,A=s*this.heightOracle.charWidth,k=0;if(S>2e6)for(let _ of e)_.from>=p.from&&_.from<p.to&&_.size!=_.displaySize&&_.from*this.heightOracle.charWidth+k<this.pixelViewport.left&&(k=_.size-_.displaySize);let T=this.pixelViewport.left+k,O=this.pixelViewport.right+k,M,L;if(y!=null){let _=Ff(g,y),R=((O-T)/2+A)/S;M=_-R,L=_+R}else M=(T-A)/S,L=(O+A)/S;v=Xf(g,M),b=Xf(g,L)}v>p.from&&f(p.from,v,p,g),b<p.to&&f(b,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(h):h(p);return c}gapSize(e,n,i,s){let o=Ff(s,i)-Ff(s,n);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){Vm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Se.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];ze.spans(n,this.viewport.from,this.viewport.to,{span(o,l){i.push({from:o,to:l})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let o=0;o<i.length&&!(s&8);o++){let l=this.visibleRanges[o],c=i[o];(l.from!=c.from||l.to!=c.to)&&(s|=4,e&&e.mapPos(l.from,-1)==c.from&&e.mapPos(l.to,1)==c.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||tc(this.heightMap.lineAt(e,st.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||tc(this.heightMap.lineAt(this.scaler.fromDOM(e),st.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return tc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Yf{constructor(e,n){this.from=e,this.to=n}}function wz(t,e,n){let i=[],s=t,o=0;return ze.spans(n,t,e,{span(){},point(l,c){l>s&&(i.push({from:s,to:l}),o+=l-s),s=c}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function Xf({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let s=0;;s++){let{from:o,to:l}=e[s],c=l-o;if(i<=c)return o+i;i-=c}}function Ff(t,e){let n=0;for(let{from:i,to:s}of t.ranges){if(e<=s){n+=e-i;break}n+=s-i}return n/t.total}function Cz(t,e){for(let n of t)if(e(n))return n}const E2={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function M2(t){let e=t.facet(Ld).filter(i=>typeof i!="function"),n=t.facet(gx).filter(i=>typeof i!="function");return n.length&&e.push(ze.join(n)),e}class vx{constructor(e,n,i){let s=0,o=0,l=0;this.viewports=i.map(({from:c,to:f})=>{let h=n.lineAt(c,st.ByPos,e,0,0).top,p=n.lineAt(f,st.ByPos,e,0,0).bottom;return s+=p-h,{from:c,to:f,top:h,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let c of this.viewports)c.domTop=l+(c.top-o)*this.scale,l=c.domBottom=c.domTop+(c.bottom-c.top),o=c.bottom}toDOM(e){for(let n=0,i=0,s=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let n=0,i=0,s=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof vx?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function tc(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new si(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(s=>tc(s,e)):t._content)}const Gf=ye.define({combine:t=>t.join(" ")}),oy=ye.define({combine:t=>t.indexOf(!0)>-1}),ly=ar.newName(),hE=ar.newName(),dE=ar.newName(),pE={"&light":"."+hE,"&dark":"."+dE};function ay(t,e,n){return new ar(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return t;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):t+" "+i}})}const Az=ay("."+ly,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},pE),kz={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Um=me.ie&&me.ie_version<=11;class Oz{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new i8,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(me.ie&&me.ie_version<=11||me.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&me.android&&e.constructor.EDIT_CONTEXT!==!1&&!(me.chrome&&me.chrome_version<126)&&(this.editContext=new Mz(e),e.state.facet(cs)&&(e.contentDOM.editContext=this.editContext.editContext)),Um&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(cs)?i.root.activeElement!=this.dom:!ac(this.dom,s))return;let o=s.anchorNode&&i.docView.tile.nearest(s.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(me.ie&&me.ie_version<=11||me.android&&me.chrome)&&!i.state.selection.main.empty&&s.focusNode&&uc(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Bl(e.root);if(!n)return!1;let i=me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Ez(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let s=ac(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&r8(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,kz),Um&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Um&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Sl(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,s=!1;for(let o of e){let l=this.readMutation(o);l&&(l.typeOver&&(s=!0),n==-1?{from:n,to:i}=l:(n=Math.min(l.from,n),i=Math.max(l.to,i)))}return{from:n,to:i,typeOver:s}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),s=this.selectionChanged&&ac(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new Q8(this.view,e,n,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,s=tE(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!$h(this.view.state.selection,n.newSel.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let i=T2(n,e.previousSibling||e.target.previousSibling,-1),s=T2(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(cs)!=e.state.facet(cs)&&(e.view.contentDOM.editContext=e.state.facet(cs)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function T2(t,e,n){for(;e;){let i=kt.get(e);if(i&&i.parent==t)return i;let s=e.parentNode;e=s!=t.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function N2(t,e){let n=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor,1);return uc(l.node,l.offset,s,o)&&([n,i,s,o]=[s,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}}function Ez(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return N2(t,s)}let n=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?N2(t,n):null}class Mz{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:o,head:l}=s,c=this.toEditorPos(i.updateRangeStart),f=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:c,drifted:!1});let h=f-c>i.text.length;c==this.from&&o<this.from?c=o:f==this.to&&o>this.to&&(f=o);let p=nE(e.state.sliceDoc(c,f),i.text,(h?s.from:s.to)-c,h?"end":null);if(!p){let y=ae.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));$h(y,s)||e.dispatch({selection:y,userEvent:"select"});return}let g={from:p.from+c,to:p.toA+c,insert:Qe.of(i.text.slice(p.from,p.toB).split(`
`))};if((me.mac||me.android)&&g.from==l-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:c,to:f,insert:Qe.of([i.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let y=this.to-this.from+(g.to-g.from+g.insert.length);yx(e,g,ae.single(this.toEditorPos(i.selectionStart,y),this.toEditorPos(i.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(n.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let l=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);l<c;l++){let f=e.coordsForChar(l);o=f&&new DOMRect(f.left,f.top,f.right-f.left,f.bottom-f.top)||o||new DOMRect,s.push(o)}n.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let l=o.underlineStyle,c=o.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(c)){let f=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(f<h){let p=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(Se.mark({attributes:{style:p}}).range(f,h))}}}e.dispatch({effects:QO.of(Se.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Bl(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,l,c,f,h)=>{if(i)return;let p=h.length-(l-o);if(s&&l>=s.to)if(s.from==o&&s.to==l&&s.insert.eq(h)){s=this.pendingContextChange=null,n+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(o+=n,l+=n,l<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||l>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(l),h.toString()),this.to+=p}n+=p}),s&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||s8(e.parent)||document,this.viewState=new O2(e.state||Ve.create(e)),e.scrollTo&&e.scrollTo.is($f)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(fl).map(s=>new zm(s));for(let s of this.plugins)s.update(this);this.observer=new Oz(this),this.inputState=new G8(this),this.inputState.ensureHandlers(this.plugins),this.docView=new h2(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let n=e.length==1&&e[0]instanceof Rt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,s,o=this.state;for(let y of e){if(y.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=y.state}if(this.destroyed){this.viewState.state=o;return}let l=this.hasFocus,c=0,f=null;e.some(y=>y.annotation(aE))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,f=cE(o,l),f||(c=1));let h=this.observer.delayedAndroidKey,p=null;if(h?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(Ve.phrases)!=this.state.facet(Ve.phrases))return this.setState(o);s=Ih.create(this,o,e),s.flags|=c;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(g&&(g=g.map(y.changes)),y.scrollIntoView){let{main:v}=y.state.selection;g=new wl(v.empty?v:ae.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of y.effects)v.is($f)&&(g=v.value.clip(this.state))}this.viewState.update(s,g),this.bidiCache=Qh.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(Ja)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Gf)!=s.state.facet(Gf)&&(this.viewState.mustMeasureContent=!0),(n||i||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let y of this.state.facet(ty))try{y(s)}catch(v){xn(this.state,v,"update listener")}(f||p)&&Promise.resolve().then(()=>{f&&this.state==f.startState&&this.dispatch(f),p&&!tE(this,p)&&h.force&&Sl(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new O2(e),this.plugins=e.facet(fl).map(i=>new zm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new h2(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(fl),i=e.state.facet(fl);if(n!=i){let s=[];for(let o of i){let l=n.indexOf(o);if(l<0)s.push(new zm(o));else{let c=this.plugins[l];c.mustUpdate=e,s.push(c)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){xn(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:l}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(MO(i))o=-1,l=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(s);o=v.from,l=v.top}this.updateState=1;let f=this.viewState.measure(this);if(!f&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];f&4||([this.measureRequests,h]=[h,this.measureRequests]);let p=h.map(v=>{try{return v.read(this)}catch(b){return xn(this.state,b),D2}}),g=Ih.create(this,this.state,[]),y=!1;g.flags|=f,n?n.flags|=f:n=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),y=this.docView.update(g),y&&this.docViewUpdate());for(let v=0;v<h.length;v++)if(p[v]!=D2)try{let b=h[v];b.write&&b.write(p[v],this)}catch(b){xn(this.state,b)}if(y&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let b=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-l;if(b>1||b<-1){s=s+b,i.scrollTop=s/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let c of this.state.facet(ty))c(n)}get themeClasses(){return ly+" "+(this.state.facet(oy)?dE:hE)+" "+this.state.facet(Gf)}updateAttrs(){let e=R2(this,YO,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(cs)?"true":"false",class:"cm-content",style:`${me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),R2(this,px,n);let i=this.observer.ignore(()=>{let s=o2(this.contentDOM,this.contentAttrs,n),o=o2(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let s of i.effects)if(s.is(pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Ja);let e=this.state.facet(pe.cspNonce);ar.mount(this.root,this.styleModules.concat(Az).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Im(this,e,d2(this,e,n,i))}moveByGroup(e,n){return Im(this,e,d2(this,e,n,i=>I8(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[n?i.length-1:0];return ae.cursor(o.side(n,s)+e.from,o.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,i=!0){return j8(this,e,n,i)}moveVertically(e,n,i){return Im(this,e,V8(this,e,n,i))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let i=sy(this,e,n);return i&&i.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),sy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),l=o[fs.find(o,e-s.from,-1,n)];return Mc(i,l.dir==it.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(UO)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Tz)return LO(e.length);let n=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||_O(o.isolates,i=c2(this,e))))return o.order;i||(i=c2(this,e));let s=h8(e.text,n,i);return this.bidiCache.push(new Qh(e.from,e.to,n,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{EO(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return $f.of(new wl(typeof e=="number"?ae.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return $f.of(new wl(ae.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return xt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return xt.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=ar.newName(),s=[Gf.of(i),Ja.of(ay(`.${i}`,e))];return n&&n.dark&&s.push(oy.of(!0)),s}static baseTheme(e){return ho.lowest(Ja.of(ay("."+ly,e,pE)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),s=i&&kt.get(i)||kt.get(e);return((n=s?.root)===null||n===void 0?void 0:n.view)||null}}pe.styleModule=Ja;pe.inputHandler=IO;pe.clipboardInputFilter=hx;pe.clipboardOutputFilter=dx;pe.scrollHandler=qO;pe.focusChangeEffect=VO;pe.perLineTextDirection=UO;pe.exceptionSink=jO;pe.updateListener=ty;pe.editable=cs;pe.mouseSelectionStyle=HO;pe.dragMovesSelection=PO;pe.clickAddsSelectionRange=zO;pe.decorations=Ld;pe.blockWrappers=XO;pe.outerDecorations=gx;pe.atomicRanges=nu;pe.bidiIsolatedRanges=FO;pe.scrollMargins=GO;pe.darkTheme=oy;pe.cspNonce=ye.define({combine:t=>t.length?t[0]:""});pe.contentAttributes=px;pe.editorAttributes=YO;pe.lineWrapping=pe.contentAttributes.of({class:"cm-lineWrapping"});pe.announce=Me.define();const Tz=4096,D2={};class Qh{constructor(e,n,i,s,o,l){this.from=e,this.to=n,this.dir=i,this.isolates=s,this.fresh=o,this.order=l}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:it.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let l=e[o];l.dir==s&&!n.touchesRange(l.from,l.to)&&i.push(new Qh(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return i}}function R2(t,e,n){for(let i=t.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],l=typeof o=="function"?o(t):o;l&&cx(l,n)}return n}const Nz=me.mac?"mac":me.windows?"win":me.linux?"linux":"key";function Dz(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let s,o,l,c;for(let f=0;f<n.length-1;++f){const h=n[f];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))l=!0;else if(/^mod$/i.test(h))e=="mac"?c=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),c&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Wf(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Rz=ho.default(pe.domEventHandlers({keydown(t,e){return mE(gE(e.state),t,e,"editor")}})),Hd=ye.define({enables:Rz}),_2=new WeakMap;function gE(t){let e=t.facet(Hd),n=_2.get(e);return n||_2.set(e,n=Bz(e.reduce((i,s)=>i.concat(s),[]))),n}function _z(t,e,n){return mE(gE(t.state),e,t,n)}let er=null;const Lz=4e3;function Bz(t,e=Nz){let n=Object.create(null),i=Object.create(null),s=(l,c)=>{let f=i[l];if(f==null)i[l]=c;else if(f!=c)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},o=(l,c,f,h,p)=>{var g,y;let v=n[l]||(n[l]=Object.create(null)),b=c.split(/ (?!$)/).map(k=>Dz(k,e));for(let k=1;k<b.length;k++){let T=b.slice(0,k).join(" ");s(T,!0),v[T]||(v[T]={preventDefault:!0,stopPropagation:!1,run:[O=>{let M=er={view:O,prefix:T,scope:l};return setTimeout(()=>{er==M&&(er=null)},Lz),!0}]})}let S=b.join(" ");s(S,!1);let A=v[S]||(v[S]={preventDefault:!1,stopPropagation:!1,run:((y=(g=v._any)===null||g===void 0?void 0:g.run)===null||y===void 0?void 0:y.slice())||[]});f&&A.run.push(f),h&&(A.preventDefault=!0),p&&(A.stopPropagation=!0)};for(let l of t){let c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let h of c){let p=n[h]||(n[h]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=l;for(let y in p)p[y].run.push(v=>g(v,cy))}let f=l[e]||l.key;if(f)for(let h of c)o(h,f,l.run,l.preventDefault,l.stopPropagation),l.shift&&o(h,"Shift-"+f,l.shift,l.preventDefault,l.stopPropagation)}return n}let cy=null;function mE(t,e,n,i){cy=e;let s=G6(e),o=pn(s,0),l=ki(o)==s.length&&s!=" ",c="",f=!1,h=!1,p=!1;er&&er.view==n&&er.scope==i&&(c=er.prefix+" ",sE.indexOf(e.keyCode)<0&&(h=!0,er=null));let g=new Set,y=A=>{if(A){for(let k of A.run)if(!g.has(k)&&(g.add(k),k(n)))return A.stopPropagation&&(p=!0),!0;A.preventDefault&&(A.stopPropagation&&(p=!0),h=!0)}return!1},v=t[i],b,S;return v&&(y(v[c+Wf(s,e,!l)])?f=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(me.windows&&e.ctrlKey&&e.altKey)&&!(me.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=cr[e.keyCode])&&b!=s?(y(v[c+Wf(b,e,!0)])||e.shiftKey&&(S=Oc[e.keyCode])!=s&&S!=b&&y(v[c+Wf(S,e,!1)]))&&(f=!0):l&&e.shiftKey&&y(v[c+Wf(s,e,!0)])&&(f=!0),!f&&y(v._any)&&(f=!0)),h&&(f=!0),f&&p&&e.stopPropagation(),cy=null,f}class iu{constructor(e,n,i,s,o){this.className=e,this.left=n,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=yE(e);return[new iu(n,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return zz(e,n,i)}}function yE(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==it.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function L2(t,e,n,i){let s=t.coordsAtPos(e,n*2);if(!s)return i;let o=t.dom.getBoundingClientRect(),l=(s.top+s.bottom)/2,c=t.posAtCoords({x:o.left+1,y:l}),f=t.posAtCoords({x:o.right-1,y:l});return c==null||f==null?i:{from:Math.max(i.from,Math.min(c,f)),to:Math.min(i.to,Math.max(c,f))}}function zz(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),s=Math.min(n.to,t.viewport.to),o=t.textDirection==it.LTR,l=t.contentDOM,c=l.getBoundingClientRect(),f=yE(t),h=l.querySelector(".cm-line"),p=h&&window.getComputedStyle(h),g=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),y=c.right-(p?parseInt(p.paddingRight):0),v=iy(t,i,1),b=iy(t,s,-1),S=v.type==qt.Text?v:null,A=b.type==qt.Text?b:null;if(S&&(t.lineWrapping||v.widgetLineBreaks)&&(S=L2(t,i,1,S)),A&&(t.lineWrapping||b.widgetLineBreaks)&&(A=L2(t,s,-1,A)),S&&A&&S.from==A.from&&S.to==A.to)return T(O(n.from,n.to,S));{let L=S?O(n.from,null,S):M(v,!1),_=A?O(null,n.to,A):M(b,!0),R=[];return(S||v).to<(A||b).from-(S&&A?1:0)||v.widgetLineBreaks>1&&L.bottom+t.defaultLineHeight/2<_.top?R.push(k(g,L.bottom,y,_.top)):L.bottom<_.top&&t.elementAtHeight((L.bottom+_.top)/2).type==qt.Text&&(L.bottom=_.top=(L.bottom+_.top)/2),T(L).concat(R).concat(T(_))}function k(L,_,R,X){return new iu(e,L-f.left,_-f.top,Math.max(0,R-L),X-_)}function T({top:L,bottom:_,horizontal:R}){let X=[];for(let U=0;U<R.length;U+=2)X.push(k(R[U],L,R[U+1],_));return X}function O(L,_,R){let X=1e9,U=-1e9,ne=[];function $(B,V,N,P,j){let z=t.coordsAtPos(B,B==R.to?-2:2),G=t.coordsAtPos(N,N==R.from?2:-2);!z||!G||(X=Math.min(z.top,G.top,X),U=Math.max(z.bottom,G.bottom,U),j==it.LTR?ne.push(o&&V?g:z.left,o&&P?y:G.right):ne.push(!o&&P?g:G.left,!o&&V?y:z.right))}let Q=L??R.from,Z=_??R.to;for(let B of t.visibleRanges)if(B.to>Q&&B.from<Z)for(let V=Math.max(B.from,Q),N=Math.min(B.to,Z);;){let P=t.state.doc.lineAt(V);for(let j of t.bidiSpans(P)){let z=j.from+P.from,G=j.to+P.from;if(z>=N)break;G>V&&$(Math.max(z,V),L==null&&z<=Q,Math.min(G,N),_==null&&G>=Z,j.dir)}if(V=P.to+1,V>=N)break}return ne.length==0&&$(Q,L==null,Z,_==null,t.textDirection),{top:X,bottom:U,horizontal:ne}}function M(L,_){let R=c.top+(_?L.top:L.bottom);return{top:R,bottom:R,horizontal:[]}}}function Pz(t,e){return t.constructor==e.constructor&&t.eq(e)}class Hz{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(vh)!=e.state.facet(vh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(vh);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Pz(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[i].constructor&&s.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e,me.safari&&me.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const vh=ye.define();function xE(t){return[xt.define(e=>new Hz(e,t)),vh.of(t)]}const Nc=ye.define({combine(t){return Bi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function jz(t={}){return[Nc.of(t),Iz,Vz,Uz,$O.of(!0)]}function vE(t){return t.startState.facet(Nc)!=t.state.facet(Nc)}const Iz=xE({above:!0,markers(t){let{state:e}=t,n=e.facet(Nc),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty||n.drawRangeCursor){let l=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:ae.cursor(s.head,s.head>s.anchor?-1:1);for(let f of iu.forRange(t,l,c))i.push(f)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=vE(t);return n&&B2(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){B2(e.state,t)},class:"cm-cursorLayer"});function B2(t,e){e.style.animationDuration=t.facet(Nc).cursorBlinkRate+"ms"}const Vz=xE({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:iu.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||vE(t)},class:"cm-selectionLayer"}),Uz=ho.highest(pe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),bE=Me.define({map(t,e){return t==null?null:e.mapPos(t)}}),nc=zt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(bE)?i.value:n,t)}}),$z=xt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(nc);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(nc)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(nc),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(nc)!=t&&this.view.dispatch({effects:bE.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qz(){return[nc,$z]}function z2(t,e,n,i,s){e.lastIndex=0;for(let o=t.iterRange(n,i),l=n,c;!o.next().done;l+=o.value.length)if(!o.lineBreak)for(;c=e.exec(o.value);)s(l+c.index,c)}function Qz(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:s,to:o}of n)s=Math.max(t.state.doc.lineAt(s).from,s-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class Yz{constructor(e){const{regexp:n,decoration:i,decorate:s,boundary:o,maxLength:l=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(c,f,h,p)=>s(p,h,h+c[0].length,c,f);else if(typeof i=="function")this.addMatch=(c,f,h,p)=>{let g=i(c,f,h);g&&p(h,h+c[0].length,g)};else if(i)this.addMatch=(c,f,h,p)=>p(h,h+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=l}createDeco(e){let n=new ps,i=n.add.bind(n);for(let{from:s,to:o}of Qz(e,this.maxLength))z2(e.state.doc,this.regexp,s,o,(l,c)=>this.addMatch(c,e,l,i));return n.finish()}updateDeco(e,n){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,l,c,f)=>{f>=e.view.viewport.from&&c<=e.view.viewport.to&&(i=Math.min(c,i),s=Math.max(f,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),i,s):n}updateRange(e,n,i,s){for(let o of e.visibleRanges){let l=Math.max(o.from,i),c=Math.min(o.to,s);if(c>=l){let f=e.state.doc.lineAt(l),h=f.to<c?e.state.doc.lineAt(c):f,p=Math.max(o.from,f.from),g=Math.min(o.to,h.to);if(this.boundary){for(;l>f.from;l--)if(this.boundary.test(f.text[l-1-f.from])){p=l;break}for(;c<h.to;c++)if(this.boundary.test(h.text[c-h.from])){g=c;break}}let y=[],v,b=(S,A,k)=>y.push(k.range(S,A));if(f==h)for(this.regexp.lastIndex=p-f.from;(v=this.regexp.exec(f.text))&&v.index<g-f.from;)this.addMatch(v,e,v.index+f.from,b);else z2(e.state.doc,this.regexp,p,g,(S,A)=>this.addMatch(A,e,S,b));n=n.update({filterFrom:p,filterTo:g,filter:(S,A)=>S<p||A>g,add:y})}}return n}}const uy=/x/.unicode!=null?"gu":"g",Xz=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,uy),Fz={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let $m=null;function Gz(){var t;if($m==null&&typeof document<"u"&&document.body){let e=document.body.style;$m=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return $m||!1}const bh=ye.define({combine(t){let e=Bi(t,{render:null,specialChars:Xz,addSpecialChars:null});return(e.replaceTabs=!Gz())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,uy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,uy)),e}});function Wz(t={}){return[bh.of(t),Kz()]}let P2=null;function Kz(){return P2||(P2=xt.fromClass(class{constructor(t){this.view=t,this.decorations=Se.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(bh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Yz({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:s}=n.state,o=pn(e[0],0);if(o==9){let l=s.lineAt(i),c=n.state.tabSize,f=ql(l.text,c,i-l.from);return Se.replace({widget:new tP((c-f%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Se.replace({widget:new eP(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(bh);t.startState.facet(bh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const Zz="";function Jz(t){return t>=32?Zz:t==10?"":String.fromCharCode(9216+t)}class eP extends zi{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Jz(this.code),i=e.state.phrase("Control character")+" "+(Fz[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,n);if(s)return s;let o=document.createElement("span");return o.textContent=n,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class tP extends zi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function nP(){return sP}const iP=Se.line({class:"cm-activeLine"}),sP=xt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let s=t.lineBlockAt(i.head);s.from>e&&(n.push(iP.range(s.from)),e=s.from)}return Se.set(n)}},{decorations:t=>t.decorations});class rP extends zi{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?cc(e.firstChild):[];if(!n.length)return null;let i=window.getComputedStyle(e.parentNode),s=Mc(n[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return s.bottom-s.top>o*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+o}:s}ignoreEvent(){return!1}}function oP(t){let e=xt.fromClass(class{constructor(n){this.view=n,this.placeholder=t?Se.set([Se.widget({widget:new rP(t),side:1}).range(0)]):Se.none}get decorations(){return this.view.state.doc.length?Se.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,pe.contentAttributes.of({"aria-placeholder":t})]:e}const fy=2e3;function lP(t,e,n){let i=Math.min(e.line,n.line),s=Math.max(e.line,n.line),o=[];if(e.off>fy||n.off>fy||e.col<0||n.col<0){let l=Math.min(e.off,n.off),c=Math.max(e.off,n.off);for(let f=i;f<=s;f++){let h=t.doc.line(f);h.length<=c&&o.push(ae.range(h.from+l,h.to+c))}}else{let l=Math.min(e.col,n.col),c=Math.max(e.col,n.col);for(let f=i;f<=s;f++){let h=t.doc.line(f),p=q0(h.text,l,t.tabSize,!0);if(p<0)o.push(ae.cursor(h.to));else{let g=q0(h.text,c,t.tabSize);o.push(ae.range(h.from+p,h.from+g))}}}return o}function aP(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function H2(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),s=n-i.from,o=s>fy?-1:s==i.length?aP(t,e.clientX):ql(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:o,off:s}}function cP(t,e){let n=H2(t,e),i=t.state.selection;return n?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(n.line).from),l=s.state.doc.lineAt(o);n={line:l.number,col:n.col,off:Math.min(n.off,l.length)},i=i.map(s.changes)}},get(s,o,l){let c=H2(t,s);if(!c)return i;let f=lP(t.state,n,c);return f.length?l?ae.create(f.concat(i.ranges)):ae.create(f):i}}:null}function uP(t){let e=(n=>n.altKey&&n.button==0);return pe.mouseSelectionStyle.of((n,i)=>e(i)?cP(n,i):null)}const fP={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},hP={style:"cursor: crosshair"};function dP(t={}){let[e,n]=fP[t.key||"Alt"],i=xt.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||n(s))},keyup(s){(s.keyCode==e||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[i,pe.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?hP:null})]}const Kf="-10000px";class SE{constructor(e,n,i,s){this.facet=n,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(l=>l);let o=null;this.tooltipViews=this.tooltips.map(l=>o=i(l,o))}update(e,n){var i;let s=e.state.facet(this.facet),o=s.filter(f=>f);if(s===this.input){for(let f of this.tooltipViews)f.update&&f.update(e);return!1}let l=[],c=n?[]:null;for(let f=0;f<o.length;f++){let h=o[f],p=-1;if(h){for(let g=0;g<this.tooltips.length;g++){let y=this.tooltips[g];y&&y.create==h.create&&(p=g)}if(p<0)l[f]=this.createTooltipView(h,f?l[f-1]:null),c&&(c[f]=!!h.above);else{let g=l[f]=this.tooltipViews[p];c&&(c[f]=n[p]),g.update&&g.update(e)}}}for(let f of this.tooltipViews)l.indexOf(f)<0&&(this.removeTooltipView(f),(i=f.destroy)===null||i===void 0||i.call(f));return n&&(c.forEach((f,h)=>n[h]=f),n.length=c.length),this.input=s,this.tooltips=o,this.tooltipViews=l,!0}}function pP(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const qm=ye.define({combine:t=>{var e,n,i;return{position:me.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||pP}}}),j2=new WeakMap,bx=xt.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(qm);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new SE(t,Sx,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(qm);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=Kf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(me.safari){let l=o.getBoundingClientRect();n=Math.abs(l.top+1e4)>1||Math.abs(l.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=mx(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,l)=>{let c=this.manager.tooltipViews[l];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(qm).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{visible:n,space:i,scaleX:s,scaleY:o}=t,l=[];for(let c=0;c<this.manager.tooltips.length;c++){let f=this.manager.tooltips[c],h=this.manager.tooltipViews[c],{dom:p}=h,g=t.pos[c],y=t.size[c];if(!g||f.clip!==!1&&(g.bottom<=Math.max(n.top,i.top)||g.top>=Math.min(n.bottom,i.bottom)||g.right<Math.max(n.left,i.left)-.1||g.left>Math.min(n.right,i.right)+.1)){p.style.top=Kf;continue}let v=f.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,b=v?7:0,S=y.right-y.left,A=(e=j2.get(h))!==null&&e!==void 0?e:y.bottom-y.top,k=h.offset||mP,T=this.view.textDirection==it.LTR,O=y.width>i.right-i.left?T?i.left:i.right-y.width:T?Math.max(i.left,Math.min(g.left-(v?14:0)+k.x,i.right-S)):Math.min(Math.max(i.left,g.left-S+(v?14:0)-k.x),i.right-S),M=this.above[c];!f.strictSide&&(M?g.top-A-b-k.y<i.top:g.bottom+A+b+k.y>i.bottom)&&M==i.bottom-g.bottom>g.top-i.top&&(M=this.above[c]=!M);let L=(M?g.top-i.top:i.bottom-g.bottom)-b;if(L<A&&h.resize!==!1){if(L<this.view.defaultLineHeight){p.style.top=Kf;continue}j2.set(h,A),p.style.height=(A=L)/o+"px"}else p.style.height&&(p.style.height="");let _=M?g.top-A-b-k.y:g.bottom+b+k.y,R=O+S;if(h.overlap!==!0)for(let X of l)X.left<R&&X.right>O&&X.top<_+A&&X.bottom>_&&(_=M?X.top-A-2-b:X.bottom+b+2);if(this.position=="absolute"?(p.style.top=(_-t.parent.top)/o+"px",I2(p,(O-t.parent.left)/s)):(p.style.top=_/o+"px",I2(p,O/s)),v){let X=g.left+(T?k.x:-k.x)-(O+14-7);v.style.left=X/s+"px"}h.overlap!==!0&&l.push({left:O,top:_,right:R,bottom:_+A}),p.classList.toggle("cm-tooltip-above",M),p.classList.toggle("cm-tooltip-below",!M),h.positioned&&h.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Kf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function I2(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const gP=pe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),mP={x:0,y:0},Sx=ye.define({enables:[bx,gP]}),Yh=ye.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class jd{static create(e){return new jd(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new SE(e,Yh,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(n===void 0)n=s;else if(n!==s)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const yP=Sx.compute([Yh],t=>{let e=t.facet(Yh);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:jd.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class xP{constructor(e,n,i,s,o){this.view=e,this.source=n,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.tile.nearest(n.target);if(!i)return;let s,o=1;if(i.isWidget())s=i.posAtStart;else{if(s=e.posAtCoords(n),s==null)return;let c=e.coordsAtPos(s);if(!c||n.y<c.top||n.y>c.bottom||n.x<c.left-e.defaultCharacterWidth||n.x>c.right+e.defaultCharacterWidth)return;let f=e.bidiSpans(e.state.doc.lineAt(s)).find(p=>p.from<=s&&p.to>=s),h=f&&f.dir==it.RTL?-1:1;o=n.x<c.left?-h:h}let l=this.source(e,s,o);if(l?.then){let c=this.pending={pos:s};l.then(f=>{this.pending==c&&(this.pending=null,f&&!(Array.isArray(f)&&!f.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(f)?f:[f])}))},f=>xn(e.state,f,"hover tooltip"))}else l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])})}get tooltip(){let e=this.view.plugin(bx),n=e?e.manager.tooltips.findIndex(i=>i.create==jd.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!vP(o.dom,e)||this.pending){let{pos:l}=s[0]||this.pending,c=(i=(n=s[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:l;(l==c?this.view.posAtCoords(this.lastMove)!=l:!bP(this.view,l,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Zf=4;function vP(t,e){let{left:n,right:i,top:s,bottom:o}=t.getBoundingClientRect(),l;if(l=t.querySelector(".cm-tooltip-arrow")){let c=l.getBoundingClientRect();s=Math.min(c.top,s),o=Math.max(c.bottom,o)}return e.clientX>=n-Zf&&e.clientX<=i+Zf&&e.clientY>=s-Zf&&e.clientY<=o+Zf}function bP(t,e,n,i,s,o){let l=t.scrollDOM.getBoundingClientRect(),c=t.documentTop+t.documentPadding.top+t.contentHeight;if(l.left>i||l.right<i||l.top>s||Math.min(l.bottom,c)<s)return!1;let f=t.posAtCoords({x:i,y:s},!1);return f>=e&&f<=n}function SP(t,e={}){let n=Me.define(),i=zt.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(l=>!e.hideOn(o,l))),o.docChanged)){let l=[];for(let c of s){let f=o.changes.mapPos(c.pos,-1,nn.TrackDel);if(f!=null){let h=Object.assign(Object.create(null),c);h.pos=f,h.end!=null&&(h.end=o.changes.mapPos(h.end)),l.push(h)}}s=l}for(let l of o.effects)l.is(n)&&(s=l.value),l.is(wP)&&(s=[]);return s},provide:s=>Yh.from(s)});return{active:i,extension:[i,xt.define(s=>new xP(s,t,i,n,e.hoverTime||300)),yP]}}function wE(t,e){let n=t.plugin(bx);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const wP=Me.define(),V2=ye.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function wx(t,e){let n=t.plugin(CE),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const CE=xt.fromClass(class{constructor(t){this.input=t.state.facet(Dc),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(V2);this.top=new Jf(t,!0,e.topContainer),this.bottom=new Jf(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(V2);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Jf(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Jf(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Dc);if(n!=this.input){let i=n.filter(f=>f),s=[],o=[],l=[],c=[];for(let f of i){let h=this.specs.indexOf(f),p;h<0?(p=f(t.view),c.push(p)):(p=this.panels[h],p.update&&p.update(t)),s.push(p),(p.top?o:l).push(p)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(l);for(let f of c)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Jf{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=U2(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=U2(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function U2(t){let e=t.nextSibling;return t.remove(),e}const Dc=ye.define({enables:CE});function CP(t,e){let n,i=new Promise(l=>n=l),s=l=>AP(l,e,n);t.state.field(Qm,!1)?t.dispatch({effects:AE.of(s)}):t.dispatch({effects:Me.appendConfig.of(Qm.init(()=>[s]))});let o=kE.of(s);return{close:o,result:i.then(l=>((t.win.queueMicrotask||(f=>t.win.setTimeout(f,10)))(()=>{t.state.field(Qm).indexOf(s)>-1&&t.dispatch({effects:o})}),l))}}const Qm=zt.define({create(){return[]},update(t,e){for(let n of e.effects)n.is(AE)?t=[n.value].concat(t):n.is(kE)&&(t=t.filter(i=>i!=n.value));return t},provide:t=>Dc.computeN([t],e=>e.field(t))}),AE=Me.define(),kE=Me.define();function AP(t,e,n){let i=e.content?e.content(t,()=>l(null)):null;if(!i){if(i=et("form"),e.input){let c=et("input",e.input);/^(text|password|number|email|tel|url)$/.test(c.type)&&c.classList.add("cm-textfield"),c.name||(c.name="input"),i.appendChild(et("label",(e.label||"")+": ",c))}else i.appendChild(document.createTextNode(e.label||""));i.appendChild(document.createTextNode(" ")),i.appendChild(et("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let s=i.nodeName=="FORM"?[i]:i.querySelectorAll("form");for(let c=0;c<s.length;c++){let f=s[c];f.addEventListener("keydown",h=>{h.keyCode==27?(h.preventDefault(),l(null)):h.keyCode==13&&(h.preventDefault(),l(f))}),f.addEventListener("submit",h=>{h.preventDefault(),l(f)})}let o=et("div",i,et("button",{onclick:()=>l(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(o.className=e.class),o.classList.add("cm-dialog");function l(c){o.contains(o.ownerDocument.activeElement)&&t.focus(),n(c)}return{dom:o,top:e.top,mount:()=>{if(e.focus){let c;typeof e.focus=="string"?c=i.querySelector(e.focus):c=i.querySelector("input")||i.querySelector("button"),c&&"select"in c?c.select():c&&"focus"in c&&c.focus()}}}}class ms extends lr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ms.prototype.elementClass="";ms.prototype.toDOM=void 0;ms.prototype.mapMode=nn.TrackBefore;ms.prototype.startSide=ms.prototype.endSide=-1;ms.prototype.point=!0;const Sh=ye.define(),kP=ye.define(),OP={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ze.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},hc=ye.define();function EP(t){return[OE(),hc.of({...OP,...t})]}const $2=ye.define({combine:t=>t.some(e=>e)});function OE(t){return[MP]}const MP=xt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(hc).map(e=>new Q2(t,e)),this.fixed=!t.state.facet($2);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet($2)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ze.iter(this.view.state.facet(Sh),this.view.viewport.from),i=[],s=this.gutters.map(o=>new TP(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let l=!0;for(let c of o.type)if(c.type==qt.Text&&l){hy(n,i,c.from);for(let f of s)f.line(this.view,c,i);l=!1}else if(c.widget)for(let f of s)f.widget(this.view,c)}else if(o.type==qt.Text){hy(n,i,o.from);for(let l of s)l.line(this.view,o,i)}else if(o.widget)for(let l of s)l.widget(this.view,o);for(let o of s)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(hc),n=t.state.facet(hc),i=t.docChanged||t.heightChanged||t.viewportChanged||!ze.eq(t.startState.facet(Sh),t.state.facet(Sh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(t)&&(i=!0);else{i=!0;let s=[];for(let o of n){let l=e.indexOf(o);l<0?s.push(new Q2(this.view,o)):(this.gutters[l].update(t),s.push(this.gutters[l]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>pe.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,s=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==it.LTR?{left:i,right:s}:{right:i,left:s}})});function q2(t){return Array.isArray(t)?t:[t]}function hy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class TP{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ze.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:s}=this,o=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==s.elements.length){let c=new EE(e,l,o,i);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,l,o,i);this.height=n.bottom,this.i++}line(e,n,i){let s=[];hy(this.cursor,s,n.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,n,s);o&&s.unshift(o);let l=this.gutter;s.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),s=i?[i]:null;for(let o of e.state.facet(kP)){let l=o(e,n.widget,n);l&&(s||(s=[])).push(l)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Q2{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,l;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let f=o.getBoundingClientRect();l=(f.top+f.bottom)/2}else l=s.clientY;let c=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[i](e,c,s)&&s.preventDefault()});this.markers=q2(n.markers(e)),n.initialSpacer&&(this.spacer=new EE(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=q2(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!ze.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class EE{constructor(e,n,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,s)}update(e,n,i,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),NP(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,l=0;;){let c=l,f=o<n.length?n[o++]:null,h=!1;if(f){let p=f.elementClass;p&&(i+=" "+p);for(let g=l;g<this.markers.length;g++)if(this.markers[g].compare(f)){c=g,h=!0;break}}else c=this.markers.length;for(;l<c;){let p=this.markers[l++];if(p.toDOM){p.destroy(s);let g=s.nextSibling;s.remove(),s=g}}if(!f)break;f.toDOM&&(h?s=s.nextSibling:this.dom.insertBefore(f.toDOM(e),s)),h&&l++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function NP(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const DP=ye.define(),RP=ye.define(),hl=ye.define({combine(t){return Bi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let s in n){let o=i[s],l=n[s];i[s]=o?(c,f,h)=>o(c,f,h)||l(c,f,h):l}return i}})}});class Ym extends ms{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Xm(t,e){return t.state.facet(hl).formatNumber(e,t.state)}const _P=hc.compute([hl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(DP)},lineMarker(e,n,i){return i.some(s=>s.toDOM)?null:new Ym(Xm(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let s of e.state.facet(RP)){let o=s(e,n,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(hl)!=e.state.facet(hl),initialSpacer(e){return new Ym(Xm(e,Y2(e.state.doc.lines)))},updateSpacer(e,n){let i=Xm(n.view,Y2(n.view.state.doc.lines));return i==e.number?e:new Ym(i)},domEventHandlers:t.facet(hl).domEventHandlers,side:"before"}));function LP(t={}){return[hl.of(t),OE(),_P]}function Y2(t){let e=9;for(;e<t;)e=e*10+9;return e}const BP=new class extends ms{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},zP=Sh.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.head).from;s>n&&(n=s,e.push(BP.range(s)))}return ze.of(e)});function PP(){return zP}const ME=1024;let HP=0;class Fm{constructor(e,n){this.from=e,this.to=n}}class _e{constructor(e={}){this.id=HP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Sn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}_e.closedBy=new _e({deserialize:t=>t.split(" ")});_e.openedBy=new _e({deserialize:t=>t.split(" ")});_e.group=new _e({deserialize:t=>t.split(" ")});_e.isolate=new _e({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});_e.contextHash=new _e({perNode:!0});_e.lookAhead=new _e({perNode:!0});_e.mounted=new _e({perNode:!0});class dc{constructor(e,n,i,s=!1){this.tree=e,this.overlay=n,this.parser=i,this.bracketed=s}static get(e){return e&&e.props&&e.props[_e.mounted.id]}}const jP=Object.create(null);class Sn{constructor(e,n,i,s=0){this.name=e,this.props=n,this.id=i,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):jP,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Sn(e.name||"",n,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(_e.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let s of i.split(" "))n[s]=e[i];return i=>{for(let s=i.prop(_e.group),o=-1;o<(s?s.length:0);o++){let l=n[o<0?i.name:s[o]];if(l)return l}}}}Sn.none=new Sn("",Object.create(null),0,8);class Cx{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let s=null;for(let o of e){let l=o(i);if(l){s||(s=Object.assign({},i.props));let c=l[1],f=l[0];f.combine&&f.id in s&&(c=f.combine(s[f.id],c)),s[f.id]=c}}n.push(s?new Sn(i.name,s,i.id,i.flags):i)}return new Cx(n)}}const eh=new WeakMap,X2=new WeakMap;var dt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(dt||(dt={}));class yt{constructor(e,n,i,s,o){if(this.type=e,this.children=n,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[l,c]of o)this.props[typeof l=="number"?l:l.id]=c}}toString(){let e=dc.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let s=i.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new py(this.topNode,e)}cursorAt(e,n=0,i=0){let s=eh.get(this)||this.topNode,o=new py(s);return o.moveTo(e,n),eh.set(this,o._tree),o}get topNode(){return new Xn(this,0,0,null)}resolve(e,n=0){let i=Rc(eh.get(this)||this.topNode,e,n,!1);return eh.set(this,i),i}resolveInner(e,n=0){let i=Rc(X2.get(this)||this.topNode,e,n,!0);return X2.set(this,i),i}resolveStack(e,n=0){return UP(this,e,n)}iterate(e){let{enter:n,leave:i,from:s=0,to:o=this.length}=e,l=e.mode||0,c=(l&dt.IncludeAnonymous)>0;for(let f=this.cursor(l|dt.IncludeAnonymous);;){let h=!1;if(f.from<=o&&f.to>=s&&(!c&&f.type.isAnonymous||n(f)!==!1)){if(f.firstChild())continue;h=!0}for(;h&&i&&(c||!f.type.isAnonymous)&&i(f),!f.nextSibling();){if(!f.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Ox(Sn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,s)=>new yt(this.type,n,i,s,this.propValues),e.makeTree||((n,i,s)=>new yt(Sn.none,n,i,s)))}static build(e){return $P(e)}}yt.empty=new yt(Sn.none,[],[],0);class Ax{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ax(this.buffer,this.index)}}class fr{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Sn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],s=this.set.types[n],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return o+"("+l.join(",")+")"}findChild(e,n,i,s,o){let{buffer:l}=this,c=-1;for(let f=e;f!=n&&!(TE(o,s,l[f+1],l[f+2])&&(c=f,i>0));f=l[f+3]);return c}slice(e,n,i){let s=this.buffer,o=new Uint16Array(n-e),l=0;for(let c=e,f=0;c<n;){o[f++]=s[c++],o[f++]=s[c++]-i;let h=o[f++]=s[c++]-i;o[f++]=s[c++]-e,l=Math.max(l,h)}return new fr(o,l,this.set)}}function TE(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Rc(t,e,n,i){for(var s;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!i&&t instanceof Xn&&t.index<0?null:t.parent;if(!l)return t;t=l}let o=i?0:dt.IgnoreOverlays;if(i)for(let l=t,c=l.parent;c;l=c,c=l.parent)l instanceof Xn&&l.index<0&&((s=c.enter(e,n,o))===null||s===void 0?void 0:s.from)!=l.from&&(t=c);for(;;){let l=t.enter(e,n,o);if(!l)return t;t=l}}class NE{cursor(e=0){return new py(this,e)}getChild(e,n=null,i=null){let s=F2(this,e,n,i);return s.length?s[0]:null}getChildren(e,n=null,i=null){return F2(this,e,n,i)}resolve(e,n=0){return Rc(this,e,n,!1)}resolveInner(e,n=0){return Rc(this,e,n,!0)}matchContext(e){return dy(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(i=n,n=s.prevSibling):n=s}return i}get node(){return this}get next(){return this.parent}}class Xn extends NE{constructor(e,n,i,s){super(),this._tree=e,this.from=n,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,s,o=0){for(let l=this;;){for(let{children:c,positions:f}=l._tree,h=n>0?c.length:-1;e!=h;e+=n){let p=c[e],g=f[e]+l.from,y;if(!(!(o&dt.EnterBracketed&&p instanceof yt&&(y=dc.get(p))&&!y.overlay&&y.bracketed&&i>=g&&i<=g+p.length)&&!TE(s,i,g,g+p.length))){if(p instanceof fr){if(o&dt.ExcludeBuffers)continue;let v=p.findChild(0,p.buffer.length,n,i-g,s);if(v>-1)return new nr(new IP(l,p,e,g),null,v)}else if(o&dt.IncludeAnonymous||!p.type.isAnonymous||kx(p)){let v;if(!(o&dt.IgnoreMounts)&&(v=dc.get(p))&&!v.overlay)return new Xn(v.tree,g,e,l);let b=new Xn(p,g,e,l);return o&dt.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(n<0?p.children.length-1:0,n,i,s,o)}}}if(o&dt.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,i=0){let s;if(!(i&dt.IgnoreOverlays)&&(s=dc.get(this._tree))&&s.overlay){let o=e-this.from,l=i&dt.EnterBracketed&&s.bracketed;for(let{from:c,to:f}of s.overlay)if((n>0||l?c<=o:c<o)&&(n<0||l?f>=o:f>o))return new Xn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function F2(t,e,n,i){let s=t.cursor(),o=[];if(!s.firstChild())return o;if(n!=null){for(let l=!1;!l;)if(l=s.type.is(n),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function dy(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class IP{constructor(e,n,i,s){this.parent=e,this.buffer=n,this.index=i,this.start=s}}class nr extends NE{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,i);return o<0?null:new nr(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,i=0){if(i&dt.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new nr(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new nr(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new nr(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let l=i.buffer[this.index+1];e.push(i.slice(s,o,l)),n.push(0)}return new yt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function DE(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let l=t[o];(l.from>n.from||l.to<n.to)&&(n=l,e=o)}let i=n instanceof Xn&&n.index<0?null:n.parent,s=t.slice();return i?s[e]=i:s.splice(e,1),new VP(s,n)}class VP{constructor(e,n){this.heads=e,this.node=n}get next(){return DE(this.heads)}}function UP(t,e,n){let i=t.resolveInner(e,n),s=null;for(let o=i instanceof Xn?i:i.context.parent;o;o=o.parent)if(o.index<0){let l=o.parent;(s||(s=[i])).push(l.resolve(e,n)),o=l}else{let l=dc.get(o.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let c=new Xn(l.tree,l.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(Rc(c,e,n,!1))}}return s?DE(s):i}class py{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~dt.EnterBracketed,e instanceof Xn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Xn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&dt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&dt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&dt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:i}=s)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let o=n+e,l=e<0?-1:i._tree.children.length;o!=l;o+=e){let c=i._tree.children[o];if(this.mode&dt.IncludeAnonymous||c instanceof fr||!c.type.isAnonymous||kx(c))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let l=e;l;l=l._parent)if(l.index==s){if(s==this.index)return l;n=l,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)n=new nr(this.buffer,n,this.stack[s]);return this.bufferNode=new nr(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return dy(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return dy(this._tree,e,s);let l=i[n.buffer[this.stack[o]]];if(!l.isAnonymous){if(e[s]&&e[s]!=l.name)return!1;s--}}return!0}}function kx(t){return t.children.some(e=>e instanceof fr||!e.type.isAnonymous||kx(e))}function $P(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:s=ME,reused:o=[],minRepeatType:l=i.types.length}=t,c=Array.isArray(n)?new Ax(n,n.length):n,f=i.types,h=0,p=0;function g(L,_,R,X,U,ne){let{id:$,start:Q,end:Z,size:B}=c,V=p,N=h;if(B<0)if(c.next(),B==-1){let D=o[$];R.push(D),X.push(Q-L);return}else if(B==-3){h=$;return}else if(B==-4){p=$;return}else throw new RangeError(`Unrecognized record size: ${B}`);let P=f[$],j,z,G=Q-L;if(Z-Q<=s&&(z=A(c.pos-_,U))){let D=new Uint16Array(z.size-z.skip),H=c.pos-z.size,ee=D.length;for(;c.pos>H;)ee=k(z.start,D,ee);j=new fr(D,Z-z.start,i),G=z.start-L}else{let D=c.pos-B;c.next();let H=[],ee=[],ie=$>=l?$:-1,ce=0,he=Z;for(;c.pos>D;)ie>=0&&c.id==ie&&c.size>=0?(c.end<=he-s&&(b(H,ee,Q,ce,c.end,he,ie,V,N),ce=H.length,he=c.end),c.next()):ne>2500?y(Q,D,H,ee):g(Q,D,H,ee,ie,ne+1);if(ie>=0&&ce>0&&ce<H.length&&b(H,ee,Q,ce,Q,he,ie,V,N),H.reverse(),ee.reverse(),ie>-1&&ce>0){let fe=v(P,N);j=Ox(P,H,ee,0,H.length,0,Z-Q,fe,fe)}else j=S(P,H,ee,Z-Q,V-Z,N)}R.push(j),X.push(G)}function y(L,_,R,X){let U=[],ne=0,$=-1;for(;c.pos>_;){let{id:Q,start:Z,end:B,size:V}=c;if(V>4)c.next();else{if($>-1&&Z<$)break;$<0&&($=B-s),U.push(Q,Z,B),ne++,c.next()}}if(ne){let Q=new Uint16Array(ne*4),Z=U[U.length-2];for(let B=U.length-3,V=0;B>=0;B-=3)Q[V++]=U[B],Q[V++]=U[B+1]-Z,Q[V++]=U[B+2]-Z,Q[V++]=V;R.push(new fr(Q,U[2]-Z,i)),X.push(Z-L)}}function v(L,_){return(R,X,U)=>{let ne=0,$=R.length-1,Q,Z;if($>=0&&(Q=R[$])instanceof yt){if(!$&&Q.type==L&&Q.length==U)return Q;(Z=Q.prop(_e.lookAhead))&&(ne=X[$]+Q.length+Z)}return S(L,R,X,U,ne,_)}}function b(L,_,R,X,U,ne,$,Q,Z){let B=[],V=[];for(;L.length>X;)B.push(L.pop()),V.push(_.pop()+R-U);L.push(S(i.types[$],B,V,ne-U,Q-ne,Z)),_.push(U-R)}function S(L,_,R,X,U,ne,$){if(ne){let Q=[_e.contextHash,ne];$=$?[Q].concat($):[Q]}if(U>25){let Q=[_e.lookAhead,U];$=$?[Q].concat($):[Q]}return new yt(L,_,R,X,$)}function A(L,_){let R=c.fork(),X=0,U=0,ne=0,$=R.end-s,Q={size:0,start:0,skip:0};e:for(let Z=R.pos-L;R.pos>Z;){let B=R.size;if(R.id==_&&B>=0){Q.size=X,Q.start=U,Q.skip=ne,ne+=4,X+=4,R.next();continue}let V=R.pos-B;if(B<0||V<Z||R.start<$)break;let N=R.id>=l?4:0,P=R.start;for(R.next();R.pos>V;){if(R.size<0)if(R.size==-3||R.size==-4)N+=4;else break e;else R.id>=l&&(N+=4);R.next()}U=P,X+=B,ne+=N}return(_<0||X==L)&&(Q.size=X,Q.start=U,Q.skip=ne),Q.size>4?Q:void 0}function k(L,_,R){let{id:X,start:U,end:ne,size:$}=c;if(c.next(),$>=0&&X<l){let Q=R;if($>4){let Z=c.pos-($-4);for(;c.pos>Z;)R=k(L,_,R)}_[--R]=Q,_[--R]=ne-L,_[--R]=U-L,_[--R]=X}else $==-3?h=X:$==-4&&(p=X);return R}let T=[],O=[];for(;c.pos>0;)g(t.start||0,t.bufferStart||0,T,O,-1,0);let M=(e=t.length)!==null&&e!==void 0?e:T.length?O[0]+T[0].length:0;return new yt(f[t.topID],T.reverse(),O.reverse(),M)}const G2=new WeakMap;function wh(t,e){if(!t.isAnonymous||e instanceof fr||e.type!=t)return 1;let n=G2.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof yt)){n=1;break}n+=wh(t,i)}G2.set(e,n)}return n}function Ox(t,e,n,i,s,o,l,c,f){let h=0;for(let b=i;b<s;b++)h+=wh(t,e[b]);let p=Math.ceil(h*1.5/8),g=[],y=[];function v(b,S,A,k,T){for(let O=A;O<k;){let M=O,L=S[O],_=wh(t,b[O]);for(O++;O<k;O++){let R=wh(t,b[O]);if(_+R>=p)break;_+=R}if(O==M+1){if(_>p){let R=b[M];v(R.children,R.positions,0,R.children.length,S[M]+T);continue}g.push(b[M])}else{let R=S[O-1]+b[O-1].length-L;g.push(Ox(t,b,S,M,O,L,R,null,f))}y.push(L+T-o)}}return v(e,n,i,s,0),(c||f)(g,y,l)}class to{constructor(e,n,i,s,o=!1,l=!1){this.from=e,this.to=n,this.tree=i,this.offset=s,this.open=(o?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let s=[new to(0,e.length,e,0,!1,i)];for(let o of n)o.to>e.length&&s.push(o);return s}static applyChanges(e,n,i=128){if(!n.length)return e;let s=[],o=1,l=e.length?e[0]:null;for(let c=0,f=0,h=0;;c++){let p=c<n.length?n[c]:null,g=p?p.fromA:1e9;if(g-f>=i)for(;l&&l.from<g;){let y=l;if(f>=y.from||g<=y.to||h){let v=Math.max(y.from,f)-h,b=Math.min(y.to,g)-h;y=v>=b?null:new to(v,b,y.tree,y.offset+h,c>0,!!p)}if(y&&s.push(y),l.to>g)break;l=o<e.length?e[o++]:null}if(!p)break;f=p.toA,h=p.toA-p.toB}return s}}let RE=class{startParse(e,n,i){return typeof e=="string"&&(e=new qP(e)),i=i?i.length?i.map(s=>new Fm(s.from,s.to)):[new Fm(0,0)]:[new Fm(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let s=this.startParse(e,n,i);for(;;){let o=s.advance();if(o)return o}}};class qP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new _e({perNode:!0});let QP=0,ls=class gy{constructor(e,n,i,s){this.name=e,this.set=n,this.base=i,this.modified=s,this.id=QP++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof gy&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new gy(i,[],null,[]);if(s.set.push(s),n)for(let o of n.set)s.set.push(o);return s}static defineModifier(e){let n=new Xh(e);return i=>i.modified.indexOf(n)>-1?i:Xh.get(i.base||i,i.modified.concat(n).sort((s,o)=>s.id-o.id))}},YP=0;class Xh{constructor(e){this.name=e,this.instances=[],this.id=YP++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(c=>c.base==e&&XP(n,c.modified));if(i)return i;let s=[],o=new ls(e.name,s,e,n);for(let c of n)c.instances.push(o);let l=FP(n);for(let c of e.set)if(!c.modified.length)for(let f of l)s.push(Xh.get(c,f));return o}}function XP(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function FP(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function _E(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let s of n.split(" "))if(s){let o=[],l=2,c=s;for(let g=0;;){if(c=="..."&&g>0&&g+3==s.length){l=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!y)throw new RangeError("Invalid path: "+s);if(o.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),g+=y[0].length,g==s.length)break;let v=s[g++];if(g==s.length&&v=="!"){l=0;break}if(v!="/")throw new RangeError("Invalid path: "+s);c=s.slice(g)}let f=o.length-1,h=o[f];if(!h)throw new RangeError("Invalid path: "+s);let p=new _c(i,l,f>0?o.slice(0,f):null);e[h]=p.sort(e[h])}}return LE.add(e)}const LE=new _e({combine(t,e){let n,i,s;for(;t||e;){if(!t||e&&t.depth>=e.depth?(s=e,e=e.next):(s=t,t=t.next),n&&n.mode==s.mode&&!s.context&&!n.context)continue;let o=new _c(s.tags,s.mode,s.context);n?n.next=o:i=o,n=o}return i}});class _c{constructor(e,n,i,s){this.tags=e,this.mode=n,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_c.empty=new _c([],2,null);function BE(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let l of o.tag)n[l.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let l=s;for(let c of o)for(let f of c.set){let h=n[f.id];if(h){l=l?l+" "+h:h;break}}return l},scope:i}}function GP(t,e){let n=null;for(let i of t){let s=i.style(e);s&&(n=n?n+" "+s:s)}return n}function WP(t,e,n,i=0,s=t.length){let o=new KP(i,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),i,s,"",o.highlighters),o.flush(s)}class KP{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,s,o){let{type:l,from:c,to:f}=e;if(c>=i||f<=n)return;l.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(l)));let h=s,p=ZP(e)||_c.empty,g=GP(o,p.tags);if(g&&(h&&(h+=" "),h+=g,p.mode==1&&(s+=(s?" ":"")+g)),this.startSpan(Math.max(n,c),h),p.opaque)return;let y=e.tree&&e.tree.prop(_e.mounted);if(y&&y.overlay){let v=e.node.enter(y.overlay[0].from+c,1),b=this.highlighters.filter(A=>!A.scope||A.scope(y.tree.type)),S=e.firstChild();for(let A=0,k=c;;A++){let T=A<y.overlay.length?y.overlay[A]:null,O=T?T.from+c:f,M=Math.max(n,k),L=Math.min(i,O);if(M<L&&S)for(;e.from<L&&(this.highlightRange(e,M,L,s,o),this.startSpan(Math.min(L,e.to),h),!(e.to>=O||!e.nextSibling())););if(!T||O>i)break;k=T.to+c,k>n&&(this.highlightRange(v.cursor(),Math.max(n,T.from+c),Math.min(i,k),"",b),this.startSpan(Math.min(i,k),h))}S&&e.parent()}else if(e.firstChild()){y&&(s="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,s,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function ZP(t){let e=t.type.prop(LE);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const de=ls.define,th=de(),Ks=de(),W2=de(Ks),K2=de(Ks),Zs=de(),nh=de(Zs),Gm=de(Zs),wi=de(),Ir=de(wi),bi=de(),Si=de(),my=de(),Fa=de(my),ih=de(),te={comment:th,lineComment:de(th),blockComment:de(th),docComment:de(th),name:Ks,variableName:de(Ks),typeName:W2,tagName:de(W2),propertyName:K2,attributeName:de(K2),className:de(Ks),labelName:de(Ks),namespace:de(Ks),macroName:de(Ks),literal:Zs,string:nh,docString:de(nh),character:de(nh),attributeValue:de(nh),number:Gm,integer:de(Gm),float:de(Gm),bool:de(Zs),regexp:de(Zs),escape:de(Zs),color:de(Zs),url:de(Zs),keyword:bi,self:de(bi),null:de(bi),atom:de(bi),unit:de(bi),modifier:de(bi),operatorKeyword:de(bi),controlKeyword:de(bi),definitionKeyword:de(bi),moduleKeyword:de(bi),operator:Si,derefOperator:de(Si),arithmeticOperator:de(Si),logicOperator:de(Si),bitwiseOperator:de(Si),compareOperator:de(Si),updateOperator:de(Si),definitionOperator:de(Si),typeOperator:de(Si),controlOperator:de(Si),punctuation:my,separator:de(my),bracket:Fa,angleBracket:de(Fa),squareBracket:de(Fa),paren:de(Fa),brace:de(Fa),content:wi,heading:Ir,heading1:de(Ir),heading2:de(Ir),heading3:de(Ir),heading4:de(Ir),heading5:de(Ir),heading6:de(Ir),contentSeparator:de(wi),list:de(wi),quote:de(wi),emphasis:de(wi),strong:de(wi),link:de(wi),monospace:de(wi),strikethrough:de(wi),inserted:de(),deleted:de(),changed:de(),invalid:de(),meta:ih,documentMeta:de(ih),annotation:de(ih),processingInstruction:de(ih),definition:ls.defineModifier("definition"),constant:ls.defineModifier("constant"),function:ls.defineModifier("function"),standard:ls.defineModifier("standard"),local:ls.defineModifier("local"),special:ls.defineModifier("special")};for(let t in te){let e=te[t];e instanceof ls&&(e.name=t)}BE([{tag:te.link,class:"tok-link"},{tag:te.heading,class:"tok-heading"},{tag:te.emphasis,class:"tok-emphasis"},{tag:te.strong,class:"tok-strong"},{tag:te.keyword,class:"tok-keyword"},{tag:te.atom,class:"tok-atom"},{tag:te.bool,class:"tok-bool"},{tag:te.url,class:"tok-url"},{tag:te.labelName,class:"tok-labelName"},{tag:te.inserted,class:"tok-inserted"},{tag:te.deleted,class:"tok-deleted"},{tag:te.literal,class:"tok-literal"},{tag:te.string,class:"tok-string"},{tag:te.number,class:"tok-number"},{tag:[te.regexp,te.escape,te.special(te.string)],class:"tok-string2"},{tag:te.variableName,class:"tok-variableName"},{tag:te.local(te.variableName),class:"tok-variableName tok-local"},{tag:te.definition(te.variableName),class:"tok-variableName tok-definition"},{tag:te.special(te.variableName),class:"tok-variableName2"},{tag:te.definition(te.propertyName),class:"tok-propertyName tok-definition"},{tag:te.typeName,class:"tok-typeName"},{tag:te.namespace,class:"tok-namespace"},{tag:te.className,class:"tok-className"},{tag:te.macroName,class:"tok-macroName"},{tag:te.propertyName,class:"tok-propertyName"},{tag:te.operator,class:"tok-operator"},{tag:te.comment,class:"tok-comment"},{tag:te.meta,class:"tok-meta"},{tag:te.invalid,class:"tok-invalid"},{tag:te.punctuation,class:"tok-punctuation"}]);var Wm;const dl=new _e;function JP(t){return ye.define({combine:t?e=>e.concat(t):void 0})}const e9=new _e;class ai{constructor(e,n,i=[],s=""){this.data=e,this.name=s,Ve.prototype.hasOwnProperty("tree")||Object.defineProperty(Ve.prototype,"tree",{get(){return Gt(this)}}),this.parser=n,this.extension=[hr.of(this),Ve.languageData.of((o,l,c)=>{let f=Z2(o,l,c),h=f.type.prop(dl);if(!h)return[];let p=o.facet(h),g=f.type.prop(e9);if(g){let y=f.resolve(l-f.from,c);for(let v of g)if(v.test(y,o)){let b=o.facet(v.facet);return v.type=="replace"?b:b.concat(p)}}return p})].concat(i)}isActiveAt(e,n,i=-1){return Z2(e,n,i).type.prop(dl)==this.data}findRegions(e){let n=e.facet(hr);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],s=(o,l)=>{if(o.prop(dl)==this.data){i.push({from:l,to:l+o.length});return}let c=o.prop(_e.mounted);if(c){if(c.tree.prop(dl)==this.data){if(c.overlay)for(let f of c.overlay)i.push({from:f.from+l,to:f.to+l});else i.push({from:l,to:l+o.length});return}else if(c.overlay){let f=i.length;if(s(c.tree,c.overlay[0].from+l),i.length>f)return}}for(let f=0;f<o.children.length;f++){let h=o.children[f];h instanceof yt&&s(h,o.positions[f]+l)}};return s(Gt(e),0),i}get allowsNesting(){return!0}}ai.setState=Me.define();function Z2(t,e,n){let i=t.facet(hr),s=Gt(t).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,n,dt.ExcludeBuffers|dt.EnterBracketed))o.type.isTop&&(s=o);return s}class Fh extends ai{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=JP(e.languageData);return new Fh(n,e.parser.configure({props:[dl.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new Fh(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Gt(t){let e=t.field(ai.state,!1);return e?e.tree:yt.empty}class t9{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ga=null;class Gh{constructor(e,n,i=[],s,o,l,c,f){this.parser=e,this.state=n,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=l,this.skipped=c,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Gh(e,n,[],yt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new t9(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=yt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(to.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(to.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ga;Ga=this;try{return e()}finally{Ga=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=J2(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:s,treeLen:o,viewport:l,skipped:c}=this;if(this.takeTree(),!e.empty){let f=[];if(e.iterChangedRanges((h,p,g,y)=>f.push({fromA:h,toA:p,fromB:g,toB:y})),i=to.applyChanges(i,f),s=yt.empty,o=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){c=[];for(let h of this.skipped){let p=e.mapPos(h.from,1),g=e.mapPos(h.to,-1);p<g&&c.push({from:p,to:g})}}}return new Gh(this.parser,n,i,s,o,l,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=J2(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends RE{createParse(n,i,s){let o=s[0].from,l=s[s.length-1].to;return{parsedPos:o,advance(){let f=Ga;if(f){for(let h of s)f.tempSkipped.push(h);e&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,e]):e)}return this.parsedPos=l,new yt(Sn.none,[],[],l-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ga}}function J2(t,e,n){return to.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class jl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new jl(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Gh.create(e.facet(hr).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new jl(i)}}ai.state=zt.define({create:jl.init,update(t,e){for(let n of e.effects)if(n.is(ai.setState))return n.value;return e.startState.facet(hr)!=e.state.facet(hr)?jl.init(e.state):t.apply(e)}});let zE=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(zE=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Km=typeof navigator<"u"&&(!((Wm=navigator.scheduling)===null||Wm===void 0)&&Wm.isInputPending)?()=>navigator.scheduling.isInputPending():null,n9=xt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ai.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ai.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=zE(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(ai.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Km?Math.max(25,e.timeRemaining()-5):1e9),c=o.context.treeLen<s&&i.doc.length>s+1e3,f=o.context.work(()=>Km&&Km()||Date.now()>l,s+(c?0:1e5));this.chunkBudget-=Date.now()-n,(f||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:ai.setState.of(new jl(o.context))})),this.chunkBudget>0&&!(f&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>xn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hr=ye.define({combine(t){return t.length?t[0]:null},enables:t=>[ai.state,n9,pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class i9{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const s9=ye.define(),Id=ye.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Wh(t){let e=t.facet(Id);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Lc(t,e){let n="",i=t.tabSize,s=t.facet(Id)[0];if(s=="	"){for(;e>=i;)n+="	",e-=i;s=" "}for(let o=0;o<e;o++)n+=s;return n}function Ex(t,e){t instanceof Ve&&(t=new Vd(t));for(let i of t.state.facet(s9)){let s=i(t,e);if(s!==void 0)return s}let n=Gt(t.state);return n.length>=e?r9(t,n,e):null}class Vd{constructor(e,n={}){this.state=e,this.options=n,this.unit=Wh(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,n);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,n=1){let{text:i,from:s}=this.lineAt(e,n),o=this.countColumn(i,e-s),l=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return l>-1&&(o+=l-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,n=e.length){return ql(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:s}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let l=o(s);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const PE=new _e;function r9(t,e,n){let i=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=i.node){let o=[];for(let l=s;l&&!(l.from<i.node.from||l.to>i.node.to||l.from==i.node.from&&l.type==i.node.type);l=l.parent)o.push(l);for(let l=o.length-1;l>=0;l--)i={node:o[l],next:i}}return HE(i,t,n)}function HE(t,e,n){for(let i=t;i;i=i.next){let s=l9(i.node);if(s)return s(Mx.create(e,n,i))}return 0}function o9(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function l9(t){let e=t.type.prop(PE);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(_e.closedBy))){let s=t.lastChild,o=s&&i.indexOf(s.name)>-1;return l=>jE(l,!0,1,void 0,o&&!o9(l)?s.from:void 0)}return t.parent==null?a9:null}function a9(){return 0}class Mx extends Vd{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new Mx(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(c9(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return HE(this.context.next,this.base,this.pos)}}function c9(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function u9(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let s=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),l=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let c=n.to;;){let f=e.childAfter(c);if(!f||f==i)return null;if(!f.type.isSkipped){if(f.from>=l)return null;let h=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+h}}c=f.to}}function eC({closing:t,align:e=!0,units:n=1}){return i=>jE(i,e,n,t)}function jE(t,e,n,i,s){let o=t.textAfter,l=o.match(/^\s*/)[0].length,c=i&&o.slice(l,l+i.length)==i||s==t.pos+l,f=e?u9(t):null;return f?c?t.column(f.from):t.column(f.to):t.baseIndent+(c?0:t.unit*n)}const f9=200;function h9(){return Ve.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,s=n.lineAt(i);if(i>s.from+f9)return t;let o=n.sliceString(s.from,i);if(!e.some(h=>h.test(o)))return t;let{state:l}=t,c=-1,f=[];for(let{head:h}of l.selection.ranges){let p=l.doc.lineAt(h);if(p.from==c)continue;c=p.from;let g=Ex(l,p.from);if(g==null)continue;let y=/^\s*/.exec(p.text)[0],v=Lc(l,g);y!=v&&f.push({from:p.from,to:p.from+y.length,insert:v})}return f.length?[t,{changes:f,sequential:!0}]:t})}const d9=ye.define(),IE=new _e;function p9(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function g9(t,e,n){let i=Gt(t);if(i.length<n)return null;let s=i.resolveStack(n,1),o=null;for(let l=s;l;l=l.next){let c=l.node;if(c.to<=n||c.from>n)continue;if(o&&c.from<e)break;let f=c.type.prop(IE);if(f&&(c.to<i.length-50||i.length==t.doc.length||!m9(c))){let h=f(c,t);h&&h.from<=n&&h.from>=e&&h.to>n&&(o=h)}}return o}function m9(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Kh(t,e,n){for(let i of t.facet(d9)){let s=i(t,e,n);if(s)return s}return g9(t,e,n)}function VE(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Ud=Me.define({map:VE}),su=Me.define({map:VE});function UE(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const fo=zt.define({create(){return Se.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=tC(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Ud)&&!y9(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(QE),s=i?Se.replace({widget:new A9(i(e.state,n.value))}):nC;t=t.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(su)&&(t=t.update({filter:(i,s)=>n.value.from!=i||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=tC(t,e.selection.main.head)),t},provide:t=>pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,s)=>{n.push(i,s)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],s=t[n++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(nC.range(i,s))}return Se.set(e,!0)}});function tC(t,e,n=e){let i=!1;return t.between(e,n,(s,o)=>{s<n&&o>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(s,o)=>s>=n||o<=e}):t}function Zh(t,e,n){var i;let s=null;return(i=t.field(fo,!1))===null||i===void 0||i.between(e,n,(o,l)=>{(!s||s.from>o)&&(s={from:o,to:l})}),s}function y9(t,e,n){let i=!1;return t.between(e,e,(s,o)=>{s==e&&o==n&&(i=!0)}),i}function $E(t,e){return t.field(fo,!1)?e:e.concat(Me.appendConfig.of(YE()))}const x9=t=>{for(let e of UE(t)){let n=Kh(t.state,e.from,e.to);if(n)return t.dispatch({effects:$E(t.state,[Ud.of(n),qE(t,n)])}),!0}return!1},v9=t=>{if(!t.state.field(fo,!1))return!1;let e=[];for(let n of UE(t)){let i=Zh(t.state,n.from,n.to);i&&e.push(su.of(i),qE(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function qE(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,s=t.state.doc.lineAt(e.to).number;return pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${s}.`)}const b9=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let s=t.lineBlockAt(i),o=Kh(e,s.from,s.to);o&&n.push(Ud.of(o)),i=(o?t.lineBlockAt(o.to):s).to+1}return n.length&&t.dispatch({effects:$E(t.state,n)}),!!n.length},S9=t=>{let e=t.state.field(fo,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,s)=>{n.push(su.of({from:i,to:s}))}),t.dispatch({effects:n}),!0},w9=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:x9},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:v9},{key:"Ctrl-Alt-[",run:b9},{key:"Ctrl-Alt-]",run:S9}],C9={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},QE=ye.define({combine(t){return Bi(t,C9)}});function YE(t){return[fo,E9]}function XE(t,e){let{state:n}=t,i=n.facet(QE),s=l=>{let c=t.lineBlockAt(t.posAtDOM(l.target)),f=Zh(t.state,c.from,c.to);f&&t.dispatch({effects:su.of(f)}),l.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const nC=Se.replace({widget:new class extends zi{toDOM(t){return XE(t,null)}}});class A9 extends zi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return XE(e,this.value)}}const k9={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Zm extends ms{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function O9(t={}){let e={...k9,...t},n=new Zm(e,!0),i=new Zm(e,!1),s=xt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(hr)!=l.state.facet(hr)||l.startState.field(fo,!1)!=l.state.field(fo,!1)||Gt(l.startState)!=Gt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let c=new ps;for(let f of l.viewportLineBlocks){let h=Zh(l.state,f.from,f.to)?i:Kh(l.state,f.from,f.to)?n:null;h&&c.add(f.from,f.from,h)}return c.finish()}}),{domEventHandlers:o}=e;return[s,EP({class:"cm-foldGutter",markers(l){var c;return((c=l.plugin(s))===null||c===void 0?void 0:c.markers)||ze.empty},initialSpacer(){return new Zm(e,!1)},domEventHandlers:{...o,click:(l,c,f)=>{if(o.click&&o.click(l,c,f))return!0;let h=Zh(l.state,c.from,c.to);if(h)return l.dispatch({effects:su.of(h)}),!0;let p=Kh(l.state,c.from,c.to);return p?(l.dispatch({effects:Ud.of(p)}),!0):!1}}}),YE()]}const E9=pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ql{constructor(e,n){this.specs=e;let i;function s(c){let f=ar.newName();return(i||(i=Object.create(null)))["."+f]=c,f}const o=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,l=n.scope;this.scope=l instanceof ai?c=>c.prop(dl)==l.data:l?c=>c==l:void 0,this.style=BE(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:o}).style,this.module=i?new ar(i):null,this.themeType=n.themeType}static define(e,n){return new Ql(e,n||{})}}const yy=ye.define(),FE=ye.define({combine(t){return t.length?[t[0]]:null}});function Jm(t){let e=t.facet(yy);return e.length?e:t.facet(FE)}function Tx(t,e){let n=[T9],i;return t instanceof Ql&&(t.module&&n.push(pe.styleModule.of(t.module)),i=t.themeType),e?.fallback?n.push(FE.of(t)):i?n.push(yy.computeN([pe.darkTheme],s=>s.facet(pe.darkTheme)==(i=="dark")?[t]:[])):n.push(yy.of(t)),n}class M9{constructor(e){this.markCache=Object.create(null),this.tree=Gt(e.state),this.decorations=this.buildDeco(e,Jm(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Gt(e.state),i=Jm(e.state),s=i!=Jm(e.startState),{viewport:o}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!s&&n.type==this.tree.type&&l>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return Se.none;let i=new ps;for(let{from:s,to:o}of e.visibleRanges)WP(this.tree,n,(l,c,f)=>{i.add(l,c,this.markCache[f]||(this.markCache[f]=Se.mark({class:f})))},s,o);return i.finish()}}const T9=ho.high(xt.fromClass(M9,{decorations:t=>t.decorations})),N9=Ql.define([{tag:te.meta,color:"#404740"},{tag:te.link,textDecoration:"underline"},{tag:te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strong,fontWeight:"bold"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.keyword,color:"#708"},{tag:[te.atom,te.bool,te.url,te.contentSeparator,te.labelName],color:"#219"},{tag:[te.literal,te.inserted],color:"#164"},{tag:[te.string,te.deleted],color:"#a11"},{tag:[te.regexp,te.escape,te.special(te.string)],color:"#e40"},{tag:te.definition(te.variableName),color:"#00f"},{tag:te.local(te.variableName),color:"#30a"},{tag:[te.typeName,te.namespace],color:"#085"},{tag:te.className,color:"#167"},{tag:[te.special(te.variableName),te.macroName],color:"#256"},{tag:te.definition(te.propertyName),color:"#00c"},{tag:te.comment,color:"#940"},{tag:te.invalid,color:"#f00"}]),D9=pe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),GE=1e4,WE="()[]{}",KE=ye.define({combine(t){return Bi(t,{afterCursor:!0,brackets:WE,maxScanDistance:GE,renderMatch:L9})}}),R9=Se.mark({class:"cm-matchingBracket"}),_9=Se.mark({class:"cm-nonmatchingBracket"});function L9(t){let e=[],n=t.matched?R9:_9;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const B9=zt.define({create(){return Se.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(KE);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=Ei(e.state,s.head,-1,i)||s.head>0&&Ei(e.state,s.head-1,1,i)||i.afterCursor&&(Ei(e.state,s.head,1,i)||s.head<e.state.doc.length&&Ei(e.state,s.head+1,-1,i));o&&(n=n.concat(i.renderMatch(o,e.state)))}return Se.set(n,!0)},provide:t=>pe.decorations.from(t)}),z9=[B9,D9];function P9(t={}){return[KE.of(t),z9]}const H9=new _e;function xy(t,e,n){let i=t.prop(e<0?_e.openedBy:_e.closedBy);if(i)return i;if(t.name.length==1){let s=n.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function vy(t){let e=t.type.prop(H9);return e?e(t.node):t}function Ei(t,e,n,i={}){let s=i.maxScanDistance||GE,o=i.brackets||WE,l=Gt(t),c=l.resolveInner(e,n);for(let f=c;f;f=f.parent){let h=xy(f.type,n,o);if(h&&f.from<f.to){let p=vy(f);if(p&&(n>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return j9(t,e,n,f,p,h,o)}}return I9(t,e,n,l,c.type,s,o)}function j9(t,e,n,i,s,o,l){let c=i.parent,f={from:s.from,to:s.to},h=0,p=c?.cursor();if(p&&(n<0?p.childBefore(i.from):p.childAfter(i.to)))do if(n<0?p.to<=i.from:p.from>=i.to){if(h==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let g=vy(p);return{start:f,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(xy(p.type,n,l))h++;else if(xy(p.type,-n,l)){if(h==0){let g=vy(p);return{start:f,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}h--}}while(n<0?p.prevSibling():p.nextSibling());return{start:f,matched:!1}}function I9(t,e,n,i,s,o,l){let c=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),f=l.indexOf(c);if(f<0||f%2==0!=n>0)return null;let h={from:n<0?e-1:e,to:n>0?e+1:e},p=t.doc.iterRange(e,n>0?t.doc.length:0),g=0;for(let y=0;!p.next().done&&y<=o;){let v=p.value;n<0&&(y+=v.length);let b=e+y*n;for(let S=n>0?0:v.length-1,A=n>0?v.length:-1;S!=A;S+=n){let k=l.indexOf(v[S]);if(!(k<0||i.resolveInner(b+S,1).type!=s))if(k%2==0==n>0)g++;else{if(g==1)return{start:h,end:{from:b+S,to:b+S+1},matched:k>>1==f>>1};g--}}n>0&&(y+=v.length)}return p.done?{start:h,matched:!1}:null}const V9=Object.create(null),iC=[Sn.none],sC=[],rC=Object.create(null),U9=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])U9[t]=$9(V9,e);function e0(t,e){sC.indexOf(t)>-1||(sC.push(t),console.warn(e))}function $9(t,e){let n=[];for(let c of e.split(" ")){let f=[];for(let h of c.split(".")){let p=t[h]||te[h];p?typeof p=="function"?f.length?f=f.map(p):e0(h,`Modifier ${h} used at start of tag`):f.length?e0(h,`Tag ${h} used as modifier`):f=Array.isArray(p)?p:[p]:e0(h,`Unknown highlighting tag ${h}`)}for(let h of f)n.push(h)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+n.map(c=>c.id),o=rC[s];if(o)return o.id;let l=rC[s]=Sn.define({id:iC.length,name:i,props:[_E({[i]:n})]});return iC.push(l),l.id}it.RTL,it.LTR;const q9=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Dx(t.state,n.from);return i.line?Q9(t):i.block?X9(t):!1};function Nx(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let s=t(e,n);return s?(i(n.update(s)),!0):!1}}const Q9=Nx(W9,0),Y9=Nx(ZE,0),X9=Nx((t,e)=>ZE(t,e,G9(e)),0);function Dx(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Wa=50;function F9(t,{open:e,close:n},i,s){let o=t.sliceDoc(i-Wa,i),l=t.sliceDoc(s,s+Wa),c=/\s*$/.exec(o)[0].length,f=/^\s*/.exec(l)[0].length,h=o.length-c;if(o.slice(h-e.length,h)==e&&l.slice(f,f+n.length)==n)return{open:{pos:i-c,margin:c&&1},close:{pos:s+f,margin:f&&1}};let p,g;s-i<=2*Wa?p=g=t.sliceDoc(i,s):(p=t.sliceDoc(i,i+Wa),g=t.sliceDoc(s-Wa,s));let y=/^\s*/.exec(p)[0].length,v=/\s*$/.exec(g)[0].length,b=g.length-v-n.length;return p.slice(y,y+e.length)==e&&g.slice(b,b+n.length)==n?{open:{pos:i+y+e.length,margin:/\s/.test(p.charAt(y+e.length))?1:0},close:{pos:s-v-n.length,margin:/\s/.test(g.charAt(b-1))?1:0}}:null}function G9(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=n.to<=i.to?i:t.doc.lineAt(n.to);s.from>i.from&&s.from==n.to&&(s=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function ZE(t,e,n=e.selection.ranges){let i=n.map(o=>Dx(e,o.from).block);if(!i.every(o=>o))return null;let s=n.map((o,l)=>F9(e,i[l],o.from,o.to));if(t!=2&&!s.every(o=>o))return{changes:e.changes(n.map((o,l)=>s[l]?[]:[{from:o.from,insert:i[l].open+" "},{from:o.to,insert:" "+i[l].close}]))};if(t!=1&&s.some(o=>o)){let o=[];for(let l=0,c;l<s.length;l++)if(c=s[l]){let f=i[l],{open:h,close:p}=c;o.push({from:h.pos-f.open.length,to:h.pos+h.margin},{from:p.pos-p.margin,to:p.pos+f.close.length})}return{changes:o}}return null}function W9(t,e,n=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:l}of n){let c=i.length,f=1e9,h=Dx(e,o).line;if(h){for(let p=o;p<=l;){let g=e.doc.lineAt(p);if(g.from>s&&(o==l||l>g.from)){s=g.from;let y=/^\s*/.exec(g.text)[0].length,v=y==g.length,b=g.text.slice(y,y+h.length)==h?y:-1;y<g.text.length&&y<f&&(f=y),i.push({line:g,comment:b,token:h,indent:y,empty:v,single:!1})}p=g.to+1}if(f<1e9)for(let p=c;p<i.length;p++)i[p].indent<i[p].line.text.length&&(i[p].indent=f);i.length==c+1&&(i[c].single=!0)}}if(t!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:c,token:f,indent:h,empty:p,single:g}of i)(g||!p)&&o.push({from:c.from+h,insert:f+" "});let l=e.changes(o);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:l,comment:c,token:f}of i)if(c>=0){let h=l.from+c,p=h+f.length;l.text[p-l.from]==" "&&p++,o.push({from:h,to:p})}return{changes:o}}return null}const by=Li.define(),K9=Li.define(),Z9=ye.define(),JE=ye.define({combine(t){return Bi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,s)=>e(i,s)||n(i,s)})}}),eM=zt.define({create(){return Mi.empty},update(t,e){let n=e.state.facet(JE),i=e.annotation(by);if(i){let f=vn.fromTransaction(e,i.selection),h=i.side,p=h==0?t.undone:t.done;return f?p=Jh(p,p.length,n.minDepth,f):p=iM(p,e.startState.selection),new Mi(h==0?i.rest:p,h==0?p:i.rest)}let s=e.annotation(K9);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(Rt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=vn.fromTransaction(e),l=e.annotation(Rt.time),c=e.annotation(Rt.userEvent);return o?t=t.addChanges(o,l,c,n,e):e.selection&&(t=t.addSelection(e.startState.selection,l,c,n.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Mi(t.done.map(vn.fromJSON),t.undone.map(vn.fromJSON))}});function J9(t={}){return[eM,JE.of(t),pe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?tM:e.inputType=="historyRedo"?Sy:null;return i?(e.preventDefault(),i(n)):!1}})]}function $d(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let s=n.field(eM,!1);if(!s)return!1;let o=s.pop(t,n,e);return o?(i(o),!0):!1}}const tM=$d(0,!1),Sy=$d(1,!1),eH=$d(0,!0),tH=$d(1,!0);class vn{constructor(e,n,i,s,o){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new vn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new vn(e.changes&&Tt.fromJSON(e.changes),[],e.mapped&&Ni.fromJSON(e.mapped),e.startSelection&&ae.fromJSON(e.startSelection),e.selectionsAfter.map(ae.fromJSON))}static fromTransaction(e,n){let i=Qn;for(let s of e.startState.facet(Z9)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new vn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Qn)}static selection(e){return new vn(void 0,Qn,void 0,void 0,e)}}function Jh(t,e,n,i){let s=e+1>n+20?e-n-1:0,o=t.slice(s,e);return o.push(i),o}function nH(t,e){let n=[],i=!1;return t.iterChangedRanges((s,o)=>n.push(s,o)),e.iterChangedRanges((s,o,l,c)=>{for(let f=0;f<n.length;){let h=n[f++],p=n[f++];c>=h&&l<=p&&(i=!0)}}),i}function iH(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function nM(t,e){return t.length?e.length?t.concat(e):t:e}const Qn=[],sH=200;function iM(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-sH));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Jh(t,t.length-1,1e9,n.setSelAfter(i)))}else return[vn.selection([e])]}function rH(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function t0(t,e){if(!t.length)return t;let n=t.length,i=Qn;for(;n;){let s=oH(t[n-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=t.slice(0,n);return o[n-1]=s,o}else e=s.mapped,n--,i=s.selectionsAfter}return i.length?[vn.selection(i)]:Qn}function oH(t,e,n){let i=nM(t.selectionsAfter.length?t.selectionsAfter.map(c=>c.map(e)):Qn,n);if(!t.changes)return vn.selection(i);let s=t.changes.map(e),o=e.mapDesc(t.changes,!0),l=t.mapped?t.mapped.composeDesc(o):o;return new vn(s,Me.mapEffects(t.effects,e),l,t.startSelection.map(o),i)}const lH=/^(input\.type|delete)($|\.)/;class Mi{constructor(e,n,i=0,s=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Mi(this.done,this.undone):this}addChanges(e,n,i,s,o){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!i||lH.test(i))&&(!c.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,nH(c.changes,e.changes))||i=="input.type.compose")?l=Jh(l,l.length-1,s.minDepth,new vn(e.changes.compose(c.changes),nM(Me.mapEffects(e.effects,c.changes),c.effects),c.mapped,c.startSelection,Qn)):l=Jh(l,l.length,s.minDepth,e),new Mi(l,Qn,n,i)}addSelection(e,n,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Qn;return o.length>0&&n-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&iH(o[o.length-1],e)?this:new Mi(iM(this.done,e),this.undone,n,i)}addMapping(e){return new Mi(t0(this.done,e),t0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],l=o.selectionsAfter[0]||n.selection;if(i&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:by.of({side:e,rest:rH(s),selection:l}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let c=s.length==1?Qn:s.slice(0,s.length-1);return o.mapped&&(c=t0(c,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:by.of({side:e,rest:c,selection:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Mi.empty=new Mi(Qn,Qn);const aH=[{key:"Mod-z",run:tM,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Sy,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Sy,preventDefault:!0},{key:"Mod-u",run:eH,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:tH,preventDefault:!0}];function Yl(t,e){return ae.create(t.ranges.map(e),t.mainIndex)}function fi(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function hi({state:t,dispatch:e},n){let i=Yl(t.selection,n);return i.eq(t.selection,!0)?!1:(e(fi(t,i)),!0)}function qd(t,e){return ae.cursor(e?t.to:t.from)}function sM(t,e){return hi(t,n=>n.empty?t.moveByChar(n,e):qd(n,e))}function Wt(t){return t.textDirectionAt(t.state.selection.main.head)==it.LTR}const rM=t=>sM(t,!Wt(t)),oM=t=>sM(t,Wt(t));function lM(t,e){return hi(t,n=>n.empty?t.moveByGroup(n,e):qd(n,e))}const cH=t=>lM(t,!Wt(t)),uH=t=>lM(t,Wt(t));function fH(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Qd(t,e,n){let i=Gt(t).resolveInner(e.head),s=n?_e.closedBy:_e.openedBy;for(let f=e.head;;){let h=n?i.childAfter(f):i.childBefore(f);if(!h)break;fH(t,h,s)?i=h:f=n?h.to:h.from}let o=i.type.prop(s),l,c;return o&&(l=n?Ei(t,i.from,1):Ei(t,i.to,-1))&&l.matched?c=n?l.end.to:l.end.from:c=n?i.to:i.from,ae.cursor(c,n?-1:1)}const hH=t=>hi(t,e=>Qd(t.state,e,!Wt(t))),dH=t=>hi(t,e=>Qd(t.state,e,Wt(t)));function aM(t,e){return hi(t,n=>{if(!n.empty)return qd(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const cM=t=>aM(t,!1),uM=t=>aM(t,!0);function fM(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,s;if(e){for(let o of t.state.facet(pe.scrollMargins)){let l=o(t);l?.top&&(n=Math.max(l?.top,n)),l?.bottom&&(i=Math.max(l?.bottom,i))}s=t.scrollDOM.clientHeight-n-i}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function hM(t,e){let n=fM(t),{state:i}=t,s=Yl(i.selection,l=>l.empty?t.moveVertically(l,e,n.height):qd(l,e));if(s.eq(i.selection))return!1;let o;if(n.selfScroll){let l=t.coordsAtPos(i.selection.main.head),c=t.scrollDOM.getBoundingClientRect(),f=c.top+n.marginTop,h=c.bottom-n.marginBottom;l&&l.top>f&&l.bottom<h&&(o=pe.scrollIntoView(s.main.head,{y:"start",yMargin:l.top-f}))}return t.dispatch(fi(i,s),{effects:o}),!0}const oC=t=>hM(t,!1),wy=t=>hM(t,!0);function pr(t,e,n){let i=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?i.to:i.from)&&(s=t.moveToLineBoundary(e,n,!1)),!n&&s.head==i.from&&i.length){let o=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=ae.cursor(i.from+o))}return s}const pH=t=>hi(t,e=>pr(t,e,!0)),gH=t=>hi(t,e=>pr(t,e,!1)),mH=t=>hi(t,e=>pr(t,e,!Wt(t))),yH=t=>hi(t,e=>pr(t,e,Wt(t))),xH=t=>hi(t,e=>ae.cursor(t.lineBlockAt(e.head).from,1)),vH=t=>hi(t,e=>ae.cursor(t.lineBlockAt(e.head).to,-1));function bH(t,e,n){let i=!1,s=Yl(t.selection,o=>{let l=Ei(t,o.head,-1)||Ei(t,o.head,1)||o.head>0&&Ei(t,o.head-1,1)||o.head<t.doc.length&&Ei(t,o.head+1,-1);if(!l||!l.end)return o;i=!0;let c=l.start.from==o.head?l.end.to:l.end.from;return ae.cursor(c)});return i?(e(fi(t,s)),!0):!1}const SH=({state:t,dispatch:e})=>bH(t,e);function Gn(t,e){let n=Yl(t.state.selection,i=>{let s=e(i);return ae.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(fi(t.state,n)),!0)}function dM(t,e){return Gn(t,n=>t.moveByChar(n,e))}const pM=t=>dM(t,!Wt(t)),gM=t=>dM(t,Wt(t));function mM(t,e){return Gn(t,n=>t.moveByGroup(n,e))}const wH=t=>mM(t,!Wt(t)),CH=t=>mM(t,Wt(t)),AH=t=>Gn(t,e=>Qd(t.state,e,!Wt(t))),kH=t=>Gn(t,e=>Qd(t.state,e,Wt(t)));function yM(t,e){return Gn(t,n=>t.moveVertically(n,e))}const xM=t=>yM(t,!1),vM=t=>yM(t,!0);function bM(t,e){return Gn(t,n=>t.moveVertically(n,e,fM(t).height))}const lC=t=>bM(t,!1),aC=t=>bM(t,!0),OH=t=>Gn(t,e=>pr(t,e,!0)),EH=t=>Gn(t,e=>pr(t,e,!1)),MH=t=>Gn(t,e=>pr(t,e,!Wt(t))),TH=t=>Gn(t,e=>pr(t,e,Wt(t))),NH=t=>Gn(t,e=>ae.cursor(t.lineBlockAt(e.head).from)),DH=t=>Gn(t,e=>ae.cursor(t.lineBlockAt(e.head).to)),cC=({state:t,dispatch:e})=>(e(fi(t,{anchor:0})),!0),uC=({state:t,dispatch:e})=>(e(fi(t,{anchor:t.doc.length})),!0),fC=({state:t,dispatch:e})=>(e(fi(t,{anchor:t.selection.main.anchor,head:0})),!0),hC=({state:t,dispatch:e})=>(e(fi(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),RH=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),_H=({state:t,dispatch:e})=>{let n=Yd(t).map(({from:i,to:s})=>ae.range(i,Math.min(s+1,t.doc.length)));return e(t.update({selection:ae.create(n),userEvent:"select"})),!0},LH=({state:t,dispatch:e})=>{let n=Yl(t.selection,i=>{let s=Gt(t),o=s.resolveStack(i.from,1);if(i.empty){let l=s.resolveStack(i.from,-1);l.node.from>=o.node.from&&l.node.to<=o.node.to&&(o=l)}for(let l=o;l;l=l.next){let{node:c}=l;if((c.from<i.from&&c.to>=i.to||c.to>i.to&&c.from<=i.from)&&l.next)return ae.range(c.to,c.from)}return i});return n.eq(t.selection)?!1:(e(fi(t,n)),!0)};function SM(t,e){let{state:n}=t,i=n.selection,s=n.selection.ranges.slice();for(let o of n.selection.ranges){let l=n.doc.lineAt(o.head);if(e?l.to<t.state.doc.length:l.from>0)for(let c=o;;){let f=t.moveVertically(c,e);if(f.head<l.from||f.head>l.to){s.some(h=>h.head==f.head)||s.push(f);break}else{if(f.head==c.head)break;c=f}}}return s.length==i.ranges.length?!1:(t.dispatch(fi(n,ae.create(s,s.length-1))),!0)}const BH=t=>SM(t,!1),zH=t=>SM(t,!0),PH=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=ae.create([n.main]):n.main.empty||(i=ae.create([ae.cursor(n.main.head)])),i?(e(fi(t,i)),!0):!1};function ru(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,s=i.changeByRange(o=>{let{from:l,to:c}=o;if(l==c){let f=e(o);f<l?(n="delete.backward",f=sh(t,f,!1)):f>l&&(n="delete.forward",f=sh(t,f,!0)),l=Math.min(l,f),c=Math.max(c,f)}else l=sh(t,l,!1),c=sh(t,c,!0);return l==c?{range:o}:{changes:{from:l,to:c},range:ae.cursor(l,l<o.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(i.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?pe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function sh(t,e,n){if(t instanceof pe)for(let i of t.state.facet(pe.atomicRanges).map(s=>s(t)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=n?o:s)});return e}const wM=(t,e,n)=>ru(t,i=>{let s=i.from,{state:o}=t,l=o.doc.lineAt(s),c,f;if(n&&!e&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(c=l.text.slice(0,s-l.from))){if(c[c.length-1]=="	")return s-1;let h=ql(c,o.tabSize),p=h%Wh(o)||Wh(o);for(let g=0;g<p&&c[c.length-1-g]==" ";g++)s--;f=s}else f=Dt(l.text,s-l.from,e,e)+l.from,f==s&&l.number!=(e?o.doc.lines:1)?f+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(f-l.from,s-l.from))&&(f=Dt(l.text,f-l.from,!1,!1)+l.from);return f}),Cy=t=>wM(t,!1,!0),CM=t=>wM(t,!0,!1),AM=(t,e)=>ru(t,n=>{let i=n.head,{state:s}=t,o=s.doc.lineAt(i),l=s.charCategorizer(i);for(let c=null;;){if(i==(e?o.to:o.from)){i==n.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let f=Dt(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,f)-o.from,Math.max(i,f)-o.from),p=l(h);if(c!=null&&p!=c)break;(h!=" "||i!=n.head)&&(c=p),i=f}return i}),kM=t=>AM(t,!1),HH=t=>AM(t,!0),jH=t=>ru(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),IH=t=>ru(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),VH=t=>ru(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),UH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Qe.of(["",""])},range:ae.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},$H=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let s=i.from,o=t.doc.lineAt(s),l=s==o.from?s-1:Dt(o.text,s-o.from,!1)+o.from,c=s==o.to?s+1:Dt(o.text,s-o.from,!0)+o.from;return{changes:{from:l,to:c,insert:t.doc.slice(s,c).append(t.doc.slice(l,s))},range:ae.cursor(c)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Yd(t){let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.from),o=t.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=t.doc.lineAt(i.to-1)),n>=s.number){let l=e[e.length-1];l.to=o.to,l.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});n=o.number+1}return e}function OM(t,e,n){if(t.readOnly)return!1;let i=[],s=[];for(let o of Yd(t)){if(n?o.to==t.doc.length:o.from==0)continue;let l=t.doc.lineAt(n?o.to+1:o.from-1),c=l.length+1;if(n){i.push({from:o.to,to:l.to},{from:o.from,insert:l.text+t.lineBreak});for(let f of o.ranges)s.push(ae.range(Math.min(t.doc.length,f.anchor+c),Math.min(t.doc.length,f.head+c)))}else{i.push({from:l.from,to:o.from},{from:o.to,insert:t.lineBreak+l.text});for(let f of o.ranges)s.push(ae.range(f.anchor-c,f.head-c))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ae.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const qH=({state:t,dispatch:e})=>OM(t,e,!1),QH=({state:t,dispatch:e})=>OM(t,e,!0);function EM(t,e,n){if(t.readOnly)return!1;let i=[];for(let o of Yd(t))n?i.push({from:o.from,insert:t.doc.slice(o.from,o.to)+t.lineBreak}):i.push({from:o.to,insert:t.lineBreak+t.doc.slice(o.from,o.to)});let s=t.changes(i);return e(t.update({changes:s,selection:t.selection.map(s,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const YH=({state:t,dispatch:e})=>EM(t,e,!1),XH=({state:t,dispatch:e})=>EM(t,e,!0),FH=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Yd(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=Yl(e.selection,s=>{let o;if(t.lineWrapping){let l=t.lineBlockAt(s.head),c=t.coordsAtPos(s.head,s.assoc||1);c&&(o=l.bottom+t.documentTop-c.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,o)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function GH(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Gt(t).resolveInner(e),i=n.childBefore(e),s=n.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(_e.closedBy))&&o.indexOf(s.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const dC=MM(!1),WH=MM(!0);function MM(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:l}=s,c=e.doc.lineAt(o),f=!t&&o==l&&GH(e,o);t&&(o=l=(l<=c.to?c:e.doc.lineAt(l)).to);let h=new Vd(e,{simulateBreak:o,simulateDoubleBreak:!!f}),p=Ex(h,o);for(p==null&&(p=ql(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));l<c.to&&/\s/.test(c.text[l-c.from]);)l++;f?{from:o,to:l}=f:o>c.from&&o<c.from+100&&!/\S/.test(c.text.slice(0,o))&&(o=c.from);let g=["",Lc(e,p)];return f&&g.push(Lc(e,h.lineIndent(c.from,-1))),{changes:{from:o,to:l,insert:Qe.of(g)},range:ae.cursor(o+1+g[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Rx(t,e){let n=-1;return t.changeByRange(i=>{let s=[];for(let l=i.from;l<=i.to;){let c=t.doc.lineAt(l);c.number>n&&(i.empty||i.to>c.from)&&(e(c,s,i),n=c.number),l=c.to+1}let o=t.changes(s);return{changes:s,range:ae.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const KH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new Vd(t,{overrideIndentation:o=>{let l=n[o];return l??-1}}),s=Rx(t,(o,l,c)=>{let f=Ex(i,o.from);if(f==null)return;/\S/.test(o.text)||(f=0);let h=/^\s*/.exec(o.text)[0],p=Lc(t,f);(h!=p||c.from<o.from+h.length)&&(n[o.from]=f,l.push({from:o.from,to:o.from+h.length,insert:p}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},TM=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Rx(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Id)})}),{userEvent:"input.indent"})),!0),NM=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Rx(t,(n,i)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let o=ql(s,t.tabSize),l=0,c=Lc(t,Math.max(0,o-Wh(t)));for(;l<s.length&&l<c.length&&s.charCodeAt(l)==c.charCodeAt(l);)l++;i.push({from:n.from+l,to:n.from+s.length,insert:c.slice(l)})}),{userEvent:"delete.dedent"})),!0),ZH=t=>(t.setTabFocusMode(),!0),JH=[{key:"Ctrl-b",run:rM,shift:pM,preventDefault:!0},{key:"Ctrl-f",run:oM,shift:gM},{key:"Ctrl-p",run:cM,shift:xM},{key:"Ctrl-n",run:uM,shift:vM},{key:"Ctrl-a",run:xH,shift:NH},{key:"Ctrl-e",run:vH,shift:DH},{key:"Ctrl-d",run:CM},{key:"Ctrl-h",run:Cy},{key:"Ctrl-k",run:jH},{key:"Ctrl-Alt-h",run:kM},{key:"Ctrl-o",run:UH},{key:"Ctrl-t",run:$H},{key:"Ctrl-v",run:wy}],ej=[{key:"ArrowLeft",run:rM,shift:pM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:cH,shift:wH,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:mH,shift:MH,preventDefault:!0},{key:"ArrowRight",run:oM,shift:gM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:uH,shift:CH,preventDefault:!0},{mac:"Cmd-ArrowRight",run:yH,shift:TH,preventDefault:!0},{key:"ArrowUp",run:cM,shift:xM,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cC,shift:fC},{mac:"Ctrl-ArrowUp",run:oC,shift:lC},{key:"ArrowDown",run:uM,shift:vM,preventDefault:!0},{mac:"Cmd-ArrowDown",run:uC,shift:hC},{mac:"Ctrl-ArrowDown",run:wy,shift:aC},{key:"PageUp",run:oC,shift:lC},{key:"PageDown",run:wy,shift:aC},{key:"Home",run:gH,shift:EH,preventDefault:!0},{key:"Mod-Home",run:cC,shift:fC},{key:"End",run:pH,shift:OH,preventDefault:!0},{key:"Mod-End",run:uC,shift:hC},{key:"Enter",run:dC,shift:dC},{key:"Mod-a",run:RH},{key:"Backspace",run:Cy,shift:Cy,preventDefault:!0},{key:"Delete",run:CM,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:kM,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:HH,preventDefault:!0},{mac:"Mod-Backspace",run:IH,preventDefault:!0},{mac:"Mod-Delete",run:VH,preventDefault:!0}].concat(JH.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),tj=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:hH,shift:AH},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:dH,shift:kH},{key:"Alt-ArrowUp",run:qH},{key:"Shift-Alt-ArrowUp",run:YH},{key:"Alt-ArrowDown",run:QH},{key:"Shift-Alt-ArrowDown",run:XH},{key:"Mod-Alt-ArrowUp",run:BH},{key:"Mod-Alt-ArrowDown",run:zH},{key:"Escape",run:PH},{key:"Mod-Enter",run:WH},{key:"Alt-l",mac:"Ctrl-l",run:_H},{key:"Mod-i",run:LH,preventDefault:!0},{key:"Mod-[",run:NM},{key:"Mod-]",run:TM},{key:"Mod-Alt-\\",run:KH},{key:"Shift-Mod-k",run:FH},{key:"Shift-Mod-\\",run:SH},{key:"Mod-/",run:q9},{key:"Alt-A",run:Y9},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ZH}].concat(ej),nj={key:"Tab",run:TM,shift:NM},pC=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Il{constructor(e,n,i=0,s=e.length,o,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?c=>o(pC(c)):pC,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return pn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=sx(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=ki(e);let s=this.normalize(n);if(s.length)for(let o=0,l=i;;o++){let c=s.charCodeAt(o),f=this.match(c,l,this.bufferPos+this.bufferStart);if(o==s.length-1){if(f)return this.value=f,this;break}l==i&&o<n.length&&n.charCodeAt(o)==c&&l++}}}match(e,n,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let l=this.matches[o],c=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:i}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(Il.prototype[Symbol.iterator]=function(){return this});const DM={from:-1,to:-1,match:/.*/.exec("")},_x="gm"+(/x/.unicode==null?"":"u");class RM{constructor(e,n,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=DM,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new _M(e,n,i,s,o);this.re=new RegExp(n,_x+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let l=e.lineAt(s);this.curLineStart=l.from,this.matchPos=ed(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,s=i+n[0].length;if(this.matchPos=ed(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const n0=new WeakMap;class Cl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let s=n0.get(e);if(!s||s.from>=i||s.to<=n){let c=new Cl(n,e.sliceString(n,i));return n0.set(e,c),c}if(s.from==n&&s.to==i)return s;let{text:o,from:l}=s;return l>n&&(o=e.sliceString(n,l)+o,l=n),s.to<i&&(o+=e.sliceString(s.to,i)),n0.set(e,new Cl(l,o)),new Cl(n,o.slice(n-l,i-l))}}class _M{constructor(e,n,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=DM,this.matchPos=ed(e,s),this.re=new RegExp(n,_x+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=Cl.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,s=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this.matchPos=ed(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Cl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(RM.prototype[Symbol.iterator]=_M.prototype[Symbol.iterator]=function(){return this});function ij(t){try{return new RegExp(t,_x),!0}catch{return!1}}function ed(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}const sj=t=>{let{state:e}=t,n=String(e.doc.lineAt(t.state.selection.main.head).number),{close:i,result:s}=CP(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:n},focus:!0,submitLabel:e.phrase("go")});return s.then(o=>{let l=o&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.elements.line.value);if(!l){t.dispatch({effects:i});return}let c=e.doc.lineAt(e.selection.main.head),[,f,h,p,g]=l,y=p?+p.slice(1):0,v=h?+h:c.number;if(h&&g){let A=v/100;f&&(A=A*(f=="-"?-1:1)+c.number/e.doc.lines),v=Math.round(e.doc.lines*A)}else h&&f&&(v=v*(f=="-"?-1:1)+c.number);let b=e.doc.line(Math.max(1,Math.min(e.doc.lines,v))),S=ae.cursor(b.from+Math.max(0,Math.min(y,b.length)));t.dispatch({effects:[i,pe.scrollIntoView(S.from,{y:"center"})],selection:S})}),!0},rj={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},oj=ye.define({combine(t){return Bi(t,rj,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function lj(t){return[hj,fj]}const aj=Se.mark({class:"cm-selectionMatch"}),cj=Se.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function gC(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=at.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=at.Word)}function uj(t,e,n,i){return t(e.sliceDoc(n,n+1))==at.Word&&t(e.sliceDoc(i-1,i))==at.Word}const fj=xt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(oj),{state:n}=t,i=n.selection;if(i.ranges.length>1)return Se.none;let s=i.main,o,l=null;if(s.empty){if(!e.highlightWordAroundCursor)return Se.none;let f=n.wordAt(s.head);if(!f)return Se.none;l=n.charCategorizer(s.head),o=n.sliceDoc(f.from,f.to)}else{let f=s.to-s.from;if(f<e.minSelectionLength||f>200)return Se.none;if(e.wholeWords){if(o=n.sliceDoc(s.from,s.to),l=n.charCategorizer(s.head),!(gC(l,n,s.from,s.to)&&uj(l,n,s.from,s.to)))return Se.none}else if(o=n.sliceDoc(s.from,s.to),!o)return Se.none}let c=[];for(let f of t.visibleRanges){let h=new Il(n.doc,o,f.from,f.to);for(;!h.next().done;){let{from:p,to:g}=h.value;if((!l||gC(l,n,p,g))&&(s.empty&&p<=s.from&&g>=s.to?c.push(cj.range(p,g)):(p>=s.to||g<=s.from)&&c.push(aj.range(p,g)),c.length>e.maxMatches))return Se.none}}return Se.set(c)}},{decorations:t=>t.decorations}),hj=pe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),dj=({state:t,dispatch:e})=>{let{selection:n}=t,i=ae.create(n.ranges.map(s=>t.wordAt(s.head)||ae.cursor(s.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function pj(t,e){let{main:n,ranges:i}=t.selection,s=t.wordAt(n.head),o=s&&s.from==n.from&&s.to==n.to;for(let l=!1,c=new Il(t.doc,e,i[i.length-1].to);;)if(c.next(),c.done){if(l)return null;c=new Il(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),l=!0}else{if(l&&i.some(f=>f.from==c.value.from))continue;if(o){let f=t.wordAt(c.value.from);if(!f||f.from!=c.value.from||f.to!=c.value.to)continue}return c.value}}const gj=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return dj({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=i))return!1;let s=pj(t,i);return s?(e(t.update({selection:t.selection.addRange(ae.range(s.from,s.to),!1),effects:pe.scrollIntoView(s.to)})),!0):!1},Xl=ye.define({combine(t){return Bi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Tj(e),scrollToMatch:e=>pe.scrollIntoView(e)})}});class LM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||ij(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new Sj(this):new xj(this)}getCursor(e,n=0,i){let s=e.doc?e:Ve.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?rl(this,s,n,i):sl(this,s,n,i)}}class BM{constructor(e){this.spec=e}}function mj(t,e,n){return(i,s,o,l)=>{if(n&&!n(i,s,o,l))return!1;let c=i>=l&&s<=l+o.length?o.slice(i-l,s-l):e.doc.sliceString(i,s);return t(c,e,i,s)}}function sl(t,e,n,i){let s;return t.wholeWord&&(s=yj(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(s=mj(t.test,e,s)),new Il(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:o=>o.toLowerCase(),s)}function yj(t,e){return(n,i,s,o)=>((o>n||o+s.length<i)&&(o=Math.max(0,n-2),s=t.sliceString(o,Math.min(t.length,i+2))),(e(td(s,n-o))!=at.Word||e(nd(s,n-o))!=at.Word)&&(e(nd(s,i-o))!=at.Word||e(td(s,i-o))!=at.Word))}class xj extends BM{constructor(e){super(e)}nextMatch(e,n,i){let s=sl(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);s=sl(this.spec,e,0,o).nextOverlapping()}return s.done||s.value.from==n&&s.value.to==i?null:s.value}prevMatchInRange(e,n,i){for(let s=i;;){let o=Math.max(n,s-1e4-this.spec.unquoted.length),l=sl(this.spec,e,o,s),c=null;for(;!l.nextOverlapping().done;)c=l.value;if(c)return c;if(o==n)return null;s-=1e4}}prevMatch(e,n,i){let s=this.prevMatchInRange(e,0,n);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=n||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=sl(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let o=sl(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function vj(t,e,n){return(i,s,o)=>(!n||n(i,s,o))&&t(o[0],e,i,s)}function rl(t,e,n,i){let s;return t.wholeWord&&(s=bj(e.charCategorizer(e.selection.main.head))),t.test&&(s=vj(t.test,e,s)),new RM(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:s},n,i)}function td(t,e){return t.slice(Dt(t,e,!1),e)}function nd(t,e){return t.slice(e,Dt(t,e))}function bj(t){return(e,n,i)=>!i[0].length||(t(td(i.input,i.index))!=at.Word||t(nd(i.input,i.index))!=at.Word)&&(t(nd(i.input,i.index+i[0].length))!=at.Word||t(td(i.input,i.index+i[0].length))!=at.Word)}class Sj extends BM{nextMatch(e,n,i){let s=rl(this.spec,e,i,e.doc.length).next();return s.done&&(s=rl(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=1;;s++){let o=Math.max(n,i-s*1e4),l=rl(this.spec,e,o,i),c=null;for(;!l.next().done;)c=l.value;if(c&&(o==n||c.from>o+10))return c;if(o==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let o=+i.slice(0,s);if(o>0&&o<e.match.length)return e.match[o]+i.slice(s)}return n})}matchAll(e,n){let i=rl(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let o=rl(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const Bc=Me.define(),Lx=Me.define(),sr=zt.define({create(t){return new i0(Ay(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Bc)?t=new i0(n.value.create(),t.panel):n.is(Lx)&&(t=new i0(t.query,n.value?Bx:null));return t},provide:t=>Dc.from(t,e=>e.panel)});class i0{constructor(e,n){this.query=e,this.panel=n}}const wj=Se.mark({class:"cm-searchMatch"}),Cj=Se.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Aj=xt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(sr))}update(t){let e=t.state.field(sr);(e!=t.startState.field(sr)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Se.none;let{view:n}=this,i=new ps;for(let s=0,o=n.visibleRanges,l=o.length;s<l;s++){let{from:c,to:f}=o[s];for(;s<l-1&&f>o[s+1].from-500;)f=o[++s].to;t.highlight(n.state,c,f,(h,p)=>{let g=n.state.selection.ranges.some(y=>y.from==h&&y.to==p);i.add(h,p,g?Cj:wj)})}return i.finish()}},{decorations:t=>t.decorations});function ou(t){return e=>{let n=e.state.field(sr,!1);return n&&n.query.spec.valid?t(e,n):HM(e)}}const id=ou((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let s=ae.single(i.from,i.to),o=t.state.facet(Xl);return t.dispatch({selection:s,effects:[zx(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),PM(t),!0}),sd=ou((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,s=e.prevMatch(n,i,i);if(!s)return!1;let o=ae.single(s.from,s.to),l=t.state.facet(Xl);return t.dispatch({selection:o,effects:[zx(t,s),l.scrollToMatch(o.main,t)],userEvent:"select.search"}),PM(t),!0}),kj=ou((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ae.create(n.map(i=>ae.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Oj=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:s}=n.main,o=[],l=0;for(let c=new Il(t.doc,t.sliceDoc(i,s));!c.next().done;){if(o.length>1e3)return!1;c.value.from==i&&(l=o.length),o.push(ae.range(c.value.from,c.value.to))}return e(t.update({selection:ae.create(o,l),userEvent:"select.search.matches"})),!0},mC=ou((t,{query:e})=>{let{state:n}=t,{from:i,to:s}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,i,i);if(!o)return!1;let l=o,c=[],f,h,p=[];l.from==i&&l.to==s&&(h=n.toText(e.getReplacement(l)),c.push({from:l.from,to:l.to,insert:h}),l=e.nextMatch(n,l.from,l.to),p.push(pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let g=t.state.changes(c);return l&&(f=ae.single(l.from,l.to).map(g),p.push(zx(t,l)),p.push(n.facet(Xl).scrollToMatch(f.main,t))),t.dispatch({changes:g,selection:f,effects:p,userEvent:"input.replace"}),!0}),Ej=ou((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:o,to:l}=s;return{from:o,to:l,insert:e.getReplacement(s)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:pe.announce.of(i),userEvent:"input.replace.all"}),!0});function Bx(t){return t.state.facet(Xl).createPanel(t)}function Ay(t,e){var n,i,s,o,l;let c=t.selection.main,f=c.empty||c.to>c.from+100?"":t.sliceDoc(c.from,c.to);if(e&&!f)return e;let h=t.facet(Xl);return new LM({search:((n=e?.literal)!==null&&n!==void 0?n:h.literal)?f:f.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:h.wholeWord})}function zM(t){let e=wx(t,Bx);return e&&e.dom.querySelector("[main-field]")}function PM(t){let e=zM(t);e&&e==t.root.activeElement&&e.select()}const HM=t=>{let e=t.state.field(sr,!1);if(e&&e.panel){let n=zM(t);if(n&&n!=t.root.activeElement){let i=Ay(t.state,e.query.spec);i.valid&&t.dispatch({effects:Bc.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[Lx.of(!0),e?Bc.of(Ay(t.state,e.query.spec)):Me.appendConfig.of(Dj)]});return!0},jM=t=>{let e=t.state.field(sr,!1);if(!e||!e.panel)return!1;let n=wx(t,Bx);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Lx.of(!1)}),!0},Mj=[{key:"Mod-f",run:HM,scope:"editor search-panel"},{key:"F3",run:id,shift:sd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:id,shift:sd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:jM,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Oj},{key:"Mod-Alt-g",run:sj},{key:"Mod-d",run:gj,preventDefault:!0}];class Tj{constructor(e){this.view=e;let n=this.query=e.state.field(sr).query.spec;this.commit=this.commit.bind(this),this.searchField=et("input",{value:n.search,placeholder:Nn(e,"Find"),"aria-label":Nn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=et("input",{value:n.replace,placeholder:Nn(e,"Replace"),"aria-label":Nn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=et("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=et("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=et("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(s,o,l){return et("button",{class:"cm-button",name:s,onclick:o,type:"button"},l)}this.dom=et("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>id(e),[Nn(e,"next")]),i("prev",()=>sd(e),[Nn(e,"previous")]),i("select",()=>kj(e),[Nn(e,"all")]),et("label",null,[this.caseField,Nn(e,"match case")]),et("label",null,[this.reField,Nn(e,"regexp")]),et("label",null,[this.wordField,Nn(e,"by word")]),...e.state.readOnly?[]:[et("br"),this.replaceField,i("replace",()=>mC(e),[Nn(e,"replace")]),i("replaceAll",()=>Ej(e),[Nn(e,"replace all")])],et("button",{name:"close",onclick:()=>jM(e),"aria-label":Nn(e,"close"),type:"button"},[""])])}commit(){let e=new LM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Bc.of(e)}))}keydown(e){_z(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?sd:id)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),mC(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Bc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Xl).top}}function Nn(t,e){return t.state.phrase(e)}const rh=30,oh=/[\s\.,:;?!]/;function zx(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,o=Math.max(i.from,e-rh),l=Math.min(s,n+rh),c=t.state.sliceDoc(o,l);if(o!=i.from){for(let f=0;f<rh;f++)if(!oh.test(c[f+1])&&oh.test(c[f])){c=c.slice(f);break}}if(l!=s){for(let f=c.length-1;f>c.length-rh;f--)if(!oh.test(c[f-1])&&oh.test(c[f])){c=c.slice(0,f);break}}return pe.announce.of(`${t.state.phrase("current match")}. ${c} ${t.state.phrase("on line")} ${i.number}.`)}const Nj=pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Dj=[sr,ho.low(Aj),Nj];class IM{constructor(e,n,i,s){this.state=e,this.pos=n,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Gt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),s=n.text.slice(i-n.from,this.pos-n.from),o=s.search(VM(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function yC(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Rj(t){let e=Object.create(null),n=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let o=1;o<s.length;o++)n[s[o]]=!0}let i=yC(e)+yC(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function _j(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[n,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:Rj(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:n}:null}}class xC{constructor(e,n,i,s){this.completion=e,this.source=n,this.match=i,this.score=s}}function no(t){return t.selection.main.from}function VM(t,e){var n;let{source:i}=t,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?t:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const UM=Li.define();function Lj(t,e,n,i){let{main:s}=t.selection,o=n-s.from,l=i-s.from;return{...t.changeByRange(c=>{if(c!=s&&n!=i&&t.sliceDoc(c.from+o,c.from+l)!=t.sliceDoc(n,i))return{range:c};let f=t.toText(e);return{changes:{from:c.from+o,to:i==s.from?c.to:c.from+l,insert:f},range:ae.cursor(c.from+o+f.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const vC=new WeakMap;function Bj(t){if(!Array.isArray(t))return t;let e=vC.get(t);return e||vC.set(t,e=_j(t)),e}const rd=Me.define(),zc=Me.define();class zj{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=pn(e,n),s=ki(i);this.chars.push(i);let o=e.slice(n,n+s),l=o.toUpperCase();this.folded.push(pn(l==o?o.toLowerCase():l,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:s,precise:o,byWord:l}=this;if(n.length==1){let T=pn(e,0),O=ki(T),M=O==e.length?0:-100;if(T!=n[0])if(T==i[0])M+=-200;else return null;return this.ret(M,[0,O])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let f=n.length,h=0;if(c<0){for(let T=0,O=Math.min(e.length,200);T<O&&h<f;){let M=pn(e,T);(M==n[h]||M==i[h])&&(s[h++]=T),T+=ki(M)}if(h<f)return null}let p=0,g=0,y=!1,v=0,b=-1,S=-1,A=/[a-z]/.test(e),k=!0;for(let T=0,O=Math.min(e.length,200),M=0;T<O&&g<f;){let L=pn(e,T);c<0&&(p<f&&L==n[p]&&(o[p++]=T),v<f&&(L==n[v]||L==i[v]?(v==0&&(b=T),S=T+1,v++):v=0));let _,R=L<255?L>=48&&L<=57||L>=97&&L<=122?2:L>=65&&L<=90?1:0:(_=sx(L))!=_.toLowerCase()?1:_!=_.toUpperCase()?2:0;(!T||R==1&&A||M==0&&R!=0)&&(n[g]==L||i[g]==L&&(y=!0)?l[g++]=T:l.length&&(k=!1)),M=R,T+=ki(L)}return g==f&&l[0]==0&&k?this.result(-100+(y?-200:0),l,e):v==f&&b==0?this.ret(-200-e.length+(S==e.length?0:-100),[0,S]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):v==f?this.ret(-900-e.length,[b,S]):g==f?this.result(-100+(y?-200:0)+-700+(k?0:-1100),l,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,i){let s=[],o=0;for(let l of n){let c=l+(this.astral?ki(pn(i,l)):1);o&&s[o-1]==l?s[o-1]=c:(s[o++]=l,s[o++]=c)}return this.ret(e-i.length,s)}}class Pj{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Bt=ye.define({combine(t){return Bi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Hj,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>bC(e(i),n(i)),optionClass:(e,n)=>i=>bC(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function bC(t,e){return t?e?t+" "+e:t:e}function Hj(t,e,n,i,s,o){let l=t.textDirection==it.RTL,c=l,f=!1,h="top",p,g,y=e.left-s.left,v=s.right-e.right,b=i.right-i.left,S=i.bottom-i.top;if(c&&y<Math.min(b,v)?c=!1:!c&&v<Math.min(b,y)&&(c=!0),b<=(c?y:v))p=Math.max(s.top,Math.min(n.top,s.bottom-S))-e.top,g=Math.min(400,c?y:v);else{f=!0,g=Math.min(400,(l?e.right:s.right-e.left)-30);let T=s.bottom-e.bottom;T>=S||T>e.top?p=n.bottom-e.top:(h="bottom",p=e.bottom-n.top)}let A=(e.bottom-e.top)/o.offsetHeight,k=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${p/A}px; max-width: ${g/k}px`,class:"cm-completionInfo-"+(f?l?"left-narrow":"right-narrow":c?"left":"right")}}function jj(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,s,o){let l=document.createElement("span");l.className="cm-completionLabel";let c=n.displayLabel||n.label,f=0;for(let h=0;h<o.length;){let p=o[h++],g=o[h++];p>f&&l.appendChild(document.createTextNode(c.slice(f,p)));let y=l.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(c.slice(p,g))),y.className="cm-completionMatchedText",f=g}return f<c.length&&l.appendChild(document.createTextNode(c.slice(f))),l},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function s0(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Ij{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:f=>this.placeInfo(f),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:o,selected:l}=s.open,c=e.state.facet(Bt);this.optionContent=jj(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=s0(o.length,l,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",f=>{let{options:h}=e.state.field(n).open;for(let p=f.target,g;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(g=/-(\d+)$/.exec(p.id))&&+g[1]<h.length){this.applyCompletion(e,h[+g[1]]),f.preventDefault();return}}),this.dom.addEventListener("focusout",f=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Bt).closeOnBlur&&f.relatedTarget!=e.contentDOM&&e.dispatch({effects:zc.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:l,disabled:c}=i.open;(!s.open||s.open.options!=o)&&(this.range=s0(o.length,l,e.state.facet(Bt).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),c!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=s0(n.options.length,n.selected,this.view.state.facet(Bt).maxRenderedOptions),this.showOptions(n.options,e.id));let i=this.updateSelectedOption(n.selected);if(i){this.destroyInfo();let{completion:s}=n.options[n.selected],{info:o}=s;if(!o)return;let l=typeof o=="string"?document.createTextNode(o):o(s);if(!l)return;"then"in l?l.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,s)}).catch(c=>xn(this.view.state,c,"completion info")):(this.addInfoPane(l,s),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return n&&Uj(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let l=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:l.clientWidth,bottom:l.clientHeight}}return s.top>Math.min(o.bottom,n.bottom)-10||s.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(Bt).positionInfo(this.view,n,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",l=>{l.target==s&&l.preventDefault()});let o=null;for(let l=i.from;l<i.to;l++){let{completion:c,match:f}=e[l],{section:h}=c;if(h){let y=typeof h=="string"?h:h.name;if(y!=o&&(l>i.from||i.from==0))if(o=y,typeof h!="string"&&h.header)s.appendChild(h.header(h));else{let v=s.appendChild(document.createElement("completion-section"));v.textContent=y}}const p=s.appendChild(document.createElement("li"));p.id=n+"-"+l,p.setAttribute("role","option");let g=this.optionClass(c);g&&(p.className=g);for(let y of this.optionContent){let v=y(c,this.view.state,this.view,f);v&&p.appendChild(v)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Vj(t,e){return n=>new Ij(n,t,e)}function Uj(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/s:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/s)}function SC(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function $j(t,e){let n=[],i=null,s=null,o=p=>{n.push(p);let{section:g}=p.completion;if(g){i||(i=[]);let y=typeof g=="string"?g:g.name;i.some(v=>v.name==y)||i.push(typeof g=="string"?{name:y}:g)}},l=e.facet(Bt);for(let p of t)if(p.hasResult()){let g=p.result.getMatch;if(p.result.filter===!1)for(let y of p.result.options)o(new xC(y,p.source,g?g(y):[],1e9-n.length));else{let y=e.sliceDoc(p.from,p.to),v,b=l.filterStrict?new Pj(y):new zj(y);for(let S of p.result.options)if(v=b.match(S.label)){let A=S.displayLabel?g?g(S,v.matched):[]:v.matched,k=v.score+(S.boost||0);if(o(new xC(S,p.source,A,k)),typeof S.section=="object"&&S.section.rank==="dynamic"){let{name:T}=S.section;s||(s=Object.create(null)),s[T]=Math.max(k,s[T]||-1e9)}}}}if(i){let p=Object.create(null),g=0,y=(v,b)=>(v.rank==="dynamic"&&b.rank==="dynamic"?s[b.name]-s[v.name]:0)||(typeof v.rank=="number"?v.rank:1e9)-(typeof b.rank=="number"?b.rank:1e9)||(v.name<b.name?-1:1);for(let v of i.sort(y))g-=1e5,p[v.name]=g;for(let v of n){let{section:b}=v.completion;b&&(v.score+=p[typeof b=="string"?b:b.name])}}let c=[],f=null,h=l.compareCompletions;for(let p of n.sort((g,y)=>y.score-g.score||h(g.completion,y.completion))){let g=p.completion;!f||f.label!=g.label||f.detail!=g.detail||f.type!=null&&g.type!=null&&f.type!=g.type||f.apply!=g.apply||f.boost!=g.boost?c.push(p):SC(p.completion)>SC(f)&&(c[c.length-1]=p),f=p.completion}return c}class pl{constructor(e,n,i,s,o,l){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=l}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new pl(this.options,wC(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,s,o,l){if(s&&!l&&e.some(h=>h.isPending))return s.setDisabled();let c=$j(e,n);if(!c.length)return s&&e.some(h=>h.isPending)?s.setDisabled():null;let f=n.facet(Bt).selectOnOpen?0:-1;if(s&&s.selected!=f&&s.selected!=-1){let h=s.options[s.selected].completion;for(let p=0;p<c.length;p++)if(c[p].completion==h){f=p;break}}return new pl(c,wC(i,f),{pos:e.reduce((h,p)=>p.hasResult()?Math.min(h,p.from):h,1e8),create:Gj,above:o.aboveCursor},s?s.timestamp:Date.now(),f,!1)}map(e){return new pl(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new pl(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class od{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new od(Xj,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Bt),o=(i.override||n.languageDataAt("autocomplete",no(n)).map(Bj)).map(f=>(this.active.find(p=>p.source==f)||new Yn(f,this.active.some(p=>p.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((f,h)=>f==this.active[h])&&(o=this.active);let l=this.open,c=e.effects.some(f=>f.is(Px));l&&e.docChanged&&(l=l.map(e.changes)),e.selection||o.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!qj(o,this.active)||c?l=pl.build(o,n,this.id,l,i,c):l&&l.disabled&&!o.some(f=>f.isPending)&&(l=null),!l&&o.every(f=>!f.isPending)&&o.some(f=>f.hasResult())&&(o=o.map(f=>f.hasResult()?new Yn(f.source,0):f));for(let f of e.effects)f.is(qM)&&(l=l&&l.setSelected(f.value,this.id));return o==this.active&&l==this.open?this:new od(o,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Qj:Yj}}function qj(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let s=n==t.length,o=i==e.length;if(s||o)return s==o;if(t[n++].result!=e[i++].result)return!1}}const Qj={"aria-autocomplete":"list"},Yj={};function wC(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Xj=[];function $M(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(UM);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Yn{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=$M(e,n),s=this;(i&8||i&16&&this.touches(e))&&(s=new Yn(s.source,0)),i&4&&s.state==0&&(s=new Yn(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(rd))s=new Yn(s.source,1,o.value);else if(o.is(zc))s=new Yn(s.source,0);else if(o.is(Px))for(let l of o.value)l.source==s.source&&(s=l);return s}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(no(e.state))}}class Al extends Yn{constructor(e,n,i,s,o,l){super(e,3,n),this.limit=i,this.result=s,this.from=o,this.to=l}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),c=no(e.state);if(c>l||!s||n&2&&(no(e.startState)==this.from||c<this.limit))return new Yn(this.source,n&4?1:0);let f=e.changes.mapPos(this.limit);return Fj(s.validFor,e.state,o,l)?new Al(this.source,this.explicit,f,s,o,l):s.update&&(s=s.update(s,o,l,new IM(e.state,c,!1)))?new Al(this.source,this.explicit,f,s,s.from,(i=s.to)!==null&&i!==void 0?i:no(e.state)):new Yn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Al(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Yn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Fj(t,e,n,i){if(!t)return!1;let s=e.sliceDoc(n,i);return typeof t=="function"?t(s,n,i,e):VM(t,!0).test(s)}const Px=Me.define({map(t,e){return t.map(n=>n.map(e))}}),qM=Me.define(),gn=zt.define({create(){return od.start()},update(t,e){return t.update(e)},provide:t=>[Sx.from(t,e=>e.tooltip),pe.contentAttributes.from(t,e=>e.attrs)]});function Hx(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(gn).active.find(s=>s.source==e.source);return i instanceof Al?(typeof n=="string"?t.dispatch({...Lj(t.state,n,i.from,i.to),annotations:UM.of(e.completion)}):n(t,e.completion,i.from,i.to),!0):!1}const Gj=Vj(gn,Hx);function lh(t,e="option"){return n=>{let i=n.state.field(gn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Bt).interactionDelay)return!1;let s=1,o;e=="page"&&(o=wE(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,c=i.open.selected>-1?i.open.selected+s*(t?1:-1):t?0:l-1;return c<0?c=e=="page"?0:l-1:c>=l&&(c=e=="page"?l-1:0),n.dispatch({effects:qM.of(c)}),!0}}const Wj=t=>{let e=t.state.field(gn,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Bt).interactionDelay?!1:Hx(t,e.open.options[e.open.selected])},r0=t=>t.state.field(gn,!1)?(t.dispatch({effects:rd.of(!0)}),!0):!1,Kj=t=>{let e=t.state.field(gn,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:zc.of(null)}),!0)};class Zj{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Jj=50,e7=1e3,t7=xt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(gn).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(gn),n=t.state.facet(Bt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(gn)==e)return;let i=t.transactions.some(o=>{let l=$M(o,n);return l&8||(o.selection||o.docChanged)&&!(l&3)});for(let o=0;o<this.running.length;o++){let l=this.running[o];if(i||l.context.abortOnDocChange&&t.docChanged||l.updates.length+t.transactions.length>Jj&&Date.now()-l.time>e7){for(let c of l.context.abortListeners)try{c()}catch(f){xn(this.view.state,f)}l.context.abortListeners=null,this.running.splice(o--,1)}else l.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(l=>l.is(rd)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(l=>l.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(gn);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=no(e),i=new IM(e,n,t.explicit,this.view),s=new Zj(t,i);this.running.push(s),Promise.resolve(t.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:zc.of(null)}),xn(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Bt),i=this.view.state.field(gn);for(let s=0;s<this.running.length;s++){let o=this.running[s];if(o.done===void 0)continue;if(this.running.splice(s--,1),o.done){let c=no(o.updates.length?o.updates[0].startState:this.view.state),f=Math.min(c,o.done.from+(o.active.explicit?0:1)),h=new Al(o.active.source,o.active.explicit,f,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:c);for(let p of o.updates)h=h.update(p,n);if(h.hasResult()){e.push(h);continue}}let l=i.active.find(c=>c.source==o.active.source);if(l&&l.isPending)if(o.done==null){let c=new Yn(o.active.source,0);for(let f of o.updates)c=c.update(f,n);c.isPending||e.push(c)}else this.startQuery(l)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Px.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(gn,!1);if(e&&e.tooltip&&this.view.state.facet(Bt).closeOnBlur){let n=e.open&&wE(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:zc.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:rd.of(!1)}),20),this.composing=0}}}),n7=typeof navigator=="object"&&/Win/.test(navigator.platform),i7=ho.highest(pe.domEventHandlers({keydown(t,e){let n=e.state.field(gn,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(n7&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],s=n.active.find(l=>l.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&Hx(e,i),!1}})),s7=pe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Pc={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Wr=Me.define({map(t,e){let n=e.mapPos(t,-1,nn.TrackAfter);return n??void 0}}),jx=new class extends lr{};jx.startSide=1;jx.endSide=-1;const QM=zt.define({create(){return ze.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(Wr)&&(t=t.update({add:[jx.range(n.value,n.value+1)]}));return t}});function r7(){return[l7,QM]}const o0="()[]{}<>";function YM(t){for(let e=0;e<o0.length;e+=2)if(o0.charCodeAt(e)==t)return o0.charAt(e+1);return sx(t<128?t:t+1)}function XM(t,e){return t.languageDataAt("closeBrackets",e)[0]||Pc}const o7=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),l7=pe.inputHandler.of((t,e,n,i)=>{if((o7?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(i.length>2||i.length==2&&ki(pn(i,0))==1||e!=s.from||n!=s.to)return!1;let o=u7(t.state,i);return o?(t.dispatch(o),!0):!1}),a7=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=XM(t,t.selection.main.head).brackets||Pc.brackets,s=null,o=t.changeByRange(l=>{if(l.empty){let c=f7(t.doc,l.head);for(let f of i)if(f==c&&Xd(t.doc,l.head)==YM(pn(f,0)))return{changes:{from:l.head-f.length,to:l.head+f.length},range:ae.cursor(l.head-f.length)}}return{range:s=l}});return s||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},c7=[{key:"Backspace",run:a7}];function u7(t,e){let n=XM(t,t.selection.main.head),i=n.brackets||Pc.brackets;for(let s of i){let o=YM(pn(s,0));if(e==s)return o==s?p7(t,s,i.indexOf(s+s+s)>-1,n):h7(t,s,o,n.before||Pc.before);if(e==o&&FM(t,t.selection.main.from))return d7(t,s,o)}return null}function FM(t,e){let n=!1;return t.field(QM).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function Xd(t,e){let n=t.sliceString(e,e+2);return n.slice(0,ki(pn(n,0)))}function f7(t,e){let n=t.sliceString(e-2,e);return ki(pn(n,0))==n.length?n:n.slice(1)}function h7(t,e,n,i){let s=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:n,from:l.to}],effects:Wr.of(l.to+e.length),range:ae.range(l.anchor+e.length,l.head+e.length)};let c=Xd(t.doc,l.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:e+n,from:l.head},effects:Wr.of(l.head+e.length),range:ae.cursor(l.head+e.length)}:{range:s=l}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function d7(t,e,n){let i=null,s=t.changeByRange(o=>o.empty&&Xd(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:ae.cursor(o.head+n.length)}:i={range:o});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function p7(t,e,n,i){let s=i.stringPrefixes||Pc.stringPrefixes,o=null,l=t.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:Wr.of(c.to+e.length),range:ae.range(c.anchor+e.length,c.head+e.length)};let f=c.head,h=Xd(t.doc,f),p;if(h==e){if(CC(t,f))return{changes:{insert:e+e,from:f},effects:Wr.of(f+e.length),range:ae.cursor(f+e.length)};if(FM(t,f)){let y=n&&t.sliceDoc(f,f+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:f,to:f+y.length,insert:y},range:ae.cursor(f+y.length)}}}else{if(n&&t.sliceDoc(f-2*e.length,f)==e+e&&(p=AC(t,f-2*e.length,s))>-1&&CC(t,p))return{changes:{insert:e+e+e+e,from:f},effects:Wr.of(f+e.length),range:ae.cursor(f+e.length)};if(t.charCategorizer(f)(h)!=at.Word&&AC(t,f,s)>-1&&!g7(t,f,e,s))return{changes:{insert:e+e,from:f},effects:Wr.of(f+e.length),range:ae.cursor(f+e.length)}}return{range:o=c}});return o?null:t.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function CC(t,e){let n=Gt(t).resolveInner(e+1);return n.parent&&n.from==e}function g7(t,e,n,i){let s=Gt(t).resolveInner(e,-1),o=i.reduce((l,c)=>Math.max(l,c.length),0);for(let l=0;l<5;l++){let c=t.sliceDoc(s.from,Math.min(s.to,s.from+n.length+o)),f=c.indexOf(n);if(!f||f>-1&&i.indexOf(c.slice(0,f))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>n.length+f;){if(t.sliceDoc(p.to-n.length,p.to)==n)return!1;p=p.firstChild}return!0}let h=s.to==e&&s.parent;if(!h)break;s=h}return!1}function AC(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=at.Word)return e;for(let s of n){let o=e-s.length;if(t.sliceDoc(o,e)==s&&i(t.sliceDoc(o-1,o))!=at.Word)return o}return-1}function m7(t={}){return[i7,gn,Bt.of(t),t7,y7,s7]}const GM=[{key:"Ctrl-Space",run:r0},{mac:"Alt-`",run:r0},{mac:"Alt-i",run:r0},{key:"Escape",run:Kj},{key:"ArrowDown",run:lh(!0)},{key:"ArrowUp",run:lh(!1)},{key:"PageDown",run:lh(!0,"page")},{key:"PageUp",run:lh(!1,"page")},{key:"Enter",run:Wj}],y7=ho.highest(Hd.computeN([Bt],t=>t.facet(Bt).defaultKeymap?[GM]:[]));class kC{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Qr{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let s=i.facet(Hc).markerFilter;s&&(e=s(e,i));let o=e.slice().sort((v,b)=>v.from-b.from||v.to-b.to),l=new ps,c=[],f=0,h=i.doc.iter(),p=0,g=i.doc.length;for(let v=0;;){let b=v==o.length?null:o[v];if(!b&&!c.length)break;let S,A;if(c.length)S=f,A=c.reduce((O,M)=>Math.min(O,M.to),b&&b.from>S?b.from:1e8);else{if(S=b.from,S>g)break;A=b.to,c.push(b),v++}for(;v<o.length;){let O=o[v];if(O.from==S&&(O.to>O.from||O.to==S))c.push(O),v++,A=Math.min(O.to,A);else{A=Math.min(O.from,A);break}}A=Math.min(A,g);let k=!1;if(c.some(O=>O.from==S&&(O.to==A||A==g))&&(k=S==A,!k&&A-S<10)){let O=S-(p+h.value.length);O>0&&(h.next(O),p=S);for(let M=S;;){if(M>=A){k=!0;break}if(!h.lineBreak&&p+h.value.length>M)break;M=p+h.value.length,p+=h.value.length,h.next()}}let T=N7(c);if(k)l.add(S,S,Se.widget({widget:new O7(T),diagnostics:c.slice()}));else{let O=c.reduce((M,L)=>L.markClass?M+" "+L.markClass:M,"");l.add(S,A,Se.mark({class:"cm-lintRange cm-lintRange-"+T+O,diagnostics:c.slice(),inclusiveEnd:c.some(M=>M.to>A)}))}if(f=A,f==g)break;for(let O=0;O<c.length;O++)c[O].to<=f&&c.splice(O--,1)}let y=l.finish();return new Qr(y,n,Vl(y))}}function Vl(t,e=null,n=0){let i=null;return t.between(n,1e9,(s,o,{spec:l})=>{if(!(e&&l.diagnostics.indexOf(e)<0))if(!i)i=new kC(s,o,e||l.diagnostics[0]);else{if(l.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new kC(i.from,o,i.diagnostic)}}),i}function x7(t,e){let n=e.pos,i=e.end||n,s=t.state.facet(Hc).hideOn(t,n,i);if(s!=null)return s;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(l=>l.is(WM))||t.changes.touchesRange(o.from,Math.max(o.to,i)))}function v7(t,e){return t.field(Ln,!1)?e:e.concat(Me.appendConfig.of(D7))}const WM=Me.define(),Ix=Me.define(),KM=Me.define(),Ln=zt.define({create(){return new Qr(Se.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,s=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);i=Vl(n,t.selected.diagnostic,o)||Vl(n,null,o)}!n.size&&s&&e.state.facet(Hc).autoPanel&&(s=null),t=new Qr(n,s,i)}for(let n of e.effects)if(n.is(WM)){let i=e.state.facet(Hc).autoPanel?n.value.length?jc.open:null:t.panel;t=Qr.init(n.value,i,e.state)}else n.is(Ix)?t=new Qr(t.diagnostics,n.value?jc.open:null,t.selected):n.is(KM)&&(t=new Qr(t.diagnostics,t.panel,n.value));return t},provide:t=>[Dc.from(t,e=>e.panel),pe.decorations.from(t,e=>e.diagnostics)]}),b7=Se.mark({class:"cm-lintRange cm-lintRange-active"});function S7(t,e,n){let{diagnostics:i}=t.state.field(Ln),s,o=-1,l=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(f,h,{spec:p})=>{if(e>=f&&e<=h&&(f==h||(e>f||n>0)&&(e<h||n<0)))return s=p.diagnostics,o=f,l=h,!1});let c=t.state.facet(Hc).tooltipFilter;return s&&c&&(s=c(s,t.state)),s?{pos:o,end:l,above:t.state.doc.lineAt(o).to<l,create(){return{dom:w7(t,s)}}}:null}function w7(t,e){return et("ul",{class:"cm-tooltip-lint"},e.map(n=>JM(t,n,!1)))}const C7=t=>{let e=t.state.field(Ln,!1);(!e||!e.panel)&&t.dispatch({effects:v7(t.state,[Ix.of(!0)])});let n=wx(t,jc.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},OC=t=>{let e=t.state.field(Ln,!1);return!e||!e.panel?!1:(t.dispatch({effects:Ix.of(!1)}),!0)},A7=t=>{let e=t.state.field(Ln,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},k7=[{key:"Mod-Shift-m",run:C7,preventDefault:!0},{key:"F8",run:A7}],Hc=ye.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Bi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:EC,tooltipFilter:EC,needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n,hideOn:(e,n)=>e?n?(i,s,o)=>e(i,s,o)||n(i,s,o):e:n,autoPanel:(e,n)=>e||n})}}});function EC(t,e){return t?e?(n,i)=>e(t(n,i),i):t:e}function ZM(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let s=n[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function JM(t,e,n){var i;let s=n?ZM(e.actions):[];return et("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},et("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,l)=>{let c=!1,f=v=>{if(v.preventDefault(),c)return;c=!0;let b=Vl(t.state.field(Ln).diagnostics,e);b&&o.apply(t,b.from,b.to)},{name:h}=o,p=s[l]?h.indexOf(s[l]):-1,g=p<0?h:[h.slice(0,p),et("u",h.slice(p,p+1)),h.slice(p+1)],y=o.markClass?" "+o.markClass:"";return et("button",{type:"button",class:"cm-diagnosticAction"+y,onclick:f,onmousedown:f,"aria-label":` Action: ${h}${p<0?"":` (access key "${s[l]})"`}.`},g)}),e.source&&et("div",{class:"cm-diagnosticSource"},e.source))}class O7 extends zi{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return et("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class MC{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=JM(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class jc{constructor(e){this.view=e,this.items=[];let n=s=>{if(!(s.ctrlKey||s.altKey||s.metaKey)){if(s.keyCode==27)OC(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],l=ZM(o.actions);for(let c=0;c<l.length;c++)if(l[c].toUpperCase().charCodeAt(0)==s.keyCode){let f=Vl(this.view.state.field(Ln).diagnostics,o);f&&o.actions[c].apply(e,f.from,f.to)}}else return;s.preventDefault()}},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=et("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=et("div",{class:"cm-panel-lint"},this.list,et("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>OC(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Ln).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Ln),i=0,s=!1,o=null,l=new Set;for(e.between(0,this.view.state.doc.length,(c,f,{spec:h})=>{for(let p of h.diagnostics){if(l.has(p))continue;l.add(p);let g=-1,y;for(let v=i;v<this.items.length;v++)if(this.items[v].diagnostic==p){g=v;break}g<0?(y=new MC(this.view,p),this.items.splice(i,0,y),s=!0):(y=this.items[g],g>i&&(this.items.splice(i,g-i),s=!0)),n&&y.diagnostic==n.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),o=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new MC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:f})=>{let h=f.height/this.list.offsetHeight;c.top<f.top?this.list.scrollTop-=(f.top-c.top)/h:c.bottom>f.bottom&&(this.list.scrollTop+=(c.bottom-f.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Ln),i=Vl(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:KM.of(i)})}static open(e){return new jc(e)}}function E7(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function ah(t){return E7(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const M7=pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ah("#d11")},".cm-lintRange-warning":{backgroundImage:ah("orange")},".cm-lintRange-info":{backgroundImage:ah("#999")},".cm-lintRange-hint":{backgroundImage:ah("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function T7(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function N7(t){let e="hint",n=1;for(let i of t){let s=T7(i.severity);s>n&&(n=s,e=i.severity)}return e}const D7=[Ln,pe.decorations.compute([Ln],t=>{let{selected:e,panel:n}=t.field(Ln);return!e||!n||e.from==e.to?Se.none:Se.set([b7.range(e.from,e.to)])}),SP(S7,{hideOn:x7}),M7];var TC=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(c7)),e.defaultKeymap!==!1&&(i=i.concat(tj)),e.searchKeymap!==!1&&(i=i.concat(Mj)),e.historyKeymap!==!1&&(i=i.concat(aH)),e.foldKeymap!==!1&&(i=i.concat(w9)),e.completionKeymap!==!1&&(i=i.concat(GM)),e.lintKeymap!==!1&&(i=i.concat(k7));var s=[];return e.lineNumbers!==!1&&s.push(LP()),e.highlightActiveLineGutter!==!1&&s.push(PP()),e.highlightSpecialChars!==!1&&s.push(Wz()),e.history!==!1&&s.push(J9()),e.foldGutter!==!1&&s.push(O9()),e.drawSelection!==!1&&s.push(jz()),e.dropCursor!==!1&&s.push(qz()),e.allowMultipleSelections!==!1&&s.push(Ve.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&s.push(h9()),e.syntaxHighlighting!==!1&&s.push(Tx(N9,{fallback:!0})),e.bracketMatching!==!1&&s.push(P9()),e.closeBrackets!==!1&&s.push(r7()),e.autocompletion!==!1&&s.push(m7()),e.rectangularSelection!==!1&&s.push(uP()),n!==!1&&s.push(dP()),e.highlightActiveLine!==!1&&s.push(nP()),e.highlightSelectionMatches!==!1&&s.push(lj()),e.tabSize&&typeof e.tabSize=="number"&&s.push(Id.of(" ".repeat(e.tabSize))),s.concat([Hd.of(i.flat())]).filter(Boolean)};const R7="#e5c07b",NC="#e06c75",_7="#56b6c2",L7="#ffffff",Ch="#abb2bf",ky="#7d8799",B7="#61afef",z7="#98c379",DC="#d19a66",P7="#c678dd",H7="#21252b",RC="#2c313a",_C="#282c34",l0="#353a42",j7="#3E4451",LC="#528bff",I7=pe.theme({"&":{color:Ch,backgroundColor:_C},".cm-content":{caretColor:LC},".cm-cursor, .cm-dropCursor":{borderLeftColor:LC},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:j7},".cm-panels":{backgroundColor:H7,color:Ch},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:_C,color:ky,border:"none"},".cm-activeLineGutter":{backgroundColor:RC},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:l0},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:l0,borderBottomColor:l0},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:RC,color:Ch}}},{dark:!0}),V7=Ql.define([{tag:te.keyword,color:P7},{tag:[te.name,te.deleted,te.character,te.propertyName,te.macroName],color:NC},{tag:[te.function(te.variableName),te.labelName],color:B7},{tag:[te.color,te.constant(te.name),te.standard(te.name)],color:DC},{tag:[te.definition(te.name),te.separator],color:Ch},{tag:[te.typeName,te.className,te.number,te.changed,te.annotation,te.modifier,te.self,te.namespace],color:R7},{tag:[te.operator,te.operatorKeyword,te.url,te.escape,te.regexp,te.link,te.special(te.string)],color:_7},{tag:[te.meta,te.comment],color:ky},{tag:te.strong,fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.link,color:ky,textDecoration:"underline"},{tag:te.heading,fontWeight:"bold",color:NC},{tag:[te.atom,te.bool,te.special(te.variableName)],color:DC},{tag:[te.processingInstruction,te.string,te.inserted],color:z7},{tag:te.invalid,color:L7}]),U7=[I7,Tx(V7)];var $7=pe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),q7=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:i=!0,readOnly:s=!1,theme:o="light",placeholder:l="",basicSetup:c=!0}=e,f=[];switch(n&&f.unshift(Hd.of([nj])),c&&(typeof c=="boolean"?f.unshift(TC()):f.unshift(TC(c))),l&&f.unshift(oP(l)),o){case"light":f.push($7);break;case"dark":f.push(U7);break;case"none":break;default:f.push(o);break}return i===!1&&f.push(pe.editable.of(!1)),s&&f.push(Ve.readOnly.of(!0)),[...f]},Q7=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class Y7{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class BC{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var a0=null,X7=()=>typeof window>"u"?new BC:(a0||(a0=new BC),a0),zC=Li.define(),F7=200,G7=[];function W7(t){var{value:e,selection:n,onChange:i,onStatistics:s,onCreateEditor:o,onUpdate:l,extensions:c=G7,autoFocus:f,theme:h="light",height:p=null,minHeight:g=null,maxHeight:y=null,width:v=null,minWidth:b=null,maxWidth:S=null,placeholder:A="",editable:k=!0,readOnly:T=!1,indentWithTab:O=!0,basicSetup:M=!0,root:L,initialState:_}=t,[R,X]=q.useState(),[U,ne]=q.useState(),[$,Q]=q.useState(),Z=q.useState(()=>({current:null}))[0],B=q.useState(()=>({current:null}))[0],V=pe.theme({"&":{height:p,minHeight:g,maxHeight:y,width:v,minWidth:b,maxWidth:S},"& .cm-scroller":{height:"100% !important"}}),N=pe.updateListener.of(z=>{if(z.docChanged&&typeof i=="function"&&!z.transactions.some(H=>H.annotation(zC))){Z.current?Z.current.reset():(Z.current=new Y7(()=>{if(B.current){var H=B.current;B.current=null,H()}Z.current=null},F7),X7().add(Z.current));var G=z.state.doc,D=G.toString();i(D,z)}s&&s(Q7(z))}),P=q7({theme:h,editable:k,readOnly:T,placeholder:A,indentWithTab:O,basicSetup:M}),j=[N,V,...P];return l&&typeof l=="function"&&j.push(pe.updateListener.of(l)),j=j.concat(c),q.useLayoutEffect(()=>{if(R&&!$){var z={doc:e,selection:n,extensions:j},G=_?Ve.fromJSON(_.json,z,_.fields):Ve.create(z);if(Q(G),!U){var D=new pe({state:G,parent:R,root:L});ne(D),o&&o(D,G)}}return()=>{U&&(Q(void 0),ne(void 0))}},[R,$]),q.useEffect(()=>{t.container&&X(t.container)},[t.container]),q.useEffect(()=>()=>{U&&(U.destroy(),ne(void 0)),Z.current&&(Z.current.cancel(),Z.current=null)},[U]),q.useEffect(()=>{f&&U&&U.focus()},[f,U]),q.useEffect(()=>{U&&U.dispatch({effects:Me.reconfigure.of(j)})},[h,c,p,g,y,v,b,S,A,k,T,O,M,i,l]),q.useEffect(()=>{if(e!==void 0){var z=U?U.state.doc.toString():"";if(U&&e!==z){var G=Z.current&&!Z.current.isDone,D=()=>{U&&e!==U.state.doc.toString()&&U.dispatch({changes:{from:0,to:U.state.doc.toString().length,insert:e||""},annotations:[zC.of(!0)]})};G?B.current=D:D()}}},[e,U]),{state:$,setState:Q,view:U,setView:ne,container:R,setContainer:X}}var K7=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],eT=q.forwardRef((t,e)=>{var{className:n,value:i="",selection:s,extensions:o=[],onChange:l,onStatistics:c,onCreateEditor:f,onUpdate:h,autoFocus:p,theme:g="light",height:y,minHeight:v,maxHeight:b,width:S,minWidth:A,maxWidth:k,basicSetup:T,placeholder:O,indentWithTab:M,editable:L,readOnly:_,root:R,initialState:X}=t,U=O6(t,K7),ne=q.useRef(null),{state:$,view:Q,container:Z,setContainer:B}=W7({root:R,value:i,autoFocus:p,theme:g,height:y,minHeight:v,maxHeight:b,width:S,minWidth:A,maxWidth:k,basicSetup:T,placeholder:O,indentWithTab:M,editable:L,readOnly:_,selection:s,onChange:l,onStatistics:c,onCreateEditor:f,onUpdate:h,extensions:o,initialState:X});q.useImperativeHandle(e,()=>({editor:ne.current,state:$,view:Q}),[ne,Z,$,Q]);var V=q.useCallback(P=>{ne.current=P,B(P)},[B]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var N=typeof g=="string"?"cm-theme-"+g:"cm-theme";return C.jsx("div",D0({ref:V,className:""+N+(n?" "+n:"")},U))});eT.displayName="CodeMirror";var PC={};class ld{constructor(e,n,i,s,o,l,c,f,h,p=0,g){this.p=e,this.stack=n,this.state=i,this.reducePos=s,this.pos=o,this.score=l,this.buffer=c,this.bufferBase=f,this.curContext=h,this.lookAhead=p,this.parent=g}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let s=e.parser.context;return new ld(e,[],n,i,i,0,[],0,s?new HC(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,s=e&65535,{parser:o}=this.p,l=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),c=o.dynamicPrecedence(s);if(c&&(this.score+=c),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,l?8:4,!0),this.reduceContext(s,this.reducePos);return}let f=this.stack.length-(i-1)*3-(e&262144?6:0),h=f?this.stack[f-2]:this.p.ranges[0].from,p=this.reducePos-h;p>=2e3&&!(!((n=this.p.parser.nodeSet.types[s])===null||n===void 0)&&n.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=p));let g=f?this.stack[f-1]:0,y=this.bufferBase+this.buffer.length-g;if(s<o.minRepeatTerm||e&131072){let v=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,h,v,y+4,!0)}if(e&262144)this.state=this.stack[f];else{let v=this.stack[f-3];this.state=o.getGoto(v,s,!0)}for(;this.stack.length>f;)this.stack.pop();this.reduceContext(s,h)}storeNode(e,n,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,c=this.buffer.length;if(c==0&&l.parent&&(c=l.bufferBase-l.parent.bufferBase,l=l.parent),c>0&&l.buffer[c-4]==0&&l.buffer[c-1]>-1){if(n==i)return;if(l.buffer[c-2]>=n){l.buffer[c-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,n,i,s);else{let l=this.buffer.length;if(l>0&&(this.buffer[l-4]!=0||this.buffer[l-1]<0)){let c=!1;for(let f=l;f>0&&this.buffer[f-2]>i;f-=4)if(this.buffer[f-1]>=0){c=!0;break}if(c)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,s>4&&(s-=4)}this.buffer[l]=e,this.buffer[l+1]=n,this.buffer[l+2]=i,this.buffer[l+3]=s}}shift(e,n,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:l}=this.p;this.pos=s;let c=l.stateFlag(o,1);!c&&(s>i||n<=l.maxNode)&&(this.reducePos=s),this.pushState(o,c?i:Math.min(i,this.reducePos)),this.shiftContext(n,i),n<=l.maxNode&&this.buffer.push(n,i,s,4)}else this.pos=s,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,s,4)}apply(e,n,i,s){e&65536?this.reduce(e):this.shift(e,n,i,s)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(n,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),s=e.bufferBase+n;for(;e&&s==e.bufferBase;)e=e.parent;return new ld(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new Z7(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if((i&65536)==0)return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let s=[];for(let o=0,l;o<n.length;o+=2)(l=n[o+1])!=this.state&&this.p.parser.hasAction(l,e)&&s.push(n[o],l);if(this.stack.length<120)for(let o=0;s.length<8&&o<n.length;o+=2){let l=n[o+1];s.some((c,f)=>f&1&&c==l)||s.push(n[o],l)}n=s}let i=[];for(let s=0;s<n.length&&i.length<4;s+=2){let o=n[s+1];if(o==this.state)continue;let l=this.split();l.pushState(o,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(n[s],this.pos),l.reducePos=this.pos,l.score-=200,i.push(l)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let i=n>>19,s=n&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let l=this.findForcedReduction();if(l==null)return!1;n=l}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(s,o)=>{if(!n.includes(s))return n.push(s),e.allActions(s,l=>{if(!(l&393216))if(l&65536){let c=(l>>19)-o;if(c>1){let f=l&65535,h=this.stack.length-c*3;if(h>=0&&e.getGoto(this.stack[h],f,!1)>=0)return c<<19|65536|f}}else{let c=i(l,o+1);if(c!=null)return c}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new HC(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class HC{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class Z7{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=s}}class ad{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new ad(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ad(this.stack,this.pos,this.index)}}function ch(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let i=0,s=0;i<t.length;){let o=0;for(;;){let l=t.charCodeAt(i++),c=!1;if(l==126){o=65535;break}l>=92&&l--,l>=34&&l--;let f=l-32;if(f>=46&&(f-=46,c=!0),o+=f,c)break;o*=46}n?n[s++]=o:n=new e(o)}return n}class Ah{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const jC=new Ah;class J7{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=jC,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let l=this.ranges[--s];o-=i.from-l.to,i=l}for(;n<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let l=this.ranges[++s];o+=l.from-i.to,i=l}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,s;if(n>=0&&n<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,c=this.range;for(;c.to<=i;)c=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=jC,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let s of this.ranges){if(s.from>=n)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,n)))}return i}}class kl{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;eI(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}kl.prototype.contextual=kl.prototype.fallback=kl.prototype.extend=!1;kl.prototype.fallback=kl.prototype.extend=!1;class Fd{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function eI(t,e,n,i,s,o){let l=0,c=1<<i,{dialect:f}=n.p.parser;e:for(;(c&t[l])!=0;){let h=t[l+1];for(let v=l+3;v<h;v+=2)if((t[v+1]&c)>0){let b=t[v];if(f.allows(b)&&(e.token.value==-1||e.token.value==b||tI(b,e.token.value,s,o))){e.acceptToken(b);break}}let p=e.next,g=0,y=t[l+2];if(e.next<0&&y>g&&t[h+y*3-3]==65535){l=t[h+y*3-1];continue e}for(;g<y;){let v=g+y>>1,b=h+v+(v<<1),S=t[b],A=t[b+1]||65536;if(p<S)y=v;else if(p>=A)g=v+1;else{l=t[b+2],e.advance();continue e}}break}}function IC(t,e,n){for(let i=e,s;(s=t[i])!=65535;i++)if(s==n)return i-e;return-1}function tI(t,e,n,i){let s=IC(n,i,e);return s<0||IC(n,i,t)<s}const Dn=typeof process<"u"&&PC&&/\bparse\b/.test(PC.LOG);let c0=null;function VC(t,e,n){let i=t.cursor(dt.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}class nI{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?VC(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?VC(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],s=this.index[n];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],l=this.start[n]+i.positions[s];if(l>e)return this.nextStart=l,null;if(o instanceof yt){if(l==e){if(l<this.safeFrom)return null;let c=l+o.length;if(c<=this.safeTo){let f=o.prop(_e.lookAhead);if(!f||c+f<this.fragment.to)return o}}this.index[n]++,l+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(l),this.index.push(0))}else this.index[n]++,this.nextStart=l+o.length}}}class iI{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ah)}getActions(e){let n=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,l=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,f=0;for(let h=0;h<o.length;h++){if((1<<h&l)==0)continue;let p=o[h],g=this.tokens[h];if(!(i&&!p.fallback)&&((p.contextual||g.start!=e.pos||g.mask!=l||g.context!=c)&&(this.updateCachedToken(g,p,e),g.mask=l,g.context=c),g.lookAhead>g.end+25&&(f=Math.max(g.lookAhead,f)),g.value!=0)){let y=n;if(g.extended>-1&&(n=this.addActions(e,g.extended,g.end,n)),n=this.addActions(e,g.value,g.end,n),!p.extend&&(i=g,n>y))break}}for(;this.actions.length>n;)this.actions.pop();return f&&e.setLookAhead(f),!i&&e.pos==this.stream.end&&(i=new Ah,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Ah,{pos:i,p:s}=e;return n.start=i,n.end=Math.min(i+1,s.stream.end),n.value=i==s.stream.end?s.parser.eofTerm:0,n}updateCachedToken(e,n,i){let s=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let l=0;l<o.specialized.length;l++)if(o.specialized[l]==e.value){let c=o.specializers[l](this.stream.read(e.start,e.end),i);if(c>=0&&i.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,n,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=n,this.actions[s++]=i,s}addActions(e,n,i,s){let{state:o}=e,{parser:l}=e.p,{data:c}=l;for(let f=0;f<2;f++)for(let h=l.stateSlot(o,f?2:1);;h+=3){if(c[h]==65535)if(c[h+1]==1)h=as(c,h+2);else{s==0&&c[h+1]==2&&(s=this.putAction(as(c,h+2),n,i,s));break}c[h]==n&&(s=this.putAction(as(c,h+1),n,i,s))}return s}}class sI{constructor(e,n,i,s){this.parser=e,this.input=n,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new J7(n,s),this.tokens=new iI(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[ld.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new nI(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[l]=e;for(;l.forceReduce()&&l.stack.length&&l.stack[l.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let l=0;l<e.length;l++){let c=e[l];for(;;){if(this.tokens.mainToken=null,c.pos>n)i.push(c);else{if(this.advanceStack(c,i,e))continue;{s||(s=[],o=[]),s.push(c);let f=this.tokens.getMainToken(c);o.push(f.value,f.end)}}break}}if(!i.length){let l=s&&lI(s);if(l)return Dn&&console.log("Finish with "+this.stackID(l)),this.stackToTree(l);if(this.parser.strict)throw Dn&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&s){let l=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(l)return Dn&&console.log("Force-finish "+this.stackID(l)),this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((c,f)=>f.score-c.score);i.length>l;)i.pop();i.some(c=>c.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let c=i[l];for(let f=l+1;f<i.length;f++){let h=i[f];if(c.sameState(h)||c.buffer.length>500&&h.buffer.length>500)if((c.score-h.score||c.buffer.length-h.buffer.length)>0)i.splice(f--,1);else{i.splice(l--,1);continue e}}}i.length>12&&(i.sort((l,c)=>c.score-l.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let s=e.pos,{parser:o}=this,l=Dn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,p=h?e.curContext.hash:0;for(let g=this.fragments.nodeAt(s);g;){let y=this.parser.nodeSet.types[g.type.id]==g.type?o.getGoto(e.state,g.type.id):-1;if(y>-1&&g.length&&(!h||(g.prop(_e.contextHash)||0)==p))return e.useNode(g,y),Dn&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(g.type.id)})`),!0;if(!(g instanceof yt)||g.children.length==0||g.positions[0]>0)break;let v=g.children[0];if(v instanceof yt&&g.positions[0]==0)g=v;else break}}let c=o.stateSlot(e.state,4);if(c>0)return e.reduce(c),Dn&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let f=this.tokens.getActions(e);for(let h=0;h<f.length;){let p=f[h++],g=f[h++],y=f[h++],v=h==f.length||!i,b=v?e:e.split(),S=this.tokens.mainToken;if(b.apply(p,g,S?S.start:b.pos,y),Dn&&console.log(l+this.stackID(b)+` (via ${(p&65536)==0?"shift":`reduce of ${o.getName(p&65535)}`} for ${o.getName(g)} @ ${s}${b==e?"":", split"})`),v)return!0;b.pos>s?n.push(b):i.push(b)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return UC(e,n),!0}}runRecovery(e,n,i){let s=null,o=!1;for(let l=0;l<e.length;l++){let c=e[l],f=n[l<<1],h=n[(l<<1)+1],p=Dn?this.stackID(c)+" -> ":"";if(c.deadEnd&&(o||(o=!0,c.restart(),Dn&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,i))))continue;let g=c.split(),y=p;for(let v=0;v<10&&g.forceReduce()&&(Dn&&console.log(y+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,i));v++)Dn&&(y=this.stackID(g)+" -> ");for(let v of c.recoverByInsert(f))Dn&&console.log(p+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,i);this.stream.end>c.pos?(h==c.pos&&(h++,f=0),c.recoverByDelete(f,h),Dn&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(f)})`),UC(c,i)):(!s||s.score<g.score)&&(s=g)}return s}stackToTree(e){return e.close(),yt.build({buffer:ad.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(c0||(c0=new WeakMap)).get(e);return n||c0.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function UC(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class rI{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const u0=t=>t;class oI{constructor(e){this.start=e.start,this.shift=e.shift||u0,this.reduce=e.reduce||u0,this.reuse=e.reuse||u0,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class cd extends RE{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let c=0;c<e.repeatNodeCount;c++)n.push("");let i=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<n.length;c++)s.push([]);function o(c,f,h){s[c].push([f,f.deserialize(String(h))])}if(e.nodeProps)for(let c of e.nodeProps){let f=c[0];typeof f=="string"&&(f=_e[f]);for(let h=1;h<c.length;){let p=c[h++];if(p>=0)o(p,f,c[h++]);else{let g=c[h+-p];for(let y=-p;y>0;y--)o(c[h++],f,g);h++}}}this.nodeSet=new Cx(n.map((c,f)=>Sn.define({name:f>=this.minRepeatTerm?void 0:c,id:f,props:s[f],top:i.indexOf(f)>-1,error:f==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(f)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=ME;let l=ch(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map($C),this.states=ch(e.states,Uint32Array),this.data=ch(e.stateData),this.goto=ch(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new kl(l,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let s=new sI(this,e,n,i);for(let o of this.wrappers)s=o(s,e,n,i);return s}getGoto(e,n,i=!1){let s=this.goto;if(n>=s[0])return-1;for(let o=s[n+1];;){let l=s[o++],c=l&1,f=s[o++];if(c&&i)return f;for(let h=o+(l>>1);o<h;o++)if(s[o]==e)return f;if(c)return-1}}hasAction(e,n){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),l;;o+=3){if((l=i[o])==65535)if(i[o+1]==1)l=i[o=as(i,o+2)];else{if(i[o+1]==2)return as(i,o+2);break}if(l==n||l==0)return as(i,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),s=i?n(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=as(this.data,o+2);else break;s=n(as(this.data,o+1))}return s}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=as(this.data,i+2);else break;if((this.data[i+2]&1)==0){let s=this.data[i+1];n.some((o,l)=>l&1&&o==s)||n.push(this.data[i],s)}}return n}configure(e){let n=Object.assign(Object.create(cd.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(c=>c.from==i.external);if(!o)return i;let l=Object.assign(Object.assign({},i),{external:o.to});return n.specializers[s]=$C(l),l})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let o of e.split(" ")){let l=n.indexOf(o);l>=0&&(i[l]=!0)}let s=null;for(let o=0;o<n.length;o++)if(!i[o])for(let l=this.dialects[n[o]],c;(c=this.data[l++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new rI(e,i,s)}static deserialize(e){return new cd(e)}}function as(t,e){return t[e]|t[e+1]<<16}function lI(t){let e=null;for(let n of t){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function $C(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}const ol=63,qC=64,aI=1,cI=2,tT=3,uI=4,nT=5,fI=6,hI=7,iT=65,dI=66,pI=8,gI=9,mI=10,yI=11,xI=12,sT=13,vI=19,bI=20,SI=29,wI=33,CI=34,AI=47,kI=0,Vx=1,Oy=2,Ic=3,Ey=4;class Yr{constructor(e,n,i){this.parent=e,this.depth=n,this.type=i,this.hash=(e?e.hash+e.hash<<8:0)+n+(n<<4)+i}}Yr.top=new Yr(null,-1,kI);function pc(t,e){for(let n=0,i=e-t.pos-1;;i--,n++){let s=t.peek(i);if(ys(s)||s==-1)return n}}function My(t){return t==32||t==9}function ys(t){return t==10||t==13}function rT(t){return My(t)||ys(t)}function Kr(t){return t<0||rT(t)}const OI=new oI({start:Yr.top,reduce(t,e){return t.type==Ic&&(e==bI||e==CI)?t.parent:t},shift(t,e,n,i){if(e==tT)return new Yr(t,pc(i,i.pos),Vx);if(e==iT||e==nT)return new Yr(t,pc(i,i.pos),Oy);if(e==ol)return t.parent;if(e==vI||e==wI)return new Yr(t,0,Ic);if(e==sT&&t.type==Ey)return t.parent;if(e==AI){let s=/[1-9]/.exec(i.read(i.pos,n.pos));if(s)return new Yr(t,t.depth+ +s[0],Ey)}return t},hash(t){return t.hash}});function Ul(t,e,n=0){return t.peek(n)==e&&t.peek(n+1)==e&&t.peek(n+2)==e&&Kr(t.peek(n+3))}const EI=new Fd((t,e)=>{if(t.next==-1&&e.canShift(qC))return t.acceptToken(qC);let n=t.peek(-1);if((ys(n)||n<0)&&e.context.type!=Ic){if(Ul(t,45))if(e.canShift(ol))t.acceptToken(ol);else return t.acceptToken(aI,3);if(Ul(t,46))if(e.canShift(ol))t.acceptToken(ol);else return t.acceptToken(cI,3);let i=0;for(;t.next==32;)i++,t.advance();(i<e.context.depth||i==e.context.depth&&e.context.type==Vx&&(t.next!=45||!Kr(t.peek(1))))&&t.next!=-1&&!ys(t.next)&&t.next!=35&&t.acceptToken(ol,-i)}},{contextual:!0}),MI=new Fd((t,e)=>{if(e.context.type==Ic){t.next==63&&(t.advance(),Kr(t.next)&&t.acceptToken(hI));return}if(t.next==45)t.advance(),Kr(t.next)&&t.acceptToken(e.context.type==Vx&&e.context.depth==pc(t,t.pos-1)?uI:tT);else if(t.next==63)t.advance(),Kr(t.next)&&t.acceptToken(e.context.type==Oy&&e.context.depth==pc(t,t.pos-1)?fI:nT);else{let n=t.pos;for(;;)if(My(t.next)){if(t.pos==n)return;t.advance()}else if(t.next==33)oT(t);else if(t.next==38)Ty(t);else if(t.next==42){Ty(t);break}else if(t.next==39||t.next==34){if(Ux(t,!0))break;return}else if(t.next==91||t.next==123){if(!NI(t))return;break}else{lT(t,!0,!1,0);break}for(;My(t.next);)t.advance();if(t.next==58){if(t.pos==n&&e.canShift(SI))return;let i=t.peek(1);Kr(i)&&t.acceptTokenTo(e.context.type==Oy&&e.context.depth==pc(t,n)?dI:iT,n)}}},{contextual:!0});function TI(t){return t>32&&t<127&&t!=34&&t!=37&&t!=44&&t!=60&&t!=62&&t!=92&&t!=94&&t!=96&&t!=123&&t!=124&&t!=125}function QC(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function YC(t,e){return t.next==37?(t.advance(),QC(t.next)&&t.advance(),QC(t.next)&&t.advance(),!0):TI(t.next)||e&&t.next==44?(t.advance(),!0):!1}function oT(t){if(t.advance(),t.next==60){for(t.advance();;)if(!YC(t,!0)){t.next==62&&t.advance();break}}else for(;YC(t,!1););}function Ty(t){for(t.advance();!Kr(t.next)&&ud(t.next)!="f";)t.advance()}function Ux(t,e){let n=t.next,i=!1,s=t.pos;for(t.advance();;){let o=t.next;if(o<0)break;if(t.advance(),o==n)if(o==39)if(t.next==39)t.advance();else break;else break;else if(o==92&&n==34)t.next>=0&&t.advance();else if(ys(o)){if(e)return!1;i=!0}else if(e&&t.pos>=s+1024)return!1}return!i}function NI(t){for(let e=[],n=t.pos+1024;;)if(t.next==91||t.next==123)e.push(t.next),t.advance();else if(t.next==39||t.next==34){if(!Ux(t,!0))return!1}else if(t.next==93||t.next==125){if(e[e.length-1]!=t.next-2)return!1;if(e.pop(),t.advance(),!e.length)return!0}else{if(t.next<0||t.pos>n||ys(t.next))return!1;t.advance()}}const DI="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function ud(t){return t<33?"u":t>125?"s":DI[t-33]}function f0(t,e){let n=ud(t);return n!="u"&&!(e&&n=="f")}function lT(t,e,n,i){if(ud(t.next)=="s"||(t.next==63||t.next==58||t.next==45)&&f0(t.peek(1),n))t.advance();else return!1;let s=t.pos;for(;;){let o=t.next,l=0,c=i+1;for(;rT(o);){if(ys(o)){if(e)return!1;c=0}else c++;o=t.peek(++l)}if(!(o>=0&&(o==58?f0(t.peek(l+1),n):o==35?t.peek(l-1)!=32:f0(o,n)))||!n&&c<=i||c==0&&!n&&(Ul(t,45,l)||Ul(t,46,l)))break;if(e&&ud(o)=="f")return!1;for(let h=l;h>=0;h--)t.advance();if(e&&t.pos>s+1024)return!1}return!0}const RI=new Fd((t,e)=>{if(t.next==33)oT(t),t.acceptToken(xI);else if(t.next==38||t.next==42){let n=t.next==38?mI:yI;Ty(t),t.acceptToken(n)}else t.next==39||t.next==34?(Ux(t,!1),t.acceptToken(gI)):lT(t,!1,e.context.type==Ic,e.context.depth)&&t.acceptToken(pI)}),_I=new Fd((t,e)=>{let n=e.context.type==Ey?e.context.depth:-1,i=t.pos;e:for(;;){let s=0,o=t.next;for(;o==32;)o=t.peek(++s);if(!s&&(Ul(t,45,s)||Ul(t,46,s))||!ys(o)&&(n<0&&(n=Math.max(e.context.depth+1,s)),s<n))break;for(;;){if(t.next<0)break e;let l=ys(t.next);if(t.advance(),l)continue e;i=t.pos}}t.acceptTokenTo(sT,i)}),LI=_E({DirectiveName:te.keyword,DirectiveContent:te.attributeValue,"DirectiveEnd DocEnd":te.meta,QuotedLiteral:te.string,BlockLiteralHeader:te.special(te.string),BlockLiteralContent:te.content,Literal:te.content,"Key/Literal Key/QuotedLiteral":te.definition(te.propertyName),"Anchor Alias":te.labelName,Tag:te.typeName,Comment:te.lineComment,": , -":te.separator,"?":te.punctuation,"[ ]":te.squareBracket,"{ }":te.brace}),BI=cd.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:OI,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[LI],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[EI,MI,RI,_I,0,1],topRules:{Stream:[0,15]},tokenPrec:0}),zI=Fh.define({name:"yaml",parser:BI.configure({props:[PE.add({Stream:t=>{for(let e=t.node.resolve(t.pos,-1);e&&e.to>=t.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return t.baseIndentFor(e);if(e.name=="BlockLiteral")return t.baseIndentFor(e)+t.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return t.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let n=t.column(e.from,1);if(n==t.lineIndent(e.from,1))return n;if(e.to>t.pos)return null}}return null},FlowMapping:eC({closing:"}"}),FlowSequence:eC({closing:"]"})}),IE.add({"FlowMapping FlowSequence":p9,"Item Pair BlockLiteral":(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function PI(){return new i9(zI)}var HI=t=>{var{theme:e,settings:n={},styles:i=[]}=t,s={".cm-gutters":{}},o={};n.background&&(o.backgroundColor=n.background),n.backgroundImage&&(o.backgroundImage=n.backgroundImage),n.foreground&&(o.color=n.foreground),n.fontSize&&(o.fontSize=n.fontSize),(n.background||n.foreground)&&(s["&"]=o),n.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(s[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(s[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(s[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(s[".cm-content"]={caretColor:n.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var l={};n.gutterActiveForeground&&(l.color=n.gutterActiveForeground),n.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:n.lineHighlight},l.backgroundColor=n.lineHighlight),s[".cm-activeLineGutter"]=l,n.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var c=pe.theme(s,{dark:e==="dark"}),f=Ql.define(i),h=[c,Tx(f)];return h};function Fl(){const t=q.useContext(yA);if(!t)throw new Error("usePolicyContext must be used within a PolicyProvider");return t}const jI=HI({theme:"dark",settings:{background:"#0f172a",foreground:"#e2e8f0",caret:"#6366f1",selection:"#6366f140",selectionMatch:"#6366f120",gutterBackground:"#1e293b",gutterForeground:"#475569",gutterActiveForeground:"#94a3b8",gutterBorder:"#334155",lineHighlight:"#1e293b50"},styles:[{tag:te.keyword,color:"#c084fc"},{tag:te.string,color:"#86efac"},{tag:te.number,color:"#fbbf24"},{tag:te.bool,color:"#f472b6"},{tag:te.null,color:"#94a3b8"},{tag:te.propertyName,color:"#67e8f9"},{tag:te.comment,color:"#475569"},{tag:te.operator,color:"#94a3b8"},{tag:te.punctuation,color:"#64748b"},{tag:te.meta,color:"#818cf8"},{tag:te.atom,color:"#f472b6"}]}),Ny=Me.define(),II=Se.line({class:"cm-highlighted-rule"}),VI=zt.define({create(){return Se.none},update(t,e){for(const n of e.effects)if(n.is(Ny)){if(!n.value)return Se.none;const{from:i,to:s}=n.value,o=e.state.doc,l=o.lines,c=Math.max(1,Math.min(i,l)),f=Math.max(1,Math.min(s,l)),h=[];for(let p=c;p<=f;p++){const g=o.line(p).from;h.push(II.range(g))}return Se.set(h,!0)}return t},provide:t=>pe.decorations.from(t)});function UI({onYamlChange:t}){const{state:e}=Fl(),n=q.useRef(null),i=q.useCallback(l=>{n.current=l},[]),s=q.useCallback(l=>{t(l)},[t]);q.useEffect(()=>{const l=n.current;if(!l)return;const c=e.highlightedLines;if(c){l.dispatch({effects:Ny.of({from:c.startLine,to:c.endLine})});const f=l.state.doc,h=f.lines,p=Math.max(1,Math.min(c.startLine,h)),g=f.line(p).from;l.dispatch({effects:pe.scrollIntoView(g,{y:"center"})})}else l.dispatch({effects:Ny.of(null)})},[e.highlightedLines]);const o=q.useMemo(()=>[PI(),VI],[]);return C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b border-slate-700 bg-slate-800/50",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),C.jsx("span",{className:"text-xs font-semibold text-slate-300",children:"YAML"}),C.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-400 font-mono",children:"editable"})]})}),C.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:e.yamlContent?C.jsx(eT,{value:e.yamlContent,height:"100%",extensions:o,theme:jI,onChange:s,onCreateEditor:i,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightActiveLine:!0,foldGutter:!0}}):C.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:C.jsx("p",{className:"text-xs",children:"No policy loaded"})})}),e.parseError&&C.jsx("div",{className:"px-3 py-2 bg-red-500/10 border-t border-red-500/30",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("svg",{className:"w-4 h-4 text-red-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("span",{className:"text-xs text-red-300",children:e.parseError})]})})]})}function $I({data:t}){const e=t.kind==="GlobalNetworkPolicy";return C.jsxs("div",{className:"relative min-w-[280px] max-w-[360px]",children:[C.jsx(or,{type:"target",position:be.Left,id:"left",className:"!w-3 !h-3 !bg-indigo-400 !border-2 !border-indigo-600"}),C.jsxs("div",{className:"rounded-xl border-2 border-indigo-500/60 bg-slate-800/90 shadow-lg shadow-indigo-500/10 backdrop-blur-sm overflow-hidden",children:[C.jsx("div",{className:"bg-indigo-500/20 px-4 py-2 border-b border-indigo-500/30",children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${e?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-indigo-500/20 text-indigo-300 border border-indigo-500/30"}`,children:e?"Global":"Namespaced"}),C.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["tier: ",t.tier,t.order!==void 0?` | order: ${t.order}`:""]})]})}),C.jsxs("div",{className:"px-4 py-3 space-y-2",children:[C.jsxs("div",{children:[C.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Policy"}),C.jsx("div",{className:"text-sm font-semibold text-slate-100 break-all leading-tight mt-0.5",children:t.name})]}),t.namespace&&C.jsxs("div",{children:[C.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Namespace"}),C.jsx("div",{className:"text-xs font-mono text-cyan-300 mt-0.5",children:t.namespace})]}),t.namespaceSelector&&C.jsxs("div",{children:[C.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Namespace Selector"}),C.jsx("div",{className:"text-[11px] font-mono text-amber-300 mt-0.5 break-all leading-snug bg-slate-900/50 rounded px-2 py-1",children:t.namespaceSelector.length>80?t.namespaceSelector.substring(0,80)+"...":t.namespaceSelector})]}),C.jsxs("div",{children:[C.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Selector"}),C.jsx("div",{className:"text-[11px] font-mono text-emerald-300 mt-0.5 break-all leading-snug bg-slate-900/50 rounded px-2 py-1",children:t.selector})]}),t.serviceAccountSelector&&C.jsxs("div",{children:[C.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Service Account Selector"}),C.jsx("div",{className:"text-[11px] font-mono text-cyan-300 mt-0.5 break-all leading-snug bg-slate-900/50 rounded px-2 py-1",children:t.serviceAccountSelector.length>80?t.serviceAccountSelector.substring(0,80)+"...":t.serviceAccountSelector})]}),(t.preDNAT||t.applyOnForward||t.doNotTrack)&&C.jsxs("div",{className:"flex flex-wrap gap-1.5 pt-1",children:[t.preDNAT&&C.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg bg-violet-500/10 text-violet-300 border border-violet-500/30",children:[C.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"preDNAT"]}),t.applyOnForward&&C.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg bg-teal-500/10 text-teal-300 border border-teal-500/30",children:[C.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"applyOnForward"]}),t.doNotTrack&&C.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg bg-rose-500/10 text-rose-300 border border-rose-500/30",children:[C.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"doNotTrack"]})]}),C.jsxs("div",{className:"flex gap-2 pt-1",children:[C.jsx("div",{className:`flex-1 text-center text-[10px] font-bold uppercase tracking-wider px-2 py-1.5 rounded-lg border ${t.effectiveIngressDefault==="deny"?"bg-red-500/10 text-red-400 border-red-500/30":"bg-green-500/10 text-green-400 border-green-500/30"}`,children:`Ingress Default ${t.effectiveIngressDefault==="deny"?"Deny":"Allow"}`}),C.jsx("div",{className:`flex-1 text-center text-[10px] font-bold uppercase tracking-wider px-2 py-1.5 rounded-lg border ${t.effectiveEgressDefault==="deny"?"bg-red-500/10 text-red-400 border-red-500/30":"bg-green-500/10 text-green-400 border-green-500/30"}`,children:`Egress Default ${t.effectiveEgressDefault==="deny"?"Deny":"Allow"}`})]})]})]}),C.jsx(or,{type:"source",position:be.Right,id:"right",className:"!w-3 !h-3 !bg-indigo-400 !border-2 !border-indigo-600"})]})}const qI=q.memo($I),XC=3;function QI(t){switch(t){case"outsideCluster":return"";case"inNamespace":return"";case"inCluster":return"";default:return""}}function YI(t){switch(t){case"outsideCluster":return{border:"border-orange-500/50",bg:"bg-slate-800/90",headerBg:"bg-orange-500/15",iconBg:"bg-orange-500/20"};case"inNamespace":return{border:"border-cyan-500/50",bg:"bg-slate-800/90",headerBg:"bg-cyan-500/15",iconBg:"bg-cyan-500/20"};case"inCluster":return{border:"border-purple-500/50",bg:"bg-slate-800/90",headerBg:"bg-purple-500/15",iconBg:"bg-purple-500/20"};default:return{border:"border-slate-500/50",bg:"bg-slate-800/90",headerBg:"bg-slate-500/15",iconBg:"bg-slate-500/20"}}}function aT(t){switch(t){case"Allow":return{card:"bg-green-500/8 border-green-500/20 text-green-300",dot:"bg-green-400"};case"Deny":return{card:"bg-red-500/8 border-red-500/20 text-red-300",dot:"bg-red-400"};case"Log":return{card:"bg-amber-500/8 border-amber-500/20 text-amber-300",dot:"bg-amber-400"};case"Pass":return{card:"bg-blue-500/8 border-blue-500/20 text-blue-300",dot:"bg-blue-400"}}}function fd({ports:t,highlight:e}){if(t.length===0)return null;const n=e?"text-orange-400 font-semibold":"opacity-75";if(t.length<=XC)return C.jsxs("span",{className:`font-mono text-[10px] ${n}`,children:[":",t.join(", ")]});const i=t.slice(0,XC),s=t.join(`
`);return C.jsxs("span",{className:`font-mono text-[10px] ${n}`,children:[":",i.join(", ")," ",C.jsx("span",{className:"ports-hint text-[10px]","data-tooltip":s,children:"*"})]})}function XI({cidr:t,action:e,protocol:n,ports:i,notNets:s,notPorts:o,oppositeLabel:l,oppositePorts:c,oppositeSelector:f,oppositeNets:h,sourceRange:p,onHover:g}){const y=aT(e);return C.jsxs("div",{className:`text-[11px] px-2.5 py-1.5 rounded-lg border ${y.card}`,onMouseEnter:p&&g?()=>g(p):void 0,onMouseLeave:g?()=>g(null):void 0,children:[C.jsxs("div",{className:"flex items-center gap-1.5",children:[C.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full shrink-0 ${y.dot}`}),C.jsx("span",{className:"font-bold uppercase text-[10px]",children:e}),C.jsx("span",{className:"font-mono text-[10px] opacity-90 flex-1 truncate",children:t}),n&&C.jsx("span",{className:"font-mono text-[10px] text-orange-400 font-semibold shrink-0 ml-1",children:n})]}),i&&i.length>0&&C.jsx("div",{className:"flex justify-end mt-0.5",children:C.jsx(fd,{ports:i,highlight:!0})}),l&&(h||f||c&&c.length>0)&&C.jsxs("div",{className:"font-mono text-[10px] text-amber-400/70 pl-3 leading-snug mt-0.5",children:[h&&h.length>0&&C.jsxs("div",{className:"truncate",children:[l,": ",h.length<=3?h.join(", "):`${h.slice(0,2).join(", ")} +${h.length-2} more`]}),f&&C.jsxs("div",{className:"truncate",children:[l,": ",f]}),c&&c.length>0&&C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsxs("span",{children:[l,":"]}),C.jsx(fd,{ports:c,highlight:!0})]})]}),s&&s.length>0&&C.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT: ",s.join(", ")]}),o&&o.length>0&&C.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT ports: ",o.join(", ")]})]})}function cT({rule:t,onHover:e}){const n=aT(t.action),i=t.dstPorts??t.srcPorts,s=t.dstSelector??t.srcSelector,o=t.dstNets??t.srcNets,l=t.dstPorts||t.dstSelector||t.dstNets?"dst":t.srcPorts||t.srcSelector||t.srcNets?"src":null;return C.jsxs("div",{className:`text-[11px] px-2.5 py-1.5 rounded-lg border ${n.card}`,onMouseEnter:t.sourceRange&&e?()=>e(t.sourceRange):void 0,onMouseLeave:e?()=>e(null):void 0,children:[C.jsxs("div",{className:"flex items-center gap-1.5",children:[C.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full shrink-0 ${n.dot}`}),C.jsx("span",{className:"font-bold uppercase text-[10px]",children:t.action}),C.jsx("span",{className:"flex-1"}),t.protocol&&C.jsx("span",{className:"font-mono text-[10px] text-orange-400 font-semibold shrink-0",children:t.protocol})]}),t.ports&&t.ports.length>0&&C.jsx("div",{className:"flex justify-end mt-0.5",children:C.jsx(fd,{ports:t.ports,highlight:!0})}),t.nets&&t.nets.length>0&&C.jsx("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug",children:t.nets.length<=3?t.nets.join(", "):`${t.nets.slice(0,2).join(", ")} +${t.nets.length-2} more`}),t.services&&C.jsxs("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug",children:["svc: ",t.services.name," ",C.jsxs("span",{className:"text-slate-500",children:["(",t.services.namespace,")"]})]}),t.serviceAccounts&&C.jsxs("div",{className:"font-mono text-[10px] text-cyan-400/70 pl-3 leading-snug",children:[t.serviceAccounts.names&&t.serviceAccounts.names.map((c,f)=>C.jsxs("div",{children:["sa: ",c]},f)),t.serviceAccounts.selector&&C.jsxs("div",{children:["sa selector: ",t.serviceAccounts.selector]})]}),t.selector&&C.jsx("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug truncate",children:t.selector}),t.namespaceSelector&&C.jsxs("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug truncate",children:["ns: ",t.namespaceSelector]}),l&&(o||s||i&&i.length>0)&&C.jsxs("div",{className:"font-mono text-[10px] text-amber-400/70 pl-3 leading-snug mt-0.5",children:[o&&o.length>0&&C.jsxs("div",{className:"truncate",children:[l,": ",o.length<=3?o.join(", "):`${o.slice(0,2).join(", ")} +${o.length-2} more`]}),s&&C.jsxs("div",{className:"truncate",children:[l,": ",s]}),i&&i.length>0&&C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsxs("span",{children:[l,":"]}),C.jsx(fd,{ports:i,highlight:!0})]})]}),t.notNets&&t.notNets.length>0&&C.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT: ",t.notNets.join(", ")]}),t.notPorts&&t.notPorts.length>0&&C.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT ports: ",t.notPorts.join(", ")]})]})}function FI(t,e){const n=[],i=[];return t.forEach((s,o)=>{s.nets&&s.nets.length>0?s.nets.forEach((l,c)=>{n.push({key:`${o}-cidr-${c}`,cidr:l,rule:s})}):i.push({key:`${o}-nonet`,rule:s})}),C.jsxs(C.Fragment,{children:[n.map(({key:s,cidr:o,rule:l})=>{const c=l.dstPorts??l.srcPorts,f=l.dstSelector??l.srcSelector,h=l.dstNets??l.srcNets,p=l.dstPorts||l.dstSelector||l.dstNets?"dst":l.srcPorts||l.srcSelector||l.srcNets?"src":null;return C.jsx(XI,{cidr:o,action:l.action,protocol:l.protocol,ports:l.ports,notNets:l.notNets,notPorts:l.notPorts,oppositeLabel:p,oppositePorts:c,oppositeSelector:f,oppositeNets:h,sourceRange:l.sourceRange,onHover:e},s)}),i.map(({key:s,rule:o})=>C.jsx(cT,{rule:o,onHover:e},s))]})}function GI(t){switch(t){case"outsideCluster":return"Any Endpoint";case"inNamespace":return"Any pod";case"inCluster":return"Everything in the cluster";default:return"All traffic"}}function WI({data:t}){const{dispatch:e}=Fl(),n=YI(t.category),i=QI(t.category),s=t.direction==="ingress",{groups:o}=t,l=t.category==="outsideCluster",c=q.useCallback(f=>{e({type:"HIGHLIGHT_LINES",payload:f})},[e]);return C.jsxs("div",{className:"min-w-[240px] max-w-[320px]",children:[s&&C.jsx(or,{type:"source",position:be.Right,id:"right",className:"!w-3 !h-3 !bg-slate-400 !border-2 !border-slate-600"}),!s&&C.jsx(or,{type:"target",position:be.Left,id:"left",className:"!w-3 !h-3 !bg-slate-400 !border-2 !border-slate-600"}),C.jsxs("div",{className:`rounded-xl border-2 ${n.border} ${n.bg} shadow-lg backdrop-blur-sm overflow-hidden`,children:[C.jsx("div",{className:`${n.headerBg} px-4 py-2 border-b ${n.border}`,children:C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("span",{className:`text-lg ${n.iconBg} rounded-lg p-1 leading-none`,children:i}),C.jsxs("div",{children:[C.jsx("div",{className:"text-sm font-semibold text-slate-100",children:t.label}),C.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold",children:s?"Ingress Source":"Egress Destination"})]})]})}),C.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[o.rules.length===0&&t.unmanaged&&C.jsx("div",{className:"text-[11px] px-2.5 py-2 text-center text-green-400/80 font-semibold",children:GI(t.category)}),o.rules.length===0&&!t.unmanaged&&C.jsx("div",{className:"text-[11px] px-2.5 py-2 text-center text-slate-500 italic",children:"No rules"}),l&&o.rules.length>0&&FI(o.rules,c),!l&&o.rules.map((f,h)=>C.jsx(cT,{rule:f,onHover:c},h)),o.inferredStatuses&&o.inferredStatuses.length>0&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"border-t border-slate-600/40 my-1.5"}),o.inferredStatuses.map((f,h)=>{const p=f.state==="allowed"?"bg-green-500/5 border-green-500/15 text-green-400/80":f.state==="denied"?"bg-red-500/5 border-red-500/15 text-red-400/80":"bg-orange-500/5 border-orange-500/15 text-orange-400/80",g=f.state==="allowed"?"":f.state==="denied"?"":"",y=f.state==="allowed"?"text-green-400/70":f.state==="denied"?"text-red-400/70":"text-orange-400/70",v=f.state==="allowed"?"allowed":f.state==="denied"?"denied":"likely";return C.jsxs("div",{className:`text-[11px] px-2.5 py-1.5 rounded-lg border ${p}`,title:f.reason,children:[C.jsxs("div",{className:"flex items-center gap-1.5",children:[C.jsx("span",{className:"text-[10px]",children:g}),C.jsx("span",{className:"font-semibold text-[10px]",children:f.label}),C.jsx("span",{className:`text-[10px] font-mono ${y}`,children:v})]}),C.jsx("div",{className:"text-[9px] opacity-60 pl-5 leading-snug mt-0.5",children:f.reason})]},h)})]})]})]})]})}const KI=q.memo(WI);function ZI({id:t,sourceX:e,sourceY:n,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,style:c={},data:f,markerEnd:h}){const[p,g,y]=Ky({sourceX:e,sourceY:n,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),v=c?.stroke||"#64748b";let b="";if(f?.category!=="outsideCluster"&&f?.rules&&f.rules.length>0){const S=f.rules.map(k=>{const T=[];k.protocol&&T.push(k.protocol);const O=k.ports&&k.ports.length>0?k.ports:k.dstPorts&&k.dstPorts.length>0?k.dstPorts:k.srcPorts&&k.srcPorts.length>0?k.srcPorts:[];return O.length>0&&T.push(`:${O.join(",")}`),T.join("")||k.action});b=[...new Set(S)].join(" | ")}return C.jsxs(C.Fragment,{children:[C.jsx(Jc,{id:t,path:p,markerEnd:h,style:{...c,strokeWidth:2,stroke:v}}),b&&C.jsx(WB,{children:C.jsx("div",{className:"px-2 py-0.5 rounded-md text-[10px] font-mono font-semibold border backdrop-blur-sm whitespace-nowrap",style:{position:"absolute",transform:`translate(-50%, -50%) translate(${g}px, ${y}px)`,pointerEvents:"all",backgroundColor:`${v}15`,borderColor:`${v}40`,color:v},children:b})})]})}const JI=q.memo(ZI);function kh(t){return typeof t=="number"?String(t):t}function hd(t){const e=t.split(".").map(Number);return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0}function Dy(t,e){const[n,i]=t.split("/"),s=i!==void 0?Number(i):32,o=s===0?0:-1<<32-s>>>0;return(hd(n)&o)===(hd(e)&o)}const eV=["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","100.64.0.0/10"];function uT(t){return eV.every(e=>{const[n,i]=e.split("/"),s=Number(i);return t.some(o=>{const[l,c]=o.split("/"),f=Number(c);if(f>s)return!1;const h=-1<<32-f>>>0;return(hd(l)&h)===(hd(n)&h)})})}function tV(t,e){if(typeof e=="number")return t===e;if(e.includes(":")){const[n,i]=e.split(":"),s=Number(n),o=Number(i);if(!Number.isNaN(s)&&!Number.isNaN(o))return t>=s&&t<=o}return!1}function Ry(t,e){return!t||t.nets&&t.nets.length>0?"outsideCluster":t.services?"inCluster":t.serviceAccounts?t.namespaceSelector?"inCluster":e?"inNamespace":"inCluster":t.namespaceSelector?"inCluster":t.selector?e?"inNamespace":"inCluster":"outsideCluster"}function Vr(t){return!t||t.length===0?[]:t.map(kh)}function FC(t,e,n){const i=e==="ingress"?t.source:t.destination,s=e==="ingress"?t.destination:t.source,o=[];if(o.push(`${t.action}`),t.protocol&&o.push(`${t.protocol}`),i?.ports&&i.ports.length>0&&o.push(`port${i.ports.length>1?"s":""} ${Vr(i.ports).join(", ")}`),i?.nets&&i.nets.length>0&&(i.nets.length<=3?o.push(`to ${i.nets.join(", ")}`):o.push(`to ${i.nets.length} CIDRs`)),i?.selector&&o.push(`selector: ${i.selector}`),i?.namespaceSelector&&o.push(`ns: ${i.namespaceSelector}`),i?.services&&o.push(`svc: ${i.services.name}/${i.services.namespace}`),i?.serviceAccounts&&(i.serviceAccounts.names&&i.serviceAccounts.names.length>0&&o.push(`sa: ${i.serviceAccounts.names.join(", ")}`),i.serviceAccounts.selector&&o.push(`sa selector: ${i.serviceAccounts.selector}`)),i?.notNets&&i.notNets.length>0&&o.push(`NOT nets: ${i.notNets.join(", ")}`),i?.notPorts&&i.notPorts.length>0&&o.push(`NOT ports: ${Vr(i.notPorts).join(", ")}`),s?.ports&&s.ports.length>0){const l=e==="ingress"?"dst":"src";o.push(`${l} port${s.ports.length>1?"s":""} ${Vr(s.ports).join(", ")}`)}if(s?.selector){const l=e==="ingress"?"dst":"src";o.push(`${l}: ${s.selector}`)}return{action:t.action,protocol:t.protocol?String(t.protocol):void 0,ports:i?.ports?Vr(i.ports):void 0,nets:i?.nets,notNets:i?.notNets,selector:i?.selector,notSelector:i?.notSelector,namespaceSelector:i?.namespaceSelector,notPorts:i?.notPorts?Vr(i.notPorts):void 0,services:i?.services,serviceAccounts:i?.serviceAccounts,description:o.join(" "),dstPorts:e==="ingress"&&s?.ports?Vr(s.ports):void 0,dstSelector:e==="ingress"?s?.selector:void 0,dstNets:e==="ingress"?s?.nets:void 0,srcPorts:e==="egress"&&s?.ports?Vr(s.ports):void 0,srcSelector:e==="egress"?s?.selector:void 0,srcNets:e==="egress"?s?.nets:void 0,sourceRange:n}}const nV=["169.254.25.10"],iV=["coredns","nodelocaldns","node-local-dns"],sV=["kube-dns"];function rV(t,e){const n=e==="ingress"?t.source:t.destination;return n?!!(n.services&&sV.includes(n.services.name)||n.serviceAccounts?.names&&n.serviceAccounts.names.some(i=>iV.includes(i))||n.nets&&nV.some(i=>n.nets.some(s=>Dy(s,i)))||n.ports&&n.ports.some(i=>i===53||i==="53")):!1}function fT(t){return t?!!(t.nets&&t.nets.length>0||t.ports&&t.ports.length>0||t.selector||t.namespaceSelector||t.services||t.serviceAccounts||t.notNets&&t.notNets.length>0||t.notPorts&&t.notPorts.length>0||t.notSelector):!1}function GC(t,e){if(t.protocol)return!1;const n=e==="ingress"?t.destination:t.source;if(fT(n))return!1;const i=e==="ingress"?t.source:t.destination;return!!(!i||i.nets&&uT(i.nets))}function Vc(t,e){if(t.protocol)return!1;const n=e==="ingress"?t.destination:t.source;if(fT(n))return!1;const i=e==="ingress"?t.source:t.destination;return!!(!i||i.nets&&i.nets.length===1&&i.nets[0]==="0.0.0.0/0"&&!i.ports)}function dd(t,e,n){let i=!1;for(const s of t){if(!Vc(s,e)){s.action==="Deny"&&(i=!0);continue}if(!(s.action==="Log"||s.action==="Pass")){if(s.action==="Allow")return i?"deny":"allow";if(s.action==="Deny")return"deny"}}return n==="allow"?"allow":"deny"}function WC(t,e){let n=!1;for(const i of t){if(!Vc(i,e)){i.action==="Deny"&&(n=!0);continue}if(!(i.action==="Log"||i.action==="Pass"))return i.action==="Allow"?n:!1}return!1}function _y(t,e){const n=[],i=" (traffic is also logged)";let s=!1,o="denied",l="",c=!1;for(const y of t){if(s)break;if(rV(y,e)){if(y.action==="Log"){c=!0;continue}y.action==="Allow"?(s=!0,o="allowed",l="Explicit allow rule matches DNS"):y.action==="Deny"&&(s=!0,o="denied",l="Explicit deny rule matches DNS");continue}if(GC(y,e)){if(y.action==="Log"){c=!0;continue}y.action==="Deny"?(s=!0,o="denied",l="Denied by broad private-range deny rule"):y.action==="Allow"&&Vc(y,e)&&(s=!0,o="allowed",l="Allowed by unrestricted allow rule")}}s||(l="No matching rule found; depends on policy default"),c&&(l+=i),n.push({label:"Kubernetes DNS",state:o,reason:l});let f=!1,h="denied",p="",g=!1;for(const y of t){if(f)break;if(GC(y,e)){if(y.action==="Log"){g=!0;continue}y.action==="Allow"?(f=!0,h="allowed",p="Broad allow covers all cluster traffic"):y.action==="Deny"&&(f=!0,h="denied",p="Broad deny blocks all cluster traffic")}if(!f&&Vc(y,e)){if(y.action==="Log"){g=!0;continue}y.action==="Allow"?(f=!0,h="allowed",p="Unrestricted allow rule covers everything"):y.action==="Deny"&&(f=!0,h="denied",p="Unrestricted deny rule blocks everything")}}return f||(p="No matching rule found; depends on policy default"),g&&(p+=i),n.push({label:"Everything in the cluster",state:h,reason:p}),n}function oV(t,e,n){const i=e==="ingress"?t.source:t.destination;if(!i)return"direct";if(Ry(i,n)==="inNamespace"){if(i.selector==="all()")return"direct";if(i.serviceAccounts){const o=i.serviceAccounts.names&&i.serviceAccounts.names.length>0,l=!!i.serviceAccounts.selector;if(!o&&!l)return"direct"}return!i.selector&&!i.serviceAccounts&&!i.services&&!i.nets?"direct":!1}return i.nets&&uT(i.nets)||Vc(t,e)?"implicit":!1}function Ly(t,e,n){if(!n)return[];const i=[],s=" (traffic is also logged)";let o=!1,l="denied",c="",f=!1;for(const h of t){if(o)break;const p=oV(h,e,n);if(p){if(h.action==="Log"){f=!0;continue}p==="direct"?h.action==="Allow"?(o=!0,l="allowed",c="Explicit allow rule targets all pods in namespace"):h.action==="Deny"&&(o=!0,l="denied",c="Explicit deny rule targets all pods in namespace"):p==="implicit"&&(h.action==="Allow"?(o=!0,l="uncertain",c="Broad CIDR allow may cover pod IPs (network-topology dependent)"):h.action==="Deny"&&(o=!0,l="uncertain",c="Broad CIDR deny may block pod IPs (network-topology dependent)"))}}return o||(c="No matching rule found; depends on policy default"),f&&(c+=s),i.push({label:"Any pod",state:l,reason:c}),i}function KC(t){switch(t){case"outsideCluster":return"Outside Cluster";case"inNamespace":return"In Namespace";case"inCluster":return"In Cluster"}}function lV(t,e){const n=[],i=[],s=dd(t.ingressRules,"ingress",t.ingressDefault),o=dd(t.egressRules,"egress",t.egressDefault),l={name:t.name,namespace:t.namespace,kind:t.kind,selector:t.selector,tier:t.tier,order:t.order,namespaceSelector:t.namespaceSelector,serviceAccountSelector:t.serviceAccountSelector,ingressDefault:t.ingressDefault,egressDefault:t.egressDefault,effectiveIngressDefault:s,effectiveEgressDefault:o,applyOnForward:t.raw.spec.applyOnForward||void 0,preDNAT:t.raw.spec.preDNAT||void 0,doNotTrack:t.raw.spec.doNotTrack||void 0};n.push({id:"policy-center",type:"policyNode",position:{x:500,y:200},data:l,draggable:!0});const c=e?.ingress??[],f=new Map;for(let k=0;k<t.ingressRules.length;k++){const T=t.ingressRules[k],O=T.source,M=Ry(O,t.namespace),L=k<c.length?c[k]:void 0,_=FC(T,"ingress",L);f.has(M)||f.set(M,{rules:[],hasAllow:!1,hasDeny:!1,hasLog:!1});const R=f.get(M);R.rules.push(_),T.action==="Allow"&&(R.hasAllow=!0),T.action==="Deny"&&(R.hasDeny=!0),T.action==="Log"&&(R.hasLog=!0)}const h=e?.egress??[],p=new Map;for(let k=0;k<t.egressRules.length;k++){const T=t.egressRules[k],O=T.destination,M=Ry(O,t.namespace),L=k<h.length?h[k]:void 0,_=FC(T,"egress",L);p.has(M)||p.set(M,{rules:[],hasAllow:!1,hasDeny:!1,hasLog:!1});const R=p.get(M);R.rules.push(_),T.action==="Allow"&&(R.hasAllow=!0),T.action==="Deny"&&(R.hasDeny=!0),T.action==="Log"&&(R.hasLog=!0)}const g=["outsideCluster","inNamespace","inCluster"],y=220;function v(k,T,O,M,L,_){const R=_!==!1,X=R?_y(M,k):void 0,U=R?Ly(M,k,L):void 0;let ne=50;for(const $ of g){const Q=T.get($),Z=!Q||Q.rules.length===0,B=`${k}-${$}`,V=R?$==="inCluster"?X:$==="inNamespace"&&U&&U.length>0?U:void 0:void 0,N={category:$,label:KC($),rules:Q?.rules??[],hasAllow:Q?.hasAllow??!1,hasDeny:Q?.hasDeny??!1,hasLog:Q?.hasLog??!1,inferredStatuses:V},P={category:$,label:KC($),direction:k,groups:N,unmanaged:!R||void 0};if(n.push({id:B,type:"ruleNode",position:{x:O,y:ne},data:P,draggable:!0}),R)if(Z){const j={action:"Allow",rules:[],category:$},z={id:`edge-${B}`,type:"policyEdge",data:j,style:{stroke:"#475569",strokeWidth:1,strokeDasharray:"6 4",opacity:.4},animated:!1,markerEnd:{type:eo.ArrowClosed,color:"#475569",width:16,height:16}};k==="ingress"?i.push({...z,source:B,target:"policy-center",sourceHandle:"right",targetHandle:"left"}):i.push({...z,source:"policy-center",target:B,sourceHandle:"right",targetHandle:"left"})}else{const j=Q.hasAllow,z=Q.hasDeny,D=Q.hasLog&&!j&&!z,H=D||z&&j?"#f59e0b":z?"#ef4444":"#22c55e",ie={action:D?"Log":z?"Deny":"Allow",rules:Q.rules,category:$},ce={id:`edge-${B}`,type:"policyEdge",data:ie,style:{stroke:H,strokeWidth:2},animated:!0,markerEnd:{type:eo.ArrowClosed,color:H,width:16,height:16}};k==="ingress"?i.push({...ce,source:B,target:"policy-center",sourceHandle:"right",targetHandle:"left"}):i.push({...ce,source:"policy-center",target:B,sourceHandle:"right",targetHandle:"left"})}else{const j={action:"Allow",rules:[],category:$},z={id:`edge-${B}`,type:"policyEdge",data:j,style:{stroke:"#22c55e",strokeWidth:2},animated:!0,markerEnd:{type:eo.ArrowClosed,color:"#22c55e",width:16,height:16}};k==="ingress"?i.push({...z,source:B,target:"policy-center",sourceHandle:"right",targetHandle:"left"}):i.push({...z,source:"policy-center",target:B,sourceHandle:"right",targetHandle:"left"})}ne+=y}}const b=t.types.includes("Ingress");v("ingress",f,0,t.ingressRules,t.namespace,b);const S=t.types.includes("Egress");v("egress",p,1e3,t.egressRules,t.namespace,S);const A=n.filter(k=>k.id!=="policy-center").map(k=>k.position.y);if(A.length>0){const k=Math.min(...A),T=Math.max(...A),O=(k+T)/2,M=n.find(L=>L.id==="policy-center");M&&(M.position.y=O)}return{nodes:n,edges:i}}const aV={policyNode:qI,ruleNode:KI},cV={policyEdge:JI};function uV(){const{state:t,dispatch:e}=Fl(),[n,i,s]=KB([]),[o,l,c]=ZB([]),{fitView:f}=Nd(),h=q.useRef(0);q.useEffect(()=>{if(t.policy){const v=lV(t.policy,t.ruleLineRanges);i(v.nodes),l(v.edges),v.nodes.length!==h.current&&(h.current=v.nodes.length,setTimeout(()=>f({padding:.3,duration:300}),50))}else i([]),l([]),h.current=0},[t.policy,t.ruleLineRanges,i,l,f]);const p=q.useCallback((v,b)=>{e({type:"SELECT_NODE",payload:b.id})},[e]),g=q.useCallback(()=>{e({type:"SELECT_NODE",payload:null})},[e]),y=q.useMemo(()=>({type:"policyEdge",animated:!0}),[]);return t.policy?C.jsxs(FB,{nodes:n,edges:o,onNodesChange:s,onEdgesChange:c,onNodeClick:p,onPaneClick:g,nodeTypes:aV,edgeTypes:cV,defaultEdgeOptions:y,fitView:!0,fitViewOptions:{padding:.3},minZoom:.1,maxZoom:2,proOptions:{hideAttribution:!0},className:"bg-slate-900",children:[C.jsx(u6,{showInteractive:!1,className:"!bg-slate-800 !border-slate-700 !rounded-lg !shadow-lg"}),C.jsx(i6,{variant:hs.Dots,gap:20,size:1,color:"#1e293b"})]}):C.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:C.jsxs("div",{className:"text-center space-y-3",children:[C.jsx("div",{className:"text-5xl opacity-30",children:C.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),C.jsx("p",{className:"text-sm",children:"Import a Calico NetworkPolicy or GlobalNetworkPolicy YAML to visualize"})]})})}function ZC(t){const e=typeof t=="number"?t:parseInt(t,10);return isNaN(e)?"":{53:"DNS",80:"HTTP",443:"HTTPS",22:"SSH",25:"SMTP",110:"POP3",143:"IMAP",993:"IMAPS",995:"POP3S",3306:"MySQL",5432:"PostgreSQL",6379:"Redis",27017:"MongoDB",8080:"HTTP-ALT",8443:"HTTPS-ALT",9090:"Prometheus",9093:"Alertmanager",2379:"etcd",6443:"K8s API",10250:"Kubelet"}[e]||""}function fV(t){return t?String(t):"any protocol"}function JC(t,e){const n=e==="ingress"?t.source:t.destination,i=e==="ingress"?t.destination:t.source,s=[],o=t.action==="Allow"?"+":t.action==="Deny"?"x":t.action==="Log"?"!":"~";if(s.push(`[${o}] ${t.action}`),s.push(e==="ingress"?"incoming":"outgoing"),t.protocol?s.push(`${fV(t.protocol)} traffic`):s.push("traffic"),n?.ports&&n.ports.length>0){const l=n.ports.map(c=>{const f=ZC(c),h=kh(c);return f?`${h} (${f})`:h});s.push(`on port${n.ports.length>1?"s":""} ${l.join(", ")}`)}if(n?.nets&&n.nets.length>0){const l=e==="ingress"?"from":"to";n.nets.length<=3?s.push(`${l} ${n.nets.join(", ")}`):s.push(`${l} ${n.nets.length} CIDR ranges`)}if(n?.selector){const l=e==="ingress"?"from":"to";s.push(`${l} pods matching: ${n.selector}`)}if(n?.namespaceSelector&&s.push(`in namespaces matching: ${n.namespaceSelector}`),n?.services){const l=e==="ingress"?"from":"to";s.push(`${l} service: ${n.services.namespace}/${n.services.name}`)}if(n?.serviceAccounts){const l=e==="ingress"?"from":"to";n.serviceAccounts.names&&n.serviceAccounts.names.length>0?s.push(`${l} service account${n.serviceAccounts.names.length>1?"s":""}: ${n.serviceAccounts.names.join(", ")}`):n.serviceAccounts.selector&&s.push(`${l} service accounts matching: ${n.serviceAccounts.selector}`)}if(n?.notNets&&n.notNets.length>0&&s.push(`(excluding ${n.notNets.join(", ")})`),n?.notPorts&&n.notPorts.length>0&&s.push(`(excluding ports ${n.notPorts.map(kh).join(", ")})`),n?.notSelector&&s.push(`(excluding pods matching: ${n.notSelector})`),!n||!n.nets&&!n.selector&&!n.services&&!n.serviceAccounts){const l=e==="ingress"?"from any source":"to any destination";s.push(l)}if(i){const l=e==="ingress"?"destined for":"originating from";if(i.nets&&i.nets.length>0&&(i.nets.length<=3?s.push(`${l} ${i.nets.join(", ")}`):s.push(`${l} ${i.nets.length} CIDR ranges`)),i.selector&&s.push(`${l} pods matching: ${i.selector}`),i.ports&&i.ports.length>0){const c=i.ports.map(h=>{const p=ZC(h),g=kh(h);return p?`${g} (${p})`:g}),f=e==="ingress"?"dst":"src";s.push(`(${f} port${i.ports.length>1?"s":""} ${c.join(", ")})`)}}return s.join(" ")}function hV(t){const e=[],n=[];n.push(`Kind: ${t.kind}`),n.push(`Name: ${t.name}`),t.namespace&&n.push(`Namespace: ${t.namespace}`),n.push(`Tier: ${t.tier}`),t.order!==void 0&&n.push(`Order: ${t.order} (${t.order<100?"high priority":t.order>5e3?"low priority":"medium priority"})`),n.push(`Applies to: ${t.selector}`),t.namespaceSelector&&n.push(`Namespace selector: ${t.namespaceSelector}`),n.push(`Policy types: ${t.types.join(", ")}`),e.push({title:"Policy Overview",items:n,type:"info"});const i=t.raw.spec;if(i.preDNAT||i.applyOnForward||i.doNotTrack){const l=[];i.preDNAT&&l.push("preDNAT: ENABLED -- Rules are applied before DNAT (destination NAT). This means the policy sees the original destination IP before kube-proxy rewrites it to a pod IP. Required when you want to control access to Kubernetes Service ClusterIPs or NodePorts at the host level."),i.applyOnForward&&l.push("applyOnForward: ENABLED -- Rules are applied to forwarded traffic (traffic that arrives on the host and is forwarded to a local pod or another host). Without this flag, host endpoint policies only affect traffic that is destined for or originates from the host itself. Required together with preDNAT for controlling access to services via ClusterIPs/NodePorts."),i.doNotTrack&&l.push("doNotTrack: ENABLED -- Rules are applied before Linux conntrack. Traffic matching these rules is not tracked by conntrack, which improves performance for high-throughput, stateless traffic (e.g., memcached, load balancers). Both request and response traffic must be explicitly allowed since there is no connection tracking."),i.preDNAT&&i.applyOnForward&&(l.push("---"),l.push("Combined effect: This policy acts as a host-level firewall that controls access to ClusterIPs and NodePorts before NAT translation occurs. It applies to traffic arriving on the host and being forwarded to backend pods. This is the standard pattern for restricting external access to specific Kubernetes services.")),e.push({title:"Policy Flags",items:l,type:"warning"})}const o=[];if(t.types.includes("Ingress")){const l=dd(t.ingressRules,"ingress",t.ingressDefault);l==="allow"&&t.ingressDefault==="deny"?o.push("Ingress effective default: ALLOW (catch-all allow rule overrides the implicit deny)"):l==="deny"&&WC(t.ingressRules,"ingress")?o.push("Ingress default: DENY (deny rules restrict traffic before the catch-all allow)"):o.push("Ingress default: DENY (all ingress traffic not matched by a rule is denied)")}else o.push("Ingress: Not managed by this policy");if(t.types.includes("Egress")){const l=dd(t.egressRules,"egress",t.egressDefault);l==="allow"&&t.egressDefault==="deny"?o.push("Egress effective default: ALLOW (catch-all allow rule overrides the implicit deny)"):l==="deny"&&WC(t.egressRules,"egress")?o.push("Egress default: DENY (deny rules restrict traffic before the catch-all allow)"):o.push("Egress default: DENY (all egress traffic not matched by a rule is denied)")}else o.push("Egress: Not managed by this policy");if(e.push({title:"Default Behavior",items:o,type:"warning"}),t.types.includes("Ingress")){const l=t.ingressRules.map(h=>JC(h,"ingress")),c=Ly(t.ingressRules,"ingress",t.namespace),f=_y(t.ingressRules,"ingress");l.push("---");for(const h of[...c,...f]){const p=h.state==="allowed"?"[+]":h.state==="denied"?"[x]":"[?]",g=h.state==="allowed"?"Allowed":h.state==="denied"?"Denied":"Likely";l.push(`${p} ${h.label}: ${g}  ${h.reason}`)}e.push({title:`Ingress Rules (${t.ingressRules.length})`,items:l,type:"ingress"})}else e.push({title:"Ingress (not managed)",items:["[+] All traffic allowed  this policy does not restrict ingress"],type:"ingress"});if(t.types.includes("Egress")){const l=t.egressRules.map(h=>JC(h,"egress")),c=Ly(t.egressRules,"egress",t.namespace),f=_y(t.egressRules,"egress");l.push("---");for(const h of[...c,...f]){const p=h.state==="allowed"?"[+]":h.state==="denied"?"[x]":"[?]",g=h.state==="allowed"?"Allowed":h.state==="denied"?"Denied":"Likely";l.push(`${p} ${h.label}: ${g}  ${h.reason}`)}e.push({title:`Egress Rules (${t.egressRules.length})`,items:l,type:"egress"})}else e.push({title:"Egress (not managed)",items:["[+] All traffic allowed  this policy does not restrict egress"],type:"egress"});return e}function dV({type:t}){switch(t){case"info":return C.jsx("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"ingress":return C.jsx("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17l-5-5m0 0l5-5m-5 5h12"})});case"egress":return C.jsx("svg",{className:"w-4 h-4 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})});case"warning":return C.jsx("svg",{className:"w-4 h-4 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}}function pV(t){switch(t){case"info":return"border-l-indigo-500";case"ingress":return"border-l-cyan-500";case"egress":return"border-l-orange-500";case"warning":return"border-l-amber-500"}}function gV(){const{state:t}=Fl();if(!t.policy)return null;const e=hV(t.policy);return C.jsxs("div",{className:"h-full overflow-y-auto p-4 bg-slate-900/50",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[C.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),C.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:"Policy Explanation"})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:e.map((n,i)=>C.jsxs("div",{className:`bg-slate-800/60 rounded-lg border border-slate-700/50 border-l-2 ${pV(n.type)} overflow-hidden`,children:[C.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-slate-700/50 bg-slate-800/40",children:[C.jsx(dV,{type:n.type}),C.jsx("span",{className:"text-xs font-semibold text-slate-300",children:n.title})]}),C.jsx("div",{className:"px-3 py-2 space-y-1",children:n.items.map((s,o)=>s==="---"?C.jsx("div",{className:"border-t border-slate-600/50 my-1.5"},o):C.jsx("div",{className:"text-[11px] text-slate-400 leading-relaxed",children:s.startsWith("[+]")?C.jsxs("span",{children:[C.jsx("span",{className:"text-green-400 font-semibold",children:"[ALLOW]"}),s.substring(3)]}):s.startsWith("[x]")?C.jsxs("span",{children:[C.jsx("span",{className:"text-red-400 font-semibold",children:"[DENY]"}),s.substring(3)]}):s.startsWith("[?]")?C.jsxs("span",{children:[C.jsx("span",{className:"text-orange-400 font-semibold",children:"[LIKELY]"}),s.substring(3)]}):s.startsWith("[!]")?C.jsxs("span",{children:[C.jsx("span",{className:"text-amber-400 font-semibold",children:"[LOG]"}),s.substring(3)]}):s.startsWith("[~]")?C.jsxs("span",{children:[C.jsx("span",{className:"text-blue-400 font-semibold",children:"[PASS]"}),s.substring(3)]}):s},o))})]},i))})]})}const mV=["Baseline / Zero Trust","Pod & Namespace Scoping","Database & Stateful Workloads","Gateway API & Ingress Controller","Egress Control & Internet Access","Port & Protocol Restrictions","ServiceAccount-Aware Policies (Calico-Specific)","GlobalNetworkPolicy & Cluster Protection","Production Reference Architectures"],yV=[{id:"default-deny-all",name:"default-deny-all",description:"Denies all ingress and egress traffic for pods in a namespace (zero-trust baseline).",category:"Baseline / Zero Trust",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: production
spec:
  selector: all()
  types:
    - Ingress
    - Egress`},{id:"allow-app-to-app-same-namespace",name:"allow-app-to-app-same-namespace",description:"Allows traffic only between pods with matching labels in one namespace.",category:"Pod & Namespace Scoping",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-app-to-app-same-namespace
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
    - Egress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'api'
      destination:
        ports:
          - 8080
  egress:
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'api'
        ports:
          - 8080`},{id:"allow-cross-namespace-by-label",name:"allow-cross-namespace-by-label",description:"Allows ingress from pods in another namespace using pod + namespace selectors.",category:"Pod & Namespace Scoping",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-cross-namespace-by-label
  namespace: backend
spec:
  selector: app == 'api-server'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'frontend'
        namespaceSelector: team == 'web'
      destination:
        ports:
          - 443`},{id:"allow-namespace-to-namespace",name:"allow-namespace-to-namespace",description:"Allows all traffic from one namespace to another (e.g., app to db namespace).",category:"Pod & Namespace Scoping",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-namespace-to-namespace
  namespace: database
spec:
  selector: all()
  types:
    - Ingress
  ingress:
    - action: Allow
      source:
        namespaceSelector: "projectcalico.org/name == 'application'"`},{id:"allow-db-access-from-app-namespace",name:"allow-db-access-from-app-namespace",description:"Allows application namespace to access DB pods on database ports only.",category:"Database & Stateful Workloads",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-db-access-from-app-namespace
  namespace: database
spec:
  selector: role == 'database'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: role == 'app-server'
        namespaceSelector: "projectcalico.org/name == 'application'"
      destination:
        ports:
          - 5432
          - 3306`},{id:"only-allow-ingress-nginx",name:"only-allow-ingress-nginx",description:"Allows ingress traffic only from ingress-nginx namespace pods.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: only-allow-ingress-nginx
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'ingress-nginx'
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080`},{id:"deny-direct-pod-access",name:"deny-direct-pod-access",description:"Denies all ingress except from the ingress controller, forcing traffic through the gateway.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: deny-direct-pod-access
  namespace: production
spec:
  selector: app == 'web'
  order: 100
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080
    - action: Deny`},{id:"allow-ingress-nginx-egress",name:"allow-ingress-nginx-egress",description:"Restricts application pod egress to only the ingress-nginx services.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-ingress-nginx-egress
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'ingress-nginx'
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
        ports:
          - 80
          - 443`},{id:"gateway-api-allow-traffic",name:"gateway-api-allow-traffic",description:"Allows backend pods to receive HTTPS traffic from Gateway API controller pods.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: gateway-api-allow-traffic
  namespace: production
spec:
  selector: app == 'backend'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app.kubernetes.io/component == 'gateway'
        namespaceSelector: "projectcalico.org/name == 'gateway-system'"
      destination:
        ports:
          - 443`},{id:"gateway-api-default-deny-with-exception",name:"gateway-api-default-deny-with-exception",description:"Default deny all ingress with explicit allow only from Gateway API on port 443.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: gateway-api-default-deny-with-exception
  namespace: production
spec:
  selector: app == 'backend'
  order: 100
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app.kubernetes.io/component == 'gateway'
        namespaceSelector: "projectcalico.org/name == 'gateway-system'"
      destination:
        ports:
          - 443
    - action: Deny`},{id:"gateway-api-cross-namespace-routing",name:"gateway-api-cross-namespace-routing",description:"Allows Gateway API traffic from gateway-system namespace to backend in production namespace.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: gateway-api-cross-namespace-routing
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'gateway-system'"
      destination:
        ports:
          - 443`},{id:"allow-dns-only",name:"allow-dns-only",description:"Allows egress only to DNS (TCP/UDP 53); required for name resolution.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-dns-only
  namespace: production
spec:
  selector: all()
  types:
    - Egress
  egress:
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    - action: Allow
      protocol: TCP
      destination:
        ports:
          - 53`},{id:"allow-kubernetes-api",name:"allow-kubernetes-api",description:"Allows egress to the Kubernetes API server endpoint (port 6443).",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-kubernetes-api
  namespace: production
spec:
  selector: app == 'controller'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.1/32
        ports:
          - 6443`},{id:"allow-internet-access",name:"allow-internet-access",description:"Allows egress to 0.0.0.0/0 for unrestricted public internet access.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-internet-access
  namespace: production
spec:
  selector: app == 'external-client'
  types:
    - Egress
  egress:
    - action: Allow
      destination:
        nets:
          - 0.0.0.0/0`},{id:"allow-internet-except-private",name:"allow-internet-except-private",description:"Allows internet egress but denies RFC 1918 / private networks.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-internet-except-private
  namespace: production
spec:
  selector: app == 'saas-connector'
  types:
    - Egress
  egress:
    - action: Allow
      destination:
        nets:
          - 0.0.0.0/0
        notNets:
          - 10.0.0.0/8
          - 172.16.0.0/12
          - 192.168.0.0/16`},{id:"allow-specific-external-ips",name:"allow-specific-external-ips",description:"Allows egress only to approved external IPs or CIDR ranges.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-specific-external-ips
  namespace: production
spec:
  selector: app == 'payment-gateway'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 203.0.113.0/24
          - 198.51.100.10/32
         ports:
           - 443`},{id:"allow-egress-to-service",name:"allow-egress-to-service",description:"Allows egress only to a specific Kubernetes service (kube-dns). Uses Calico service match.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-egress-to-service
  namespace: production
spec:
  selector: app == 'backend'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: UDP
      destination:
        services:
          name: kube-dns
          namespace: kube-system
        ports:
          - 53
    - action: Allow
      protocol: TCP
      destination:
        services:
          name: redis-master
          namespace: cache
        ports:
          - 6379`},{id:"allow-specific-tcp-ports",name:"allow-specific-tcp-ports",description:"Allows ingress traffic only on approved TCP ports (80, 443, 5432).",category:"Port & Protocol Restrictions",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-specific-tcp-ports
  namespace: production
spec:
  selector: app == 'multi-service'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      destination:
        ports:
          - 80
          - 443
          - 5432`},{id:"allow-udp-only",name:"allow-udp-only",description:"Restricts all ingress traffic to UDP protocol only (e.g., DNS or game server).",category:"Port & Protocol Restrictions",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-udp-only
  namespace: production
spec:
  selector: app == 'dns-server'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    - action: Deny`},{id:"allow-metrics-port",name:"allow-metrics-port",description:"Allows access only to Prometheus metrics ports (9090/9091) from the monitoring namespace.",category:"Port & Protocol Restrictions",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-metrics-port
  namespace: production
spec:
  selector: has(app)
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'monitoring'"
      destination:
        ports:
          - 9090
          - 9091`},{id:"allow-k8s-api-by-serviceaccount",name:"allow-k8s-api-by-serviceaccount",description:"Allows Kubernetes API access only for pods running under specific ServiceAccounts.",category:"ServiceAccount-Aware Policies (Calico-Specific)",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-k8s-api-by-serviceaccount
  namespace: production
spec:
  serviceAccountSelector: "projectcalico.org/name == 'api-controller'"
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.1/32
        ports:
          - 6443`},{id:"allow-db-by-serviceaccount",name:"allow-db-by-serviceaccount",description:"Restricts database ingress to workloads running under approved ServiceAccounts.",category:"ServiceAccount-Aware Policies (Calico-Specific)",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-db-by-serviceaccount
  namespace: database
spec:
  selector: role == 'database'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        serviceAccounts:
          names:
            - backend-api
            - migration-runner
      destination:
        ports:
          - 5432`},{id:"allow-ingress-by-ingress-sa",name:"allow-ingress-by-ingress-sa",description:"Allows ingress traffic only from the ingress controller ServiceAccount.",category:"ServiceAccount-Aware Policies (Calico-Specific)",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-ingress-by-ingress-sa
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        serviceAccounts:
          selector: "role == 'ingress-controller'"
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080`},{id:"gnp-protect-kubernetes-api",name:"gnp-protect-kubernetes-api",description:"Restricts kube-apiserver access to authorized CIDRs and control-plane nodes.",category:"GlobalNetworkPolicy & Cluster Protection",yaml:`apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: protect-kubernetes-api
spec:
  order: 10
  selector: has(node-role.kubernetes.io/control-plane)
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        nets:
          - 10.0.0.0/8
      destination:
        ports:
          - 6443
    - action: Allow
      protocol: TCP
      source:
        selector: has(node-role.kubernetes.io/control-plane)
      destination:
        ports:
          - 6443
    - action: Deny
      protocol: TCP
      destination:
        ports:
          - 6443`},{id:"gnp-lock-down-control-plane",name:"gnp-lock-down-control-plane",description:"Protects etcd, kubelet, and control-plane ports from unauthorized access.",category:"GlobalNetworkPolicy & Cluster Protection",yaml:`apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: lock-down-control-plane
spec:
  order: 5
  selector: has(node-role.kubernetes.io/control-plane)
  types:
    - Ingress
  ingress:
    # Allow etcd peer traffic between control-plane nodes
    - action: Allow
      protocol: TCP
      source:
        selector: has(node-role.kubernetes.io/control-plane)
      destination:
        ports:
          - 2379
          - 2380
    # Allow kubelet API from control-plane nodes
    - action: Allow
      protocol: TCP
      source:
        selector: has(node-role.kubernetes.io/control-plane)
      destination:
        ports:
          - 10250
    # Allow kube-apiserver
    - action: Allow
      protocol: TCP
      destination:
        ports:
          - 6443
    # Allow localhost
    - action: Allow
      destination:
        nets:
          - 127.0.0.0/8
    # Deny everything else to control-plane ports
    - action: Deny
      protocol: TCP
      destination:
        ports:
          - 2379
          - 2380
          - 10250
          - 10259
          - 10257`},{id:"secure-web-application",name:"secure-web-application",description:"Web app reachable only via ingress, DB access restricted, controlled egress.",category:"Production Reference Architectures",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: secure-web-application
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
    - Egress
  ingress:
    # Only accept traffic from ingress controller
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080
    - action: Deny
  egress:
    # Allow DNS resolution
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    # Allow access to backend API
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'api'
        ports:
          - 8443
    # Allow access to database
    - action: Allow
      protocol: TCP
      destination:
        selector: role == 'database'
        namespaceSelector: "projectcalico.org/name == 'database'"
        ports:
          - 5432
    - action: Deny`},{id:"secure-ci-runner",name:"secure-ci-runner",description:"CI runner with kube-api, container registry, and limited internet access.",category:"Production Reference Architectures",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: secure-ci-runner
  namespace: ci
spec:
  selector: app == 'ci-runner'
  types:
    - Ingress
    - Egress
  ingress:
    # Only allow CI controller to reach runners
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'ci-controller'
      destination:
        ports:
          - 8089
    - action: Deny
  egress:
    # DNS resolution
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    # Kubernetes API
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.1/32
        ports:
          - 6443
    # Container registry
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.0/16
        ports:
          - 443
    # Limited internet (HTTPS only, no private nets)
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 0.0.0.0/0
        notNets:
          - 10.0.0.0/8
          - 172.16.0.0/12
          - 192.168.0.0/16
        ports:
          - 443
    - action: Deny`},{id:"secure-vault-deployment",name:"secure-vault-deployment",description:"Vault with peer replication, restricted client access, and metrics exposure.",category:"Production Reference Architectures",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: secure-vault-deployment
  namespace: vault
spec:
  selector: app == 'vault'
  types:
    - Ingress
    - Egress
  ingress:
    # Vault peer replication (raft)
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'vault'
      destination:
        ports:
          - 8201
    # Client API access from application namespaces
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "environment == 'production'"
      destination:
        ports:
          - 8200
    # Prometheus metrics scraping
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'monitoring'"
      destination:
        ports:
          - 8200
    - action: Deny
  egress:
    # DNS resolution
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    # Vault peer traffic
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'vault'
        ports:
          - 8201
    # Backend storage (Consul or etcd)
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'consul'
        ports:
          - 8500
          - 8501
    - action: Deny`}],xV={"Baseline / Zero Trust":"","Pod & Namespace Scoping":"","Database & Stateful Workloads":"","Gateway API & Ingress Controller":"","Egress Control & Internet Access":"","Port & Protocol Restrictions":"","ServiceAccount-Aware Policies (Calico-Specific)":"","GlobalNetworkPolicy & Cluster Protection":"","Production Reference Architectures":""};function vV({open:t,onClose:e,onSelect:n}){const i=q.useRef(null);q.useEffect(()=>{const f=i.current;f&&(t&&!f.open?f.showModal():!t&&f.open&&f.close())},[t]);const s=q.useCallback(f=>{const h=i.current;if(!h)return;const p=h.getBoundingClientRect();f.clientX>=p.left&&f.clientX<=p.right&&f.clientY>=p.top&&f.clientY<=p.bottom||e()},[e]),o=q.useCallback(f=>{f.preventDefault(),e()},[e]),l=q.useCallback(f=>{n(f)},[n]),c=mV.map(f=>({category:f,icon:xV[f]??"",policies:yV.filter(h=>h.category===f)}));return t?C.jsxs("dialog",{ref:i,onClick:s,onCancel:o,className:"fixed inset-0 m-auto w-[56rem] max-w-[90vw] max-h-[80vh] rounded-xl border border-slate-600/80 bg-slate-800 text-slate-100 shadow-2xl backdrop:bg-black/60 backdrop:backdrop-blur-sm p-0 overflow-hidden",children:[C.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700/80 bg-slate-800/95 sticky top-0 z-10",children:[C.jsx("h2",{className:"text-base font-bold text-slate-100 tracking-tight",children:"Policy Examples"}),C.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-100 transition-colors cursor-pointer p-1 rounded-lg hover:bg-slate-700/50","aria-label":"Close",children:C.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsx("div",{className:"overflow-y-auto px-6 py-4",style:{maxHeight:"calc(80vh - 4rem)"},children:c.map(({category:f,icon:h,policies:p})=>C.jsxs("div",{className:"mb-6 last:mb-2",children:[C.jsxs("h3",{className:"text-sm font-semibold text-indigo-300 mb-2 flex items-center gap-2",children:[C.jsx("span",{children:h}),C.jsx("span",{children:f})]}),C.jsxs("table",{className:"w-full text-left border-collapse",children:[C.jsx("thead",{children:C.jsxs("tr",{className:"border-b border-slate-700/60",children:[C.jsx("th",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold pb-1.5 pr-4 w-[38%]",children:"Policy name"}),C.jsx("th",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold pb-1.5",children:"Description"})]})}),C.jsx("tbody",{children:p.map(g=>C.jsxs("tr",{onClick:()=>l(g),className:"border-b border-slate-700/30 hover:bg-slate-700/40 cursor-pointer transition-colors group",children:[C.jsx("td",{className:"py-2 pr-4",children:C.jsx("code",{className:"text-xs text-emerald-400 group-hover:text-emerald-300 font-mono",children:g.name})}),C.jsx("td",{className:"py-2 text-xs text-slate-400 group-hover:text-slate-300",children:g.description})]},g.id))})]})]},f))})]}):null}const bV={all:"ALL",global:"GLOBAL",has:"HAS",in:"IN",not:"NOT",starts:"STARTS",ends:"ENDS",with:"WITH"};function SV(t){const e=[];let n=0;for(;n<t.length;){if(/\s/.test(t[n])){n++;continue}const i=n;if(t[n]==="="&&t[n+1]==="="){e.push({type:"EQ",value:"==",pos:i}),n+=2;continue}if(t[n]==="!"&&t[n+1]==="="){e.push({type:"NEQ",value:"!=",pos:i}),n+=2;continue}if(t[n]==="&"&&t[n+1]==="&"){e.push({type:"AND",value:"&&",pos:i}),n+=2;continue}if(t[n]==="|"&&t[n+1]==="|"){e.push({type:"OR",value:"||",pos:i}),n+=2;continue}if(t[n]==="("){e.push({type:"LPAREN",value:"(",pos:i}),n++;continue}if(t[n]===")"){e.push({type:"RPAREN",value:")",pos:i}),n++;continue}if(t[n]==="{"){e.push({type:"LBRACE",value:"{",pos:i}),n++;continue}if(t[n]==="}"){e.push({type:"RBRACE",value:"}",pos:i}),n++;continue}if(t[n]===","){e.push({type:"COMMA",value:",",pos:i}),n++;continue}if(t[n]==="!"){e.push({type:"NOT",value:"!",pos:i}),n++;continue}if(t[n]==="'"||t[n]==='"'){const s=t[n];n++;let o="";for(;n<t.length&&t[n]!==s;)t[n]==="\\"&&n+1<t.length?(o+=t[n+1],n+=2):(o+=t[n],n++);n<t.length&&n++,e.push({type:"STRING",value:o,pos:i});continue}if(/[a-zA-Z0-9_\-./]/.test(t[n])){let s="";for(;n<t.length&&/[a-zA-Z0-9_\-./]/.test(t[n]);)s+=t[n],n++;const o=bV[s.toLowerCase()];o?e.push({type:o,value:s,pos:i}):e.push({type:"IDENT",value:s,pos:i});continue}throw new Error(`Unexpected character '${t[n]}' at position ${n}`)}return e.push({type:"EOF",value:"",pos:n}),e}class wV{tokens;pos=0;constructor(e){this.tokens=e}peek(){return this.tokens[this.pos]}advance(){const e=this.tokens[this.pos];return this.pos++,e}expect(e){const n=this.peek();if(n.type!==e)throw new Error(`Expected ${e} but got ${n.type} ('${n.value}') at position ${n.pos}`);return this.advance()}parse(){const e=this.parseOr();if(this.peek().type!=="EOF"){const n=this.peek();throw new Error(`Unexpected token '${n.value}' at position ${n.pos}`)}return e}parseOr(){let e=this.parseAnd();for(;this.peek().type==="OR";){this.advance();const n=this.parseAnd();e={kind:"or",left:e,right:n}}return e}parseAnd(){let e=this.parseUnary();for(;this.peek().type==="AND";){this.advance();const n=this.parseUnary();e={kind:"and",left:e,right:n}}return e}parseUnary(){return this.peek().type==="NOT"?(this.advance(),{kind:"not",operand:this.parseUnary()}):this.parsePrimary()}parsePrimary(){const e=this.peek();if(e.type==="ALL")return this.advance(),this.expect("LPAREN"),this.expect("RPAREN"),{kind:"all"};if(e.type==="GLOBAL")return this.advance(),this.expect("LPAREN"),this.expect("RPAREN"),{kind:"global"};if(e.type==="HAS"){this.advance(),this.expect("LPAREN");const n=this.parseLabel();return this.expect("RPAREN"),{kind:"has",label:n}}if(e.type==="LPAREN"){this.advance();const n=this.parseOr();return this.expect("RPAREN"),n}if(e.type==="IDENT"){const n=this.parseLabel(),i=this.peek();if(i.type==="EQ"){this.advance();const s=this.parseStringValue();return{kind:"eq",label:n,value:s}}if(i.type==="NEQ"){this.advance();const s=this.parseStringValue();return{kind:"neq",label:n,value:s}}if(i.type==="IN"){this.advance();const s=this.parseSet();return{kind:"in",label:n,values:s}}if(i.type==="NOT"){this.advance(),this.expect("IN");const s=this.parseSet();return{kind:"notIn",label:n,values:s}}if(i.type==="STARTS"){this.advance(),this.expect("WITH");const s=this.parseStringValue();return{kind:"startsWith",label:n,value:s}}if(i.type==="ENDS"){this.advance(),this.expect("WITH");const s=this.parseStringValue();return{kind:"endsWith",label:n,value:s}}throw new Error(`Unexpected operator '${i.value}' after label '${n}' at position ${i.pos}`)}throw new Error(`Unexpected token '${e.value}' at position ${e.pos}`)}parseLabel(){const e=this.peek();if(e.type==="IDENT"||e.type==="STRING")return this.advance().value;if(e.type==="HAS"||e.type==="ALL"||e.type==="GLOBAL"||e.type==="IN"||e.type==="NOT"||e.type==="STARTS"||e.type==="ENDS"||e.type==="WITH")return this.advance().value;throw new Error(`Expected label name but got '${e.value}' at position ${e.pos}`)}parseStringValue(){const e=this.peek();if(e.type==="STRING")return this.advance().value;if(e.type==="IDENT")return this.advance().value;throw new Error(`Expected string value but got '${e.value}' at position ${e.pos}`)}parseSet(){this.expect("LBRACE");const e=[];if(this.peek().type!=="RBRACE")for(e.push(this.parseStringValue());this.peek().type==="COMMA"&&(this.advance(),this.peek().type!=="RBRACE");)e.push(this.parseStringValue());return this.expect("RBRACE"),e}}function CV(t){const e=t.trim();if(e===""||e==="all()")return{kind:"all"};const n=SV(e);return new wV(n).parse()}function uh(t,e){const n=CV(t);return ll(n,e)}function ll(t,e){switch(t.kind){case"all":return!0;case"global":return!1;case"has":return t.label in e;case"eq":return e[t.label]===t.value;case"neq":return t.label in e&&e[t.label]!==t.value;case"in":return t.label in e&&t.values.includes(e[t.label]);case"notIn":return!(t.label in e)||!t.values.includes(e[t.label]);case"startsWith":return t.label in e&&e[t.label].startsWith(t.value);case"endsWith":return t.label in e&&e[t.label].endsWith(t.value);case"and":return ll(t.left,e)&&ll(t.right,e);case"or":return ll(t.left,e)||ll(t.right,e);case"not":return!ll(t.operand,e)}}function AV(t,e,n){const i=[];let s=!1,o=!1;if(t.protocol)if(n.protocol){const p=String(t.protocol).toUpperCase(),g=n.protocol.toUpperCase(),y=p===g;i.push({field:"protocol",matched:y,reason:y?`Protocol ${g} matches`:`Protocol ${g} does not match required ${p}`}),y||(s=!0)}else i.push({field:"protocol",matched:!1,indeterminate:!0,reason:`Rule requires protocol ${t.protocol}, not specified in test`}),o=!0;if(t.notProtocol)if(n.protocol){const p=String(t.notProtocol).toUpperCase(),g=n.protocol.toUpperCase(),y=p!==g;i.push({field:"notProtocol",matched:y,reason:y?`Protocol ${g} is not excluded (${p})`:`Protocol ${g} is excluded by notProtocol`}),y||(s=!0)}else i.push({field:"notProtocol",matched:!1,indeterminate:!0,reason:`Rule excludes protocol ${t.notProtocol}, not specified in test`}),o=!0;const l=e==="ingress"?t.source:t.destination;l&&kV(l,n,i);const c=e==="ingress"?t.destination:t.source;c&&OV(c,n,e,i);for(const p of i)!p.matched&&!p.indeterminate&&(s=!0),p.indeterminate&&(o=!0);const f=!s&&!o,h=EV(i,s,o);return{matches:f,indeterminate:o&&!s,details:i,reason:h}}function kV(t,e,n){if(t.nets&&t.nets.length>0)if(e.ip){const i=t.nets.some(s=>{const o=s.includes("/")?s:`${s}/32`;return Dy(o,e.ip)});n.push({field:"nets",matched:i,reason:i?`IP ${e.ip} is within allowed CIDRs`:`IP ${e.ip} is not within any of: ${t.nets.join(", ")}`})}else n.push({field:"nets",matched:!1,indeterminate:!0,reason:`Rule requires IP in ${t.nets.join(", ")}, no IP specified`});if(t.notNets&&t.notNets.length>0)if(e.ip){const i=t.notNets.some(s=>{const o=s.includes("/")?s:`${s}/32`;return Dy(o,e.ip)});n.push({field:"notNets",matched:!i,reason:i?`IP ${e.ip} is excluded by notNets`:`IP ${e.ip} is not in excluded ranges`})}else n.push({field:"notNets",matched:!1,indeterminate:!0,reason:`Rule excludes IPs in ${t.notNets.join(", ")}, no IP specified`});if(t.selector)if(e.labels&&Object.keys(e.labels).length>0)try{const i=uh(t.selector,e.labels);n.push({field:"selector",matched:i,reason:i?`Labels match selector: ${t.selector}`:`Labels do not match selector: ${t.selector}`})}catch(i){n.push({field:"selector",matched:!1,indeterminate:!0,reason:`Cannot parse selector: ${t.selector} (${i instanceof Error?i.message:String(i)})`})}else n.push({field:"selector",matched:!1,indeterminate:!0,reason:`Rule requires selector match: ${t.selector}, no labels specified`});if(t.notSelector)if(e.labels&&Object.keys(e.labels).length>0)try{const i=uh(t.notSelector,e.labels);n.push({field:"notSelector",matched:!i,reason:i?`Labels match excluded selector: ${t.notSelector}`:"Labels do not match excluded selector (good)"})}catch(i){n.push({field:"notSelector",matched:!1,indeterminate:!0,reason:`Cannot parse notSelector: ${t.notSelector} (${i instanceof Error?i.message:String(i)})`})}else n.push({field:"notSelector",matched:!1,indeterminate:!0,reason:`Rule has notSelector: ${t.notSelector}, no labels specified`});if(t.namespaceSelector)if(e.namespaceLabels&&Object.keys(e.namespaceLabels).length>0)try{const i=uh(t.namespaceSelector,e.namespaceLabels);n.push({field:"namespaceSelector",matched:i,reason:i?`Namespace labels match: ${t.namespaceSelector}`:`Namespace labels do not match: ${t.namespaceSelector}`})}catch{n.push({field:"namespaceSelector",matched:!1,indeterminate:!0,reason:`Cannot parse namespaceSelector: ${t.namespaceSelector}`})}else if(e.namespace)try{const i={"projectcalico.org/name":e.namespace,"kubernetes.io/metadata.name":e.namespace},s=uh(t.namespaceSelector,i);n.push({field:"namespaceSelector",matched:s,reason:s?`Namespace '${e.namespace}' matches: ${t.namespaceSelector} (via standard labels)`:`Namespace '${e.namespace}' does not match: ${t.namespaceSelector} (checked standard labels only)`})}catch{n.push({field:"namespaceSelector",matched:!1,indeterminate:!0,reason:`Cannot evaluate namespaceSelector: ${t.namespaceSelector}`})}else n.push({field:"namespaceSelector",matched:!1,indeterminate:!0,reason:`Rule requires namespaceSelector: ${t.namespaceSelector}, no namespace info specified`});if(t.ports&&t.ports.length>0)if(e.port!==void 0){const i=pd(e.port,t.ports);n.push({field:"ports",matched:i,reason:i?`Port ${e.port} matches allowed ports`:`Port ${e.port} does not match any of: ${Ol(t.ports)}`})}else n.push({field:"ports",matched:!1,indeterminate:!0,reason:`Rule allows ports ${Ol(t.ports)}, no port specified`});if(t.notPorts&&t.notPorts.length>0)if(e.port!==void 0){const i=pd(e.port,t.notPorts);n.push({field:"notPorts",matched:!i,reason:i?`Port ${e.port} is excluded by notPorts`:`Port ${e.port} is not in excluded ports`})}else n.push({field:"notPorts",matched:!1,indeterminate:!0,reason:`Rule excludes ports ${Ol(t.notPorts)}, no port specified`});if(t.serviceAccounts){if(t.serviceAccounts.names&&t.serviceAccounts.names.length>0)if(e.serviceAccountName){const i=t.serviceAccounts.names.includes(e.serviceAccountName);n.push({field:"serviceAccounts.names",matched:i,reason:i?`ServiceAccount '${e.serviceAccountName}' is in allowed list`:`ServiceAccount '${e.serviceAccountName}' is not in: ${t.serviceAccounts.names.join(", ")}`})}else n.push({field:"serviceAccounts.names",matched:!1,indeterminate:!0,reason:`Rule requires SA in [${t.serviceAccounts.names.join(", ")}], no SA specified`});t.serviceAccounts.selector&&n.push({field:"serviceAccounts.selector",matched:!1,indeterminate:!0,reason:`Rule has SA selector: ${t.serviceAccounts.selector} (SA label matching not supported)`})}if(t.services)if(e.serviceName&&e.serviceNamespace){const i=t.services.name===e.serviceName,s=t.services.namespace===e.serviceNamespace,o=i&&s;n.push({field:"services",matched:o,reason:o?`Service ${e.serviceNamespace}/${e.serviceName} matches`:`Service ${e.serviceNamespace}/${e.serviceName} does not match required ${t.services.namespace}/${t.services.name}`})}else if(e.serviceName){const i=t.services.name===e.serviceName;n.push({field:"services",matched:!1,indeterminate:!0,reason:i?`Service name '${e.serviceName}' matches, but namespace not specified (required: ${t.services.namespace})`:`Service name '${e.serviceName}' does not match required '${t.services.name}'`})}else n.push({field:"services",matched:!1,indeterminate:!0,reason:`Rule targets service ${t.services.namespace}/${t.services.name}, no service specified`})}function OV(t,e,n,i){const s=n==="ingress"?"destination":"source";if(t.ports&&t.ports.length>0)if(e.port!==void 0){const o=pd(e.port,t.ports);i.push({field:`${s}.ports`,matched:o,reason:o?`Port ${e.port} matches ${s} port constraint`:`Port ${e.port} does not match ${s} ports: ${Ol(t.ports)}`})}else i.push({field:`${s}.ports`,matched:!1,indeterminate:!0,reason:`Rule constrains ${s} ports ${Ol(t.ports)}, no port specified`});if(t.notPorts&&t.notPorts.length>0)if(e.port!==void 0){const o=pd(e.port,t.notPorts);i.push({field:`${s}.notPorts`,matched:!o,reason:o?`Port ${e.port} is excluded by ${s} notPorts`:`Port ${e.port} is not in excluded ${s} ports`})}else i.push({field:`${s}.notPorts`,matched:!1,indeterminate:!0,reason:`Rule excludes ${s} ports ${Ol(t.notPorts)}, no port specified`});(t.selector||t.nets||t.namespaceSelector)&&i.push({field:`${s}.constraints`,matched:!1,indeterminate:!0,reason:`Rule has ${s}-side constraints (selector/nets) on the policy endpoint  not evaluated in this test`})}function pd(t,e){return e.some(n=>tV(t,n))}function Ol(t){return t.map(e=>String(e)).join(", ")}function EV(t,e,n){return t.length===0?"No constraints  matches all traffic":e?`No match: ${t.filter(s=>!s.matched&&!s.indeterminate).map(s=>s.reason).join("; ")}`:n?`Indeterminate: ${t.filter(s=>s.indeterminate).map(s=>s.field).join(", ")} not specified`:"All constraints matched"}function MV(t,e,n,i){const s=e==="ingress"?t.ingressRules:t.egressRules,o=e==="ingress"?t.ingressDefault:t.egressDefault,l=i?e==="ingress"?i.ingress:i.egress:void 0,c=[],f=e==="ingress"?"Ingress":"Egress";if(!t.types.includes(f))return{verdict:"allowed",reason:`Policy does not manage ${e} traffic  all ${e} is implicitly allowed`,trace:[],decisiveRuleIndex:null,appliedDefault:!0};for(let g=0;g<s.length;g++){const y=s[g],v=AV(y,e,n),b=l&&l[g]?{startLine:l[g].startLine,endLine:l[g].endLine}:void 0,S={ruleIndex:g,rule:y,action:y.action,matchResult:v,isDecisive:!1,sourceRange:b};if(v.matches)switch(y.action){case"Allow":return S.isDecisive=!0,c.push(S),{verdict:"allowed",reason:`Allowed by rule #${g+1}: ${v.reason}`,trace:c,decisiveRuleIndex:g,appliedDefault:!1};case"Deny":return S.isDecisive=!0,c.push(S),{verdict:"denied",reason:`Denied by rule #${g+1}: ${v.reason}`,trace:c,decisiveRuleIndex:g,appliedDefault:!1};case"Log":c.push(S);continue;case"Pass":return S.isDecisive=!0,c.push(S),{verdict:"passed",reason:`Passed to next tier by rule #${g+1} (verdict depends on subsequent tiers)`,trace:c,decisiveRuleIndex:g,appliedDefault:!1}}else v.indeterminate,c.push(S)}return{verdict:o==="allow"?"allowed":"denied",reason:o==="allow"?"This direction is not explicitly managed  traffic is allowed by default":"No rule matched  traffic is denied by implicit Calico default",trace:c,decisiveRuleIndex:null,appliedDefault:!0}}function h0({labels:t,onChange:e,placeholder:n}){const i=q.useCallback(()=>{e([...t,{key:"",value:""}])},[t,e]),s=q.useCallback(l=>{e(t.filter((c,f)=>f!==l))},[t,e]),o=q.useCallback((l,c,f)=>{const h=t.map((p,g)=>g===l?{...p,[c]:f}:p);e(h)},[t,e]);return C.jsxs("div",{className:"space-y-1.5",children:[t.map((l,c)=>C.jsxs("div",{className:"flex items-center gap-1.5",children:[C.jsx("input",{type:"text",value:l.key,onChange:f=>o(c,"key",f.target.value),placeholder:"key",className:"flex-1 min-w-0 text-xs px-2 py-1 rounded bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"}),C.jsx("span",{className:"text-slate-500 text-xs",children:"="}),C.jsx("input",{type:"text",value:l.value,onChange:f=>o(c,"value",f.target.value),placeholder:"value",className:"flex-1 min-w-0 text-xs px-2 py-1 rounded bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"}),C.jsx("button",{onClick:()=>s(c),className:"text-slate-500 hover:text-red-400 transition-colors cursor-pointer p-0.5",title:"Remove",children:C.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),C.jsx("button",{onClick:i,className:"text-xs text-indigo-400 hover:text-indigo-300 transition-colors cursor-pointer",children:n??"+ Add label"})]})}function TV({verdict:t}){const e={allowed:{bg:"bg-emerald-500/20",border:"border-emerald-500/40",text:"text-emerald-400",label:"ALLOWED"},denied:{bg:"bg-red-500/20",border:"border-red-500/40",text:"text-red-400",label:"DENIED"},passed:{bg:"bg-blue-500/20",border:"border-blue-500/40",text:"text-blue-400",label:"PASSED TO NEXT TIER"},unknown:{bg:"bg-amber-500/20",border:"border-amber-500/40",text:"text-amber-400",label:"UNKNOWN"}}[t];return C.jsx("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border ${e.bg} ${e.border}`,children:C.jsx("span",{className:`text-sm font-bold ${e.text}`,children:e.label})})}function NV({action:t}){const n={Allow:{bg:"bg-emerald-500/20",text:"text-emerald-400"},Deny:{bg:"bg-red-500/20",text:"text-red-400"},Log:{bg:"bg-amber-500/20",text:"text-amber-400"},Pass:{bg:"bg-blue-500/20",text:"text-blue-400"}}[t]??{bg:"bg-slate-500/20",text:"text-slate-400"};return C.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold ${n.bg} ${n.text}`,children:t})}function DV({entry:t,onHover:e,onLeave:n}){const i=q.useCallback(()=>{t.sourceRange&&e(t.sourceRange)},[t.sourceRange,e]),s=t.matchResult.matches?"text-emerald-400":t.matchResult.indeterminate?"text-amber-400":"text-slate-500",o=t.matchResult.matches?"MATCH":t.matchResult.indeterminate?"MAYBE":"NO MATCH";return C.jsxs("div",{className:`px-2.5 py-1.5 rounded-lg border text-xs ${t.isDecisive?"border-indigo-500/40 bg-indigo-500/10":"border-slate-700/50 bg-slate-800/30"} hover:bg-slate-700/30 transition-colors cursor-default`,onMouseEnter:i,onMouseLeave:n,children:[C.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[C.jsxs("span",{className:"text-slate-500 font-mono text-[10px]",children:["#",t.ruleIndex+1]}),C.jsx(NV,{action:t.action}),C.jsx("span",{className:`text-[10px] font-semibold ${s}`,children:o}),t.isDecisive&&C.jsx("span",{className:"text-[10px] font-semibold text-indigo-400 ml-auto",children:"DECISIVE"})]}),C.jsx("p",{className:"text-slate-400 text-[11px] leading-snug",children:t.matchResult.reason})]})}function RV({onClose:t}){const{state:e,dispatch:n}=Fl(),[i,s]=q.useState("ingress"),[o,l]=q.useState("ip"),[c,f]=q.useState(""),[h,p]=q.useState([{key:"",value:""}]),[g,y]=q.useState(""),[v,b]=q.useState([]),[S,A]=q.useState(""),[k,T]=q.useState(""),[O,M]=q.useState(""),[L,_]=q.useState(""),[R,X]=q.useState(""),[U,ne]=q.useState(null),$=q.useCallback(()=>{s("ingress"),l("ip"),f(""),p([{key:"",value:""}]),y(""),b([]),A(""),T(""),M(""),_(""),X(""),ne(null),n({type:"HIGHLIGHT_LINES",payload:null})},[n]),Q=q.useCallback(()=>{const z={};switch(o){case"ip":c.trim()&&(z.ip=c.trim());break;case"podLabels":{const G=h.filter(D=>D.key.trim());G.length>0&&(z.labels=Object.fromEntries(G.map(D=>[D.key.trim(),D.value.trim()]))),g.trim()&&(z.namespace=g.trim());{const D=v.filter(H=>H.key.trim());D.length>0&&(z.namespaceLabels=Object.fromEntries(D.map(H=>[H.key.trim(),H.value.trim()])))}break}case"namespace":g.trim()&&(z.namespace=g.trim());{const G=v.filter(D=>D.key.trim());G.length>0&&(z.namespaceLabels=Object.fromEntries(G.map(D=>[D.key.trim(),D.value.trim()])))}break;case"serviceAccount":S.trim()&&(z.serviceAccountName=S.trim()),g.trim()&&(z.namespace=g.trim());break;case"service":k.trim()&&(z.serviceName=k.trim()),O.trim()&&(z.serviceNamespace=O.trim());break}if(L&&(z.protocol=L),R.trim()){const G=Number(R.trim());!Number.isNaN(G)&&G>0&&G<=65535&&(z.port=G)}return z},[o,c,h,g,v,S,k,O,L,R]),Z=q.useCallback(()=>{if(!e.policy)return;const z=Q(),G=MV(e.policy,i,z,e.ruleLineRanges);ne(G)},[e.policy,e.ruleLineRanges,i,Q]),B=q.useCallback(z=>{n({type:"HIGHLIGHT_LINES",payload:z})},[n]),V=q.useCallback(()=>{n({type:"HIGHLIGHT_LINES",payload:null})},[n]),N=q.useMemo(()=>e.policy?.types??[],[e.policy]),P=N.includes("Ingress"),j=N.includes("Egress");return C.jsxs("div",{className:"h-full flex flex-col bg-slate-850 overflow-hidden",children:[C.jsxs("div",{className:"flex items-center justify-between px-3 h-9 border-b border-slate-700/50 bg-slate-800/50 shrink-0",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),C.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold",children:"Access Tester"})]}),C.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-300 transition-colors cursor-pointer p-0.5 rounded hover:bg-slate-700/50","aria-label":"Close panel",children:C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[C.jsx("div",{className:"text-[10px] text-amber-400/70 bg-amber-500/5 border border-amber-500/20 rounded-lg px-2.5 py-1.5 leading-snug",children:"This is a best-effort emulation, not a real Calico policy engine. It evaluates a single policy in isolation. Real Calico evaluates all policies across tiers. Do not use for production security decisions."}),e.policy?C.jsxs(C.Fragment,{children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Traffic Direction"}),C.jsxs("div",{className:"flex gap-1",children:[C.jsxs("button",{onClick:()=>{s("ingress"),ne(null)},className:`flex-1 text-xs py-1.5 rounded-lg border transition-colors cursor-pointer ${i==="ingress"?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:["Ingress ",!P&&C.jsx("span",{className:"text-[9px] text-slate-500",children:"(unmanaged)"})]}),C.jsxs("button",{onClick:()=>{s("egress"),ne(null)},className:`flex-1 text-xs py-1.5 rounded-lg border transition-colors cursor-pointer ${i==="egress"?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:["Egress ",!j&&C.jsx("span",{className:"text-[9px] text-slate-500",children:"(unmanaged)"})]})]})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:[i==="ingress"?"Source":"Destination"," Type"]}),C.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{type:"ip",label:"IP Address"},{type:"podLabels",label:"Pod Labels"},{type:"namespace",label:"Namespace"},{type:"serviceAccount",label:"ServiceAccount"},{type:"service",label:"Service"}].map(({type:z,label:G})=>C.jsx("button",{onClick:()=>{l(z),ne(null)},className:`text-xs py-1.5 rounded-lg border transition-colors cursor-pointer ${o===z?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:G},z))})]}),C.jsxs("div",{className:"space-y-2",children:[o==="ip"&&C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"IP Address"}),C.jsx("input",{type:"text",value:c,onChange:z=>{f(z.target.value),ne(null)},placeholder:"e.g. 10.0.1.5 or 8.8.8.8",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),o==="podLabels"&&C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Pod Labels"}),C.jsx(h0,{labels:h,onChange:z=>{p(z),ne(null)}})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace Name ",C.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt., for namespaceSelector)"})]}),C.jsx("input",{type:"text",value:g,onChange:z=>{y(z.target.value),ne(null)},placeholder:"e.g. database",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace Labels ",C.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt., overrides name)"})]}),C.jsx(h0,{labels:v,onChange:z=>{b(z),ne(null)},placeholder:"+ Add namespace label"})]})]}),o==="namespace"&&C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Namespace Name"}),C.jsx("input",{type:"text",value:g,onChange:z=>{y(z.target.value),ne(null)},placeholder:"e.g. backend",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace Labels ",C.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(optional)"})]}),C.jsx(h0,{labels:v,onChange:z=>{b(z),ne(null)},placeholder:"+ Add namespace label"})]})]}),o==="serviceAccount"&&C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"ServiceAccount Name"}),C.jsx("input",{type:"text",value:S,onChange:z=>{A(z.target.value),ne(null)},placeholder:"e.g. backend-api",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace ",C.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(optional, for scoped SA matching)"})]}),C.jsx("input",{type:"text",value:g,onChange:z=>{y(z.target.value),ne(null)},placeholder:"e.g. default",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]})]}),o==="service"&&C.jsxs("div",{className:"space-y-2",children:[C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Service Name"}),C.jsx("input",{type:"text",value:k,onChange:z=>{T(z.target.value),ne(null)},placeholder:"e.g. kube-dns",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Service Namespace"}),C.jsx("input",{type:"text",value:O,onChange:z=>{M(z.target.value),ne(null)},placeholder:"e.g. kube-system",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Protocol ",C.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt.)"})]}),C.jsxs("select",{value:L,onChange:z=>{_(z.target.value),ne(null)},className:"w-full text-xs px-2 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none cursor-pointer",children:[C.jsx("option",{value:"",children:"Any"}),C.jsx("option",{value:"TCP",children:"TCP"}),C.jsx("option",{value:"UDP",children:"UDP"}),C.jsx("option",{value:"SCTP",children:"SCTP"}),C.jsx("option",{value:"ICMP",children:"ICMP"})]})]}),C.jsxs("div",{children:[C.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Port ",C.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt.)"})]}),C.jsx("input",{type:"text",value:R,onChange:z=>{X(z.target.value),ne(null)},placeholder:"e.g. 443",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]})]})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("button",{onClick:Z,className:"flex-1 text-xs py-2 rounded-lg bg-indigo-500 hover:bg-indigo-400 text-white font-semibold transition-colors cursor-pointer",children:"Check Access"}),C.jsx("button",{onClick:$,className:"text-xs px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold border border-slate-600 transition-colors cursor-pointer",children:"Reset"})]}),U&&C.jsxs("div",{className:"space-y-2.5 pt-1",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(TV,{verdict:U.verdict}),U.appliedDefault&&C.jsx("span",{className:"text-[10px] text-slate-500",children:"default applied"})]}),C.jsx("p",{className:"text-xs text-slate-300 leading-snug",children:U.reason}),U.trace.length>0&&C.jsxs("div",{children:[C.jsx("h4",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1.5",children:"Rule Evaluation Trace"}),C.jsx("div",{className:"space-y-1",children:U.trace.map(z=>C.jsx(DV,{entry:z,onHover:B,onLeave:V},z.ruleIndex))}),U.appliedDefault&&C.jsxs("div",{className:"px-2.5 py-1.5 mt-1 rounded-lg border border-slate-700/50 bg-slate-800/30 text-xs text-slate-400",children:["No rule matched  ",U.verdict==="allowed"?"implicit allow":"implicit deny"," applied"]})]})]})]}):C.jsx("div",{className:"text-xs text-slate-500 text-center py-8",children:"Load a policy first to test access"})]})]})}function hT(t){return typeof t>"u"||t===null}function _V(t){return typeof t=="object"&&t!==null}function LV(t){return Array.isArray(t)?t:hT(t)?[]:[t]}function BV(t,e){var n,i,s,o;if(e)for(o=Object.keys(e),n=0,i=o.length;n<i;n+=1)s=o[n],t[s]=e[s];return t}function zV(t,e){var n="",i;for(i=0;i<e;i+=1)n+=t;return n}function PV(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var HV=hT,jV=_V,IV=LV,VV=zV,UV=PV,$V=BV,Nt={isNothing:HV,isObject:jV,toArray:IV,repeat:VV,isNegativeZero:UV,extend:$V};function dT(t,e){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function Uc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=dT(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Uc.prototype=Object.create(Error.prototype);Uc.prototype.constructor=Uc;Uc.prototype.toString=function(e){return this.name+": "+dT(this,e)};var sn=Uc;function d0(t,e,n,i,s){var o="",l="",c=Math.floor(s/2)-1;return i-e>c&&(o=" ... ",e=i-c+o.length),n-i>c&&(l=" ...",n=i+c-l.length),{str:o+t.slice(e,n).replace(/\t/g,"")+l,pos:i-e+o.length}}function p0(t,e){return Nt.repeat(" ",e-t.length)+t}function qV(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],s=[],o,l=-1;o=n.exec(t.buffer);)s.push(o.index),i.push(o.index+o[0].length),t.position<=o.index&&l<0&&(l=i.length-2);l<0&&(l=i.length-1);var c="",f,h,p=Math.min(t.line+e.linesAfter,s.length).toString().length,g=e.maxLength-(e.indent+p+3);for(f=1;f<=e.linesBefore&&!(l-f<0);f++)h=d0(t.buffer,i[l-f],s[l-f],t.position-(i[l]-i[l-f]),g),c=Nt.repeat(" ",e.indent)+p0((t.line-f+1).toString(),p)+" | "+h.str+`
`+c;for(h=d0(t.buffer,i[l],s[l],t.position,g),c+=Nt.repeat(" ",e.indent)+p0((t.line+1).toString(),p)+" | "+h.str+`
`,c+=Nt.repeat("-",e.indent+p+3+h.pos)+`^
`,f=1;f<=e.linesAfter&&!(l+f>=s.length);f++)h=d0(t.buffer,i[l+f],s[l+f],t.position-(i[l]-i[l+f]),g),c+=Nt.repeat(" ",e.indent)+p0((t.line+f+1).toString(),p)+" | "+h.str+`
`;return c.replace(/\n$/,"")}var QV=qV,YV=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],XV=["scalar","sequence","mapping"];function FV(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){e[String(i)]=n})}),e}function GV(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(YV.indexOf(n)===-1)throw new sn('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=FV(e.styleAliases||null),XV.indexOf(this.kind)===-1)throw new sn('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Qt=GV;function eA(t,e){var n=[];return t[e].forEach(function(i){var s=n.length;n.forEach(function(o,l){o.tag===i.tag&&o.kind===i.kind&&o.multi===i.multi&&(s=l)}),n[s]=i}),n}function WV(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function i(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(i);return t}function By(t){return this.extend(t)}By.prototype.extend=function(e){var n=[],i=[];if(e instanceof Qt)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new sn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Qt))throw new sn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new sn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new sn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(o){if(!(o instanceof Qt))throw new sn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(By.prototype);return s.implicit=(this.implicit||[]).concat(n),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=eA(s,"implicit"),s.compiledExplicit=eA(s,"explicit"),s.compiledTypeMap=WV(s.compiledImplicit,s.compiledExplicit),s};var pT=By,gT=new Qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),mT=new Qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),yT=new Qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),xT=new pT({explicit:[gT,mT,yT]});function KV(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function ZV(){return null}function JV(t){return t===null}var vT=new Qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:KV,construct:ZV,predicate:JV,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function eU(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function tU(t){return t==="true"||t==="True"||t==="TRUE"}function nU(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var bT=new Qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:eU,construct:tU,predicate:nU,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function iU(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function sU(t){return 48<=t&&t<=55}function rU(t){return 48<=t&&t<=57}function oU(t){if(t===null)return!1;var e=t.length,n=0,i=!1,s;if(!e)return!1;if(s=t[n],(s==="-"||s==="+")&&(s=t[++n]),s==="0"){if(n+1===e)return!0;if(s=t[++n],s==="b"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(s!=="0"&&s!=="1")return!1;i=!0}return i&&s!=="_"}if(s==="x"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!iU(t.charCodeAt(n)))return!1;i=!0}return i&&s!=="_"}if(s==="o"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!sU(t.charCodeAt(n)))return!1;i=!0}return i&&s!=="_"}}if(s==="_")return!1;for(;n<e;n++)if(s=t[n],s!=="_"){if(!rU(t.charCodeAt(n)))return!1;i=!0}return!(!i||s==="_")}function lU(t){var e=t,n=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function aU(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Nt.isNegativeZero(t)}var ST=new Qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:oU,construct:lU,predicate:aU,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),cU=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function uU(t){return!(t===null||!cU.test(t)||t[t.length-1]==="_")}function fU(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var hU=/^[-+]?[0-9]+e/;function dU(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Nt.isNegativeZero(t))return"-0.0";return n=t.toString(10),hU.test(n)?n.replace("e",".e"):n}function pU(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Nt.isNegativeZero(t))}var wT=new Qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:uU,construct:fU,predicate:pU,represent:dU,defaultStyle:"lowercase"}),CT=xT.extend({implicit:[vT,bT,ST,wT]}),AT=CT,kT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),OT=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function gU(t){return t===null?!1:kT.exec(t)!==null||OT.exec(t)!==null}function mU(t){var e,n,i,s,o,l,c,f=0,h=null,p,g,y;if(e=kT.exec(t),e===null&&(e=OT.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],i=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(n,i,s));if(o=+e[4],l=+e[5],c=+e[6],e[7]){for(f=e[7].slice(0,3);f.length<3;)f+="0";f=+f}return e[9]&&(p=+e[10],g=+(e[11]||0),h=(p*60+g)*6e4,e[9]==="-"&&(h=-h)),y=new Date(Date.UTC(n,i,s,o,l,c,f)),h&&y.setTime(y.getTime()-h),y}function yU(t){return t.toISOString()}var ET=new Qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:gU,construct:mU,instanceOf:Date,represent:yU});function xU(t){return t==="<<"||t===null}var MT=new Qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:xU}),$x=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function vU(t){if(t===null)return!1;var e,n,i=0,s=t.length,o=$x;for(n=0;n<s;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function bU(t){var e,n,i=t.replace(/[\r\n=]/g,""),s=i.length,o=$x,l=0,c=[];for(e=0;e<s;e++)e%4===0&&e&&(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)),l=l<<6|o.indexOf(i.charAt(e));return n=s%4*6,n===0?(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)):n===18?(c.push(l>>10&255),c.push(l>>2&255)):n===12&&c.push(l>>4&255),new Uint8Array(c)}function SU(t){var e="",n=0,i,s,o=t.length,l=$x;for(i=0;i<o;i++)i%3===0&&i&&(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]),n=(n<<8)+t[i];return s=o%3,s===0?(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]):s===2?(e+=l[n>>10&63],e+=l[n>>4&63],e+=l[n<<2&63],e+=l[64]):s===1&&(e+=l[n>>2&63],e+=l[n<<4&63],e+=l[64],e+=l[64]),e}function wU(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var TT=new Qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:vU,construct:bU,predicate:wU,represent:SU}),CU=Object.prototype.hasOwnProperty,AU=Object.prototype.toString;function kU(t){if(t===null)return!0;var e=[],n,i,s,o,l,c=t;for(n=0,i=c.length;n<i;n+=1){if(s=c[n],l=!1,AU.call(s)!=="[object Object]")return!1;for(o in s)if(CU.call(s,o))if(!l)l=!0;else return!1;if(!l)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function OU(t){return t!==null?t:[]}var NT=new Qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kU,construct:OU}),EU=Object.prototype.toString;function MU(t){if(t===null)return!0;var e,n,i,s,o,l=t;for(o=new Array(l.length),e=0,n=l.length;e<n;e+=1){if(i=l[e],EU.call(i)!=="[object Object]"||(s=Object.keys(i),s.length!==1))return!1;o[e]=[s[0],i[s[0]]]}return!0}function TU(t){if(t===null)return[];var e,n,i,s,o,l=t;for(o=new Array(l.length),e=0,n=l.length;e<n;e+=1)i=l[e],s=Object.keys(i),o[e]=[s[0],i[s[0]]];return o}var DT=new Qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:MU,construct:TU}),NU=Object.prototype.hasOwnProperty;function DU(t){if(t===null)return!0;var e,n=t;for(e in n)if(NU.call(n,e)&&n[e]!==null)return!1;return!0}function RU(t){return t!==null?t:{}}var RT=new Qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:DU,construct:RU}),qx=AT.extend({implicit:[ET,MT],explicit:[TT,NT,DT,RT]}),dr=Object.prototype.hasOwnProperty,gd=1,_T=2,LT=3,md=4,g0=1,_U=2,tA=3,LU=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,BU=/[\x85\u2028\u2029]/,zU=/[,\[\]\{\}]/,BT=/^(?:!|!!|![a-z\-]+!)$/i,zT=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function nA(t){return Object.prototype.toString.call(t)}function Di(t){return t===10||t===13}function io(t){return t===9||t===32}function bn(t){return t===9||t===32||t===10||t===13}function gl(t){return t===44||t===91||t===93||t===123||t===125}function PU(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function HU(t){return t===120?2:t===117?4:t===85?8:0}function jU(t){return 48<=t&&t<=57?t-48:-1}function iA(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function IU(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function PT(t,e,n){e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}var HT=new Array(256),jT=new Array(256);for(var il=0;il<256;il++)HT[il]=iA(il)?1:0,jT[il]=iA(il);function VU(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||qx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function IT(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=QV(n),new sn(e,n)}function we(t,e){throw IT(t,e)}function yd(t,e){t.onWarning&&t.onWarning.call(null,IT(t,e))}var sA={YAML:function(e,n,i){var s,o,l;e.version!==null&&we(e,"duplication of %YAML directive"),i.length!==1&&we(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),s===null&&we(e,"ill-formed argument of the YAML directive"),o=parseInt(s[1],10),l=parseInt(s[2],10),o!==1&&we(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=l<2,l!==1&&l!==2&&yd(e,"unsupported YAML version of the document")},TAG:function(e,n,i){var s,o;i.length!==2&&we(e,"TAG directive accepts exactly two arguments"),s=i[0],o=i[1],BT.test(s)||we(e,"ill-formed tag handle (first argument) of the TAG directive"),dr.call(e.tagMap,s)&&we(e,'there is a previously declared suffix for "'+s+'" tag handle'),zT.test(o)||we(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{we(e,"tag prefix is malformed: "+o)}e.tagMap[s]=o}};function rr(t,e,n,i){var s,o,l,c;if(e<n){if(c=t.input.slice(e,n),i)for(s=0,o=c.length;s<o;s+=1)l=c.charCodeAt(s),l===9||32<=l&&l<=1114111||we(t,"expected valid JSON character");else LU.test(c)&&we(t,"the stream contains non-printable characters");t.result+=c}}function rA(t,e,n,i){var s,o,l,c;for(Nt.isObject(n)||we(t,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(n),l=0,c=s.length;l<c;l+=1)o=s[l],dr.call(e,o)||(PT(e,o,n[o]),i[o]=!0)}function ml(t,e,n,i,s,o,l,c,f){var h,p;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,p=s.length;h<p;h+=1)Array.isArray(s[h])&&we(t,"nested arrays are not supported inside keys"),typeof s=="object"&&nA(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&nA(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(h=0,p=o.length;h<p;h+=1)rA(t,e,o[h],n);else rA(t,e,o,n);else!t.json&&!dr.call(n,s)&&dr.call(e,s)&&(t.line=l||t.line,t.lineStart=c||t.lineStart,t.position=f||t.position,we(t,"duplicated mapping key")),PT(e,s,o),delete n[s];return e}function Qx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):we(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function At(t,e,n){for(var i=0,s=t.input.charCodeAt(t.position);s!==0;){for(;io(s);)s===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(e&&s===35)do s=t.input.charCodeAt(++t.position);while(s!==10&&s!==13&&s!==0);if(Di(s))for(Qx(t),s=t.input.charCodeAt(t.position),i++,t.lineIndent=0;s===32;)t.lineIndent++,s=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&yd(t,"deficient indentation"),i}function Gd(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||bn(n)))}function Yx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Nt.repeat(`
`,e-1))}function UU(t,e,n){var i,s,o,l,c,f,h,p,g=t.kind,y=t.result,v;if(v=t.input.charCodeAt(t.position),bn(v)||gl(v)||v===35||v===38||v===42||v===33||v===124||v===62||v===39||v===34||v===37||v===64||v===96||(v===63||v===45)&&(s=t.input.charCodeAt(t.position+1),bn(s)||n&&gl(s)))return!1;for(t.kind="scalar",t.result="",o=l=t.position,c=!1;v!==0;){if(v===58){if(s=t.input.charCodeAt(t.position+1),bn(s)||n&&gl(s))break}else if(v===35){if(i=t.input.charCodeAt(t.position-1),bn(i))break}else{if(t.position===t.lineStart&&Gd(t)||n&&gl(v))break;if(Di(v))if(f=t.line,h=t.lineStart,p=t.lineIndent,At(t,!1,-1),t.lineIndent>=e){c=!0,v=t.input.charCodeAt(t.position);continue}else{t.position=l,t.line=f,t.lineStart=h,t.lineIndent=p;break}}c&&(rr(t,o,l,!1),Yx(t,t.line-f),o=l=t.position,c=!1),io(v)||(l=t.position+1),v=t.input.charCodeAt(++t.position)}return rr(t,o,l,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function $U(t,e){var n,i,s;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=s=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(rr(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,s=t.position;else return!0;else Di(n)?(rr(t,i,s,!0),Yx(t,At(t,!1,e)),i=s=t.position):t.position===t.lineStart&&Gd(t)?we(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);we(t,"unexpected end of the stream within a single quoted scalar")}function qU(t,e){var n,i,s,o,l,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return rr(t,n,t.position,!0),t.position++,!0;if(c===92){if(rr(t,n,t.position,!0),c=t.input.charCodeAt(++t.position),Di(c))At(t,!1,e);else if(c<256&&HT[c])t.result+=jT[c],t.position++;else if((l=HU(c))>0){for(s=l,o=0;s>0;s--)c=t.input.charCodeAt(++t.position),(l=PU(c))>=0?o=(o<<4)+l:we(t,"expected hexadecimal character");t.result+=IU(o),t.position++}else we(t,"unknown escape sequence");n=i=t.position}else Di(c)?(rr(t,n,i,!0),Yx(t,At(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Gd(t)?we(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}we(t,"unexpected end of the stream within a double quoted scalar")}function QU(t,e){var n=!0,i,s,o,l=t.tag,c,f=t.anchor,h,p,g,y,v,b=Object.create(null),S,A,k,T;if(T=t.input.charCodeAt(t.position),T===91)p=93,v=!1,c=[];else if(T===123)p=125,v=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),T=t.input.charCodeAt(++t.position);T!==0;){if(At(t,!0,e),T=t.input.charCodeAt(t.position),T===p)return t.position++,t.tag=l,t.anchor=f,t.kind=v?"mapping":"sequence",t.result=c,!0;n?T===44&&we(t,"expected the node content, but found ','"):we(t,"missed comma between flow collection entries"),A=S=k=null,g=y=!1,T===63&&(h=t.input.charCodeAt(t.position+1),bn(h)&&(g=y=!0,t.position++,At(t,!0,e))),i=t.line,s=t.lineStart,o=t.position,$l(t,e,gd,!1,!0),A=t.tag,S=t.result,At(t,!0,e),T=t.input.charCodeAt(t.position),(y||t.line===i)&&T===58&&(g=!0,T=t.input.charCodeAt(++t.position),At(t,!0,e),$l(t,e,gd,!1,!0),k=t.result),v?ml(t,c,b,A,S,k,i,s,o):g?c.push(ml(t,null,b,A,S,k,i,s,o)):c.push(S),At(t,!0,e),T=t.input.charCodeAt(t.position),T===44?(n=!0,T=t.input.charCodeAt(++t.position)):n=!1}we(t,"unexpected end of the stream within a flow collection")}function YU(t,e){var n,i,s=g0,o=!1,l=!1,c=e,f=0,h=!1,p,g;if(g=t.input.charCodeAt(t.position),g===124)i=!1;else if(g===62)i=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)g0===s?s=g===43?tA:_U:we(t,"repeat of a chomping mode identifier");else if((p=jU(g))>=0)p===0?we(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?we(t,"repeat of an indentation width identifier"):(c=e+p-1,l=!0);else break;if(io(g)){do g=t.input.charCodeAt(++t.position);while(io(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!Di(g)&&g!==0)}for(;g!==0;){for(Qx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),Di(g)){f++;continue}if(t.lineIndent<c){s===tA?t.result+=Nt.repeat(`
`,o?1+f:f):s===g0&&o&&(t.result+=`
`);break}for(i?io(g)?(h=!0,t.result+=Nt.repeat(`
`,o?1+f:f)):h?(h=!1,t.result+=Nt.repeat(`
`,f+1)):f===0?o&&(t.result+=" "):t.result+=Nt.repeat(`
`,f):t.result+=Nt.repeat(`
`,o?1+f:f),o=!0,l=!0,f=0,n=t.position;!Di(g)&&g!==0;)g=t.input.charCodeAt(++t.position);rr(t,n,t.position,!1)}return!0}function oA(t,e){var n,i=t.tag,s=t.anchor,o=[],l,c=!1,f;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),f=t.input.charCodeAt(t.position);f!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,we(t,"tab characters must not be used in indentation")),!(f!==45||(l=t.input.charCodeAt(t.position+1),!bn(l))));){if(c=!0,t.position++,At(t,!0,-1)&&t.lineIndent<=e){o.push(null),f=t.input.charCodeAt(t.position);continue}if(n=t.line,$l(t,e,LT,!1,!0),o.push(t.result),At(t,!0,-1),f=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&f!==0)we(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=i,t.anchor=s,t.kind="sequence",t.result=o,!0):!1}function XU(t,e,n){var i,s,o,l,c,f,h=t.tag,p=t.anchor,g={},y=Object.create(null),v=null,b=null,S=null,A=!1,k=!1,T;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),T=t.input.charCodeAt(t.position);T!==0;){if(!A&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,we(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),o=t.line,(T===63||T===58)&&bn(i))T===63?(A&&(ml(t,g,y,v,b,null,l,c,f),v=b=S=null),k=!0,A=!0,s=!0):A?(A=!1,s=!0):we(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,T=i;else{if(l=t.line,c=t.lineStart,f=t.position,!$l(t,n,_T,!1,!0))break;if(t.line===o){for(T=t.input.charCodeAt(t.position);io(T);)T=t.input.charCodeAt(++t.position);if(T===58)T=t.input.charCodeAt(++t.position),bn(T)||we(t,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(ml(t,g,y,v,b,null,l,c,f),v=b=S=null),k=!0,A=!1,s=!1,v=t.tag,b=t.result;else if(k)we(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=p,!0}else if(k)we(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=p,!0}if((t.line===o||t.lineIndent>e)&&(A&&(l=t.line,c=t.lineStart,f=t.position),$l(t,e,md,!0,s)&&(A?b=t.result:S=t.result),A||(ml(t,g,y,v,b,S,l,c,f),v=b=S=null),At(t,!0,-1),T=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&T!==0)we(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return A&&ml(t,g,y,v,b,null,l,c,f),k&&(t.tag=h,t.anchor=p,t.kind="mapping",t.result=g),k}function FU(t){var e,n=!1,i=!1,s,o,l;if(l=t.input.charCodeAt(t.position),l!==33)return!1;if(t.tag!==null&&we(t,"duplication of a tag property"),l=t.input.charCodeAt(++t.position),l===60?(n=!0,l=t.input.charCodeAt(++t.position)):l===33?(i=!0,s="!!",l=t.input.charCodeAt(++t.position)):s="!",e=t.position,n){do l=t.input.charCodeAt(++t.position);while(l!==0&&l!==62);t.position<t.length?(o=t.input.slice(e,t.position),l=t.input.charCodeAt(++t.position)):we(t,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!bn(l);)l===33&&(i?we(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(e-1,t.position+1),BT.test(s)||we(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),l=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),zU.test(o)&&we(t,"tag suffix cannot contain flow indicator characters")}o&&!zT.test(o)&&we(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{we(t,"tag name is malformed: "+o)}return n?t.tag=o:dr.call(t.tagMap,s)?t.tag=t.tagMap[s]+o:s==="!"?t.tag="!"+o:s==="!!"?t.tag="tag:yaml.org,2002:"+o:we(t,'undeclared tag handle "'+s+'"'),!0}function GU(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&we(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!bn(n)&&!gl(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&we(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function WU(t){var e,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!bn(i)&&!gl(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&we(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),dr.call(t.anchorMap,n)||we(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],At(t,!0,-1),!0}function $l(t,e,n,i,s){var o,l,c,f=1,h=!1,p=!1,g,y,v,b,S,A;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=l=c=md===n||LT===n,i&&At(t,!0,-1)&&(h=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),f===1)for(;FU(t)||GU(t);)At(t,!0,-1)?(h=!0,c=o,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):c=!1;if(c&&(c=h||s),(f===1||md===n)&&(gd===n||_T===n?S=e:S=e+1,A=t.position-t.lineStart,f===1?c&&(oA(t,A)||XU(t,A,S))||QU(t,S)?p=!0:(l&&YU(t,S)||$U(t,S)||qU(t,S)?p=!0:WU(t)?(p=!0,(t.tag!==null||t.anchor!==null)&&we(t,"alias node should not have any properties")):UU(t,S,gd===n)&&(p=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):f===0&&(p=c&&oA(t,A))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&we(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(b=t.implicitTypes[g],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(dr.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,v=t.typeMap.multi[t.kind||"fallback"],g=0,y=v.length;g<y;g+=1)if(t.tag.slice(0,v[g].tag.length)===v[g].tag){b=v[g];break}b||we(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&we(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):we(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||p}function KU(t){var e=t.position,n,i,s,o=!1,l;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(l=t.input.charCodeAt(t.position))!==0&&(At(t,!0,-1),l=t.input.charCodeAt(t.position),!(t.lineIndent>0||l!==37));){for(o=!0,l=t.input.charCodeAt(++t.position),n=t.position;l!==0&&!bn(l);)l=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),s=[],i.length<1&&we(t,"directive name must not be less than one character in length");l!==0;){for(;io(l);)l=t.input.charCodeAt(++t.position);if(l===35){do l=t.input.charCodeAt(++t.position);while(l!==0&&!Di(l));break}if(Di(l))break;for(n=t.position;l!==0&&!bn(l);)l=t.input.charCodeAt(++t.position);s.push(t.input.slice(n,t.position))}l!==0&&Qx(t),dr.call(sA,i)?sA[i](t,i,s):yd(t,'unknown document directive "'+i+'"')}if(At(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,At(t,!0,-1)):o&&we(t,"directives end mark is expected"),$l(t,t.lineIndent-1,md,!1,!0),At(t,!0,-1),t.checkLineBreaks&&BU.test(t.input.slice(e,t.position))&&yd(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Gd(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,At(t,!0,-1));return}if(t.position<t.length-1)we(t,"end of the stream or a document separator is expected");else return}function VT(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new VU(t,e),i=t.indexOf("\0");for(i!==-1&&(n.position=i,we(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)KU(n);return n.documents}function ZU(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var i=VT(t,n);if(typeof e!="function")return i;for(var s=0,o=i.length;s<o;s+=1)e(i[s])}function JU(t,e){var n=VT(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new sn("expected a single document in the stream, but found more")}}var e$=ZU,t$=JU,UT={loadAll:e$,load:t$},$T=Object.prototype.toString,qT=Object.prototype.hasOwnProperty,Xx=65279,n$=9,$c=10,i$=13,s$=32,r$=33,o$=34,zy=35,l$=37,a$=38,c$=39,u$=42,QT=44,f$=45,xd=58,h$=61,d$=62,p$=63,g$=64,YT=91,XT=93,m$=96,FT=123,y$=124,GT=125,Kt={};Kt[0]="\\0";Kt[7]="\\a";Kt[8]="\\b";Kt[9]="\\t";Kt[10]="\\n";Kt[11]="\\v";Kt[12]="\\f";Kt[13]="\\r";Kt[27]="\\e";Kt[34]='\\"';Kt[92]="\\\\";Kt[133]="\\N";Kt[160]="\\_";Kt[8232]="\\L";Kt[8233]="\\P";var x$=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],v$=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function b$(t,e){var n,i,s,o,l,c,f;if(e===null)return{};for(n={},i=Object.keys(e),s=0,o=i.length;s<o;s+=1)l=i[s],c=String(e[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),f=t.compiledTypeMap.fallback[l],f&&qT.call(f.styleAliases,c)&&(c=f.styleAliases[c]),n[l]=c;return n}function S$(t){var e,n,i;if(e=t.toString(16).toUpperCase(),t<=255)n="x",i=2;else if(t<=65535)n="u",i=4;else if(t<=4294967295)n="U",i=8;else throw new sn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Nt.repeat("0",i-e.length)+e}var w$=1,qc=2;function C$(t){this.schema=t.schema||qx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Nt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=b$(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?qc:w$,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function lA(t,e){for(var n=Nt.repeat(" ",e),i=0,s=-1,o="",l,c=t.length;i<c;)s=t.indexOf(`
`,i),s===-1?(l=t.slice(i),i=c):(l=t.slice(i,s+1),i=s+1),l.length&&l!==`
`&&(o+=n),o+=l;return o}function Py(t,e){return`
`+Nt.repeat(" ",t.indent*e)}function A$(t,e){var n,i,s;for(n=0,i=t.implicitTypes.length;n<i;n+=1)if(s=t.implicitTypes[n],s.resolve(e))return!0;return!1}function vd(t){return t===s$||t===n$}function Qc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Xx||65536<=t&&t<=1114111}function aA(t){return Qc(t)&&t!==Xx&&t!==i$&&t!==$c}function cA(t,e,n){var i=aA(t),s=i&&!vd(t);return(n?i:i&&t!==QT&&t!==YT&&t!==XT&&t!==FT&&t!==GT)&&t!==zy&&!(e===xd&&!s)||aA(e)&&!vd(e)&&t===zy||e===xd&&s}function k$(t){return Qc(t)&&t!==Xx&&!vd(t)&&t!==f$&&t!==p$&&t!==xd&&t!==QT&&t!==YT&&t!==XT&&t!==FT&&t!==GT&&t!==zy&&t!==a$&&t!==u$&&t!==r$&&t!==y$&&t!==h$&&t!==d$&&t!==c$&&t!==o$&&t!==l$&&t!==g$&&t!==m$}function O$(t){return!vd(t)&&t!==xd}function ic(t,e){var n=t.charCodeAt(e),i;return n>=55296&&n<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function WT(t){var e=/^\n* /;return e.test(t)}var KT=1,Hy=2,ZT=3,JT=4,al=5;function E$(t,e,n,i,s,o,l,c){var f,h=0,p=null,g=!1,y=!1,v=i!==-1,b=-1,S=k$(ic(t,0))&&O$(ic(t,t.length-1));if(e||l)for(f=0;f<t.length;h>=65536?f+=2:f++){if(h=ic(t,f),!Qc(h))return al;S=S&&cA(h,p,c),p=h}else{for(f=0;f<t.length;h>=65536?f+=2:f++){if(h=ic(t,f),h===$c)g=!0,v&&(y=y||f-b-1>i&&t[b+1]!==" ",b=f);else if(!Qc(h))return al;S=S&&cA(h,p,c),p=h}y=y||v&&f-b-1>i&&t[b+1]!==" "}return!g&&!y?S&&!l&&!s(t)?KT:o===qc?al:Hy:n>9&&WT(t)?al:l?o===qc?al:Hy:y?JT:ZT}function M$(t,e,n,i,s){t.dump=(function(){if(e.length===0)return t.quotingType===qc?'""':"''";if(!t.noCompatMode&&(x$.indexOf(e)!==-1||v$.test(e)))return t.quotingType===qc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),l=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=i||t.flowLevel>-1&&n>=t.flowLevel;function f(h){return A$(t,h)}switch(E$(e,c,t.indent,l,f,t.quotingType,t.forceQuotes&&!i,s)){case KT:return e;case Hy:return"'"+e.replace(/'/g,"''")+"'";case ZT:return"|"+uA(e,t.indent)+fA(lA(e,o));case JT:return">"+uA(e,t.indent)+fA(lA(T$(e,l),o));case al:return'"'+N$(e)+'"';default:throw new sn("impossible error: invalid scalar style")}})()}function uA(t,e){var n=WT(t)?String(e):"",i=t[t.length-1]===`
`,s=i&&(t[t.length-2]===`
`||t===`
`),o=s?"+":i?"":"-";return n+o+`
`}function fA(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function T$(t,e){for(var n=/(\n+)([^\n]*)/g,i=(function(){var h=t.indexOf(`
`);return h=h!==-1?h:t.length,n.lastIndex=h,hA(t.slice(0,h),e)})(),s=t[0]===`
`||t[0]===" ",o,l;l=n.exec(t);){var c=l[1],f=l[2];o=f[0]===" ",i+=c+(!s&&!o&&f!==""?`
`:"")+hA(f,e),s=o}return i}function hA(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,i,s=0,o,l=0,c=0,f="";i=n.exec(t);)c=i.index,c-s>e&&(o=l>s?l:c,f+=`
`+t.slice(s,o),s=o+1),l=c;return f+=`
`,t.length-s>e&&l>s?f+=t.slice(s,l)+`
`+t.slice(l+1):f+=t.slice(s),f.slice(1)}function N$(t){for(var e="",n=0,i,s=0;s<t.length;n>=65536?s+=2:s++)n=ic(t,s),i=Kt[n],!i&&Qc(n)?(e+=t[s],n>=65536&&(e+=t[s+1])):e+=i||S$(n);return e}function D$(t,e,n){var i="",s=t.tag,o,l,c;for(o=0,l=n.length;o<l;o+=1)c=n[o],t.replacer&&(c=t.replacer.call(n,String(o),c)),(xs(t,e,c,!1,!1)||typeof c>"u"&&xs(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=s,t.dump="["+i+"]"}function dA(t,e,n,i){var s="",o=t.tag,l,c,f;for(l=0,c=n.length;l<c;l+=1)f=n[l],t.replacer&&(f=t.replacer.call(n,String(l),f)),(xs(t,e+1,f,!0,!0,!1,!0)||typeof f>"u"&&xs(t,e+1,null,!0,!0,!1,!0))&&((!i||s!=="")&&(s+=Py(t,e)),t.dump&&$c===t.dump.charCodeAt(0)?s+="-":s+="- ",s+=t.dump);t.tag=o,t.dump=s||"[]"}function R$(t,e,n){var i="",s=t.tag,o=Object.keys(n),l,c,f,h,p;for(l=0,c=o.length;l<c;l+=1)p="",i!==""&&(p+=", "),t.condenseFlow&&(p+='"'),f=o[l],h=n[f],t.replacer&&(h=t.replacer.call(n,f,h)),xs(t,e,f,!1,!1)&&(t.dump.length>1024&&(p+="? "),p+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),xs(t,e,h,!1,!1)&&(p+=t.dump,i+=p));t.tag=s,t.dump="{"+i+"}"}function _$(t,e,n,i){var s="",o=t.tag,l=Object.keys(n),c,f,h,p,g,y;if(t.sortKeys===!0)l.sort();else if(typeof t.sortKeys=="function")l.sort(t.sortKeys);else if(t.sortKeys)throw new sn("sortKeys must be a boolean or a function");for(c=0,f=l.length;c<f;c+=1)y="",(!i||s!=="")&&(y+=Py(t,e)),h=l[c],p=n[h],t.replacer&&(p=t.replacer.call(n,h,p)),xs(t,e+1,h,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&$c===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=Py(t,e)),xs(t,e+1,p,!0,g)&&(t.dump&&$c===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,s+=y));t.tag=o,t.dump=s||"{}"}function pA(t,e,n){var i,s,o,l,c,f;for(s=n?t.explicitTypes:t.implicitTypes,o=0,l=s.length;o<l;o+=1)if(c=s[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(n?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(f=t.styleMap[c.tag]||c.defaultStyle,$T.call(c.represent)==="[object Function]")i=c.represent(e,f);else if(qT.call(c.represent,f))i=c.represent[f](e,f);else throw new sn("!<"+c.tag+'> tag resolver accepts not "'+f+'" style');t.dump=i}return!0}return!1}function xs(t,e,n,i,s,o,l){t.tag=null,t.dump=n,pA(t,n,!1)||pA(t,n,!0);var c=$T.call(t.dump),f=i,h;i&&(i=t.flowLevel<0||t.flowLevel>e);var p=c==="[object Object]"||c==="[object Array]",g,y;if(p&&(g=t.duplicates.indexOf(n),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(s=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(p&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),c==="[object Object]")i&&Object.keys(t.dump).length!==0?(_$(t,e,t.dump,s),y&&(t.dump="&ref_"+g+t.dump)):(R$(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(c==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!l&&e>0?dA(t,e-1,t.dump,s):dA(t,e,t.dump,s),y&&(t.dump="&ref_"+g+t.dump)):(D$(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&M$(t,t.dump,e,o,f);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new sn("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(h=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",t.dump=h+" "+t.dump)}return!0}function L$(t,e){var n=[],i=[],s,o;for(jy(t,n,i),s=0,o=i.length;s<o;s+=1)e.duplicates.push(n[i[s]]);e.usedDuplicates=new Array(o)}function jy(t,e,n){var i,s,o;if(t!==null&&typeof t=="object")if(s=e.indexOf(t),s!==-1)n.indexOf(s)===-1&&n.push(s);else if(e.push(t),Array.isArray(t))for(s=0,o=t.length;s<o;s+=1)jy(t[s],e,n);else for(i=Object.keys(t),s=0,o=i.length;s<o;s+=1)jy(t[i[s]],e,n)}function B$(t,e){e=e||{};var n=new C$(e);n.noRefs||L$(t,n);var i=t;return n.replacer&&(i=n.replacer.call({"":i},"",i)),xs(n,0,i,!0,!0)?n.dump+`
`:""}var z$=B$,P$={dump:z$};function Fx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var H$=Qt,j$=pT,I$=xT,V$=CT,U$=AT,$$=qx,q$=UT.load,Q$=UT.loadAll,Y$=P$.dump,X$=sn,F$={binary:TT,float:wT,map:yT,null:vT,pairs:DT,set:RT,timestamp:ET,bool:bT,int:ST,merge:MT,omap:NT,seq:mT,str:gT},G$=Fx("safeLoad","load"),W$=Fx("safeLoadAll","loadAll"),K$=Fx("safeDump","dump"),Z$={Type:H$,Schema:j$,FAILSAFE_SCHEMA:I$,JSON_SCHEMA:V$,CORE_SCHEMA:U$,DEFAULT_SCHEMA:$$,load:q$,loadAll:Q$,dump:Y$,YAMLException:X$,types:F$,safeLoad:G$,safeLoadAll:W$,safeDump:K$};function J$(t){const e=t.split(`
`),n={ingress:[],egress:[]};let i=-1,s=-1;for(let l=0;l<e.length;l++){const c=e[l].match(/^(\s*)spec\s*:/);if(c){i=c[1].length,s=l;break}}if(s===-1)return n;const o=eq(e,s,i);if(o===-1)return n;for(let l=s+1;l<e.length;l++){const c=e[l],f=c.trimStart();if(f.length>0&&!f.startsWith("#")&&c.length-f.length<=i)break;const h=c.match(/^(\s*)(ingress|egress)\s*:/);if(h&&h[1].length===o){const p=h[2],y=tq(e,l,o);n[p]=y}}return n}function eq(t,e,n){for(let i=e+1;i<t.length;i++){const s=t[i],o=s.trimStart();if(o.length===0||o.startsWith("#"))continue;const l=s.length-o.length;if(l<=n)break;return l}return-1}function tq(t,e,n){const i=[];let s=-1,o=-1;for(let c=e+1;c<t.length;c++){const f=t[c],h=f.trimStart();if(h.length===0||h.startsWith("#"))continue;const p=f.length-h.length;if(p<n||p===n&&!h.startsWith("- "))break;if(h.startsWith("- ")){s=p,o=c;break}}if(o===-1)return i;let l=-1;for(let c=o;c<t.length;c++){const f=t[c],h=f.trimStart();if(h.length===0||h.startsWith("#"))continue;const p=f.length-h.length;if(p<n||p===n&&!h.startsWith("- ")){l!==-1&&i.push({startLine:l+1,endLine:m0(t,l,c-1)+1});break}p===s&&h.startsWith("- ")&&(l!==-1&&i.push({startLine:l+1,endLine:m0(t,l,c-1)+1}),l=c)}if(l!==-1){const c=i.length>0?i[i.length-1]:null;(!c||c.startLine!==l+1)&&i.push({startLine:l+1,endLine:m0(t,l,t.length-1)+1})}return i}function m0(t,e,n){let i=e;for(let s=n;s>=e;s--){const o=t[s].trim();if(o.length>0&&!o.startsWith("#")){i=s;break}}return i}const nq=["NetworkPolicy","GlobalNetworkPolicy"];function iq(t){if(!t.trim())return{policy:null,error:"Empty YAML input",ruleLineRanges:null};let e;try{e=Z$.load(t)}catch(g){return{policy:null,error:g instanceof Error?g.message:"Invalid YAML syntax",ruleLineRanges:null}}if(!e||typeof e!="object")return{policy:null,error:"YAML did not parse to an object",ruleLineRanges:null};const n=e;if(n.apiVersion!=="projectcalico.org/v3")return{policy:null,error:`Unsupported apiVersion: "${n.apiVersion}". Expected "projectcalico.org/v3"`,ruleLineRanges:null};if(!nq.includes(n.kind))return{policy:null,error:`Unsupported kind: "${n.kind}". Expected "NetworkPolicy" or "GlobalNetworkPolicy"`,ruleLineRanges:null};const i=n;if(!i.metadata?.name)return{policy:null,error:"Missing metadata.name",ruleLineRanges:null};if(!i.spec)return{policy:null,error:"Missing spec",ruleLineRanges:null};const s=Array.isArray(i.spec.ingress)&&i.spec.ingress.length>0,o=Array.isArray(i.spec.egress)&&i.spec.egress.length>0;let l=i.spec.types;(!l||l.length===0)&&(s&&o?l=["Ingress","Egress"]:o?l=["Egress"]:l=["Ingress"]);const c=l.includes("Ingress")?"deny":"allow",f=l.includes("Egress")?"deny":"allow",h={raw:i,name:i.metadata.name,namespace:i.metadata.namespace,kind:i.kind,tier:i.spec.tier||"default",order:i.spec.order,selector:i.spec.selector||"all()",namespaceSelector:i.spec.namespaceSelector,serviceAccountSelector:i.spec.serviceAccountSelector,types:l,ingressRules:i.spec.ingress||[],egressRules:i.spec.egress||[],ingressDefault:c,egressDefault:f},p=J$(t);return{policy:h,error:null,ruleLineRanges:p}}function sq(t,e){const n=q.useRef(t),i=q.useRef(null);q.useEffect(()=>{n.current=t},[t]),q.useEffect(()=>()=>{i.current!==null&&clearTimeout(i.current)},[]);const s=q.useCallback((...c)=>{i.current!==null&&clearTimeout(i.current),i.current=setTimeout(()=>{i.current=null,n.current(...c)},e)},[e]),o=q.useCallback(()=>{i.current!==null&&(clearTimeout(i.current),i.current=null)},[]),l=q.useCallback((...c)=>{i.current!==null&&(clearTimeout(i.current),i.current=null),n.current(...c)},[]);return q.useMemo(()=>({call:s,cancel:o,flush:l}),[s,o,l])}function rq(){const{state:t,dispatch:e}=Fl(),n=q.useRef(null),[i,s]=q.useState(!1),[o,l]=q.useState(208),[c,f]=q.useState(350),[h,p]=q.useState(!1),[g,y]=q.useState(!1),[v,b]=q.useState(!1),[S,A]=q.useState(!1),[k,T]=q.useState(320),[O,M]=q.useState(!1),L=q.useCallback(V=>{const N=iq(V);N.error?e({type:"SET_ERROR",payload:N.error}):e({type:"SET_POLICY",payload:{policy:N.policy,ruleLineRanges:N.ruleLineRanges}})},[e]),_=sq(L,400),R=q.useCallback(V=>{_.cancel(),e({type:"SET_YAML",payload:V}),L(V)},[e,L,_]),X=q.useCallback(V=>{e({type:"SET_YAML",payload:V}),_.call(V)},[e,_]),U=q.useCallback(V=>{R(V.yaml),b(!1)},[R]),ne=q.useCallback(()=>{n.current?.click()},[]),$=q.useCallback(V=>{const N=V.target.files?.[0];if(!N)return;const P=new FileReader;P.onload=j=>{const z=j.target?.result;z&&R(z)},P.readAsText(N),V.target.value=""},[R]),Q=q.useCallback(V=>{V.preventDefault(),p(!0);const N=V.clientX,P=c,j=G=>{const D=G.clientX-N,H=Math.max(250,Math.min(600,P+D));f(H)},z=()=>{p(!1),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",z)},[c]),Z=q.useCallback(V=>{V.preventDefault(),y(!0);const N=V.clientY,P=o,j=G=>{const D=N-G.clientY,H=Math.round(window.innerHeight*2/3),ee=Math.max(80,Math.min(H,P+D));l(ee)},z=()=>{y(!1),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",z)},[o]),B=q.useCallback(V=>{V.preventDefault(),M(!0);const N=V.clientX,P=k,j=G=>{const D=N-G.clientX,H=Math.max(260,Math.min(500,P+D));T(H)},z=()=>{M(!1),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",j),document.addEventListener("mouseup",z)},[k]);return C.jsxs("div",{className:"h-screen flex flex-col bg-slate-900",children:[C.jsxs("header",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm shrink-0",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),C.jsxs("h1",{className:"text-sm font-bold text-slate-100",children:["Calico Network Policy Visualizer ",C.jsxs("span",{className:"text-xs font-normal text-slate-300",children:["v","0.7.1"]})]})]}),C.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg bg-indigo-500/20 text-indigo-300 hover:bg-indigo-500/30 border border-indigo-500/30 transition-colors cursor-pointer ml-4",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Examples"]}),C.jsxs("button",{onClick:()=>A(!S),className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg border transition-colors cursor-pointer ${S?"bg-emerald-500/20 text-emerald-300 border-emerald-500/40":"bg-indigo-500/20 text-indigo-300 border-indigo-500/30 hover:bg-indigo-500/30"}`,children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Test Access"]})]}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("input",{ref:n,type:"file",accept:".yaml,.yml",onChange:$,className:"hidden"}),C.jsxs("button",{onClick:ne,className:"flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg bg-indigo-500/20 text-indigo-300 hover:bg-indigo-500/30 border border-indigo-500/30 transition-colors cursor-pointer",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import YAML"]})]})]}),C.jsxs("div",{className:"flex-1 flex min-h-0",children:[C.jsx("div",{className:"border-r border-slate-700 shrink-0 overflow-hidden",style:{width:c},children:C.jsx(UI,{onYamlChange:X})}),C.jsx("div",{className:`w-1 cursor-col-resize hover:bg-indigo-500/50 transition-colors shrink-0 ${h?"bg-indigo-500/50":"bg-transparent"}`,onMouseDown:Q}),C.jsx("div",{className:"flex-1 min-w-0",children:C.jsx(eO,{children:C.jsx(uV,{})})}),S&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:`w-1 cursor-col-resize hover:bg-indigo-500/50 transition-colors shrink-0 ${O?"bg-indigo-500/50":"bg-transparent"}`,onMouseDown:B}),C.jsx("div",{className:"border-l border-slate-700 shrink-0 overflow-hidden",style:{width:k},children:C.jsx(RV,{onClose:()=>A(!1)})})]})]}),t.policy&&C.jsxs("div",{className:"border-t border-slate-700 shrink-0",style:{height:i?32:o},children:[!i&&C.jsx("div",{className:`h-1 cursor-row-resize hover:bg-indigo-500/50 transition-colors ${g?"bg-indigo-500/50":"bg-transparent"}`,onMouseDown:Z}),C.jsxs("div",{className:"flex items-center justify-between px-3 h-8 border-b border-slate-700/50 bg-slate-800/50",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Explanation"}),C.jsx("button",{onClick:()=>s(!i),className:"text-slate-500 hover:text-slate-300 transition-colors cursor-pointer",children:C.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!i&&C.jsx("div",{style:{height:"calc(100% - 2rem - 4px)"},className:"overflow-hidden",children:C.jsx(gV,{})})]}),C.jsx(vV,{open:v,onClose:()=>b(!1),onSelect:U})]})}function oq(){return C.jsx(y3,{children:C.jsx(rq,{})})}p3.createRoot(document.getElementById("root")).render(C.jsx(q.StrictMode,{children:C.jsx(oq,{})}));
