(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function wk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pm={exports:{}},$a={};var _S;function d3(){if(_S)return $a;_S=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:i,key:l,ref:s!==void 0?s:null,props:o}}return $a.Fragment=e,$a.jsx=n,$a.jsxs=n,$a}var BS;function p3(){return BS||(BS=1,pm.exports=d3()),pm.exports}var w=p3(),gm={exports:{}},Ee={};var zS;function g3(){if(zS)return Ee;zS=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),y=Symbol.iterator;function v(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function A(D,j,ee){this.props=D,this.context=j,this.refs=k,this.updater=ee||b}A.prototype.isReactComponent={},A.prototype.setState=function(D,j){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,j,"setState")},A.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function N(){}N.prototype=A.prototype;function O(D,j,ee){this.props=D,this.context=j,this.refs=k,this.updater=ee||b}var M=O.prototype=new N;M.constructor=O,S(M,A.prototype),M.isPureReactComponent=!0;var _=Array.isArray;function L(){}var R={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function $(D,j,ee){var ie=ee.ref;return{$$typeof:t,type:D,key:j,ref:ie!==void 0?ie:null,props:ee}}function ne(D,j){return $(D.type,j,D.props)}function q(D){return typeof D=="object"&&D!==null&&D.$$typeof===t}function Q(D){var j={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ee){return j[ee]})}var Z=/\/+/g;function B(D,j){return typeof D=="object"&&D!==null&&D.key!=null?Q(""+D.key):j.toString(36)}function V(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(L,L):(D.status="pending",D.then(function(j){D.status==="pending"&&(D.status="fulfilled",D.value=j)},function(j){D.status==="pending"&&(D.status="rejected",D.reason=j)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function T(D,j,ee,ie,ce){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var fe=!1;if(D===null)fe=!0;else switch(he){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(D.$$typeof){case t:case e:fe=!0;break;case p:return fe=D._init,T(fe(D._payload),j,ee,ie,ce)}}if(fe)return ce=ce(D),fe=ie===""?"."+B(D,0):ie,_(ce)?(ee="",fe!=null&&(ee=fe.replace(Z,"$&/")+"/"),T(ce,j,ee,"",function(De){return De})):ce!=null&&(q(ce)&&(ce=ne(ce,ee+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(Z,"$&/")+"/")+fe)),j.push(ce)),1;fe=0;var ue=ie===""?".":ie+":";if(_(D))for(var ge=0;ge<D.length;ge++)ie=D[ge],he=ue+B(ie,ge),fe+=T(ie,j,ee,he,ce);else if(ge=v(D),typeof ge=="function")for(D=ge.call(D),ge=0;!(ie=D.next()).done;)ie=ie.value,he=ue+B(ie,ge++),fe+=T(ie,j,ee,he,ce);else if(he==="object"){if(typeof D.then=="function")return T(V(D),j,ee,ie,ce);throw j=String(D),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return fe}function P(D,j,ee){if(D==null)return D;var ie=[],ce=0;return T(D,ie,"","",function(he){return j.call(ee,he,ce++)}),ie}function H(D){if(D._status===-1){var j=D._result;j=j(),j.then(function(ee){(D._status===0||D._status===-1)&&(D._status=1,D._result=ee)},function(ee){(D._status===0||D._status===-1)&&(D._status=2,D._result=ee)}),D._status===-1&&(D._status=0,D._result=j)}if(D._status===1)return D._result.default;throw D._result}var z=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},G={map:P,forEach:function(D,j,ee){P(D,function(){j.apply(this,arguments)},ee)},count:function(D){var j=0;return P(D,function(){j++}),j},toArray:function(D){return P(D,function(j){return j})||[]},only:function(D){if(!q(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Ee.Activity=g,Ee.Children=G,Ee.Component=A,Ee.Fragment=n,Ee.Profiler=s,Ee.PureComponent=O,Ee.StrictMode=i,Ee.Suspense=f,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(D){return R.H.useMemoCache(D)}},Ee.cache=function(D){return function(){return D.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(D,j,ee){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=S({},D.props),ce=D.key;if(j!=null)for(he in j.key!==void 0&&(ce=""+j.key),j)!X.call(j,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&j.ref===void 0||(ie[he]=j[he]);var he=arguments.length-2;if(he===1)ie.children=ee;else if(1<he){for(var fe=Array(he),ue=0;ue<he;ue++)fe[ue]=arguments[ue+2];ie.children=fe}return $(D.type,ce,ie)},Ee.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:o,_context:D},D},Ee.createElement=function(D,j,ee){var ie,ce={},he=null;if(j!=null)for(ie in j.key!==void 0&&(he=""+j.key),j)X.call(j,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ce[ie]=j[ie]);var fe=arguments.length-2;if(fe===1)ce.children=ee;else if(1<fe){for(var ue=Array(fe),ge=0;ge<fe;ge++)ue[ge]=arguments[ge+2];ce.children=ue}if(D&&D.defaultProps)for(ie in fe=D.defaultProps,fe)ce[ie]===void 0&&(ce[ie]=fe[ie]);return $(D,he,ce)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(D){return{$$typeof:c,render:D}},Ee.isValidElement=q,Ee.lazy=function(D){return{$$typeof:p,_payload:{_status:-1,_result:D},_init:H}},Ee.memo=function(D,j){return{$$typeof:h,type:D,compare:j===void 0?null:j}},Ee.startTransition=function(D){var j=R.T,ee={};R.T=ee;try{var ie=D(),ce=R.S;ce!==null&&ce(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(L,z)}catch(he){z(he)}finally{j!==null&&ee.types!==null&&(j.types=ee.types),R.T=j}},Ee.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ee.use=function(D){return R.H.use(D)},Ee.useActionState=function(D,j,ee){return R.H.useActionState(D,j,ee)},Ee.useCallback=function(D,j){return R.H.useCallback(D,j)},Ee.useContext=function(D){return R.H.useContext(D)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(D,j){return R.H.useDeferredValue(D,j)},Ee.useEffect=function(D,j){return R.H.useEffect(D,j)},Ee.useEffectEvent=function(D){return R.H.useEffectEvent(D)},Ee.useId=function(){return R.H.useId()},Ee.useImperativeHandle=function(D,j,ee){return R.H.useImperativeHandle(D,j,ee)},Ee.useInsertionEffect=function(D,j){return R.H.useInsertionEffect(D,j)},Ee.useLayoutEffect=function(D,j){return R.H.useLayoutEffect(D,j)},Ee.useMemo=function(D,j){return R.H.useMemo(D,j)},Ee.useOptimistic=function(D,j){return R.H.useOptimistic(D,j)},Ee.useReducer=function(D,j,ee){return R.H.useReducer(D,j,ee)},Ee.useRef=function(D){return R.H.useRef(D)},Ee.useState=function(D){return R.H.useState(D)},Ee.useSyncExternalStore=function(D,j,ee){return R.H.useSyncExternalStore(D,j,ee)},Ee.useTransition=function(){return R.H.useTransition()},Ee.version="19.2.4",Ee}var PS;function Xc(){return PS||(PS=1,gm.exports=g3()),gm.exports}var U=Xc();const m3=wk(U);var mm={exports:{}},Ua={},ym={exports:{}},xm={};var jS;function y3(){return jS||(jS=1,(function(t){function e(T,P){var H=T.length;T.push(P);e:for(;0<H;){var z=H-1>>>1,G=T[z];if(0<s(G,P))T[z]=P,T[H]=G,H=z;else break e}}function n(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var P=T[0],H=T.pop();if(H!==P){T[0]=H;e:for(var z=0,G=T.length,D=G>>>1;z<D;){var j=2*(z+1)-1,ee=T[j],ie=j+1,ce=T[ie];if(0>s(ee,H))ie<G&&0>s(ce,ee)?(T[z]=ce,T[ie]=H,z=ie):(T[z]=ee,T[j]=H,z=j);else if(ie<G&&0>s(ce,H))T[z]=ce,T[ie]=H,z=ie;else break e}}return P}function s(T,P){var H=T.sortIndex-P.sortIndex;return H!==0?H:T.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],h=[],p=1,g=null,y=3,v=!1,b=!1,S=!1,k=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function M(T){for(var P=n(h);P!==null;){if(P.callback===null)i(h);else if(P.startTime<=T)i(h),P.sortIndex=P.expirationTime,e(f,P);else break;P=n(h)}}function _(T){if(S=!1,M(T),!b)if(n(f)!==null)b=!0,L||(L=!0,Q());else{var P=n(h);P!==null&&V(_,P.startTime-T)}}var L=!1,R=-1,X=5,$=-1;function ne(){return k?!0:!(t.unstable_now()-$<X)}function q(){if(k=!1,L){var T=t.unstable_now();$=T;var P=!0;try{e:{b=!1,S&&(S=!1,N(R),R=-1),v=!0;var H=y;try{t:{for(M(T),g=n(f);g!==null&&!(g.expirationTime>T&&ne());){var z=g.callback;if(typeof z=="function"){g.callback=null,y=g.priorityLevel;var G=z(g.expirationTime<=T);if(T=t.unstable_now(),typeof G=="function"){g.callback=G,M(T),P=!0;break t}g===n(f)&&i(f),M(T)}else i(f);g=n(f)}if(g!==null)P=!0;else{var D=n(h);D!==null&&V(_,D.startTime-T),P=!1}}break e}finally{g=null,y=H,v=!1}P=void 0}}finally{P?Q():L=!1}}}var Q;if(typeof O=="function")Q=function(){O(q)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,B=Z.port2;Z.port1.onmessage=q,Q=function(){B.postMessage(null)}}else Q=function(){A(q,0)};function V(T,P){R=A(function(){T(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(T){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var H=y;y=P;try{return T()}finally{y=H}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(T,P){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var H=y;y=T;try{return P()}finally{y=H}},t.unstable_scheduleCallback=function(T,P,H){var z=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,T){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,T={id:p++,callback:P,priorityLevel:T,startTime:H,expirationTime:G,sortIndex:-1},H>z?(T.sortIndex=H,e(h,T),n(f)===null&&T===n(h)&&(S?(N(R),R=-1):S=!0,V(_,H-z))):(T.sortIndex=G,e(f,T),b||v||(b=!0,L||(L=!0,Q()))),T},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(T){var P=y;return function(){var H=y;y=P;try{return T.apply(this,arguments)}finally{y=H}}}})(xm)),xm}var HS;function x3(){return HS||(HS=1,ym.exports=y3()),ym.exports}var vm={exports:{}},Xt={};var IS;function v3(){if(IS)return Xt;IS=1;var t=Xc();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(f,h,null,p)},Xt.flushSync=function(f){var h=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=h,i.p=p,i.d.f()}},Xt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},Xt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Xt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:v}):p==="script"&&i.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Xt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},Xt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);i.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Xt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},Xt.requestFormReset=function(f){i.d.r(f)},Xt.unstable_batchedUpdates=function(f,h){return f(h)},Xt.useFormState=function(f,h,p){return l.H.useFormState(f,h,p)},Xt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Xt.version="19.2.4",Xt}var VS;function Ck(){if(VS)return vm.exports;VS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vm.exports=v3(),vm.exports}var $S;function b3(){if($S)return Ua;$S=1;var t=x3(),e=Xc(),n=Ck();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function l(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function c(r){if(r.tag===31){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function h(r){var a=r.alternate;if(!a){if(a=o(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,d=a;;){var m=u.return;if(m===null)break;var x=m.alternate;if(x===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===x.child){for(x=m.child;x;){if(x===u)return f(m),r;if(x===d)return f(m),a;x=x.sibling}throw Error(i(188))}if(u.return!==d.return)u=m,d=x;else{for(var C=!1,E=m.child;E;){if(E===u){C=!0,u=m,d=x;break}if(E===d){C=!0,d=m,u=x;break}E=E.sibling}if(!C){for(E=x.child;E;){if(E===u){C=!0,u=x,d=m;break}if(E===d){C=!0,d=x,u=m;break}E=E.sibling}if(!C)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function p(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=p(r),a!==null)return a;r=r.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Symbol.for("react.client.reference");function B(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===Z?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case A:return"Profiler";case k:return"StrictMode";case _:return"Suspense";case L:return"SuspenseList";case $:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case b:return"Portal";case O:return r.displayName||"Context";case N:return(r._context.displayName||"Context")+".Consumer";case M:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return a=r.displayName||null,a!==null?a:B(r.type)||"Memo";case X:a=r._payload,r=r._init;try{return B(r(a))}catch{}}return null}var V=Array.isArray,T=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},z=[],G=-1;function D(r){return{current:r}}function j(r){0>G||(r.current=z[G],z[G]=null,G--)}function ee(r,a){G++,z[G]=r.current,r.current=a}var ie=D(null),ce=D(null),he=D(null),fe=D(null);function ue(r,a){switch(ee(he,a),ee(ce,r),ee(ie,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?iS(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=iS(a),r=sS(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}j(ie),ee(ie,r)}function ge(){j(ie),j(ce),j(he)}function De(r){r.memoizedState!==null&&ee(fe,r);var a=ie.current,u=sS(a,r.type);a!==u&&(ee(ce,r),ee(ie,u))}function Ne(r){ce.current===r&&(j(ie),j(ce)),fe.current===r&&(j(fe),ja._currentValue=H)}var ke,Oe;function Pe(r){if(ke===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ke=a&&a[1]||"",Oe=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+r+Oe}var We=!1;function Xe(r,a){if(!r||We)return"";We=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(se){var J=se}Reflect.construct(r,[],le)}else{try{le.call()}catch(se){J=se}r.call(le.prototype)}}else{try{throw Error()}catch(se){J=se}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(se){if(se&&J&&typeof se.stack=="string")return[se.stack,J.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=d.DetermineComponentFrameRoot(),C=x[0],E=x[1];if(C&&E){var I=C.split(`
`),K=E.split(`
`);for(m=d=0;d<I.length&&!I[d].includes("DetermineComponentFrameRoot");)d++;for(;m<K.length&&!K[m].includes("DetermineComponentFrameRoot");)m++;if(d===I.length||m===K.length)for(d=I.length-1,m=K.length-1;1<=d&&0<=m&&I[d]!==K[m];)m--;for(;1<=d&&0<=m;d--,m--)if(I[d]!==K[m]){if(d!==1||m!==1)do if(d--,m--,0>m||I[d]!==K[m]){var re=`
`+I[d].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=d&&0<=m);break}}}finally{We=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Pe(u):""}function Lt(r,a){switch(r.tag){case 26:case 27:case 5:return Pe(r.type);case 16:return Pe("Lazy");case 13:return r.child!==a&&a!==null?Pe("Suspense Fallback"):Pe("Suspense");case 19:return Pe("SuspenseList");case 0:case 15:return Xe(r.type,!1);case 11:return Xe(r.type.render,!1);case 1:return Xe(r.type,!0);case 31:return Pe("Activity");default:return""}}function Wn(r){try{var a="",u=null;do a+=Lt(r,u),u=r,r=r.return;while(r);return a}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var wn=Object.prototype.hasOwnProperty,Kn=t.unstable_scheduleCallback,Pi=t.unstable_cancelCallback,gr=t.unstable_shouldYield,mr=t.unstable_requestPaint,Pt=t.unstable_now,po=t.unstable_getCurrentPriorityLevel,ji=t.unstable_ImmediatePriority,bs=t.unstable_UserBlockingPriority,yr=t.unstable_NormalPriority,Kd=t.unstable_LowPriority,go=t.unstable_IdlePriority,Zd=t.log,Jd=t.unstable_setDisableYieldValue,xr=null,Zt=null;function di(r){if(typeof Zd=="function"&&Jd(r),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(xr,r)}catch{}}var Jt=Math.clz32?Math.clz32:np,ep=Math.log,tp=Math.LN2;function np(r){return r>>>=0,r===0?32:31-(ep(r)/tp|0)|0}var mo=256,yo=262144,xo=4194304;function Hi(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function vo(r,a,u){var d=r.pendingLanes;if(d===0)return 0;var m=0,x=r.suspendedLanes,C=r.pingedLanes;r=r.warmLanes;var E=d&134217727;return E!==0?(d=E&~x,d!==0?m=Hi(d):(C&=E,C!==0?m=Hi(C):u||(u=E&~r,u!==0&&(m=Hi(u))))):(E=d&~x,E!==0?m=Hi(E):C!==0?m=Hi(C):u||(u=d&~r,u!==0&&(m=Hi(u)))),m===0?0:a!==0&&a!==m&&(a&x)===0&&(x=m&-m,u=a&-a,x>=u||x===32&&(u&4194048)!==0)?a:m}function vr(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function ip(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function au(){var r=xo;return xo<<=1,(xo&62914560)===0&&(xo=4194304),r}function Gl(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function br(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function sp(r,a,u,d,m,x){var C=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var E=r.entanglements,I=r.expirationTimes,K=r.hiddenUpdates;for(u=C&~u;0<u;){var re=31-Jt(u),le=1<<re;E[re]=0,I[re]=-1;var J=K[re];if(J!==null)for(K[re]=null,re=0;re<J.length;re++){var se=J[re];se!==null&&(se.lane&=-536870913)}u&=~le}d!==0&&cu(r,d,0),x!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=x&~(C&~a))}function cu(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var d=31-Jt(a);r.entangledLanes|=a,r.entanglements[d]=r.entanglements[d]|1073741824|u&261930}function uu(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var d=31-Jt(u),m=1<<d;m&a|r[d]&a&&(r[d]|=a),u&=~m}}function fu(r,a){var u=a&-a;return u=(u&42)!==0?1:Wl(u),(u&(r.suspendedLanes|a))!==0?0:u}function Wl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Kl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function hu(){var r=P.p;return r!==0?r:(r=window.event,r===void 0?32:ES(r.type))}function du(r,a){var u=P.p;try{return P.p=r,a()}finally{P.p=u}}var pi=Math.random().toString(36).slice(2),Et="__reactFiber$"+pi,Yt="__reactProps$"+pi,Ii="__reactContainer$"+pi,bo="__reactEvents$"+pi,pu="__reactListeners$"+pi,rp="__reactHandles$"+pi,gu="__reactResources$"+pi,Sr="__reactMarker$"+pi;function Zl(r){delete r[Et],delete r[Yt],delete r[bo],delete r[pu],delete r[rp]}function Ss(r){var a=r[Et];if(a)return a;for(var u=r.parentNode;u;){if(a=u[Ii]||u[Et]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=fS(r);r!==null;){if(u=r[Et])return u;r=fS(r)}return a}r=u,u=r.parentNode}return null}function ws(r){if(r=r[Et]||r[Ii]){var a=r.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return r}return null}function Cs(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function ks(r){var a=r[gu];return a||(a=r[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vt(r){r[Sr]=!0}var mu=new Set,yu={};function Vi(r,a){As(r,a),As(r+"Capture",a)}function As(r,a){for(yu[r]=a,r=0;r<a.length;r++)mu.add(a[r])}var op=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},xu={};function lp(r){return wn.call(xu,r)?!0:wn.call(Jl,r)?!1:op.test(r)?xu[r]=!0:(Jl[r]=!0,!1)}function So(r,a,u){if(lp(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function wo(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function Zn(r,a,u,d){if(d===null)r.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+d)}}function on(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function vu(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ap(r,a,u){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a);if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,x=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return m.call(this)},set:function(C){u=""+C,x.call(this,C)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Co(r){if(!r._valueTracker){var a=vu(r)?"checked":"value";r._valueTracker=ap(r,a,""+r[a])}}function bu(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return r&&(d=vu(r)?r.checked?"true":"false":r.value),r=d,r!==u?(a.setValue(r),!0):!1}function wr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var cp=/[\n"\\]/g;function ln(r){return r.replace(cp,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Cr(r,a,u,d,m,x,C,E){r.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.type=C:r.removeAttribute("type"),a!=null?C==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+on(a)):r.value!==""+on(a)&&(r.value=""+on(a)):C!=="submit"&&C!=="reset"||r.removeAttribute("value"),a!=null?ea(r,C,on(a)):u!=null?ea(r,C,on(u)):d!=null&&r.removeAttribute("value"),m==null&&x!=null&&(r.defaultChecked=!!x),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.name=""+on(E):r.removeAttribute("name")}function Su(r,a,u,d,m,x,C,E){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(r.type=x),a!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){Co(r);return}u=u!=null?""+on(u):"",a=a!=null?""+on(a):u,E||a===r.value||(r.value=a),r.defaultValue=a}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=E?r.checked:!!d,r.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(r.name=C),Co(r)}function ea(r,a,u){a==="number"&&wr(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function $i(r,a,u,d){if(r=r.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<r.length;u++)m=a.hasOwnProperty("$"+r[u].value),r[u].selected!==m&&(r[u].selected=m),m&&d&&(r[u].defaultSelected=!0)}else{for(u=""+on(u),a=null,m=0;m<r.length;m++){if(r[m].value===u){r[m].selected=!0,d&&(r[m].defaultSelected=!0);return}a!==null||r[m].disabled||(a=r[m])}a!==null&&(a.selected=!0)}}function Zx(r,a,u){if(a!=null&&(a=""+on(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+on(u):""}function Jx(r,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(V(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=on(a),r.defaultValue=u,d=r.textContent,d===u&&d!==""&&d!==null&&(r.value=d),Co(r)}function ko(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var aT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ev(r,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":d?r.setProperty(a,u):typeof u!="number"||u===0||aT.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function tv(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var m in a)d=a[m],a.hasOwnProperty(m)&&u[m]!==d&&ev(r,m,d)}else for(var x in a)a.hasOwnProperty(x)&&ev(r,x,a[x])}function up(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(r){return uT.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ui(){}var fp=null;function hp(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ao=null,Oo=null;function nv(r){var a=ws(r);if(a&&(r=a.stateNode)){var u=r[Yt]||null;e:switch(r=a.stateNode,a.type){case"input":if(Cr(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ln(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==r&&d.form===r.form){var m=d[Yt]||null;if(!m)throw Error(i(90));Cr(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===r.form&&bu(d)}break e;case"textarea":Zx(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&$i(r,!!u.multiple,a,!1)}}}var dp=!1;function iv(r,a,u){if(dp)return r(a,u);dp=!0;try{var d=r(a);return d}finally{if(dp=!1,(Ao!==null||Oo!==null)&&(uf(),Ao&&(a=Ao,r=Oo,Oo=Ao=null,nv(a),r)))for(a=0;a<r.length;a++)nv(r[a])}}function ta(r,a){var u=r.stateNode;if(u===null)return null;var d=u[Yt]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pp=!1;if(qi)try{var na={};Object.defineProperty(na,"passive",{get:function(){pp=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{pp=!1}var Os=null,gp=null,Cu=null;function sv(){if(Cu)return Cu;var r,a=gp,u=a.length,d,m="value"in Os?Os.value:Os.textContent,x=m.length;for(r=0;r<u&&a[r]===m[r];r++);var C=u-r;for(d=1;d<=C&&a[u-d]===m[x-d];d++);return Cu=m.slice(r,1<d?1-d:void 0)}function ku(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Au(){return!0}function rv(){return!1}function an(r){function a(u,d,m,x,C){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(u=r[E],this[E]=u?u(x):x[E]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Au:rv,this.isPropagationStopped=rv,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Au)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Au)},persist:function(){},isPersistent:Au}),a}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=an(kr),ia=g({},kr,{view:0,detail:0}),fT=an(ia),mp,yp,sa,Eu=g({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vp,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==sa&&(sa&&r.type==="mousemove"?(mp=r.screenX-sa.screenX,yp=r.screenY-sa.screenY):yp=mp=0,sa=r),mp)},movementY:function(r){return"movementY"in r?r.movementY:yp}}),ov=an(Eu),hT=g({},Eu,{dataTransfer:0}),dT=an(hT),pT=g({},ia,{relatedTarget:0}),xp=an(pT),gT=g({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),mT=an(gT),yT=g({},kr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xT=an(yT),vT=g({},kr,{data:0}),lv=an(vT),bT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ST={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CT(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=wT[r])?!!a[r]:!1}function vp(){return CT}var kT=g({},ia,{key:function(r){if(r.key){var a=bT[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=ku(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ST[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vp,charCode:function(r){return r.type==="keypress"?ku(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ku(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),AT=an(kT),OT=g({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),av=an(OT),ET=g({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vp}),MT=an(ET),NT=g({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),TT=an(NT),DT=g({},Eu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),RT=an(DT),LT=g({},kr,{newState:0,oldState:0}),_T=an(LT),BT=[9,13,27,32],bp=qi&&"CompositionEvent"in window,ra=null;qi&&"documentMode"in document&&(ra=document.documentMode);var zT=qi&&"TextEvent"in window&&!ra,cv=qi&&(!bp||ra&&8<ra&&11>=ra),uv=" ",fv=!1;function hv(r,a){switch(r){case"keyup":return BT.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dv(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Eo=!1;function PT(r,a){switch(r){case"compositionend":return dv(a);case"keypress":return a.which!==32?null:(fv=!0,uv);case"textInput":return r=a.data,r===uv&&fv?null:r;default:return null}}function jT(r,a){if(Eo)return r==="compositionend"||!bp&&hv(r,a)?(r=sv(),Cu=gp=Os=null,Eo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return cv&&a.locale!=="ko"?null:a.data;default:return null}}var HT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pv(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!HT[r.type]:a==="textarea"}function gv(r,a,u,d){Ao?Oo?Oo.push(d):Oo=[d]:Ao=d,a=yf(a,"onChange"),0<a.length&&(u=new Ou("onChange","change",null,u,d),r.push({event:u,listeners:a}))}var oa=null,la=null;function IT(r){Kb(r,0)}function Mu(r){var a=Cs(r);if(bu(a))return r}function mv(r,a){if(r==="change")return a}var yv=!1;if(qi){var Sp;if(qi){var wp="oninput"in document;if(!wp){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),wp=typeof xv.oninput=="function"}Sp=wp}else Sp=!1;yv=Sp&&(!document.documentMode||9<document.documentMode)}function vv(){oa&&(oa.detachEvent("onpropertychange",bv),la=oa=null)}function bv(r){if(r.propertyName==="value"&&Mu(la)){var a=[];gv(a,la,r,hp(r)),iv(IT,a)}}function VT(r,a,u){r==="focusin"?(vv(),oa=a,la=u,oa.attachEvent("onpropertychange",bv)):r==="focusout"&&vv()}function $T(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Mu(la)}function UT(r,a){if(r==="click")return Mu(a)}function qT(r,a){if(r==="input"||r==="change")return Mu(a)}function QT(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Cn=typeof Object.is=="function"?Object.is:QT;function aa(r,a){if(Cn(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!wn.call(a,m)||!Cn(r[m],a[m]))return!1}return!0}function Sv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function wv(r,a){var u=Sv(r);r=0;for(var d;u;){if(u.nodeType===3){if(d=r+u.textContent.length,r<=a&&d>=a)return{node:u,offset:a-r};r=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Sv(u)}}function Cv(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Cv(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function kv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=wr(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=wr(r.document)}return a}function Cp(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var YT=qi&&"documentMode"in document&&11>=document.documentMode,Mo=null,kp=null,ca=null,Ap=!1;function Av(r,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ap||Mo==null||Mo!==wr(d)||(d=Mo,"selectionStart"in d&&Cp(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ca&&aa(ca,d)||(ca=d,d=yf(kp,"onSelect"),0<d.length&&(a=new Ou("onSelect","select",null,a,u),r.push({event:a,listeners:d}),a.target=Mo)))}function Ar(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var No={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionrun:Ar("Transition","TransitionRun"),transitionstart:Ar("Transition","TransitionStart"),transitioncancel:Ar("Transition","TransitionCancel"),transitionend:Ar("Transition","TransitionEnd")},Op={},Ov={};qi&&(Ov=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Or(r){if(Op[r])return Op[r];if(!No[r])return r;var a=No[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in Ov)return Op[r]=a[u];return r}var Ev=Or("animationend"),Mv=Or("animationiteration"),Nv=Or("animationstart"),XT=Or("transitionrun"),FT=Or("transitionstart"),GT=Or("transitioncancel"),Tv=Or("transitionend"),Dv=new Map,Ep="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ep.push("scrollEnd");function Jn(r,a){Dv.set(r,a),Vi(a,[r])}var Nu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},zn=[],To=0,Mp=0;function Tu(){for(var r=To,a=Mp=To=0;a<r;){var u=zn[a];zn[a++]=null;var d=zn[a];zn[a++]=null;var m=zn[a];zn[a++]=null;var x=zn[a];if(zn[a++]=null,d!==null&&m!==null){var C=d.pending;C===null?m.next=m:(m.next=C.next,C.next=m),d.pending=m}x!==0&&Rv(u,m,x)}}function Du(r,a,u,d){zn[To++]=r,zn[To++]=a,zn[To++]=u,zn[To++]=d,Mp|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function Np(r,a,u,d){return Du(r,a,u,d),Ru(r)}function Er(r,a){return Du(r,null,null,a),Ru(r)}function Rv(r,a,u){r.lanes|=u;var d=r.alternate;d!==null&&(d.lanes|=u);for(var m=!1,x=r.return;x!==null;)x.childLanes|=u,d=x.alternate,d!==null&&(d.childLanes|=u),x.tag===22&&(r=x.stateNode,r===null||r._visibility&1||(m=!0)),r=x,x=x.return;return r.tag===3?(x=r.stateNode,m&&a!==null&&(m=31-Jt(u),r=x.hiddenUpdates,d=r[m],d===null?r[m]=[a]:d.push(a),a.lane=u|536870912),x):null}function Ru(r){if(50<Da)throw Da=0,jg=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var Do={};function WT(r,a,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(r,a,u,d){return new WT(r,a,u,d)}function Tp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Qi(r,a){var u=r.alternate;return u===null?(u=kn(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Lv(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Lu(r,a,u,d,m,x){var C=0;if(d=r,typeof r=="function")Tp(r)&&(C=1);else if(typeof r=="string")C=t3(r,u,ie.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case $:return r=kn(31,u,a,m),r.elementType=$,r.lanes=x,r;case S:return Mr(u.children,m,x,a);case k:C=8,m|=24;break;case A:return r=kn(12,u,a,m|2),r.elementType=A,r.lanes=x,r;case _:return r=kn(13,u,a,m),r.elementType=_,r.lanes=x,r;case L:return r=kn(19,u,a,m),r.elementType=L,r.lanes=x,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:C=10;break e;case N:C=9;break e;case M:C=11;break e;case R:C=14;break e;case X:C=16,d=null;break e}C=29,u=Error(i(130,r===null?"null":typeof r,"")),d=null}return a=kn(C,u,a,m),a.elementType=r,a.type=d,a.lanes=x,a}function Mr(r,a,u,d){return r=kn(7,r,d,a),r.lanes=u,r}function Dp(r,a,u){return r=kn(6,r,null,a),r.lanes=u,r}function _v(r){var a=kn(18,null,null,0);return a.stateNode=r,a}function Rp(r,a,u){return a=kn(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var Bv=new WeakMap;function Pn(r,a){if(typeof r=="object"&&r!==null){var u=Bv.get(r);return u!==void 0?u:(a={value:r,source:a,stack:Wn(a)},Bv.set(r,a),a)}return{value:r,source:a,stack:Wn(a)}}var Ro=[],Lo=0,_u=null,ua=0,jn=[],Hn=0,Es=null,gi=1,mi="";function Yi(r,a){Ro[Lo++]=ua,Ro[Lo++]=_u,_u=r,ua=a}function zv(r,a,u){jn[Hn++]=gi,jn[Hn++]=mi,jn[Hn++]=Es,Es=r;var d=gi;r=mi;var m=32-Jt(d)-1;d&=~(1<<m),u+=1;var x=32-Jt(a)+m;if(30<x){var C=m-m%5;x=(d&(1<<C)-1).toString(32),d>>=C,m-=C,gi=1<<32-Jt(a)+m|u<<m|d,mi=x+r}else gi=1<<x|u<<m|d,mi=r}function Lp(r){r.return!==null&&(Yi(r,1),zv(r,1,0))}function _p(r){for(;r===_u;)_u=Ro[--Lo],Ro[Lo]=null,ua=Ro[--Lo],Ro[Lo]=null;for(;r===Es;)Es=jn[--Hn],jn[Hn]=null,mi=jn[--Hn],jn[Hn]=null,gi=jn[--Hn],jn[Hn]=null}function Pv(r,a){jn[Hn++]=gi,jn[Hn++]=mi,jn[Hn++]=Es,gi=a.id,mi=a.overflow,Es=r}var jt=null,rt=null,Ie=!1,Ms=null,In=!1,Bp=Error(i(519));function Ns(r){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fa(Pn(a,r)),Bp}function jv(r){var a=r.stateNode,u=r.type,d=r.memoizedProps;switch(a[Et]=r,a[Yt]=d,u){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(u=0;u<La.length;u++)Be(La[u],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":Be("invalid",a),Su(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Be("invalid",a);break;case"textarea":Be("invalid",a),Jx(a,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||tS(a.textContent,u)?(d.popover!=null&&(Be("beforetoggle",a),Be("toggle",a)),d.onScroll!=null&&Be("scroll",a),d.onScrollEnd!=null&&Be("scrollend",a),d.onClick!=null&&(a.onclick=Ui),a=!0):a=!1,a||Ns(r,!0)}function Hv(r){for(jt=r.return;jt;)switch(jt.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:jt=jt.return}}function _o(r){if(r!==jt)return!1;if(!Ie)return Hv(r),Ie=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Jg(r.type,r.memoizedProps)),u=!u),u&&rt&&Ns(r),Hv(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));rt=uS(r)}else if(a===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));rt=uS(r)}else a===27?(a=rt,Us(r.type)?(r=sm,sm=null,rt=r):rt=a):rt=jt?$n(r.stateNode.nextSibling):null;return!0}function Nr(){rt=jt=null,Ie=!1}function zp(){var r=Ms;return r!==null&&(hn===null?hn=r:hn.push.apply(hn,r),Ms=null),r}function fa(r){Ms===null?Ms=[r]:Ms.push(r)}var Pp=D(null),Tr=null,Xi=null;function Ts(r,a,u){ee(Pp,a._currentValue),a._currentValue=u}function Fi(r){r._currentValue=Pp.current,j(Pp)}function jp(r,a,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),r===u)break;r=r.return}}function Hp(r,a,u,d){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var x=m.dependencies;if(x!==null){var C=m.child;x=x.firstContext;e:for(;x!==null;){var E=x;x=m;for(var I=0;I<a.length;I++)if(E.context===a[I]){x.lanes|=u,E=x.alternate,E!==null&&(E.lanes|=u),jp(x.return,u,r),d||(C=null);break e}x=E.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(i(341));C.lanes|=u,x=C.alternate,x!==null&&(x.lanes|=u),jp(C,u,r),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===r){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function Bo(r,a,u,d){r=null;for(var m=a,x=!1;m!==null;){if(!x){if((m.flags&524288)!==0)x=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var E=m.type;Cn(m.pendingProps.value,C.value)||(r!==null?r.push(E):r=[E])}}else if(m===fe.current){if(C=m.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(ja):r=[ja])}m=m.return}r!==null&&Hp(a,r,u,d),a.flags|=262144}function Bu(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Dr(r){Tr=r,Xi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ht(r){return Iv(Tr,r)}function zu(r,a){return Tr===null&&Dr(r),Iv(r,a)}function Iv(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Xi===null){if(r===null)throw Error(i(308));Xi=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else Xi=Xi.next=a;return u}var KT=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,d){r.push(d)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},ZT=t.unstable_scheduleCallback,JT=t.unstable_NormalPriority,bt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ip(){return{controller:new KT,data:new Map,refCount:0}}function ha(r){r.refCount--,r.refCount===0&&ZT(JT,function(){r.controller.abort()})}var da=null,Vp=0,zo=0,Po=null;function eD(r,a){if(da===null){var u=da=[];Vp=0,zo=qg(),Po={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Vp++,a.then(Vv,Vv),a}function Vv(){if(--Vp===0&&da!==null){Po!==null&&(Po.status="fulfilled");var r=da;da=null,zo=0,Po=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function tD(r,a){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return r.then(function(){d.status="fulfilled",d.value=a;for(var m=0;m<u.length;m++)(0,u[m])(a)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var $v=T.S;T.S=function(r,a){Ab=Pt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&eD(r,a),$v!==null&&$v(r,a)};var Rr=D(null);function $p(){var r=Rr.current;return r!==null?r:tt.pooledCache}function Pu(r,a){a===null?ee(Rr,Rr.current):ee(Rr,a.pool)}function Uv(){var r=$p();return r===null?null:{parent:bt._currentValue,pool:r}}var jo=Error(i(460)),Up=Error(i(474)),ju=Error(i(542)),Hu={then:function(){}};function qv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Qv(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(Ui,Ui),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Xv(r),r;default:if(typeof a.status=="string")a.then(Ui,Ui);else{if(r=tt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(d){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=d}},function(d){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Xv(r),r}throw _r=a,jo}}function Lr(r){try{var a=r._init;return a(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_r=u,jo):u}}var _r=null;function Yv(){if(_r===null)throw Error(i(459));var r=_r;return _r=null,r}function Xv(r){if(r===jo||r===ju)throw Error(i(483))}var Ho=null,pa=0;function Iu(r){var a=pa;return pa+=1,Ho===null&&(Ho=[]),Qv(Ho,r,a)}function ga(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Vu(r,a){throw a.$$typeof===y?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function Fv(r){function a(F,Y){if(r){var W=F.deletions;W===null?(F.deletions=[Y],F.flags|=16):W.push(Y)}}function u(F,Y){if(!r)return null;for(;Y!==null;)a(F,Y),Y=Y.sibling;return null}function d(F){for(var Y=new Map;F!==null;)F.key!==null?Y.set(F.key,F):Y.set(F.index,F),F=F.sibling;return Y}function m(F,Y){return F=Qi(F,Y),F.index=0,F.sibling=null,F}function x(F,Y,W){return F.index=W,r?(W=F.alternate,W!==null?(W=W.index,W<Y?(F.flags|=67108866,Y):W):(F.flags|=67108866,Y)):(F.flags|=1048576,Y)}function C(F){return r&&F.alternate===null&&(F.flags|=67108866),F}function E(F,Y,W,oe){return Y===null||Y.tag!==6?(Y=Dp(W,F.mode,oe),Y.return=F,Y):(Y=m(Y,W),Y.return=F,Y)}function I(F,Y,W,oe){var Ce=W.type;return Ce===S?re(F,Y,W.props.children,oe,W.key):Y!==null&&(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&Lr(Ce)===Y.type)?(Y=m(Y,W.props),ga(Y,W),Y.return=F,Y):(Y=Lu(W.type,W.key,W.props,null,F.mode,oe),ga(Y,W),Y.return=F,Y)}function K(F,Y,W,oe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==W.containerInfo||Y.stateNode.implementation!==W.implementation?(Y=Rp(W,F.mode,oe),Y.return=F,Y):(Y=m(Y,W.children||[]),Y.return=F,Y)}function re(F,Y,W,oe,Ce){return Y===null||Y.tag!==7?(Y=Mr(W,F.mode,oe,Ce),Y.return=F,Y):(Y=m(Y,W),Y.return=F,Y)}function le(F,Y,W){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Dp(""+Y,F.mode,W),Y.return=F,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return W=Lu(Y.type,Y.key,Y.props,null,F.mode,W),ga(W,Y),W.return=F,W;case b:return Y=Rp(Y,F.mode,W),Y.return=F,Y;case X:return Y=Lr(Y),le(F,Y,W)}if(V(Y)||Q(Y))return Y=Mr(Y,F.mode,W,null),Y.return=F,Y;if(typeof Y.then=="function")return le(F,Iu(Y),W);if(Y.$$typeof===O)return le(F,zu(F,Y),W);Vu(F,Y)}return null}function J(F,Y,W,oe){var Ce=Y!==null?Y.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ce!==null?null:E(F,Y,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return W.key===Ce?I(F,Y,W,oe):null;case b:return W.key===Ce?K(F,Y,W,oe):null;case X:return W=Lr(W),J(F,Y,W,oe)}if(V(W)||Q(W))return Ce!==null?null:re(F,Y,W,oe,null);if(typeof W.then=="function")return J(F,Y,Iu(W),oe);if(W.$$typeof===O)return J(F,Y,zu(F,W),oe);Vu(F,W)}return null}function se(F,Y,W,oe,Ce){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return F=F.get(W)||null,E(Y,F,""+oe,Ce);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case v:return F=F.get(oe.key===null?W:oe.key)||null,I(Y,F,oe,Ce);case b:return F=F.get(oe.key===null?W:oe.key)||null,K(Y,F,oe,Ce);case X:return oe=Lr(oe),se(F,Y,W,oe,Ce)}if(V(oe)||Q(oe))return F=F.get(W)||null,re(Y,F,oe,Ce,null);if(typeof oe.then=="function")return se(F,Y,W,Iu(oe),Ce);if(oe.$$typeof===O)return se(F,Y,W,zu(Y,oe),Ce);Vu(Y,oe)}return null}function xe(F,Y,W,oe){for(var Ce=null,Ue=null,ve=Y,Re=Y=0,He=null;ve!==null&&Re<W.length;Re++){ve.index>Re?(He=ve,ve=null):He=ve.sibling;var qe=J(F,ve,W[Re],oe);if(qe===null){ve===null&&(ve=He);break}r&&ve&&qe.alternate===null&&a(F,ve),Y=x(qe,Y,Re),Ue===null?Ce=qe:Ue.sibling=qe,Ue=qe,ve=He}if(Re===W.length)return u(F,ve),Ie&&Yi(F,Re),Ce;if(ve===null){for(;Re<W.length;Re++)ve=le(F,W[Re],oe),ve!==null&&(Y=x(ve,Y,Re),Ue===null?Ce=ve:Ue.sibling=ve,Ue=ve);return Ie&&Yi(F,Re),Ce}for(ve=d(ve);Re<W.length;Re++)He=se(ve,F,Re,W[Re],oe),He!==null&&(r&&He.alternate!==null&&ve.delete(He.key===null?Re:He.key),Y=x(He,Y,Re),Ue===null?Ce=He:Ue.sibling=He,Ue=He);return r&&ve.forEach(function(Fs){return a(F,Fs)}),Ie&&Yi(F,Re),Ce}function Ae(F,Y,W,oe){if(W==null)throw Error(i(151));for(var Ce=null,Ue=null,ve=Y,Re=Y=0,He=null,qe=W.next();ve!==null&&!qe.done;Re++,qe=W.next()){ve.index>Re?(He=ve,ve=null):He=ve.sibling;var Fs=J(F,ve,qe.value,oe);if(Fs===null){ve===null&&(ve=He);break}r&&ve&&Fs.alternate===null&&a(F,ve),Y=x(Fs,Y,Re),Ue===null?Ce=Fs:Ue.sibling=Fs,Ue=Fs,ve=He}if(qe.done)return u(F,ve),Ie&&Yi(F,Re),Ce;if(ve===null){for(;!qe.done;Re++,qe=W.next())qe=le(F,qe.value,oe),qe!==null&&(Y=x(qe,Y,Re),Ue===null?Ce=qe:Ue.sibling=qe,Ue=qe);return Ie&&Yi(F,Re),Ce}for(ve=d(ve);!qe.done;Re++,qe=W.next())qe=se(ve,F,Re,qe.value,oe),qe!==null&&(r&&qe.alternate!==null&&ve.delete(qe.key===null?Re:qe.key),Y=x(qe,Y,Re),Ue===null?Ce=qe:Ue.sibling=qe,Ue=qe);return r&&ve.forEach(function(h3){return a(F,h3)}),Ie&&Yi(F,Re),Ce}function Je(F,Y,W,oe){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case v:e:{for(var Ce=W.key;Y!==null;){if(Y.key===Ce){if(Ce=W.type,Ce===S){if(Y.tag===7){u(F,Y.sibling),oe=m(Y,W.props.children),oe.return=F,F=oe;break e}}else if(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&Lr(Ce)===Y.type){u(F,Y.sibling),oe=m(Y,W.props),ga(oe,W),oe.return=F,F=oe;break e}u(F,Y);break}else a(F,Y);Y=Y.sibling}W.type===S?(oe=Mr(W.props.children,F.mode,oe,W.key),oe.return=F,F=oe):(oe=Lu(W.type,W.key,W.props,null,F.mode,oe),ga(oe,W),oe.return=F,F=oe)}return C(F);case b:e:{for(Ce=W.key;Y!==null;){if(Y.key===Ce)if(Y.tag===4&&Y.stateNode.containerInfo===W.containerInfo&&Y.stateNode.implementation===W.implementation){u(F,Y.sibling),oe=m(Y,W.children||[]),oe.return=F,F=oe;break e}else{u(F,Y);break}else a(F,Y);Y=Y.sibling}oe=Rp(W,F.mode,oe),oe.return=F,F=oe}return C(F);case X:return W=Lr(W),Je(F,Y,W,oe)}if(V(W))return xe(F,Y,W,oe);if(Q(W)){if(Ce=Q(W),typeof Ce!="function")throw Error(i(150));return W=Ce.call(W),Ae(F,Y,W,oe)}if(typeof W.then=="function")return Je(F,Y,Iu(W),oe);if(W.$$typeof===O)return Je(F,Y,zu(F,W),oe);Vu(F,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,Y!==null&&Y.tag===6?(u(F,Y.sibling),oe=m(Y,W),oe.return=F,F=oe):(u(F,Y),oe=Dp(W,F.mode,oe),oe.return=F,F=oe),C(F)):u(F,Y)}return function(F,Y,W,oe){try{pa=0;var Ce=Je(F,Y,W,oe);return Ho=null,Ce}catch(ve){if(ve===jo||ve===ju)throw ve;var Ue=kn(29,ve,null,F.mode);return Ue.lanes=oe,Ue.return=F,Ue}}}var Br=Fv(!0),Gv=Fv(!1),Ds=!1;function qp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qp(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Rs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Ls(r,a,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Ye&2)!==0){var m=d.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),d.pending=a,a=Ru(r),Rv(r,null,u),a}return Du(r,d,a,u),Ru(r)}function ma(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=r.pendingLanes,u|=d,a.lanes=u,uu(r,u)}}function Yp(r,a){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?m=x=C:x=x.next=C,u=u.next}while(u!==null);x===null?m=x=a:x=x.next=a}else m=x=a;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:x,shared:d.shared,callbacks:d.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Xp=!1;function ya(){if(Xp){var r=Po;if(r!==null)throw r}}function xa(r,a,u,d){Xp=!1;var m=r.updateQueue;Ds=!1;var x=m.firstBaseUpdate,C=m.lastBaseUpdate,E=m.shared.pending;if(E!==null){m.shared.pending=null;var I=E,K=I.next;I.next=null,C===null?x=K:C.next=K,C=I;var re=r.alternate;re!==null&&(re=re.updateQueue,E=re.lastBaseUpdate,E!==C&&(E===null?re.firstBaseUpdate=K:E.next=K,re.lastBaseUpdate=I))}if(x!==null){var le=m.baseState;C=0,re=K=I=null,E=x;do{var J=E.lane&-536870913,se=J!==E.lane;if(se?(je&J)===J:(d&J)===J){J!==0&&J===zo&&(Xp=!0),re!==null&&(re=re.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var xe=r,Ae=E;J=a;var Je=u;switch(Ae.tag){case 1:if(xe=Ae.payload,typeof xe=="function"){le=xe.call(Je,le,J);break e}le=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ae.payload,J=typeof xe=="function"?xe.call(Je,le,J):xe,J==null)break e;le=g({},le,J);break e;case 2:Ds=!0}}J=E.callback,J!==null&&(r.flags|=64,se&&(r.flags|=8192),se=m.callbacks,se===null?m.callbacks=[J]:se.push(J))}else se={lane:J,tag:E.tag,payload:E.payload,callback:E.callback,next:null},re===null?(K=re=se,I=le):re=re.next=se,C|=J;if(E=E.next,E===null){if(E=m.shared.pending,E===null)break;se=E,E=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);re===null&&(I=le),m.baseState=I,m.firstBaseUpdate=K,m.lastBaseUpdate=re,x===null&&(m.shared.lanes=0),js|=C,r.lanes=C,r.memoizedState=le}}function Wv(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Kv(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Wv(u[r],a)}var Io=D(null),$u=D(0);function Zv(r,a){r=is,ee($u,r),ee(Io,a),is=r|a.baseLanes}function Fp(){ee($u,is),ee(Io,Io.current)}function Gp(){is=$u.current,j(Io),j($u)}var An=D(null),Vn=null;function _s(r){var a=r.alternate;ee(pt,pt.current&1),ee(An,r),Vn===null&&(a===null||Io.current!==null||a.memoizedState!==null)&&(Vn=r)}function Wp(r){ee(pt,pt.current),ee(An,r),Vn===null&&(Vn=r)}function Jv(r){r.tag===22?(ee(pt,pt.current),ee(An,r),Vn===null&&(Vn=r)):Bs()}function Bs(){ee(pt,pt.current),ee(An,An.current)}function On(r){j(An),Vn===r&&(Vn=null),j(pt)}var pt=D(0);function Uu(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||nm(u)||im(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Gi=0,Te=null,Ke=null,St=null,qu=!1,Vo=!1,zr=!1,Qu=0,va=0,$o=null,nD=0;function ft(){throw Error(i(321))}function Kp(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!Cn(r[u],a[u]))return!1;return!0}function Zp(r,a,u,d,m,x){return Gi=x,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,T.H=r===null||r.memoizedState===null?z1:dg,zr=!1,x=u(d,m),zr=!1,Vo&&(x=t1(a,u,d,m)),e1(r),x}function e1(r){T.H=wa;var a=Ke!==null&&Ke.next!==null;if(Gi=0,St=Ke=Te=null,qu=!1,va=0,$o=null,a)throw Error(i(300));r===null||wt||(r=r.dependencies,r!==null&&Bu(r)&&(wt=!0))}function t1(r,a,u,d){Te=r;var m=0;do{if(Vo&&($o=null),va=0,Vo=!1,25<=m)throw Error(i(301));if(m+=1,St=Ke=null,r.updateQueue!=null){var x=r.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}T.H=P1,x=a(u,d)}while(Vo);return x}function iD(){var r=T.H,a=r.useState()[0];return a=typeof a.then=="function"?ba(a):a,r=r.useState()[0],(Ke!==null?Ke.memoizedState:null)!==r&&(Te.flags|=1024),a}function Jp(){var r=Qu!==0;return Qu=0,r}function eg(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function tg(r){if(qu){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}qu=!1}Gi=0,St=Ke=Te=null,Vo=!1,va=Qu=0,$o=null}function en(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Te.memoizedState=St=r:St=St.next=r,St}function gt(){if(Ke===null){var r=Te.alternate;r=r!==null?r.memoizedState:null}else r=Ke.next;var a=St===null?Te.memoizedState:St.next;if(a!==null)St=a,Ke=r;else{if(r===null)throw Te.alternate===null?Error(i(467)):Error(i(310));Ke=r,r={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},St===null?Te.memoizedState=St=r:St=St.next=r}return St}function Yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ba(r){var a=va;return va+=1,$o===null&&($o=[]),r=Qv($o,r,a),a=Te,(St===null?a.memoizedState:St.next)===null&&(a=a.alternate,T.H=a===null||a.memoizedState===null?z1:dg),r}function Xu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ba(r);if(r.$$typeof===O)return Ht(r)}throw Error(i(438,String(r)))}function ng(r){var a=null,u=Te.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=Te.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Yu(),Te.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),d=0;d<r;d++)u[d]=ne;return a.index++,u}function Wi(r,a){return typeof a=="function"?a(r):a}function Fu(r){var a=gt();return ig(a,Ke,r)}function ig(r,a,u){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var m=r.baseQueue,x=d.pending;if(x!==null){if(m!==null){var C=m.next;m.next=x.next,x.next=C}a.baseQueue=m=x,d.pending=null}if(x=r.baseState,m===null)r.memoizedState=x;else{a=m.next;var E=C=null,I=null,K=a,re=!1;do{var le=K.lane&-536870913;if(le!==K.lane?(je&le)===le:(Gi&le)===le){var J=K.revertLane;if(J===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),le===zo&&(re=!0);else if((Gi&J)===J){K=K.next,J===zo&&(re=!0);continue}else le={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(E=I=le,C=x):I=I.next=le,Te.lanes|=J,js|=J;le=K.action,zr&&u(x,le),x=K.hasEagerState?K.eagerState:u(x,le)}else J={lane:le,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},I===null?(E=I=J,C=x):I=I.next=J,Te.lanes|=le,js|=le;K=K.next}while(K!==null&&K!==a);if(I===null?C=x:I.next=E,!Cn(x,r.memoizedState)&&(wt=!0,re&&(u=Po,u!==null)))throw u;r.memoizedState=x,r.baseState=C,r.baseQueue=I,d.lastRenderedState=x}return m===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function sg(r){var a=gt(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var d=u.dispatch,m=u.pending,x=a.memoizedState;if(m!==null){u.pending=null;var C=m=m.next;do x=r(x,C.action),C=C.next;while(C!==m);Cn(x,a.memoizedState)||(wt=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),u.lastRenderedState=x}return[x,d]}function n1(r,a,u){var d=Te,m=gt(),x=Ie;if(x){if(u===void 0)throw Error(i(407));u=u()}else u=a();var C=!Cn((Ke||m).memoizedState,u);if(C&&(m.memoizedState=u,wt=!0),m=m.queue,lg(r1.bind(null,d,m,r),[r]),m.getSnapshot!==a||C||St!==null&&St.memoizedState.tag&1){if(d.flags|=2048,Uo(9,{destroy:void 0},s1.bind(null,d,m,u,a),null),tt===null)throw Error(i(349));x||(Gi&127)!==0||i1(d,a,u)}return u}function i1(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=Te.updateQueue,a===null?(a=Yu(),Te.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function s1(r,a,u,d){a.value=u,a.getSnapshot=d,o1(a)&&l1(r)}function r1(r,a,u){return u(function(){o1(a)&&l1(r)})}function o1(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!Cn(r,u)}catch{return!0}}function l1(r){var a=Er(r,2);a!==null&&dn(a,r,2)}function rg(r){var a=en();if(typeof r=="function"){var u=r;if(r=u(),zr){di(!0);try{u()}finally{di(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:r},a}function a1(r,a,u,d){return r.baseState=u,ig(r,Ke,typeof d=="function"?d:Wi)}function sD(r,a,u,d,m){if(Ku(r))throw Error(i(485));if(r=a.action,r!==null){var x={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};T.T!==null?u(!0):x.isTransition=!1,d(x),u=a.pending,u===null?(x.next=a.pending=x,c1(a,x)):(x.next=u.next,a.pending=u.next=x)}}function c1(r,a){var u=a.action,d=a.payload,m=r.state;if(a.isTransition){var x=T.T,C={};T.T=C;try{var E=u(m,d),I=T.S;I!==null&&I(C,E),u1(r,a,E)}catch(K){og(r,a,K)}finally{x!==null&&C.types!==null&&(x.types=C.types),T.T=x}}else try{x=u(m,d),u1(r,a,x)}catch(K){og(r,a,K)}}function u1(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){f1(r,a,d)},function(d){return og(r,a,d)}):f1(r,a,u)}function f1(r,a,u){a.status="fulfilled",a.value=u,h1(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,c1(r,u)))}function og(r,a,u){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,h1(a),a=a.next;while(a!==d)}r.action=null}function h1(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function d1(r,a){return a}function p1(r,a){if(Ie){var u=tt.formState;if(u!==null){e:{var d=Te;if(Ie){if(rt){t:{for(var m=rt,x=In;m.nodeType!==8;){if(!x){m=null;break t}if(m=$n(m.nextSibling),m===null){m=null;break t}}x=m.data,m=x==="F!"||x==="F"?m:null}if(m){rt=$n(m.nextSibling),d=m.data==="F!";break e}}Ns(d)}d=!1}d&&(a=u[0])}}return u=en(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d1,lastRenderedState:a},u.queue=d,u=L1.bind(null,Te,d),d.dispatch=u,d=rg(!1),x=hg.bind(null,Te,!1,d.queue),d=en(),m={state:a,dispatch:null,action:r,pending:null},d.queue=m,u=sD.bind(null,Te,m,x,u),m.dispatch=u,d.memoizedState=r,[a,u,!1]}function g1(r){var a=gt();return m1(a,Ke,r)}function m1(r,a,u){if(a=ig(r,a,d1)[0],r=Fu(Wi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=ba(a)}catch(C){throw C===jo?ju:C}else d=a;a=gt();var m=a.queue,x=m.dispatch;return u!==a.memoizedState&&(Te.flags|=2048,Uo(9,{destroy:void 0},rD.bind(null,m,u),null)),[d,x,r]}function rD(r,a){r.action=a}function y1(r){var a=gt(),u=Ke;if(u!==null)return m1(a,u,r);gt(),a=a.memoizedState,u=gt();var d=u.queue.dispatch;return u.memoizedState=r,[a,d,!1]}function Uo(r,a,u,d){return r={tag:r,create:u,deps:d,inst:a,next:null},a=Te.updateQueue,a===null&&(a=Yu(),Te.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,a.lastEffect=r),r}function x1(){return gt().memoizedState}function Gu(r,a,u,d){var m=en();Te.flags|=r,m.memoizedState=Uo(1|a,{destroy:void 0},u,d===void 0?null:d)}function Wu(r,a,u,d){var m=gt();d=d===void 0?null:d;var x=m.memoizedState.inst;Ke!==null&&d!==null&&Kp(d,Ke.memoizedState.deps)?m.memoizedState=Uo(a,x,u,d):(Te.flags|=r,m.memoizedState=Uo(1|a,x,u,d))}function v1(r,a){Gu(8390656,8,r,a)}function lg(r,a){Wu(2048,8,r,a)}function oD(r){Te.flags|=4;var a=Te.updateQueue;if(a===null)a=Yu(),Te.updateQueue=a,a.events=[r];else{var u=a.events;u===null?a.events=[r]:u.push(r)}}function b1(r){var a=gt().memoizedState;return oD({ref:a,nextImpl:r}),function(){if((Ye&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function S1(r,a){return Wu(4,2,r,a)}function w1(r,a){return Wu(4,4,r,a)}function C1(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function k1(r,a,u){u=u!=null?u.concat([r]):null,Wu(4,4,C1.bind(null,a,r),u)}function ag(){}function A1(r,a){var u=gt();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&Kp(a,d[1])?d[0]:(u.memoizedState=[r,a],r)}function O1(r,a){var u=gt();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&Kp(a,d[1]))return d[0];if(d=r(),zr){di(!0);try{r()}finally{di(!1)}}return u.memoizedState=[d,a],d}function cg(r,a,u){return u===void 0||(Gi&1073741824)!==0&&(je&261930)===0?r.memoizedState=a:(r.memoizedState=u,r=Eb(),Te.lanes|=r,js|=r,u)}function E1(r,a,u,d){return Cn(u,a)?u:Io.current!==null?(r=cg(r,u,d),Cn(r,a)||(wt=!0),r):(Gi&42)===0||(Gi&1073741824)!==0&&(je&261930)===0?(wt=!0,r.memoizedState=u):(r=Eb(),Te.lanes|=r,js|=r,a)}function M1(r,a,u,d,m){var x=P.p;P.p=x!==0&&8>x?x:8;var C=T.T,E={};T.T=E,hg(r,!1,a,u);try{var I=m(),K=T.S;if(K!==null&&K(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var re=tD(I,d);Sa(r,a,re,Nn(r))}else Sa(r,a,d,Nn(r))}catch(le){Sa(r,a,{then:function(){},status:"rejected",reason:le},Nn())}finally{P.p=x,C!==null&&E.types!==null&&(C.types=E.types),T.T=C}}function lD(){}function ug(r,a,u,d){if(r.tag!==5)throw Error(i(476));var m=N1(r).queue;M1(r,m,a,H,u===null?lD:function(){return T1(r),u(d)})}function N1(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:H},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function T1(r){var a=N1(r);a.next===null&&(a=r.alternate.memoizedState),Sa(r,a.next.queue,{},Nn())}function fg(){return Ht(ja)}function D1(){return gt().memoizedState}function R1(){return gt().memoizedState}function aD(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Nn();r=Rs(u);var d=Ls(a,r,u);d!==null&&(dn(d,a,u),ma(d,a,u)),a={cache:Ip()},r.payload=a;return}a=a.return}}function cD(r,a,u){var d=Nn();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ku(r)?_1(a,u):(u=Np(r,a,u,d),u!==null&&(dn(u,r,d),B1(u,a,d)))}function L1(r,a,u){var d=Nn();Sa(r,a,u,d)}function Sa(r,a,u,d){var m={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ku(r))_1(a,m);else{var x=r.alternate;if(r.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var C=a.lastRenderedState,E=x(C,u);if(m.hasEagerState=!0,m.eagerState=E,Cn(E,C))return Du(r,a,m,0),tt===null&&Tu(),!1}catch{}if(u=Np(r,a,m,d),u!==null)return dn(u,r,d),B1(u,a,d),!0}return!1}function hg(r,a,u,d){if(d={lane:2,revertLane:qg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ku(r)){if(a)throw Error(i(479))}else a=Np(r,u,d,2),a!==null&&dn(a,r,2)}function Ku(r){var a=r.alternate;return r===Te||a!==null&&a===Te}function _1(r,a){Vo=qu=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function B1(r,a,u){if((u&4194048)!==0){var d=a.lanes;d&=r.pendingLanes,u|=d,a.lanes=u,uu(r,u)}}var wa={readContext:Ht,use:Xu,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};wa.useEffectEvent=ft;var z1={readContext:Ht,use:Xu,useCallback:function(r,a){return en().memoizedState=[r,a===void 0?null:a],r},useContext:Ht,useEffect:v1,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,Gu(4194308,4,C1.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Gu(4194308,4,r,a)},useInsertionEffect:function(r,a){Gu(4,2,r,a)},useMemo:function(r,a){var u=en();a=a===void 0?null:a;var d=r();if(zr){di(!0);try{r()}finally{di(!1)}}return u.memoizedState=[d,a],d},useReducer:function(r,a,u){var d=en();if(u!==void 0){var m=u(a);if(zr){di(!0);try{u(a)}finally{di(!1)}}}else m=a;return d.memoizedState=d.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},d.queue=r,r=r.dispatch=cD.bind(null,Te,r),[d.memoizedState,r]},useRef:function(r){var a=en();return r={current:r},a.memoizedState=r},useState:function(r){r=rg(r);var a=r.queue,u=L1.bind(null,Te,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:ag,useDeferredValue:function(r,a){var u=en();return cg(u,r,a)},useTransition:function(){var r=rg(!1);return r=M1.bind(null,Te,r.queue,!0,!1),en().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var d=Te,m=en();if(Ie){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),tt===null)throw Error(i(349));(je&127)!==0||i1(d,a,u)}m.memoizedState=u;var x={value:u,getSnapshot:a};return m.queue=x,v1(r1.bind(null,d,x,r),[r]),d.flags|=2048,Uo(9,{destroy:void 0},s1.bind(null,d,x,u,a),null),u},useId:function(){var r=en(),a=tt.identifierPrefix;if(Ie){var u=mi,d=gi;u=(d&~(1<<32-Jt(d)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Qu++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=nD++,a="_"+a+"r_"+u.toString(32)+"_";return r.memoizedState=a},useHostTransitionStatus:fg,useFormState:p1,useActionState:p1,useOptimistic:function(r){var a=en();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=hg.bind(null,Te,!0,u),u.dispatch=a,[r,a]},useMemoCache:ng,useCacheRefresh:function(){return en().memoizedState=aD.bind(null,Te)},useEffectEvent:function(r){var a=en(),u={impl:r};return a.memoizedState=u,function(){if((Ye&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},dg={readContext:Ht,use:Xu,useCallback:A1,useContext:Ht,useEffect:lg,useImperativeHandle:k1,useInsertionEffect:S1,useLayoutEffect:w1,useMemo:O1,useReducer:Fu,useRef:x1,useState:function(){return Fu(Wi)},useDebugValue:ag,useDeferredValue:function(r,a){var u=gt();return E1(u,Ke.memoizedState,r,a)},useTransition:function(){var r=Fu(Wi)[0],a=gt().memoizedState;return[typeof r=="boolean"?r:ba(r),a]},useSyncExternalStore:n1,useId:D1,useHostTransitionStatus:fg,useFormState:g1,useActionState:g1,useOptimistic:function(r,a){var u=gt();return a1(u,Ke,r,a)},useMemoCache:ng,useCacheRefresh:R1};dg.useEffectEvent=b1;var P1={readContext:Ht,use:Xu,useCallback:A1,useContext:Ht,useEffect:lg,useImperativeHandle:k1,useInsertionEffect:S1,useLayoutEffect:w1,useMemo:O1,useReducer:sg,useRef:x1,useState:function(){return sg(Wi)},useDebugValue:ag,useDeferredValue:function(r,a){var u=gt();return Ke===null?cg(u,r,a):E1(u,Ke.memoizedState,r,a)},useTransition:function(){var r=sg(Wi)[0],a=gt().memoizedState;return[typeof r=="boolean"?r:ba(r),a]},useSyncExternalStore:n1,useId:D1,useHostTransitionStatus:fg,useFormState:y1,useActionState:y1,useOptimistic:function(r,a){var u=gt();return Ke!==null?a1(u,Ke,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:ng,useCacheRefresh:R1};P1.useEffectEvent=b1;function pg(r,a,u,d){a=r.memoizedState,u=u(d,a),u=u==null?a:g({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var gg={enqueueSetState:function(r,a,u){r=r._reactInternals;var d=Nn(),m=Rs(d);m.payload=a,u!=null&&(m.callback=u),a=Ls(r,m,d),a!==null&&(dn(a,r,d),ma(a,r,d))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var d=Nn(),m=Rs(d);m.tag=1,m.payload=a,u!=null&&(m.callback=u),a=Ls(r,m,d),a!==null&&(dn(a,r,d),ma(a,r,d))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Nn(),d=Rs(u);d.tag=2,a!=null&&(d.callback=a),a=Ls(r,d,u),a!==null&&(dn(a,r,u),ma(a,r,u))}};function j1(r,a,u,d,m,x,C){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,x,C):a.prototype&&a.prototype.isPureReactComponent?!aa(u,d)||!aa(m,x):!0}function H1(r,a,u,d){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==r&&gg.enqueueReplaceState(a,a.state,null)}function Pr(r,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(r=r.defaultProps){u===a&&(u=g({},u));for(var m in r)u[m]===void 0&&(u[m]=r[m])}return u}function I1(r){Nu(r)}function V1(r){console.error(r)}function $1(r){Nu(r)}function Zu(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function U1(r,a,u){try{var d=r.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mg(r,a,u){return u=Rs(u),u.tag=3,u.payload={element:null},u.callback=function(){Zu(r,a)},u}function q1(r){return r=Rs(r),r.tag=3,r}function Q1(r,a,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var x=d.value;r.payload=function(){return m(x)},r.callback=function(){U1(a,u,d)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(r.callback=function(){U1(a,u,d),typeof m!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var E=d.stack;this.componentDidCatch(d.value,{componentStack:E!==null?E:""})})}function uD(r,a,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&Bo(a,u,m,!0),u=An.current,u!==null){switch(u.tag){case 31:case 13:return Vn===null?ff():u.alternate===null&&ht===0&&(ht=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===Hu?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),Vg(r,d,m)),!1;case 22:return u.flags|=65536,d===Hu?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),Vg(r,d,m)),!1}throw Error(i(435,u.tag))}return Vg(r,d,m),ff(),!1}if(Ie)return a=An.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,d!==Bp&&(r=Error(i(422),{cause:d}),fa(Pn(r,u)))):(d!==Bp&&(a=Error(i(423),{cause:d}),fa(Pn(a,u))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,d=Pn(d,u),m=mg(r.stateNode,d,m),Yp(r,m),ht!==4&&(ht=2)),!1;var x=Error(i(520),{cause:d});if(x=Pn(x,u),Ta===null?Ta=[x]:Ta.push(x),ht!==4&&(ht=2),a===null)return!0;d=Pn(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=m&-m,u.lanes|=r,r=mg(u.stateNode,d,r),Yp(u,r),!1;case 1:if(a=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Hs===null||!Hs.has(x))))return u.flags|=65536,m&=-m,u.lanes|=m,m=q1(m),Q1(m,r,u,d),Yp(u,m),!1}u=u.return}while(u!==null);return!1}var yg=Error(i(461)),wt=!1;function It(r,a,u,d){a.child=r===null?Gv(a,null,u,d):Br(a,r.child,u,d)}function Y1(r,a,u,d,m){u=u.render;var x=a.ref;if("ref"in d){var C={};for(var E in d)E!=="ref"&&(C[E]=d[E])}else C=d;return Dr(a),d=Zp(r,a,u,C,x,m),E=Jp(),r!==null&&!wt?(eg(r,a,m),Ki(r,a,m)):(Ie&&E&&Lp(a),a.flags|=1,It(r,a,d,m),a.child)}function X1(r,a,u,d,m){if(r===null){var x=u.type;return typeof x=="function"&&!Tp(x)&&x.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=x,F1(r,a,x,d,m)):(r=Lu(u.type,null,d,a,a.mode,m),r.ref=a.ref,r.return=a,a.child=r)}if(x=r.child,!Ag(r,m)){var C=x.memoizedProps;if(u=u.compare,u=u!==null?u:aa,u(C,d)&&r.ref===a.ref)return Ki(r,a,m)}return a.flags|=1,r=Qi(x,d),r.ref=a.ref,r.return=a,a.child=r}function F1(r,a,u,d,m){if(r!==null){var x=r.memoizedProps;if(aa(x,d)&&r.ref===a.ref)if(wt=!1,a.pendingProps=d=x,Ag(r,m))(r.flags&131072)!==0&&(wt=!0);else return a.lanes=r.lanes,Ki(r,a,m)}return xg(r,a,u,d,m)}function G1(r,a,u,d){var m=d.children,x=r!==null?r.memoizedState:null;if(r===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,r!==null){for(d=a.child=r.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~x}else d=0,a.child=null;return W1(r,a,x,u,d)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Pu(a,x!==null?x.cachePool:null),x!==null?Zv(a,x):Fp(),Jv(a);else return d=a.lanes=536870912,W1(r,a,x!==null?x.baseLanes|u:u,u,d)}else x!==null?(Pu(a,x.cachePool),Zv(a,x),Bs(),a.memoizedState=null):(r!==null&&Pu(a,null),Fp(),Bs());return It(r,a,m,u),a.child}function Ca(r,a){return r!==null&&r.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function W1(r,a,u,d,m){var x=$p();return x=x===null?null:{parent:bt._currentValue,pool:x},a.memoizedState={baseLanes:u,cachePool:x},r!==null&&Pu(a,null),Fp(),Jv(a),r!==null&&Bo(r,a,d,!0),a.childLanes=m,null}function Ju(r,a){return a=tf({mode:a.mode,children:a.children},r.mode),a.ref=r.ref,r.child=a,a.return=r,a}function K1(r,a,u){return Br(a,r.child,null,u),r=Ju(a,a.pendingProps),r.flags|=2,On(a),a.memoizedState=null,r}function fD(r,a,u){var d=a.pendingProps,m=(a.flags&128)!==0;if(a.flags&=-129,r===null){if(Ie){if(d.mode==="hidden")return r=Ju(a,d),a.lanes=536870912,Ca(null,r);if(Wp(a),(r=rt)?(r=cS(r,In),r=r!==null&&r.data==="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:gi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},u=_v(r),u.return=a,a.child=u,jt=a,rt=null)):r=null,r===null)throw Ns(a);return a.lanes=536870912,null}return Ju(a,d)}var x=r.memoizedState;if(x!==null){var C=x.dehydrated;if(Wp(a),m)if(a.flags&256)a.flags&=-257,a=K1(r,a,u);else if(a.memoizedState!==null)a.child=r.child,a.flags|=128,a=null;else throw Error(i(558));else if(wt||Bo(r,a,u,!1),m=(u&r.childLanes)!==0,wt||m){if(d=tt,d!==null&&(C=fu(d,u),C!==0&&C!==x.retryLane))throw x.retryLane=C,Er(r,C),dn(d,r,C),yg;ff(),a=K1(r,a,u)}else r=x.treeContext,rt=$n(C.nextSibling),jt=a,Ie=!0,Ms=null,In=!1,r!==null&&Pv(a,r),a=Ju(a,d),a.flags|=4096;return a}return r=Qi(r.child,{mode:d.mode,children:d.children}),r.ref=a.ref,a.child=r,r.return=a,r}function ef(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function xg(r,a,u,d,m){return Dr(a),u=Zp(r,a,u,d,void 0,m),d=Jp(),r!==null&&!wt?(eg(r,a,m),Ki(r,a,m)):(Ie&&d&&Lp(a),a.flags|=1,It(r,a,u,m),a.child)}function Z1(r,a,u,d,m,x){return Dr(a),a.updateQueue=null,u=t1(a,d,u,m),e1(r),d=Jp(),r!==null&&!wt?(eg(r,a,x),Ki(r,a,x)):(Ie&&d&&Lp(a),a.flags|=1,It(r,a,u,x),a.child)}function J1(r,a,u,d,m){if(Dr(a),a.stateNode===null){var x=Do,C=u.contextType;typeof C=="object"&&C!==null&&(x=Ht(C)),x=new u(d,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=gg,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=d,x.state=a.memoizedState,x.refs={},qp(a),C=u.contextType,x.context=typeof C=="object"&&C!==null?Ht(C):Do,x.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(pg(a,u,C,d),x.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&gg.enqueueReplaceState(x,x.state,null),xa(a,d,x,m),ya(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(r===null){x=a.stateNode;var E=a.memoizedProps,I=Pr(u,E);x.props=I;var K=x.context,re=u.contextType;C=Do,typeof re=="object"&&re!==null&&(C=Ht(re));var le=u.getDerivedStateFromProps;re=typeof le=="function"||typeof x.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,re||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(E||K!==C)&&H1(a,x,d,C),Ds=!1;var J=a.memoizedState;x.state=J,xa(a,d,x,m),ya(),K=a.memoizedState,E||J!==K||Ds?(typeof le=="function"&&(pg(a,u,le,d),K=a.memoizedState),(I=Ds||j1(a,u,I,d,J,K,C))?(re||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=K),x.props=d,x.state=K,x.context=C,d=I):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{x=a.stateNode,Qp(r,a),C=a.memoizedProps,re=Pr(u,C),x.props=re,le=a.pendingProps,J=x.context,K=u.contextType,I=Do,typeof K=="object"&&K!==null&&(I=Ht(K)),E=u.getDerivedStateFromProps,(K=typeof E=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==le||J!==I)&&H1(a,x,d,I),Ds=!1,J=a.memoizedState,x.state=J,xa(a,d,x,m),ya();var se=a.memoizedState;C!==le||J!==se||Ds||r!==null&&r.dependencies!==null&&Bu(r.dependencies)?(typeof E=="function"&&(pg(a,u,E,d),se=a.memoizedState),(re=Ds||j1(a,u,re,d,J,se,I)||r!==null&&r.dependencies!==null&&Bu(r.dependencies))?(K||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,se,I),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,se,I)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=se),x.props=d,x.state=se,x.context=I,d=re):(typeof x.componentDidUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===r.memoizedProps&&J===r.memoizedState||(a.flags|=1024),d=!1)}return x=d,ef(r,a),d=(a.flags&128)!==0,x||d?(x=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,r!==null&&d?(a.child=Br(a,r.child,null,m),a.child=Br(a,null,u,m)):It(r,a,u,m),a.memoizedState=x.state,r=a.child):r=Ki(r,a,m),r}function eb(r,a,u,d){return Nr(),a.flags|=256,It(r,a,u,d),a.child}var vg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bg(r){return{baseLanes:r,cachePool:Uv()}}function Sg(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Mn),r}function tb(r,a,u){var d=a.pendingProps,m=!1,x=(a.flags&128)!==0,C;if((C=x)||(C=r!==null&&r.memoizedState===null?!1:(pt.current&2)!==0),C&&(m=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,r===null){if(Ie){if(m?_s(a):Bs(),(r=rt)?(r=cS(r,In),r=r!==null&&r.data!=="&"?r:null,r!==null&&(a.memoizedState={dehydrated:r,treeContext:Es!==null?{id:gi,overflow:mi}:null,retryLane:536870912,hydrationErrors:null},u=_v(r),u.return=a,a.child=u,jt=a,rt=null)):r=null,r===null)throw Ns(a);return im(r)?a.lanes=32:a.lanes=536870912,null}var E=d.children;return d=d.fallback,m?(Bs(),m=a.mode,E=tf({mode:"hidden",children:E},m),d=Mr(d,m,u,null),E.return=a,d.return=a,E.sibling=d,a.child=E,d=a.child,d.memoizedState=bg(u),d.childLanes=Sg(r,C,u),a.memoizedState=vg,Ca(null,d)):(_s(a),wg(a,E))}var I=r.memoizedState;if(I!==null&&(E=I.dehydrated,E!==null)){if(x)a.flags&256?(_s(a),a.flags&=-257,a=Cg(r,a,u)):a.memoizedState!==null?(Bs(),a.child=r.child,a.flags|=128,a=null):(Bs(),E=d.fallback,m=a.mode,d=tf({mode:"visible",children:d.children},m),E=Mr(E,m,u,null),E.flags|=2,d.return=a,E.return=a,d.sibling=E,a.child=d,Br(a,r.child,null,u),d=a.child,d.memoizedState=bg(u),d.childLanes=Sg(r,C,u),a.memoizedState=vg,a=Ca(null,d));else if(_s(a),im(E)){if(C=E.nextSibling&&E.nextSibling.dataset,C)var K=C.dgst;C=K,d=Error(i(419)),d.stack="",d.digest=C,fa({value:d,source:null,stack:null}),a=Cg(r,a,u)}else if(wt||Bo(r,a,u,!1),C=(u&r.childLanes)!==0,wt||C){if(C=tt,C!==null&&(d=fu(C,u),d!==0&&d!==I.retryLane))throw I.retryLane=d,Er(r,d),dn(C,r,d),yg;nm(E)||ff(),a=Cg(r,a,u)}else nm(E)?(a.flags|=192,a.child=r.child,a=null):(r=I.treeContext,rt=$n(E.nextSibling),jt=a,Ie=!0,Ms=null,In=!1,r!==null&&Pv(a,r),a=wg(a,d.children),a.flags|=4096);return a}return m?(Bs(),E=d.fallback,m=a.mode,I=r.child,K=I.sibling,d=Qi(I,{mode:"hidden",children:d.children}),d.subtreeFlags=I.subtreeFlags&65011712,K!==null?E=Qi(K,E):(E=Mr(E,m,u,null),E.flags|=2),E.return=a,d.return=a,d.sibling=E,a.child=d,Ca(null,d),d=a.child,E=r.child.memoizedState,E===null?E=bg(u):(m=E.cachePool,m!==null?(I=bt._currentValue,m=m.parent!==I?{parent:I,pool:I}:m):m=Uv(),E={baseLanes:E.baseLanes|u,cachePool:m}),d.memoizedState=E,d.childLanes=Sg(r,C,u),a.memoizedState=vg,Ca(r.child,d)):(_s(a),u=r.child,r=u.sibling,u=Qi(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,r!==null&&(C=a.deletions,C===null?(a.deletions=[r],a.flags|=16):C.push(r)),a.child=u,a.memoizedState=null,u)}function wg(r,a){return a=tf({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function tf(r,a){return r=kn(22,r,null,a),r.lanes=0,r}function Cg(r,a,u){return Br(a,r.child,null,u),r=wg(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function nb(r,a,u){r.lanes|=a;var d=r.alternate;d!==null&&(d.lanes|=a),jp(r.return,a,u)}function kg(r,a,u,d,m,x){var C=r.memoizedState;C===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m,treeForkCount:x}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=u,C.tailMode=m,C.treeForkCount=x)}function ib(r,a,u){var d=a.pendingProps,m=d.revealOrder,x=d.tail;d=d.children;var C=pt.current,E=(C&2)!==0;if(E?(C=C&1|2,a.flags|=128):C&=1,ee(pt,C),It(r,a,d,u),d=Ie?ua:0,!E&&r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&nb(r,u,a);else if(r.tag===19)nb(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(u=a.child,m=null;u!==null;)r=u.alternate,r!==null&&Uu(r)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),kg(a,!1,m,u,x,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(r=m.alternate,r!==null&&Uu(r)===null){a.child=m;break}r=m.sibling,m.sibling=u,u=m,m=r}kg(a,!0,u,null,x,d);break;case"together":kg(a,!1,null,null,void 0,d);break;default:a.memoizedState=null}return a.child}function Ki(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),js|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(Bo(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=Qi(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Qi(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function Ag(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&Bu(r)))}function hD(r,a,u){switch(a.tag){case 3:ue(a,a.stateNode.containerInfo),Ts(a,bt,r.memoizedState.cache),Nr();break;case 27:case 5:De(a);break;case 4:ue(a,a.stateNode.containerInfo);break;case 10:Ts(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Wp(a),null;break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(_s(a),a.flags|=128,null):(u&a.child.childLanes)!==0?tb(r,a,u):(_s(a),r=Ki(r,a,u),r!==null?r.sibling:null);_s(a);break;case 19:var m=(r.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(Bo(r,a,u,!1),d=(u&a.childLanes)!==0),m){if(d)return ib(r,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ee(pt,pt.current),d)break;return null;case 22:return a.lanes=0,G1(r,a,u,a.pendingProps);case 24:Ts(a,bt,r.memoizedState.cache)}return Ki(r,a,u)}function sb(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)wt=!0;else{if(!Ag(r,u)&&(a.flags&128)===0)return wt=!1,hD(r,a,u);wt=(r.flags&131072)!==0}else wt=!1,Ie&&(a.flags&1048576)!==0&&zv(a,ua,a.index);switch(a.lanes=0,a.tag){case 16:e:{var d=a.pendingProps;if(r=Lr(a.elementType),a.type=r,typeof r=="function")Tp(r)?(d=Pr(r,d),a.tag=1,a=J1(null,a,r,d,u)):(a.tag=0,a=xg(null,a,r,d,u));else{if(r!=null){var m=r.$$typeof;if(m===M){a.tag=11,a=Y1(null,a,r,d,u);break e}else if(m===R){a.tag=14,a=X1(null,a,r,d,u);break e}}throw a=B(r)||r,Error(i(306,a,""))}}return a;case 0:return xg(r,a,a.type,a.pendingProps,u);case 1:return d=a.type,m=Pr(d,a.pendingProps),J1(r,a,d,m,u);case 3:e:{if(ue(a,a.stateNode.containerInfo),r===null)throw Error(i(387));d=a.pendingProps;var x=a.memoizedState;m=x.element,Qp(r,a),xa(a,d,null,u);var C=a.memoizedState;if(d=C.cache,Ts(a,bt,d),d!==x.cache&&Hp(a,[bt],u,!0),ya(),d=C.element,x.isDehydrated)if(x={element:d,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=eb(r,a,d,u);break e}else if(d!==m){m=Pn(Error(i(424)),a),fa(m),a=eb(r,a,d,u);break e}else for(r=a.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,rt=$n(r.firstChild),jt=a,Ie=!0,Ms=null,In=!0,u=Gv(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Nr(),d===m){a=Ki(r,a,u);break e}It(r,a,d,u)}a=a.child}return a;case 26:return ef(r,a),r===null?(u=gS(a.type,null,a.pendingProps,null))?a.memoizedState=u:Ie||(u=a.type,r=a.pendingProps,d=xf(he.current).createElement(u),d[Et]=a,d[Yt]=r,Vt(d,u,r),vt(d),a.stateNode=d):a.memoizedState=gS(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return De(a),r===null&&Ie&&(d=a.stateNode=hS(a.type,a.pendingProps,he.current),jt=a,In=!0,m=rt,Us(a.type)?(sm=m,rt=$n(d.firstChild)):rt=m),It(r,a,a.pendingProps.children,u),ef(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&Ie&&((m=d=rt)&&(d=$D(d,a.type,a.pendingProps,In),d!==null?(a.stateNode=d,jt=a,rt=$n(d.firstChild),In=!1,m=!0):m=!1),m||Ns(a)),De(a),m=a.type,x=a.pendingProps,C=r!==null?r.memoizedProps:null,d=x.children,Jg(m,x)?d=null:C!==null&&Jg(m,C)&&(a.flags|=32),a.memoizedState!==null&&(m=Zp(r,a,iD,null,null,u),ja._currentValue=m),ef(r,a),It(r,a,d,u),a.child;case 6:return r===null&&Ie&&((r=u=rt)&&(u=UD(u,a.pendingProps,In),u!==null?(a.stateNode=u,jt=a,rt=null,r=!0):r=!1),r||Ns(a)),null;case 13:return tb(r,a,u);case 4:return ue(a,a.stateNode.containerInfo),d=a.pendingProps,r===null?a.child=Br(a,null,d,u):It(r,a,d,u),a.child;case 11:return Y1(r,a,a.type,a.pendingProps,u);case 7:return It(r,a,a.pendingProps,u),a.child;case 8:return It(r,a,a.pendingProps.children,u),a.child;case 12:return It(r,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Ts(a,a.type,d.value),It(r,a,d.children,u),a.child;case 9:return m=a.type._context,d=a.pendingProps.children,Dr(a),m=Ht(m),d=d(m),a.flags|=1,It(r,a,d,u),a.child;case 14:return X1(r,a,a.type,a.pendingProps,u);case 15:return F1(r,a,a.type,a.pendingProps,u);case 19:return ib(r,a,u);case 31:return fD(r,a,u);case 22:return G1(r,a,u,a.pendingProps);case 24:return Dr(a),d=Ht(bt),r===null?(m=$p(),m===null&&(m=tt,x=Ip(),m.pooledCache=x,x.refCount++,x!==null&&(m.pooledCacheLanes|=u),m=x),a.memoizedState={parent:d,cache:m},qp(a),Ts(a,bt,m)):((r.lanes&u)!==0&&(Qp(r,a),xa(a,null,null,u),ya()),m=r.memoizedState,x=a.memoizedState,m.parent!==d?(m={parent:d,cache:d},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Ts(a,bt,d)):(d=x.cache,Ts(a,bt,d),d!==m.cache&&Hp(a,[bt],u,!0))),It(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Zi(r){r.flags|=4}function Og(r,a,u,d,m){if((a=(r.mode&32)!==0)&&(a=!1),a){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(Db())r.flags|=8192;else throw _r=Hu,Up}else r.flags&=-16777217}function rb(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!bS(a))if(Db())r.flags|=8192;else throw _r=Hu,Up}function nf(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?au():536870912,r.lanes|=a,Xo|=a)}function ka(r,a){if(!Ie)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function ot(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(a)for(var m=r.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=d,r.childLanes=u,a}function dD(r,a,u){var d=a.pendingProps;switch(_p(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(a),null;case 1:return ot(a),null;case 3:return u=a.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Fi(bt),ge(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(_o(a)?Zi(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,zp())),ot(a),null;case 26:var m=a.type,x=a.memoizedState;return r===null?(Zi(a),x!==null?(ot(a),rb(a,x)):(ot(a),Og(a,m,null,d,u))):x?x!==r.memoizedState?(Zi(a),ot(a),rb(a,x)):(ot(a),a.flags&=-16777217):(r=r.memoizedProps,r!==d&&Zi(a),ot(a),Og(a,m,r,d,u)),null;case 27:if(Ne(a),u=he.current,m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&Zi(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return ot(a),null}r=ie.current,_o(a)?jv(a):(r=hS(m,d,u),a.stateNode=r,Zi(a))}return ot(a),null;case 5:if(Ne(a),m=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&Zi(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return ot(a),null}if(x=ie.current,_o(a))jv(a);else{var C=xf(he.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?x.multiple=!0:d.size&&(x.size=d.size);break;default:x=typeof d.is=="string"?C.createElement(m,{is:d.is}):C.createElement(m)}}x[Et]=a,x[Yt]=d;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=x;e:switch(Vt(x,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Zi(a)}}return ot(a),Og(a,a.type,r===null?null:r.memoizedProps,a.pendingProps,u),null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==d&&Zi(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(r=he.current,_o(a)){if(r=a.stateNode,u=a.memoizedProps,d=null,m=jt,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}r[Et]=a,r=!!(r.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||tS(r.nodeValue,u)),r||Ns(a,!0)}else r=xf(r).createTextNode(d),r[Et]=a,a.stateNode=r}return ot(a),null;case 31:if(u=a.memoizedState,r===null||r.memoizedState!==null){if(d=_o(a),u!==null){if(r===null){if(!d)throw Error(i(318));if(r=a.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Et]=a}else Nr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ot(a),r=!1}else u=zp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return a.flags&256?(On(a),a):(On(a),null);if((a.flags&128)!==0)throw Error(i(558))}return ot(a),null;case 13:if(d=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=_o(a),d!==null&&d.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Et]=a}else Nr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ot(a),m=!1}else m=zp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(On(a),a):(On(a),null)}return On(a),(a.flags&128)!==0?(a.lanes=u,a):(u=d!==null,r=r!==null&&r.memoizedState!==null,u&&(d=a.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==m&&(d.flags|=2048)),u!==r&&u&&(a.child.flags|=8192),nf(a,a.updateQueue),ot(a),null);case 4:return ge(),r===null&&Fg(a.stateNode.containerInfo),ot(a),null;case 10:return Fi(a.type),ot(a),null;case 19:if(j(pt),d=a.memoizedState,d===null)return ot(a),null;if(m=(a.flags&128)!==0,x=d.rendering,x===null)if(m)ka(d,!1);else{if(ht!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(x=Uu(r),x!==null){for(a.flags|=128,ka(d,!1),r=x.updateQueue,a.updateQueue=r,nf(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)Lv(u,r),u=u.sibling;return ee(pt,pt.current&1|2),Ie&&Yi(a,d.treeForkCount),a.child}r=r.sibling}d.tail!==null&&Pt()>af&&(a.flags|=128,m=!0,ka(d,!1),a.lanes=4194304)}else{if(!m)if(r=Uu(x),r!==null){if(a.flags|=128,m=!0,r=r.updateQueue,a.updateQueue=r,nf(a,r),ka(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!Ie)return ot(a),null}else 2*Pt()-d.renderingStartTime>af&&u!==536870912&&(a.flags|=128,m=!0,ka(d,!1),a.lanes=4194304);d.isBackwards?(x.sibling=a.child,a.child=x):(r=d.last,r!==null?r.sibling=x:a.child=x,d.last=x)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Pt(),r.sibling=null,u=pt.current,ee(pt,m?u&1|2:u&1),Ie&&Yi(a,d.treeForkCount),r):(ot(a),null);case 22:case 23:return On(a),Gp(),d=a.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(ot(a),a.subtreeFlags&6&&(a.flags|=8192)):ot(a),u=a.updateQueue,u!==null&&nf(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),r!==null&&j(Rr),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Fi(bt),ot(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function pD(r,a){switch(_p(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Fi(bt),ge(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return Ne(a),null;case 31:if(a.memoizedState!==null){if(On(a),a.alternate===null)throw Error(i(340));Nr()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 13:if(On(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Nr()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return j(pt),null;case 4:return ge(),null;case 10:return Fi(a.type),null;case 22:case 23:return On(a),Gp(),r!==null&&j(Rr),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return Fi(bt),null;case 25:return null;default:return null}}function ob(r,a){switch(_p(a),a.tag){case 3:Fi(bt),ge();break;case 26:case 27:case 5:Ne(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&On(a);break;case 13:On(a);break;case 19:j(pt);break;case 10:Fi(a.type);break;case 22:case 23:On(a),Gp(),r!==null&&j(Rr);break;case 24:Fi(bt)}}function Aa(r,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&r)===r){d=void 0;var x=u.create,C=u.inst;d=x(),C.destroy=d}u=u.next}while(u!==m)}}catch(E){Ge(a,a.return,E)}}function zs(r,a,u){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var x=m.next;d=x;do{if((d.tag&r)===r){var C=d.inst,E=C.destroy;if(E!==void 0){C.destroy=void 0,m=a;var I=u,K=E;try{K()}catch(re){Ge(m,I,re)}}}d=d.next}while(d!==x)}}catch(re){Ge(a,a.return,re)}}function lb(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{Kv(a,u)}catch(d){Ge(r,r.return,d)}}}function ab(r,a,u){u.props=Pr(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(d){Ge(r,a,d)}}function Oa(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof u=="function"?r.refCleanup=u(d):u.current=d}}catch(m){Ge(r,a,m)}}function yi(r,a){var u=r.ref,d=r.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){Ge(r,a,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Ge(r,a,m)}else u.current=null}function cb(r){var a=r.type,u=r.memoizedProps,d=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){Ge(r,r.return,m)}}function Eg(r,a,u){try{var d=r.stateNode;zD(d,r.type,u,a),d[Yt]=a}catch(m){Ge(r,r.return,m)}}function ub(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Us(r.type)||r.tag===4}function Mg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ub(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Us(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ng(r,a,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ui));else if(d!==4&&(d===27&&Us(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(Ng(r,a,u),r=r.sibling;r!==null;)Ng(r,a,u),r=r.sibling}function sf(r,a,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(d!==4&&(d===27&&Us(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(sf(r,a,u),r=r.sibling;r!==null;)sf(r,a,u),r=r.sibling}function fb(r){var a=r.stateNode,u=r.memoizedProps;try{for(var d=r.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Vt(a,d,u),a[Et]=r,a[Yt]=u}catch(x){Ge(r,r.return,x)}}var Ji=!1,Ct=!1,Tg=!1,hb=typeof WeakSet=="function"?WeakSet:Set,_t=null;function gD(r,a){if(r=r.containerInfo,Kg=Af,r=kv(r),Cp(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,x=d.focusNode;d=d.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var C=0,E=-1,I=-1,K=0,re=0,le=r,J=null;t:for(;;){for(var se;le!==u||m!==0&&le.nodeType!==3||(E=C+m),le!==x||d!==0&&le.nodeType!==3||(I=C+d),le.nodeType===3&&(C+=le.nodeValue.length),(se=le.firstChild)!==null;)J=le,le=se;for(;;){if(le===r)break t;if(J===u&&++K===m&&(E=C),J===x&&++re===d&&(I=C),(se=le.nextSibling)!==null)break;le=J,J=le.parentNode}le=se}u=E===-1||I===-1?null:{start:E,end:I}}else u=null}u=u||{start:0,end:0}}else u=null;for(Zg={focusedElem:r,selectionRange:u},Af=!1,_t=a;_t!==null;)if(a=_t,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,_t=r;else for(;_t!==null;){switch(a=_t,x=a.alternate,r=a.flags,a.tag){case 0:if((r&4)!==0&&(r=a.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)m=r[u],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&x!==null){r=void 0,u=a,m=x.memoizedProps,x=x.memoizedState,d=u.stateNode;try{var xe=Pr(u.type,m);r=d.getSnapshotBeforeUpdate(xe,x),d.__reactInternalSnapshotBeforeUpdate=r}catch(Ae){Ge(u,u.return,Ae)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)tm(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":tm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,_t=r;break}_t=a.return}}function db(r,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:ts(r,u),d&4&&Aa(5,u);break;case 1:if(ts(r,u),d&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(C){Ge(u,u.return,C)}else{var m=Pr(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(m,a,r.__reactInternalSnapshotBeforeUpdate)}catch(C){Ge(u,u.return,C)}}d&64&&lb(u),d&512&&Oa(u,u.return);break;case 3:if(ts(r,u),d&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Kv(r,a)}catch(C){Ge(u,u.return,C)}}break;case 27:a===null&&d&4&&fb(u);case 26:case 5:ts(r,u),a===null&&d&4&&cb(u),d&512&&Oa(u,u.return);break;case 12:ts(r,u);break;case 31:ts(r,u),d&4&&mb(r,u);break;case 13:ts(r,u),d&4&&yb(r,u),d&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=kD.bind(null,u),qD(r,u))));break;case 22:if(d=u.memoizedState!==null||Ji,!d){a=a!==null&&a.memoizedState!==null||Ct,m=Ji;var x=Ct;Ji=d,(Ct=a)&&!x?ns(r,u,(u.subtreeFlags&8772)!==0):ts(r,u),Ji=m,Ct=x}break;case 30:break;default:ts(r,u)}}function pb(r){var a=r.alternate;a!==null&&(r.alternate=null,pb(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&Zl(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var lt=null,cn=!1;function es(r,a,u){for(u=u.child;u!==null;)gb(r,a,u),u=u.sibling}function gb(r,a,u){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(xr,u)}catch{}switch(u.tag){case 26:Ct||yi(u,a),es(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ct||yi(u,a);var d=lt,m=cn;Us(u.type)&&(lt=u.stateNode,cn=!1),es(r,a,u),Ba(u.stateNode),lt=d,cn=m;break;case 5:Ct||yi(u,a);case 6:if(d=lt,m=cn,lt=null,es(r,a,u),lt=d,cn=m,lt!==null)if(cn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(u.stateNode)}catch(x){Ge(u,a,x)}else try{lt.removeChild(u.stateNode)}catch(x){Ge(u,a,x)}break;case 18:lt!==null&&(cn?(r=lt,lS(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),tl(r)):lS(lt,u.stateNode));break;case 4:d=lt,m=cn,lt=u.stateNode.containerInfo,cn=!0,es(r,a,u),lt=d,cn=m;break;case 0:case 11:case 14:case 15:zs(2,u,a),Ct||zs(4,u,a),es(r,a,u);break;case 1:Ct||(yi(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&ab(u,a,d)),es(r,a,u);break;case 21:es(r,a,u);break;case 22:Ct=(d=Ct)||u.memoizedState!==null,es(r,a,u),Ct=d;break;default:es(r,a,u)}}function mb(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{tl(r)}catch(u){Ge(a,a.return,u)}}}function yb(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{tl(r)}catch(u){Ge(a,a.return,u)}}function mD(r){switch(r.tag){case 31:case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new hb),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new hb),a;default:throw Error(i(435,r.tag))}}function rf(r,a){var u=mD(r);a.forEach(function(d){if(!u.has(d)){u.add(d);var m=AD.bind(null,r,d);d.then(m,m)}})}function un(r,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],x=r,C=a,E=C;e:for(;E!==null;){switch(E.tag){case 27:if(Us(E.type)){lt=E.stateNode,cn=!1;break e}break;case 5:lt=E.stateNode,cn=!1;break e;case 3:case 4:lt=E.stateNode.containerInfo,cn=!0;break e}E=E.return}if(lt===null)throw Error(i(160));gb(x,C,m),lt=null,cn=!1,x=m.alternate,x!==null&&(x.return=null),m.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)xb(a,r),a=a.sibling}var ei=null;function xb(r,a){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:un(a,r),fn(r),d&4&&(zs(3,r,r.return),Aa(3,r),zs(5,r,r.return));break;case 1:un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),d&64&&Ji&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=ei;if(un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),d&4){var x=u!==null?u.memoizedState:null;if(d=r.memoizedState,u===null)if(d===null)if(r.stateNode===null){e:{d=r.type,u=r.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":x=m.getElementsByTagName("title")[0],(!x||x[Sr]||x[Et]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=m.createElement(d),m.head.insertBefore(x,m.querySelector("head > title"))),Vt(x,d,u),x[Et]=r,vt(x),d=x;break e;case"link":var C=xS("link","href",m).get(d+(u.href||""));if(C){for(var E=0;E<C.length;E++)if(x=C[E],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(E,1);break t}}x=m.createElement(d),Vt(x,d,u),m.head.appendChild(x);break;case"meta":if(C=xS("meta","content",m).get(d+(u.content||""))){for(E=0;E<C.length;E++)if(x=C[E],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(E,1);break t}}x=m.createElement(d),Vt(x,d,u),m.head.appendChild(x);break;default:throw Error(i(468,d))}x[Et]=r,vt(x),d=x}r.stateNode=d}else vS(m,r.type,r.stateNode);else r.stateNode=yS(m,d,r.memoizedProps);else x!==d?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,d===null?vS(m,r.type,r.stateNode):yS(m,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Eg(r,r.memoizedProps,u.memoizedProps)}break;case 27:un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),u!==null&&d&4&&Eg(r,r.memoizedProps,u.memoizedProps);break;case 5:if(un(a,r),fn(r),d&512&&(Ct||u===null||yi(u,u.return)),r.flags&32){m=r.stateNode;try{ko(m,"")}catch(xe){Ge(r,r.return,xe)}}d&4&&r.stateNode!=null&&(m=r.memoizedProps,Eg(r,m,u!==null?u.memoizedProps:m)),d&1024&&(Tg=!0);break;case 6:if(un(a,r),fn(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,u=r.stateNode;try{u.nodeValue=d}catch(xe){Ge(r,r.return,xe)}}break;case 3:if(Sf=null,m=ei,ei=vf(a.containerInfo),un(a,r),ei=m,fn(r),d&4&&u!==null&&u.memoizedState.isDehydrated)try{tl(a.containerInfo)}catch(xe){Ge(r,r.return,xe)}Tg&&(Tg=!1,vb(r));break;case 4:d=ei,ei=vf(r.stateNode.containerInfo),un(a,r),fn(r),ei=d;break;case 12:un(a,r),fn(r);break;case 31:un(a,r),fn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,rf(r,d)));break;case 13:un(a,r),fn(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(lf=Pt()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,rf(r,d)));break;case 22:m=r.memoizedState!==null;var I=u!==null&&u.memoizedState!==null,K=Ji,re=Ct;if(Ji=K||m,Ct=re||I,un(a,r),Ct=re,Ji=K,fn(r),d&8192)e:for(a=r.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(u===null||I||Ji||Ct||jr(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){I=u=a;try{if(x=I.stateNode,m)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{E=I.stateNode;var le=I.memoizedProps.style,J=le!=null&&le.hasOwnProperty("display")?le.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(xe){Ge(I,I.return,xe)}}}else if(a.tag===6){if(u===null){I=a;try{I.stateNode.nodeValue=m?"":I.memoizedProps}catch(xe){Ge(I,I.return,xe)}}}else if(a.tag===18){if(u===null){I=a;try{var se=I.stateNode;m?aS(se,!0):aS(I.stateNode,!1)}catch(xe){Ge(I,I.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=r.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,rf(r,u))));break;case 19:un(a,r),fn(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,rf(r,d)));break;case 30:break;case 21:break;default:un(a,r),fn(r)}}function fn(r){var a=r.flags;if(a&2){try{for(var u,d=r.return;d!==null;){if(ub(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var m=u.stateNode,x=Mg(r);sf(r,x,m);break;case 5:var C=u.stateNode;u.flags&32&&(ko(C,""),u.flags&=-33);var E=Mg(r);sf(r,E,C);break;case 3:case 4:var I=u.stateNode.containerInfo,K=Mg(r);Ng(r,K,I);break;default:throw Error(i(161))}}catch(re){Ge(r,r.return,re)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function vb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;vb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function ts(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)db(r,a.alternate,a),a=a.sibling}function jr(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:zs(4,a,a.return),jr(a);break;case 1:yi(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&ab(a,a.return,u),jr(a);break;case 27:Ba(a.stateNode);case 26:case 5:yi(a,a.return),jr(a);break;case 22:a.memoizedState===null&&jr(a);break;case 30:jr(a);break;default:jr(a)}r=r.sibling}}function ns(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,m=r,x=a,C=x.flags;switch(x.tag){case 0:case 11:case 15:ns(m,x,u),Aa(4,x);break;case 1:if(ns(m,x,u),d=x,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(K){Ge(d,d.return,K)}if(d=x,m=d.updateQueue,m!==null){var E=d.stateNode;try{var I=m.shared.hiddenCallbacks;if(I!==null)for(m.shared.hiddenCallbacks=null,m=0;m<I.length;m++)Wv(I[m],E)}catch(K){Ge(d,d.return,K)}}u&&C&64&&lb(x),Oa(x,x.return);break;case 27:fb(x);case 26:case 5:ns(m,x,u),u&&d===null&&C&4&&cb(x),Oa(x,x.return);break;case 12:ns(m,x,u);break;case 31:ns(m,x,u),u&&C&4&&mb(m,x);break;case 13:ns(m,x,u),u&&C&4&&yb(m,x);break;case 22:x.memoizedState===null&&ns(m,x,u),Oa(x,x.return);break;case 30:break;default:ns(m,x,u)}a=a.sibling}}function Dg(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ha(u))}function Rg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&ha(r))}function ti(r,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)bb(r,a,u,d),a=a.sibling}function bb(r,a,u,d){var m=a.flags;switch(a.tag){case 0:case 11:case 15:ti(r,a,u,d),m&2048&&Aa(9,a);break;case 1:ti(r,a,u,d);break;case 3:ti(r,a,u,d),m&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&ha(r)));break;case 12:if(m&2048){ti(r,a,u,d),r=a.stateNode;try{var x=a.memoizedProps,C=x.id,E=x.onPostCommit;typeof E=="function"&&E(C,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(I){Ge(a,a.return,I)}}else ti(r,a,u,d);break;case 31:ti(r,a,u,d);break;case 13:ti(r,a,u,d);break;case 23:break;case 22:x=a.stateNode,C=a.alternate,a.memoizedState!==null?x._visibility&2?ti(r,a,u,d):Ea(r,a):x._visibility&2?ti(r,a,u,d):(x._visibility|=2,qo(r,a,u,d,(a.subtreeFlags&10256)!==0||!1)),m&2048&&Dg(C,a);break;case 24:ti(r,a,u,d),m&2048&&Rg(a.alternate,a);break;default:ti(r,a,u,d)}}function qo(r,a,u,d,m){for(m=m&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=r,C=a,E=u,I=d,K=C.flags;switch(C.tag){case 0:case 11:case 15:qo(x,C,E,I,m),Aa(8,C);break;case 23:break;case 22:var re=C.stateNode;C.memoizedState!==null?re._visibility&2?qo(x,C,E,I,m):Ea(x,C):(re._visibility|=2,qo(x,C,E,I,m)),m&&K&2048&&Dg(C.alternate,C);break;case 24:qo(x,C,E,I,m),m&&K&2048&&Rg(C.alternate,C);break;default:qo(x,C,E,I,m)}a=a.sibling}}function Ea(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,d=a,m=d.flags;switch(d.tag){case 22:Ea(u,d),m&2048&&Dg(d.alternate,d);break;case 24:Ea(u,d),m&2048&&Rg(d.alternate,d);break;default:Ea(u,d)}a=a.sibling}}var Ma=8192;function Qo(r,a,u){if(r.subtreeFlags&Ma)for(r=r.child;r!==null;)Sb(r,a,u),r=r.sibling}function Sb(r,a,u){switch(r.tag){case 26:Qo(r,a,u),r.flags&Ma&&r.memoizedState!==null&&n3(u,ei,r.memoizedState,r.memoizedProps);break;case 5:Qo(r,a,u);break;case 3:case 4:var d=ei;ei=vf(r.stateNode.containerInfo),Qo(r,a,u),ei=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Ma,Ma=16777216,Qo(r,a,u),Ma=d):Qo(r,a,u));break;default:Qo(r,a,u)}}function wb(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Na(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];_t=d,kb(d,r)}wb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Cb(r),r=r.sibling}function Cb(r){switch(r.tag){case 0:case 11:case 15:Na(r),r.flags&2048&&zs(9,r,r.return);break;case 3:Na(r);break;case 12:Na(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,of(r)):Na(r);break;default:Na(r)}}function of(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];_t=d,kb(d,r)}wb(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:zs(8,a,a.return),of(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,of(a));break;default:of(a)}r=r.sibling}}function kb(r,a){for(;_t!==null;){var u=_t;switch(u.tag){case 0:case 11:case 15:zs(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ha(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,_t=d;else e:for(u=r;_t!==null;){d=_t;var m=d.sibling,x=d.return;if(pb(d),d===u){_t=null;break e}if(m!==null){m.return=x,_t=m;break e}_t=x}}}var yD={getCacheForType:function(r){var a=Ht(bt),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u},cacheSignal:function(){return Ht(bt).controller.signal}},xD=typeof WeakMap=="function"?WeakMap:Map,Ye=0,tt=null,_e=null,je=0,Fe=0,En=null,Ps=!1,Yo=!1,Lg=!1,is=0,ht=0,js=0,Hr=0,_g=0,Mn=0,Xo=0,Ta=null,hn=null,Bg=!1,lf=0,Ab=0,af=1/0,cf=null,Hs=null,Mt=0,Is=null,Fo=null,ss=0,zg=0,Pg=null,Ob=null,Da=0,jg=null;function Nn(){return(Ye&2)!==0&&je!==0?je&-je:T.T!==null?qg():hu()}function Eb(){if(Mn===0)if((je&536870912)===0||Ie){var r=yo;yo<<=1,(yo&3932160)===0&&(yo=262144),Mn=r}else Mn=536870912;return r=An.current,r!==null&&(r.flags|=32),Mn}function dn(r,a,u){(r===tt&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)&&(Go(r,0),Vs(r,je,Mn,!1)),br(r,u),((Ye&2)===0||r!==tt)&&(r===tt&&((Ye&2)===0&&(Hr|=u),ht===4&&Vs(r,je,Mn,!1)),xi(r))}function Mb(r,a,u){if((Ye&6)!==0)throw Error(i(327));var d=!u&&(a&127)===0&&(a&r.expiredLanes)===0||vr(r,a),m=d?SD(r,a):Ig(r,a,!0),x=d;do{if(m===0){Yo&&!d&&Vs(r,a,0,!1);break}else{if(u=r.current.alternate,x&&!vD(u)){m=Ig(r,a,!1),x=!1;continue}if(m===2){if(x=a,r.errorRecoveryDisabledLanes&x)var C=0;else C=r.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var E=r;m=Ta;var I=E.current.memoizedState.isDehydrated;if(I&&(Go(E,C).flags|=256),C=Ig(E,C,!1),C!==2){if(Lg&&!I){E.errorRecoveryDisabledLanes|=x,Hr|=x,m=4;break e}x=hn,hn=m,x!==null&&(hn===null?hn=x:hn.push.apply(hn,x))}m=C}if(x=!1,m!==2)continue}}if(m===1){Go(r,0),Vs(r,a,0,!0);break}e:{switch(d=r,x=m,x){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Vs(d,a,Mn,!Ps);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(m=lf+300-Pt(),10<m)){if(Vs(d,a,Mn,!Ps),vo(d,0,!0)!==0)break e;ss=a,d.timeoutHandle=rS(Nb.bind(null,d,u,hn,cf,Bg,a,Mn,Hr,Xo,Ps,x,"Throttled",-0,0),m);break e}Nb(d,u,hn,cf,Bg,a,Mn,Hr,Xo,Ps,x,null,-0,0)}}break}while(!0);xi(r)}function Nb(r,a,u,d,m,x,C,E,I,K,re,le,J,se){if(r.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ui},Sb(a,x,le);var xe=(x&62914560)===x?lf-Pt():(x&4194048)===x?Ab-Pt():0;if(xe=i3(le,xe),xe!==null){ss=x,r.cancelPendingCommit=xe(Pb.bind(null,r,a,x,u,d,m,C,E,I,re,le,null,J,se)),Vs(r,x,C,!K);return}}Pb(r,a,x,u,d,m,C,E,I)}function vD(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],x=m.getSnapshot;m=m.value;try{if(!Cn(x(),m))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Vs(r,a,u,d){a&=~_g,a&=~Hr,r.suspendedLanes|=a,r.pingedLanes&=~a,d&&(r.warmLanes|=a),d=r.expirationTimes;for(var m=a;0<m;){var x=31-Jt(m),C=1<<x;d[x]=-1,m&=~C}u!==0&&cu(r,u,a)}function uf(){return(Ye&6)===0?(Ra(0),!1):!0}function Hg(){if(_e!==null){if(Fe===0)var r=_e.return;else r=_e,Xi=Tr=null,tg(r),Ho=null,pa=0,r=_e;for(;r!==null;)ob(r.alternate,r),r=r.return;_e=null}}function Go(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,HD(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),ss=0,Hg(),tt=r,_e=u=Qi(r.current,null),je=a,Fe=0,En=null,Ps=!1,Yo=vr(r,a),Lg=!1,Xo=Mn=_g=Hr=js=ht=0,hn=Ta=null,Bg=!1,(a&8)!==0&&(a|=a&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=a;0<d;){var m=31-Jt(d),x=1<<m;a|=r[m],d&=~x}return is=a,Tu(),u}function Tb(r,a){Te=null,T.H=wa,a===jo||a===ju?(a=Yv(),Fe=3):a===Up?(a=Yv(),Fe=4):Fe=a===yg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,En=a,_e===null&&(ht=1,Zu(r,Pn(a,r.current)))}function Db(){var r=An.current;return r===null?!0:(je&4194048)===je?Vn===null:(je&62914560)===je||(je&536870912)!==0?r===Vn:!1}function Rb(){var r=T.H;return T.H=wa,r===null?wa:r}function Lb(){var r=T.A;return T.A=yD,r}function ff(){ht=4,Ps||(je&4194048)!==je&&An.current!==null||(Yo=!0),(js&134217727)===0&&(Hr&134217727)===0||tt===null||Vs(tt,je,Mn,!1)}function Ig(r,a,u){var d=Ye;Ye|=2;var m=Rb(),x=Lb();(tt!==r||je!==a)&&(cf=null,Go(r,a)),a=!1;var C=ht;e:do try{if(Fe!==0&&_e!==null){var E=_e,I=En;switch(Fe){case 8:Hg(),C=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(a=!0);var K=Fe;if(Fe=0,En=null,Wo(r,E,I,K),u&&Yo){C=0;break e}break;default:K=Fe,Fe=0,En=null,Wo(r,E,I,K)}}bD(),C=ht;break}catch(re){Tb(r,re)}while(!0);return a&&r.shellSuspendCounter++,Xi=Tr=null,Ye=d,T.H=m,T.A=x,_e===null&&(tt=null,je=0,Tu()),C}function bD(){for(;_e!==null;)_b(_e)}function SD(r,a){var u=Ye;Ye|=2;var d=Rb(),m=Lb();tt!==r||je!==a?(cf=null,af=Pt()+500,Go(r,a)):Yo=vr(r,a);e:do try{if(Fe!==0&&_e!==null){a=_e;var x=En;t:switch(Fe){case 1:Fe=0,En=null,Wo(r,a,x,1);break;case 2:case 9:if(qv(x)){Fe=0,En=null,Bb(a);break}a=function(){Fe!==2&&Fe!==9||tt!==r||(Fe=7),xi(r)},x.then(a,a);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:qv(x)?(Fe=0,En=null,Bb(a)):(Fe=0,En=null,Wo(r,a,x,7));break;case 5:var C=null;switch(_e.tag){case 26:C=_e.memoizedState;case 5:case 27:var E=_e;if(C?bS(C):E.stateNode.complete){Fe=0,En=null;var I=E.sibling;if(I!==null)_e=I;else{var K=E.return;K!==null?(_e=K,hf(K)):_e=null}break t}}Fe=0,En=null,Wo(r,a,x,5);break;case 6:Fe=0,En=null,Wo(r,a,x,6);break;case 8:Hg(),ht=6;break e;default:throw Error(i(462))}}wD();break}catch(re){Tb(r,re)}while(!0);return Xi=Tr=null,T.H=d,T.A=m,Ye=u,_e!==null?0:(tt=null,je=0,Tu(),ht)}function wD(){for(;_e!==null&&!gr();)_b(_e)}function _b(r){var a=sb(r.alternate,r,is);r.memoizedProps=r.pendingProps,a===null?hf(r):_e=a}function Bb(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=Z1(u,a,a.pendingProps,a.type,void 0,je);break;case 11:a=Z1(u,a,a.pendingProps,a.type.render,a.ref,je);break;case 5:tg(a);default:ob(u,a),a=_e=Lv(a,is),a=sb(u,a,is)}r.memoizedProps=r.pendingProps,a===null?hf(r):_e=a}function Wo(r,a,u,d){Xi=Tr=null,tg(a),Ho=null,pa=0;var m=a.return;try{if(uD(r,m,a,u,je)){ht=1,Zu(r,Pn(u,r.current)),_e=null;return}}catch(x){if(m!==null)throw _e=m,x;ht=1,Zu(r,Pn(u,r.current)),_e=null;return}a.flags&32768?(Ie||d===1?r=!0:Yo||(je&536870912)!==0?r=!1:(Ps=r=!0,(d===2||d===9||d===3||d===6)&&(d=An.current,d!==null&&d.tag===13&&(d.flags|=16384))),zb(a,r)):hf(a)}function hf(r){var a=r;do{if((a.flags&32768)!==0){zb(a,Ps);return}r=a.return;var u=dD(a.alternate,a,is);if(u!==null){_e=u;return}if(a=a.sibling,a!==null){_e=a;return}_e=a=r}while(a!==null);ht===0&&(ht=5)}function zb(r,a){do{var u=pD(r.alternate,r);if(u!==null){u.flags&=32767,_e=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){_e=r;return}_e=r=u}while(r!==null);ht=6,_e=null}function Pb(r,a,u,d,m,x,C,E,I){r.cancelPendingCommit=null;do df();while(Mt!==0);if((Ye&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(x=a.lanes|a.childLanes,x|=Mp,sp(r,u,x,C,E,I),r===tt&&(_e=tt=null,je=0),Fo=a,Is=r,ss=u,zg=x,Pg=m,Ob=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,OD(yr,function(){return $b(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=T.T,T.T=null,m=P.p,P.p=2,C=Ye,Ye|=4;try{gD(r,a,u)}finally{Ye=C,P.p=m,T.T=d}}Mt=1,jb(),Hb(),Ib()}}function jb(){if(Mt===1){Mt=0;var r=Is,a=Fo,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=T.T,T.T=null;var d=P.p;P.p=2;var m=Ye;Ye|=4;try{xb(a,r);var x=Zg,C=kv(r.containerInfo),E=x.focusedElem,I=x.selectionRange;if(C!==E&&E&&E.ownerDocument&&Cv(E.ownerDocument.documentElement,E)){if(I!==null&&Cp(E)){var K=I.start,re=I.end;if(re===void 0&&(re=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(re,E.value.length);else{var le=E.ownerDocument||document,J=le&&le.defaultView||window;if(J.getSelection){var se=J.getSelection(),xe=E.textContent.length,Ae=Math.min(I.start,xe),Je=I.end===void 0?Ae:Math.min(I.end,xe);!se.extend&&Ae>Je&&(C=Je,Je=Ae,Ae=C);var F=wv(E,Ae),Y=wv(E,Je);if(F&&Y&&(se.rangeCount!==1||se.anchorNode!==F.node||se.anchorOffset!==F.offset||se.focusNode!==Y.node||se.focusOffset!==Y.offset)){var W=le.createRange();W.setStart(F.node,F.offset),se.removeAllRanges(),Ae>Je?(se.addRange(W),se.extend(Y.node,Y.offset)):(W.setEnd(Y.node,Y.offset),se.addRange(W))}}}}for(le=[],se=E;se=se.parentNode;)se.nodeType===1&&le.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<le.length;E++){var oe=le[E];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Af=!!Kg,Zg=Kg=null}finally{Ye=m,P.p=d,T.T=u}}r.current=a,Mt=2}}function Hb(){if(Mt===2){Mt=0;var r=Is,a=Fo,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=T.T,T.T=null;var d=P.p;P.p=2;var m=Ye;Ye|=4;try{db(r,a.alternate,a)}finally{Ye=m,P.p=d,T.T=u}}Mt=3}}function Ib(){if(Mt===4||Mt===3){Mt=0,mr();var r=Is,a=Fo,u=ss,d=Ob;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Mt=5:(Mt=0,Fo=Is=null,Vb(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(Hs=null),Kl(u),a=a.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(xr,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=T.T,m=P.p,P.p=2,T.T=null;try{for(var x=r.onRecoverableError,C=0;C<d.length;C++){var E=d[C];x(E.value,{componentStack:E.stack})}}finally{T.T=a,P.p=m}}(ss&3)!==0&&df(),xi(r),m=r.pendingLanes,(u&261930)!==0&&(m&42)!==0?r===jg?Da++:(Da=0,jg=r):Da=0,Ra(0)}}function Vb(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,ha(a)))}function df(){return jb(),Hb(),Ib(),$b()}function $b(){if(Mt!==5)return!1;var r=Is,a=zg;zg=0;var u=Kl(ss),d=T.T,m=P.p;try{P.p=32>u?32:u,T.T=null,u=Pg,Pg=null;var x=Is,C=ss;if(Mt=0,Fo=Is=null,ss=0,(Ye&6)!==0)throw Error(i(331));var E=Ye;if(Ye|=4,Cb(x.current),bb(x,x.current,C,u),Ye=E,Ra(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(xr,x)}catch{}return!0}finally{P.p=m,T.T=d,Vb(r,a)}}function Ub(r,a,u){a=Pn(u,a),a=mg(r.stateNode,a,2),r=Ls(r,a,2),r!==null&&(br(r,2),xi(r))}function Ge(r,a,u){if(r.tag===3)Ub(r,r,u);else for(;a!==null;){if(a.tag===3){Ub(a,r,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Hs===null||!Hs.has(d))){r=Pn(u,r),u=q1(2),d=Ls(a,u,2),d!==null&&(Q1(u,d,a,r),br(d,2),xi(d));break}}a=a.return}}function Vg(r,a,u){var d=r.pingCache;if(d===null){d=r.pingCache=new xD;var m=new Set;d.set(a,m)}else m=d.get(a),m===void 0&&(m=new Set,d.set(a,m));m.has(u)||(Lg=!0,m.add(u),r=CD.bind(null,r,a,u),a.then(r,r))}function CD(r,a,u){var d=r.pingCache;d!==null&&d.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,tt===r&&(je&u)===u&&(ht===4||ht===3&&(je&62914560)===je&&300>Pt()-lf?(Ye&2)===0&&Go(r,0):_g|=u,Xo===je&&(Xo=0)),xi(r)}function qb(r,a){a===0&&(a=au()),r=Er(r,a),r!==null&&(br(r,a),xi(r))}function kD(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),qb(r,u)}function AD(r,a){var u=0;switch(r.tag){case 31:case 13:var d=r.stateNode,m=r.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),qb(r,u)}function OD(r,a){return Kn(r,a)}var pf=null,Ko=null,$g=!1,gf=!1,Ug=!1,$s=0;function xi(r){r!==Ko&&r.next===null&&(Ko===null?pf=Ko=r:Ko=Ko.next=r),gf=!0,$g||($g=!0,MD())}function Ra(r,a){if(!Ug&&gf){Ug=!0;do for(var u=!1,d=pf;d!==null;){if(r!==0){var m=d.pendingLanes;if(m===0)var x=0;else{var C=d.suspendedLanes,E=d.pingedLanes;x=(1<<31-Jt(42|r)+1)-1,x&=m&~(C&~E),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,Fb(d,x))}else x=je,x=vo(d,d===tt?x:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(x&3)===0||vr(d,x)||(u=!0,Fb(d,x));d=d.next}while(u);Ug=!1}}function ED(){Qb()}function Qb(){gf=$g=!1;var r=0;$s!==0&&jD()&&(r=$s);for(var a=Pt(),u=null,d=pf;d!==null;){var m=d.next,x=Yb(d,a);x===0?(d.next=null,u===null?pf=m:u.next=m,m===null&&(Ko=u)):(u=d,(r!==0||(x&3)!==0)&&(gf=!0)),d=m}Mt!==0&&Mt!==5||Ra(r),$s!==0&&($s=0)}function Yb(r,a){for(var u=r.suspendedLanes,d=r.pingedLanes,m=r.expirationTimes,x=r.pendingLanes&-62914561;0<x;){var C=31-Jt(x),E=1<<C,I=m[C];I===-1?((E&u)===0||(E&d)!==0)&&(m[C]=ip(E,a)):I<=a&&(r.expiredLanes|=E),x&=~E}if(a=tt,u=je,u=vo(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,u===0||r===a&&(Fe===2||Fe===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Pi(d),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||vr(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(d!==null&&Pi(d),Kl(u)){case 2:case 8:u=bs;break;case 32:u=yr;break;case 268435456:u=go;break;default:u=yr}return d=Xb.bind(null,r),u=Kn(u,d),r.callbackPriority=a,r.callbackNode=u,a}return d!==null&&d!==null&&Pi(d),r.callbackPriority=2,r.callbackNode=null,2}function Xb(r,a){if(Mt!==0&&Mt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(df()&&r.callbackNode!==u)return null;var d=je;return d=vo(r,r===tt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(Mb(r,d,a),Yb(r,Pt()),r.callbackNode!=null&&r.callbackNode===u?Xb.bind(null,r):null)}function Fb(r,a){if(df())return null;Mb(r,a,!0)}function MD(){ID(function(){(Ye&6)!==0?Kn(ji,ED):Qb()})}function qg(){if($s===0){var r=zo;r===0&&(r=mo,mo<<=1,(mo&261888)===0&&(mo=256)),$s=r}return $s}function Gb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:wu(""+r)}function Wb(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function ND(r,a,u,d,m){if(a==="submit"&&u&&u.stateNode===m){var x=Gb((m[Yt]||null).action),C=d.submitter;C&&(a=(a=C[Yt]||null)?Gb(a.formAction):C.getAttribute("formAction"),a!==null&&(x=a,C=null));var E=new Ou("action","action",null,d,m);r.push({event:E,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if($s!==0){var I=C?Wb(m,C):new FormData(m);ug(u,{pending:!0,data:I,method:m.method,action:x},null,I)}}else typeof x=="function"&&(E.preventDefault(),I=C?Wb(m,C):new FormData(m),ug(u,{pending:!0,data:I,method:m.method,action:x},x,I))},currentTarget:m}]})}}for(var Qg=0;Qg<Ep.length;Qg++){var Yg=Ep[Qg],TD=Yg.toLowerCase(),DD=Yg[0].toUpperCase()+Yg.slice(1);Jn(TD,"on"+DD)}Jn(Ev,"onAnimationEnd"),Jn(Mv,"onAnimationIteration"),Jn(Nv,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(XT,"onTransitionRun"),Jn(FT,"onTransitionStart"),Jn(GT,"onTransitionCancel"),Jn(Tv,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(La));function Kb(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var d=r[u],m=d.event;d=d.listeners;e:{var x=void 0;if(a)for(var C=d.length-1;0<=C;C--){var E=d[C],I=E.instance,K=E.currentTarget;if(E=E.listener,I!==x&&m.isPropagationStopped())break e;x=E,m.currentTarget=K;try{x(m)}catch(re){Nu(re)}m.currentTarget=null,x=I}else for(C=0;C<d.length;C++){if(E=d[C],I=E.instance,K=E.currentTarget,E=E.listener,I!==x&&m.isPropagationStopped())break e;x=E,m.currentTarget=K;try{x(m)}catch(re){Nu(re)}m.currentTarget=null,x=I}}}}function Be(r,a){var u=a[bo];u===void 0&&(u=a[bo]=new Set);var d=r+"__bubble";u.has(d)||(Zb(a,r,2,!1),u.add(d))}function Xg(r,a,u){var d=0;a&&(d|=4),Zb(u,r,d,a)}var mf="_reactListening"+Math.random().toString(36).slice(2);function Fg(r){if(!r[mf]){r[mf]=!0,mu.forEach(function(u){u!=="selectionchange"&&(RD.has(u)||Xg(u,!1,r),Xg(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[mf]||(a[mf]=!0,Xg("selectionchange",!1,a))}}function Zb(r,a,u,d){switch(ES(a)){case 2:var m=o3;break;case 8:m=l3;break;default:m=cm}u=m.bind(null,a,u,r),m=void 0,!pp||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),d?m!==void 0?r.addEventListener(a,u,{capture:!0,passive:m}):r.addEventListener(a,u,!0):m!==void 0?r.addEventListener(a,u,{passive:m}):r.addEventListener(a,u,!1)}function Gg(r,a,u,d,m){var x=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var E=d.stateNode.containerInfo;if(E===m)break;if(C===4)for(C=d.return;C!==null;){var I=C.tag;if((I===3||I===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;E!==null;){if(C=Ss(E),C===null)return;if(I=C.tag,I===5||I===6||I===26||I===27){d=x=C;continue e}E=E.parentNode}}d=d.return}iv(function(){var K=x,re=hp(u),le=[];e:{var J=Dv.get(r);if(J!==void 0){var se=Ou,xe=r;switch(r){case"keypress":if(ku(u)===0)break e;case"keydown":case"keyup":se=AT;break;case"focusin":xe="focus",se=xp;break;case"focusout":xe="blur",se=xp;break;case"beforeblur":case"afterblur":se=xp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=ov;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=dT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=MT;break;case Ev:case Mv:case Nv:se=mT;break;case Tv:se=TT;break;case"scroll":case"scrollend":se=fT;break;case"wheel":se=RT;break;case"copy":case"cut":case"paste":se=xT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=av;break;case"toggle":case"beforetoggle":se=_T}var Ae=(a&4)!==0,Je=!Ae&&(r==="scroll"||r==="scrollend"),F=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var Y=K,W;Y!==null;){var oe=Y;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||F===null||(oe=ta(Y,F),oe!=null&&Ae.push(_a(Y,oe,W))),Je)break;Y=Y.return}0<Ae.length&&(J=new se(J,xe,null,u,re),le.push({event:J,listeners:Ae}))}}if((a&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",se=r==="mouseout"||r==="pointerout",J&&u!==fp&&(xe=u.relatedTarget||u.fromElement)&&(Ss(xe)||xe[Ii]))break e;if((se||J)&&(J=re.window===re?re:(J=re.ownerDocument)?J.defaultView||J.parentWindow:window,se?(xe=u.relatedTarget||u.toElement,se=K,xe=xe?Ss(xe):null,xe!==null&&(Je=o(xe),Ae=xe.tag,xe!==Je||Ae!==5&&Ae!==27&&Ae!==6)&&(xe=null)):(se=null,xe=K),se!==xe)){if(Ae=ov,oe="onMouseLeave",F="onMouseEnter",Y="mouse",(r==="pointerout"||r==="pointerover")&&(Ae=av,oe="onPointerLeave",F="onPointerEnter",Y="pointer"),Je=se==null?J:Cs(se),W=xe==null?J:Cs(xe),J=new Ae(oe,Y+"leave",se,u,re),J.target=Je,J.relatedTarget=W,oe=null,Ss(re)===K&&(Ae=new Ae(F,Y+"enter",xe,u,re),Ae.target=W,Ae.relatedTarget=Je,oe=Ae),Je=oe,se&&xe)t:{for(Ae=LD,F=se,Y=xe,W=0,oe=F;oe;oe=Ae(oe))W++;oe=0;for(var Ce=Y;Ce;Ce=Ae(Ce))oe++;for(;0<W-oe;)F=Ae(F),W--;for(;0<oe-W;)Y=Ae(Y),oe--;for(;W--;){if(F===Y||Y!==null&&F===Y.alternate){Ae=F;break t}F=Ae(F),Y=Ae(Y)}Ae=null}else Ae=null;se!==null&&Jb(le,J,se,Ae,!1),xe!==null&&Je!==null&&Jb(le,Je,xe,Ae,!0)}}e:{if(J=K?Cs(K):window,se=J.nodeName&&J.nodeName.toLowerCase(),se==="select"||se==="input"&&J.type==="file")var Ue=mv;else if(pv(J))if(yv)Ue=qT;else{Ue=$T;var ve=VT}else se=J.nodeName,!se||se.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&up(K.elementType)&&(Ue=mv):Ue=UT;if(Ue&&(Ue=Ue(r,K))){gv(le,Ue,u,re);break e}ve&&ve(r,J,K),r==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&ea(J,"number",J.value)}switch(ve=K?Cs(K):window,r){case"focusin":(pv(ve)||ve.contentEditable==="true")&&(Mo=ve,kp=K,ca=null);break;case"focusout":ca=kp=Mo=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,Av(le,u,re);break;case"selectionchange":if(YT)break;case"keydown":case"keyup":Av(le,u,re)}var Re;if(bp)e:{switch(r){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Eo?hv(r,u)&&(He="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(cv&&u.locale!=="ko"&&(Eo||He!=="onCompositionStart"?He==="onCompositionEnd"&&Eo&&(Re=sv()):(Os=re,gp="value"in Os?Os.value:Os.textContent,Eo=!0)),ve=yf(K,He),0<ve.length&&(He=new lv(He,r,null,u,re),le.push({event:He,listeners:ve}),Re?He.data=Re:(Re=dv(u),Re!==null&&(He.data=Re)))),(Re=zT?PT(r,u):jT(r,u))&&(He=yf(K,"onBeforeInput"),0<He.length&&(ve=new lv("onBeforeInput","beforeinput",null,u,re),le.push({event:ve,listeners:He}),ve.data=Re)),ND(le,r,K,u,re)}Kb(le,a)})}function _a(r,a,u){return{instance:r,listener:a,currentTarget:u}}function yf(r,a){for(var u=a+"Capture",d=[];r!==null;){var m=r,x=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||x===null||(m=ta(r,u),m!=null&&d.unshift(_a(r,m,x)),m=ta(r,a),m!=null&&d.push(_a(r,m,x))),r.tag===3)return d;r=r.return}return[]}function LD(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Jb(r,a,u,d,m){for(var x=a._reactName,C=[];u!==null&&u!==d;){var E=u,I=E.alternate,K=E.stateNode;if(E=E.tag,I!==null&&I===d)break;E!==5&&E!==26&&E!==27||K===null||(I=K,m?(K=ta(u,x),K!=null&&C.unshift(_a(u,K,I))):m||(K=ta(u,x),K!=null&&C.push(_a(u,K,I)))),u=u.return}C.length!==0&&r.push({event:a,listeners:C})}var _D=/\r\n?/g,BD=/\u0000|\uFFFD/g;function eS(r){return(typeof r=="string"?r:""+r).replace(_D,`
`).replace(BD,"")}function tS(r,a){return a=eS(a),eS(r)===a}function Ze(r,a,u,d,m,x){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||ko(r,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&ko(r,""+d);break;case"className":wo(r,"class",d);break;case"tabIndex":wo(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":wo(r,u,d);break;case"style":tv(r,d,x);break;case"data":if(a!=="object"){wo(r,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=wu(""+d),r.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(a!=="input"&&Ze(r,a,"name",m.name,m,null),Ze(r,a,"formEncType",m.formEncType,m,null),Ze(r,a,"formMethod",m.formMethod,m,null),Ze(r,a,"formTarget",m.formTarget,m,null)):(Ze(r,a,"encType",m.encType,m,null),Ze(r,a,"method",m.method,m,null),Ze(r,a,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=wu(""+d),r.setAttribute(u,d);break;case"onClick":d!=null&&(r.onclick=Ui);break;case"onScroll":d!=null&&Be("scroll",r);break;case"onScrollEnd":d!=null&&Be("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}u=wu(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""+d):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":d===!0?r.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,d):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(u,d):r.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(u):r.setAttribute(u,d);break;case"popover":Be("beforetoggle",r),Be("toggle",r),So(r,"popover",d);break;case"xlinkActuate":Zn(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zn(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zn(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zn(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zn(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zn(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zn(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":So(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=cT.get(u)||u,So(r,u,d))}}function Wg(r,a,u,d,m,x){switch(u){case"style":tv(r,d,x);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof d=="string"?ko(r,d):(typeof d=="number"||typeof d=="bigint")&&ko(r,""+d);break;case"onScroll":d!=null&&Be("scroll",r);break;case"onScrollEnd":d!=null&&Be("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yu.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),a=u.slice(2,m?u.length-7:void 0),x=r[Yt]||null,x=x!=null?x[u]:null,typeof x=="function"&&r.removeEventListener(a,x,m),typeof d=="function")){typeof x!="function"&&x!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,d,m);break e}u in r?r[u]=d:d===!0?r.setAttribute(u,""):So(r,u,d)}}}function Vt(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",r),Be("load",r);var d=!1,m=!1,x;for(x in u)if(u.hasOwnProperty(x)){var C=u[x];if(C!=null)switch(x){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ze(r,a,x,C,u,null)}}m&&Ze(r,a,"srcSet",u.srcSet,u,null),d&&Ze(r,a,"src",u.src,u,null);return;case"input":Be("invalid",r);var E=x=C=m=null,I=null,K=null;for(d in u)if(u.hasOwnProperty(d)){var re=u[d];if(re!=null)switch(d){case"name":m=re;break;case"type":C=re;break;case"checked":I=re;break;case"defaultChecked":K=re;break;case"value":x=re;break;case"defaultValue":E=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,a));break;default:Ze(r,a,d,re,u,null)}}Su(r,x,E,I,K,C,m,!1);return;case"select":Be("invalid",r),d=C=x=null;for(m in u)if(u.hasOwnProperty(m)&&(E=u[m],E!=null))switch(m){case"value":x=E;break;case"defaultValue":C=E;break;case"multiple":d=E;default:Ze(r,a,m,E,u,null)}a=x,u=C,r.multiple=!!d,a!=null?$i(r,!!d,a,!1):u!=null&&$i(r,!!d,u,!0);return;case"textarea":Be("invalid",r),x=m=d=null;for(C in u)if(u.hasOwnProperty(C)&&(E=u[C],E!=null))switch(C){case"value":d=E;break;case"defaultValue":m=E;break;case"children":x=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Ze(r,a,C,E,u,null)}Jx(r,d,m,x);return;case"option":for(I in u)u.hasOwnProperty(I)&&(d=u[I],d!=null)&&(I==="selected"?r.selected=d&&typeof d!="function"&&typeof d!="symbol":Ze(r,a,I,d,u,null));return;case"dialog":Be("beforetoggle",r),Be("toggle",r),Be("cancel",r),Be("close",r);break;case"iframe":case"object":Be("load",r);break;case"video":case"audio":for(d=0;d<La.length;d++)Be(La[d],r);break;case"image":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"embed":case"source":case"link":Be("error",r),Be("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in u)if(u.hasOwnProperty(K)&&(d=u[K],d!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Ze(r,a,K,d,u,null)}return;default:if(up(a)){for(re in u)u.hasOwnProperty(re)&&(d=u[re],d!==void 0&&Wg(r,a,re,d,u,void 0));return}}for(E in u)u.hasOwnProperty(E)&&(d=u[E],d!=null&&Ze(r,a,E,d,u,null))}function zD(r,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,x=null,C=null,E=null,I=null,K=null,re=null;for(se in u){var le=u[se];if(u.hasOwnProperty(se)&&le!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":I=le;default:d.hasOwnProperty(se)||Ze(r,a,se,null,d,le)}}for(var J in d){var se=d[J];if(le=u[J],d.hasOwnProperty(J)&&(se!=null||le!=null))switch(J){case"type":x=se;break;case"name":m=se;break;case"checked":K=se;break;case"defaultChecked":re=se;break;case"value":C=se;break;case"defaultValue":E=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:se!==le&&Ze(r,a,J,se,d,le)}}Cr(r,C,E,I,K,re,x,m);return;case"select":se=C=E=J=null;for(x in u)if(I=u[x],u.hasOwnProperty(x)&&I!=null)switch(x){case"value":break;case"multiple":se=I;default:d.hasOwnProperty(x)||Ze(r,a,x,null,d,I)}for(m in d)if(x=d[m],I=u[m],d.hasOwnProperty(m)&&(x!=null||I!=null))switch(m){case"value":J=x;break;case"defaultValue":E=x;break;case"multiple":C=x;default:x!==I&&Ze(r,a,m,x,d,I)}a=E,u=C,d=se,J!=null?$i(r,!!u,J,!1):!!d!=!!u&&(a!=null?$i(r,!!u,a,!0):$i(r,!!u,u?[]:"",!1));return;case"textarea":se=J=null;for(E in u)if(m=u[E],u.hasOwnProperty(E)&&m!=null&&!d.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ze(r,a,E,null,d,m)}for(C in d)if(m=d[C],x=u[C],d.hasOwnProperty(C)&&(m!=null||x!=null))switch(C){case"value":J=m;break;case"defaultValue":se=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==x&&Ze(r,a,C,m,d,x)}Zx(r,J,se);return;case"option":for(var xe in u)J=u[xe],u.hasOwnProperty(xe)&&J!=null&&!d.hasOwnProperty(xe)&&(xe==="selected"?r.selected=!1:Ze(r,a,xe,null,d,J));for(I in d)J=d[I],se=u[I],d.hasOwnProperty(I)&&J!==se&&(J!=null||se!=null)&&(I==="selected"?r.selected=J&&typeof J!="function"&&typeof J!="symbol":Ze(r,a,I,J,d,se));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in u)J=u[Ae],u.hasOwnProperty(Ae)&&J!=null&&!d.hasOwnProperty(Ae)&&Ze(r,a,Ae,null,d,J);for(K in d)if(J=d[K],se=u[K],d.hasOwnProperty(K)&&J!==se&&(J!=null||se!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:Ze(r,a,K,J,d,se)}return;default:if(up(a)){for(var Je in u)J=u[Je],u.hasOwnProperty(Je)&&J!==void 0&&!d.hasOwnProperty(Je)&&Wg(r,a,Je,void 0,d,J);for(re in d)J=d[re],se=u[re],!d.hasOwnProperty(re)||J===se||J===void 0&&se===void 0||Wg(r,a,re,J,d,se);return}}for(var F in u)J=u[F],u.hasOwnProperty(F)&&J!=null&&!d.hasOwnProperty(F)&&Ze(r,a,F,null,d,J);for(le in d)J=d[le],se=u[le],!d.hasOwnProperty(le)||J===se||J==null&&se==null||Ze(r,a,le,J,d,se)}function nS(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PD(){if(typeof performance.getEntriesByType=="function"){for(var r=0,a=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var m=u[d],x=m.transferSize,C=m.initiatorType,E=m.duration;if(x&&E&&nS(C)){for(C=0,E=m.responseEnd,d+=1;d<u.length;d++){var I=u[d],K=I.startTime;if(K>E)break;var re=I.transferSize,le=I.initiatorType;re&&nS(le)&&(I=I.responseEnd,C+=re*(I<E?1:(E-K)/(I-K)))}if(--d,a+=8*(x+C)/(m.duration/1e3),r++,10<r)break}}if(0<r)return a/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Kg=null,Zg=null;function xf(r){return r.nodeType===9?r:r.ownerDocument}function iS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sS(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Jg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var em=null;function jD(){var r=window.event;return r&&r.type==="popstate"?r===em?!1:(em=r,!0):(em=null,!1)}var rS=typeof setTimeout=="function"?setTimeout:void 0,HD=typeof clearTimeout=="function"?clearTimeout:void 0,oS=typeof Promise=="function"?Promise:void 0,ID=typeof queueMicrotask=="function"?queueMicrotask:typeof oS<"u"?function(r){return oS.resolve(null).then(r).catch(VD)}:rS;function VD(r){setTimeout(function(){throw r})}function Us(r){return r==="head"}function lS(r,a){var u=a,d=0;do{var m=u.nextSibling;if(r.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"||u==="/&"){if(d===0){r.removeChild(m),tl(a);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Ba(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Ba(u);for(var x=u.firstChild;x;){var C=x.nextSibling,E=x.nodeName;x[Sr]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=C}}else u==="body"&&Ba(r.ownerDocument.body);u=m}while(u);tl(a)}function aS(r,a){var u=r;r=0;do{var d=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=d}while(u)}function tm(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":tm(u),Zl(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function $D(r,a,u,d){for(;r.nodeType===1;){var m=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[Sr])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(x=r.getAttribute("rel"),x==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(x!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(x=r.getAttribute("src"),(x!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&x&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var x=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===x)return r}else return r;if(r=$n(r.nextSibling),r===null)break}return null}function UD(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=$n(r.nextSibling),r===null))return null;return r}function cS(r,a){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=$n(r.nextSibling),r===null))return null;return r}function nm(r){return r.data==="$?"||r.data==="$~"}function im(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function qD(r,a){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=a;else if(r.data!=="$?"||u.readyState!=="loading")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function $n(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return r}var sm=null;function uS(r){r=r.nextSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(a===0)return $n(r.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}r=r.nextSibling}return null}function fS(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return r;a--}else u!=="/$"&&u!=="/&"||a++}r=r.previousSibling}return null}function hS(r,a,u){switch(a=xf(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ba(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);Zl(r)}var Un=new Map,dS=new Set;function vf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var rs=P.d;P.d={f:QD,r:YD,D:XD,C:FD,L:GD,m:WD,X:ZD,S:KD,M:JD};function QD(){var r=rs.f(),a=uf();return r||a}function YD(r){var a=ws(r);a!==null&&a.tag===5&&a.type==="form"?T1(a):rs.r(r)}var Zo=typeof document>"u"?null:document;function pS(r,a,u){var d=Zo;if(d&&typeof a=="string"&&a){var m=ln(a);m='link[rel="'+r+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),dS.has(m)||(dS.add(m),r={rel:r,crossOrigin:u,href:a},d.querySelector(m)===null&&(a=d.createElement("link"),Vt(a,"link",r),vt(a),d.head.appendChild(a)))}}function XD(r){rs.D(r),pS("dns-prefetch",r,null)}function FD(r,a){rs.C(r,a),pS("preconnect",r,a)}function GD(r,a,u){rs.L(r,a,u);var d=Zo;if(d&&r&&a){var m='link[rel="preload"][as="'+ln(a)+'"]';a==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+ln(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+ln(u.imageSizes)+'"]')):m+='[href="'+ln(r)+'"]';var x=m;switch(a){case"style":x=Jo(r);break;case"script":x=el(r)}Un.has(x)||(r=g({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),Un.set(x,r),d.querySelector(m)!==null||a==="style"&&d.querySelector(za(x))||a==="script"&&d.querySelector(Pa(x))||(a=d.createElement("link"),Vt(a,"link",r),vt(a),d.head.appendChild(a)))}}function WD(r,a){rs.m(r,a);var u=Zo;if(u&&r){var d=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+ln(d)+'"][href="'+ln(r)+'"]',x=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=el(r)}if(!Un.has(x)&&(r=g({rel:"modulepreload",href:r},a),Un.set(x,r),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Pa(x)))return}d=u.createElement("link"),Vt(d,"link",r),vt(d),u.head.appendChild(d)}}}function KD(r,a,u){rs.S(r,a,u);var d=Zo;if(d&&r){var m=ks(d).hoistableStyles,x=Jo(r);a=a||"default";var C=m.get(x);if(!C){var E={loading:0,preload:null};if(C=d.querySelector(za(x)))E.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":a},u),(u=Un.get(x))&&rm(r,u);var I=C=d.createElement("link");vt(I),Vt(I,"link",r),I._p=new Promise(function(K,re){I.onload=K,I.onerror=re}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,bf(C,a,d)}C={type:"stylesheet",instance:C,count:1,state:E},m.set(x,C)}}}function ZD(r,a){rs.X(r,a);var u=Zo;if(u&&r){var d=ks(u).hoistableScripts,m=el(r),x=d.get(m);x||(x=u.querySelector(Pa(m)),x||(r=g({src:r,async:!0},a),(a=Un.get(m))&&om(r,a),x=u.createElement("script"),vt(x),Vt(x,"link",r),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function JD(r,a){rs.M(r,a);var u=Zo;if(u&&r){var d=ks(u).hoistableScripts,m=el(r),x=d.get(m);x||(x=u.querySelector(Pa(m)),x||(r=g({src:r,async:!0,type:"module"},a),(a=Un.get(m))&&om(r,a),x=u.createElement("script"),vt(x),Vt(x,"link",r),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},d.set(m,x))}}function gS(r,a,u,d){var m=(m=he.current)?vf(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Jo(u.href),u=ks(m).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Jo(u.href);var x=ks(m).hoistableStyles,C=x.get(r);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(r,C),(x=m.querySelector(za(r)))&&!x._p&&(C.instance=x,C.state.loading=5),Un.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Un.set(r,u),x||e3(m,r,u,C.state))),a&&d===null)throw Error(i(528,""));return C}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=el(u),u=ks(m).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Jo(r){return'href="'+ln(r)+'"'}function za(r){return'link[rel="stylesheet"]['+r+"]"}function mS(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function e3(r,a,u,d){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=r.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Vt(a,"link",u),vt(a),r.head.appendChild(a))}function el(r){return'[src="'+ln(r)+'"]'}function Pa(r){return"script[async]"+r}function yS(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=r.querySelector('style[data-href~="'+ln(u.href)+'"]');if(d)return a.instance=d,vt(d),d;var m=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),vt(d),Vt(d,"style",m),bf(d,u.precedence,r),a.instance=d;case"stylesheet":m=Jo(u.href);var x=r.querySelector(za(m));if(x)return a.state.loading|=4,a.instance=x,vt(x),x;d=mS(u),(m=Un.get(m))&&rm(d,m),x=(r.ownerDocument||r).createElement("link"),vt(x);var C=x;return C._p=new Promise(function(E,I){C.onload=E,C.onerror=I}),Vt(x,"link",d),a.state.loading|=4,bf(x,u.precedence,r),a.instance=x;case"script":return x=el(u.src),(m=r.querySelector(Pa(x)))?(a.instance=m,vt(m),m):(d=u,(m=Un.get(x))&&(d=g({},u),om(d,m)),r=r.ownerDocument||r,m=r.createElement("script"),vt(m),Vt(m,"link",d),r.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,bf(d,u.precedence,r));return a.instance}function bf(r,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,x=m,C=0;C<d.length;C++){var E=d[C];if(E.dataset.precedence===a)x=E;else if(x!==m)break}x?x.parentNode.insertBefore(r,x.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function rm(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function om(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var Sf=null;function xS(r,a,u){if(Sf===null){var d=new Map,m=Sf=new Map;m.set(u,d)}else m=Sf,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(r))return d;for(d.set(r,null),u=u.getElementsByTagName(r),m=0;m<u.length;m++){var x=u[m];if(!(x[Sr]||x[Et]||r==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(a)||"";C=r+C;var E=d.get(C);E?E.push(x):d.set(C,[x])}}return d}function vS(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function t3(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(r=a.disabled,typeof a.precedence=="string"&&r==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function bS(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function n3(r,a,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var m=Jo(d.href),x=a.querySelector(za(m));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(r.count++,r=wf.bind(r),a.then(r,r)),u.state.loading|=4,u.instance=x,vt(x);return}x=a.ownerDocument||a,d=mS(d),(m=Un.get(m))&&rm(d,m),x=x.createElement("link"),vt(x);var C=x;C._p=new Promise(function(E,I){C.onload=E,C.onerror=I}),Vt(x,"link",d),u.instance=x}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=wf.bind(r),a.addEventListener("load",u),a.addEventListener("error",u))}}var lm=0;function i3(r,a){return r.stylesheets&&r.count===0&&kf(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var d=setTimeout(function(){if(r.stylesheets&&kf(r,r.stylesheets),r.unsuspend){var x=r.unsuspend;r.unsuspend=null,x()}},6e4+a);0<r.imgBytes&&lm===0&&(lm=62500*PD());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&kf(r,r.stylesheets),r.unsuspend)){var x=r.unsuspend;r.unsuspend=null,x()}},(r.imgBytes>lm?50:800)+a);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function wf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Cf=null;function kf(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Cf=new Map,a.forEach(s3,r),Cf=null,wf.call(r))}function s3(r,a){if(!(a.state.loading&4)){var u=Cf.get(r);if(u)var d=u.get(null);else{u=new Map,Cf.set(r,u);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<m.length;x++){var C=m[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),d=C)}d&&u.set(null,d)}m=a.instance,C=m.getAttribute("data-precedence"),x=u.get(C)||d,x===d&&u.set(null,m),u.set(C,m),this.count++,d=wf.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),x?x.parentNode.insertBefore(m,x.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),a.state.loading|=4}}var ja={$$typeof:O,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function r3(r,a,u,d,m,x,C,E,I){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gl(0),this.hiddenUpdates=Gl(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function SS(r,a,u,d,m,x,C,E,I,K,re,le){return r=new r3(r,a,u,C,I,K,re,le,E),a=1,x===!0&&(a|=24),x=kn(3,null,null,a),r.current=x,x.stateNode=r,a=Ip(),a.refCount++,r.pooledCache=a,a.refCount++,x.memoizedState={element:d,isDehydrated:u,cache:a},qp(x),r}function wS(r){return r?(r=Do,r):Do}function CS(r,a,u,d,m,x){m=wS(m),d.context===null?d.context=m:d.pendingContext=m,d=Rs(a),d.payload={element:u},x=x===void 0?null:x,x!==null&&(d.callback=x),u=Ls(r,d,a),u!==null&&(dn(u,r,a),ma(u,r,a))}function kS(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function am(r,a){kS(r,a),(r=r.alternate)&&kS(r,a)}function AS(r){if(r.tag===13||r.tag===31){var a=Er(r,67108864);a!==null&&dn(a,r,67108864),am(r,67108864)}}function OS(r){if(r.tag===13||r.tag===31){var a=Nn();a=Wl(a);var u=Er(r,a);u!==null&&dn(u,r,a),am(r,a)}}var Af=!0;function o3(r,a,u,d){var m=T.T;T.T=null;var x=P.p;try{P.p=2,cm(r,a,u,d)}finally{P.p=x,T.T=m}}function l3(r,a,u,d){var m=T.T;T.T=null;var x=P.p;try{P.p=8,cm(r,a,u,d)}finally{P.p=x,T.T=m}}function cm(r,a,u,d){if(Af){var m=um(d);if(m===null)Gg(r,a,d,Of,u),MS(r,d);else if(c3(m,r,a,u,d))d.stopPropagation();else if(MS(r,d),a&4&&-1<a3.indexOf(r)){for(;m!==null;){var x=ws(m);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=Hi(x.pendingLanes);if(C!==0){var E=x;for(E.pendingLanes|=2,E.entangledLanes|=2;C;){var I=1<<31-Jt(C);E.entanglements[1]|=I,C&=~I}xi(x),(Ye&6)===0&&(af=Pt()+500,Ra(0))}}break;case 31:case 13:E=Er(x,2),E!==null&&dn(E,x,2),uf(),am(x,2)}if(x=um(d),x===null&&Gg(r,a,d,Of,u),x===m)break;m=x}m!==null&&d.stopPropagation()}else Gg(r,a,d,null,u)}}function um(r){return r=hp(r),fm(r)}var Of=null;function fm(r){if(Of=null,r=Ss(r),r!==null){var a=o(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=l(a),r!==null)return r;r=null}else if(u===31){if(r=c(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return Of=r,null}function ES(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(po()){case ji:return 2;case bs:return 8;case yr:case Kd:return 32;case go:return 268435456;default:return 32}default:return 32}}var hm=!1,qs=null,Qs=null,Ys=null,Ha=new Map,Ia=new Map,Xs=[],a3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function MS(r,a){switch(r){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":Ha.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(a.pointerId)}}function Va(r,a,u,d,m,x){return r===null||r.nativeEvent!==x?(r={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:x,targetContainers:[m]},a!==null&&(a=ws(a),a!==null&&AS(a)),r):(r.eventSystemFlags|=d,a=r.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),r)}function c3(r,a,u,d,m){switch(a){case"focusin":return qs=Va(qs,r,a,u,d,m),!0;case"dragenter":return Qs=Va(Qs,r,a,u,d,m),!0;case"mouseover":return Ys=Va(Ys,r,a,u,d,m),!0;case"pointerover":var x=m.pointerId;return Ha.set(x,Va(Ha.get(x)||null,r,a,u,d,m)),!0;case"gotpointercapture":return x=m.pointerId,Ia.set(x,Va(Ia.get(x)||null,r,a,u,d,m)),!0}return!1}function NS(r){var a=Ss(r.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){r.blockedOn=a,du(r.priority,function(){OS(u)});return}}else if(a===31){if(a=c(u),a!==null){r.blockedOn=a,du(r.priority,function(){OS(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Ef(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=um(r.nativeEvent);if(u===null){u=r.nativeEvent;var d=new u.constructor(u.type,u);fp=d,u.target.dispatchEvent(d),fp=null}else return a=ws(u),a!==null&&AS(a),r.blockedOn=u,!1;a.shift()}return!0}function TS(r,a,u){Ef(r)&&u.delete(a)}function u3(){hm=!1,qs!==null&&Ef(qs)&&(qs=null),Qs!==null&&Ef(Qs)&&(Qs=null),Ys!==null&&Ef(Ys)&&(Ys=null),Ha.forEach(TS),Ia.forEach(TS)}function Mf(r,a){r.blockedOn===a&&(r.blockedOn=null,hm||(hm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,u3)))}var Nf=null;function DS(r){Nf!==r&&(Nf=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nf===r&&(Nf=null);for(var a=0;a<r.length;a+=3){var u=r[a],d=r[a+1],m=r[a+2];if(typeof d!="function"){if(fm(d||u)===null)continue;break}var x=ws(u);x!==null&&(r.splice(a,3),a-=3,ug(x,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function tl(r){function a(I){return Mf(I,r)}qs!==null&&Mf(qs,r),Qs!==null&&Mf(Qs,r),Ys!==null&&Mf(Ys,r),Ha.forEach(a),Ia.forEach(a);for(var u=0;u<Xs.length;u++){var d=Xs[u];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Xs.length&&(u=Xs[0],u.blockedOn===null);)NS(u),u.blockedOn===null&&Xs.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],x=u[d+1],C=m[Yt]||null;if(typeof x=="function")C||DS(u);else if(C){var E=null;if(x&&x.hasAttribute("formAction")){if(m=x,C=x[Yt]||null)E=C.formAction;else if(fm(m)!==null)continue}else E=C.action;typeof E=="function"?u[d+1]=E:(u.splice(d,3),d-=3),DS(u)}}}function RS(){function r(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return m=C})},focusReset:"manual",scroll:"manual"})}function a(){m!==null&&(m(),m=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),m!==null&&(m(),m=null)}}}function dm(r){this._internalRoot=r}Tf.prototype.render=dm.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=Nn();CS(u,d,r,a,null,null)},Tf.prototype.unmount=dm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;CS(r.current,2,null,r,null,null),uf(),a[Ii]=null}};function Tf(r){this._internalRoot=r}Tf.prototype.unstable_scheduleHydration=function(r){if(r){var a=hu();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Xs.length&&a!==0&&a<Xs[u].priority;u++);Xs.splice(u,0,r),u===0&&NS(r)}};var LS=e.version;if(LS!=="19.2.4")throw Error(i(527,LS,"19.2.4"));P.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(a),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var f3={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{xr=Df.inject(f3),Zt=Df}catch{}}return Ua.createRoot=function(r,a){if(!s(r))throw Error(i(299));var u=!1,d="",m=I1,x=V1,C=$1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=SS(r,1,!1,null,null,u,d,null,m,x,C,RS),r[Ii]=a.current,Fg(r),new dm(a)},Ua.hydrateRoot=function(r,a,u){if(!s(r))throw Error(i(299));var d=!1,m="",x=I1,C=V1,E=$1,I=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(E=u.onRecoverableError),u.formState!==void 0&&(I=u.formState)),a=SS(r,1,!0,a,u??null,d,m,I,x,C,E,RS),a.context=wS(null),u=a.current,d=Nn(),d=Wl(d),m=Rs(d),m.callback=null,Ls(u,m,d),u=d,a.current.lanes=u,br(a,u),xi(a),r[Ii]=a.current,Fg(r),new Tf(a)},Ua.version="19.2.4",Ua}var US;function S3(){if(US)return mm.exports;US=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),mm.exports=b3(),mm.exports}var w3=S3();const C3={yamlContent:"",policy:null,parseError:null,parseWarnings:[],selectedNodeId:null,ruleLineRanges:null,highlightedLines:null};function k3(t,e){switch(e.type){case"SET_YAML":return{...t,yamlContent:e.payload};case"SET_POLICY":return{...t,policy:e.payload.policy,ruleLineRanges:e.payload.ruleLineRanges,parseError:null,parseWarnings:e.payload.warnings};case"SET_ERROR":return{...t,parseError:e.payload,parseWarnings:[]};case"SELECT_NODE":return{...t,selectedNodeId:e.payload};case"HIGHLIGHT_LINES":return{...t,highlightedLines:e.payload};default:return t}}const kk=U.createContext(null);function A3({children:t}){const[e,n]=U.useReducer(k3,C3);return w.jsx(kk.Provider,{value:{state:e,dispatch:n},children:t})}function Ot(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Ot(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var O3={value:()=>{}};function Sd(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new hh(n)}function hh(t){this._=t}function E3(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",s=n.indexOf(".");if(s>=0&&(i=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}hh.prototype=Sd.prototype={constructor:hh,on:function(t,e){var n=this._,i=E3(t+"",n),s,o=-1,l=i.length;if(arguments.length<2){for(;++o<l;)if((s=(t=i[o]).type)&&(s=M3(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<l;)if(s=(t=i[o]).type)n[s]=qS(n[s],t.name,e);else if(e==null)for(s in n)n[s]=qS(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new hh(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),i=0,s,o;i<s;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,s=o.length;i<s;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,o=i.length;s<o;++s)i[s].value.apply(e,n)}};function M3(t,e){for(var n=0,i=t.length,s;n<i;++n)if((s=t[n]).name===e)return s.value}function qS(t,e,n){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=O3,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var x0="http://www.w3.org/1999/xhtml";const QS={svg:"http://www.w3.org/2000/svg",xhtml:x0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wd(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),QS.hasOwnProperty(e)?{space:QS[e],local:t}:t}function N3(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===x0&&e.documentElement.namespaceURI===x0?e.createElement(t):e.createElementNS(n,t)}}function T3(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ak(t){var e=wd(t);return(e.local?T3:N3)(e)}function D3(){}function $y(t){return t==null?D3:function(){return this.querySelector(t)}}function R3(t){typeof t!="function"&&(t=$y(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=i[s]=new Array(l),f,h,p=0;p<l;++p)(f=o[p])&&(h=t.call(f,f.__data__,p,o))&&("__data__"in f&&(h.__data__=f.__data__),c[p]=h);return new Bn(i,this._parents)}function L3(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function _3(){return[]}function Ok(t){return t==null?_3:function(){return this.querySelectorAll(t)}}function B3(t){return function(){return L3(t.apply(this,arguments))}}function z3(t){typeof t=="function"?t=B3(t):t=Ok(t);for(var e=this._groups,n=e.length,i=[],s=[],o=0;o<n;++o)for(var l=e[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&(i.push(t.call(f,f.__data__,h,l)),s.push(f));return new Bn(i,s)}function Ek(t){return function(){return this.matches(t)}}function Mk(t){return function(e){return e.matches(t)}}var P3=Array.prototype.find;function j3(t){return function(){return P3.call(this.children,t)}}function H3(){return this.firstElementChild}function I3(t){return this.select(t==null?H3:j3(typeof t=="function"?t:Mk(t)))}var V3=Array.prototype.filter;function $3(){return Array.from(this.children)}function U3(t){return function(){return V3.call(this.children,t)}}function q3(t){return this.selectAll(t==null?$3:U3(typeof t=="function"?t:Mk(t)))}function Q3(t){typeof t!="function"&&(t=Ek(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=i[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new Bn(i,this._parents)}function Nk(t){return new Array(t.length)}function Y3(){return new Bn(this._enter||this._groups.map(Nk),this._parents)}function Eh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Eh.prototype={constructor:Eh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function X3(t){return function(){return t}}function F3(t,e,n,i,s,o){for(var l=0,c,f=e.length,h=o.length;l<h;++l)(c=e[l])?(c.__data__=o[l],i[l]=c):n[l]=new Eh(t,o[l]);for(;l<f;++l)(c=e[l])&&(s[l]=c)}function G3(t,e,n,i,s,o,l){var c,f,h=new Map,p=e.length,g=o.length,y=new Array(p),v;for(c=0;c<p;++c)(f=e[c])&&(y[c]=v=l.call(f,f.__data__,c,e)+"",h.has(v)?s[c]=f:h.set(v,f));for(c=0;c<g;++c)v=l.call(t,o[c],c,o)+"",(f=h.get(v))?(i[c]=f,f.__data__=o[c],h.delete(v)):n[c]=new Eh(t,o[c]);for(c=0;c<p;++c)(f=e[c])&&h.get(y[c])===f&&(s[c]=f)}function W3(t){return t.__data__}function K3(t,e){if(!arguments.length)return Array.from(this,W3);var n=e?G3:F3,i=this._parents,s=this._groups;typeof t!="function"&&(t=X3(t));for(var o=s.length,l=new Array(o),c=new Array(o),f=new Array(o),h=0;h<o;++h){var p=i[h],g=s[h],y=g.length,v=Z3(t.call(p,p&&p.__data__,h,i)),b=v.length,S=c[h]=new Array(b),k=l[h]=new Array(b),A=f[h]=new Array(y);n(p,g,S,k,A,v,e);for(var N=0,O=0,M,_;N<b;++N)if(M=S[N]){for(N>=O&&(O=N+1);!(_=k[O])&&++O<b;);M._next=_||null}}return l=new Bn(l,i),l._enter=c,l._exit=f,l}function Z3(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function J3(){return new Bn(this._exit||this._groups.map(Nk),this._parents)}function e5(t,e,n){var i=this.enter(),s=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),i&&s?i.merge(s).order():s}function t5(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,s=n.length,o=i.length,l=Math.min(s,o),c=new Array(s),f=0;f<l;++f)for(var h=n[f],p=i[f],g=h.length,y=c[f]=new Array(g),v,b=0;b<g;++b)(v=h[b]||p[b])&&(y[b]=v);for(;f<s;++f)c[f]=n[f];return new Bn(c,this._parents)}function n5(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],s=i.length-1,o=i[s],l;--s>=0;)(l=i[s])&&(o&&l.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(l,o),o=l);return this}function i5(t){t||(t=s5);function e(g,y){return g&&y?t(g.__data__,y.__data__):!g-!y}for(var n=this._groups,i=n.length,s=new Array(i),o=0;o<i;++o){for(var l=n[o],c=l.length,f=s[o]=new Array(c),h,p=0;p<c;++p)(h=l[p])&&(f[p]=h);f.sort(e)}return new Bn(s,this._parents).order()}function s5(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r5(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function o5(){return Array.from(this)}function l5(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],s=0,o=i.length;s<o;++s){var l=i[s];if(l)return l}return null}function a5(){let t=0;for(const e of this)++t;return t}function c5(){return!this.node()}function u5(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var s=e[n],o=0,l=s.length,c;o<l;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function f5(t){return function(){this.removeAttribute(t)}}function h5(t){return function(){this.removeAttributeNS(t.space,t.local)}}function d5(t,e){return function(){this.setAttribute(t,e)}}function p5(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function g5(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function m5(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function y5(t,e){var n=wd(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?h5:f5:typeof e=="function"?n.local?m5:g5:n.local?p5:d5)(n,e))}function Tk(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function x5(t){return function(){this.style.removeProperty(t)}}function v5(t,e,n){return function(){this.style.setProperty(t,e,n)}}function b5(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function S5(t,e,n){return arguments.length>1?this.each((e==null?x5:typeof e=="function"?b5:v5)(t,e,n??"")):El(this.node(),t)}function El(t,e){return t.style.getPropertyValue(e)||Tk(t).getComputedStyle(t,null).getPropertyValue(e)}function w5(t){return function(){delete this[t]}}function C5(t,e){return function(){this[t]=e}}function k5(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function A5(t,e){return arguments.length>1?this.each((e==null?w5:typeof e=="function"?k5:C5)(t,e)):this.node()[t]}function Dk(t){return t.trim().split(/^|\s+/)}function Uy(t){return t.classList||new Rk(t)}function Rk(t){this._node=t,this._names=Dk(t.getAttribute("class")||"")}Rk.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Lk(t,e){for(var n=Uy(t),i=-1,s=e.length;++i<s;)n.add(e[i])}function _k(t,e){for(var n=Uy(t),i=-1,s=e.length;++i<s;)n.remove(e[i])}function O5(t){return function(){Lk(this,t)}}function E5(t){return function(){_k(this,t)}}function M5(t,e){return function(){(e.apply(this,arguments)?Lk:_k)(this,t)}}function N5(t,e){var n=Dk(t+"");if(arguments.length<2){for(var i=Uy(this.node()),s=-1,o=n.length;++s<o;)if(!i.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?M5:e?O5:E5)(n,e))}function T5(){this.textContent=""}function D5(t){return function(){this.textContent=t}}function R5(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function L5(t){return arguments.length?this.each(t==null?T5:(typeof t=="function"?R5:D5)(t)):this.node().textContent}function _5(){this.innerHTML=""}function B5(t){return function(){this.innerHTML=t}}function z5(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function P5(t){return arguments.length?this.each(t==null?_5:(typeof t=="function"?z5:B5)(t)):this.node().innerHTML}function j5(){this.nextSibling&&this.parentNode.appendChild(this)}function H5(){return this.each(j5)}function I5(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V5(){return this.each(I5)}function $5(t){var e=typeof t=="function"?t:Ak(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function U5(){return null}function q5(t,e){var n=typeof t=="function"?t:Ak(t),i=e==null?U5:typeof e=="function"?e:$y(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Q5(){var t=this.parentNode;t&&t.removeChild(this)}function Y5(){return this.each(Q5)}function X5(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function F5(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function G5(t){return this.select(t?F5:X5)}function W5(t){return arguments.length?this.property("__data__",t):this.node().__data__}function K5(t){return function(e){t.call(this,e,this.__data__)}}function Z5(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function J5(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function eR(t,e,n){return function(){var i=this.__on,s,o=K5(e);if(i){for(var l=0,c=i.length;l<c;++l)if((s=i[l]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(s):this.__on=[s]}}function tR(t,e,n){var i=Z5(t+""),s,o=i.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,p;f<h;++f)for(s=0,p=c[f];s<o;++s)if((l=i[s]).type===p.type&&l.name===p.name)return p.value}return}for(c=e?eR:J5,s=0;s<o;++s)this.each(c(i[s],e,n));return this}function Bk(t,e,n){var i=Tk(t),s=i.CustomEvent;typeof s=="function"?s=new s(e,n):(s=i.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function nR(t,e){return function(){return Bk(this,t,e)}}function iR(t,e){return function(){return Bk(this,t,e.apply(this,arguments))}}function sR(t,e){return this.each((typeof e=="function"?iR:nR)(t,e))}function*rR(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],s=0,o=i.length,l;s<o;++s)(l=i[s])&&(yield l)}var zk=[null];function Bn(t,e){this._groups=t,this._parents=e}function Fc(){return new Bn([[document.documentElement]],zk)}function oR(){return this}Bn.prototype=Fc.prototype={constructor:Bn,select:R3,selectAll:z3,selectChild:I3,selectChildren:q3,filter:Q3,data:K3,enter:Y3,exit:J3,join:e5,merge:t5,selection:oR,order:n5,sort:i5,call:r5,nodes:o5,node:l5,size:a5,empty:c5,each:u5,attr:y5,style:S5,property:A5,classed:N5,text:L5,html:P5,raise:H5,lower:V5,append:$5,insert:q5,remove:Y5,clone:G5,datum:W5,on:tR,dispatch:sR,[Symbol.iterator]:rR};function Ln(t){return typeof t=="string"?new Bn([[document.querySelector(t)]],[document.documentElement]):new Bn([[t]],zk)}function lR(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ni(t,e){if(t=lR(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const aR={passive:!1},mc={capture:!0,passive:!1};function bm(t){t.stopImmediatePropagation()}function yl(t){t.preventDefault(),t.stopImmediatePropagation()}function Pk(t){var e=t.document.documentElement,n=Ln(t).on("dragstart.drag",yl,mc);"onselectstart"in e?n.on("selectstart.drag",yl,mc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function jk(t,e){var n=t.document.documentElement,i=Ln(t).on("dragstart.drag",null);e&&(i.on("click.drag",yl,mc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rf=t=>()=>t;function v0(t,{sourceEvent:e,subject:n,target:i,identifier:s,active:o,x:l,y:c,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}v0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function cR(t){return!t.ctrlKey&&!t.button}function uR(){return this.parentNode}function fR(t,e){return e??{x:t.x,y:t.y}}function hR(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hk(){var t=cR,e=uR,n=fR,i=hR,s={},o=Sd("start","drag","end"),l=0,c,f,h,p,g=0;function y(M){M.on("mousedown.drag",v).filter(i).on("touchstart.drag",k).on("touchmove.drag",A,aR).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(M,_){if(!(p||!t.call(this,M,_))){var L=O(this,e.call(this,M,_),M,_,"mouse");L&&(Ln(M.view).on("mousemove.drag",b,mc).on("mouseup.drag",S,mc),Pk(M.view),bm(M),h=!1,c=M.clientX,f=M.clientY,L("start",M))}}function b(M){if(yl(M),!h){var _=M.clientX-c,L=M.clientY-f;h=_*_+L*L>g}s.mouse("drag",M)}function S(M){Ln(M.view).on("mousemove.drag mouseup.drag",null),jk(M.view,h),yl(M),s.mouse("end",M)}function k(M,_){if(t.call(this,M,_)){var L=M.changedTouches,R=e.call(this,M,_),X=L.length,$,ne;for($=0;$<X;++$)(ne=O(this,R,M,_,L[$].identifier,L[$]))&&(bm(M),ne("start",M,L[$]))}}function A(M){var _=M.changedTouches,L=_.length,R,X;for(R=0;R<L;++R)(X=s[_[R].identifier])&&(yl(M),X("drag",M,_[R]))}function N(M){var _=M.changedTouches,L=_.length,R,X;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),R=0;R<L;++R)(X=s[_[R].identifier])&&(bm(M),X("end",M,_[R]))}function O(M,_,L,R,X,$){var ne=o.copy(),q=ni($||L,_),Q,Z,B;if((B=n.call(M,new v0("beforestart",{sourceEvent:L,target:y,identifier:X,active:l,x:q[0],y:q[1],dx:0,dy:0,dispatch:ne}),R))!=null)return Q=B.x-q[0]||0,Z=B.y-q[1]||0,function V(T,P,H){var z=q,G;switch(T){case"start":s[X]=V,G=l++;break;case"end":delete s[X],--l;case"drag":q=ni(H||P,_),G=l;break}ne.call(T,M,new v0(T,{sourceEvent:P,subject:B,target:y,identifier:X,active:G,x:q[0]+Q,y:q[1]+Z,dx:q[0]-z[0],dy:q[1]-z[1],dispatch:ne}),R)}}return y.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Rf(!!M),y):t},y.container=function(M){return arguments.length?(e=typeof M=="function"?M:Rf(M),y):e},y.subject=function(M){return arguments.length?(n=typeof M=="function"?M:Rf(M),y):n},y.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:Rf(!!M),y):i},y.on=function(){var M=o.on.apply(o,arguments);return M===o?y:M},y.clickDistance=function(M){return arguments.length?(g=(M=+M)*M,y):Math.sqrt(g)},y}function qy(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ik(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Gc(){}var yc=.7,Mh=1/yc,xl="\\s*([+-]?\\d+)\\s*",xc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dR=/^#([0-9a-f]{3,8})$/,pR=new RegExp(`^rgb\\(${xl},${xl},${xl}\\)$`),gR=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),mR=new RegExp(`^rgba\\(${xl},${xl},${xl},${xc}\\)$`),yR=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${xc}\\)$`),xR=new RegExp(`^hsl\\(${xc},${Ni},${Ni}\\)$`),vR=new RegExp(`^hsla\\(${xc},${Ni},${Ni},${xc}\\)$`),YS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qy(Gc,so,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:XS,formatHex:XS,formatHex8:bR,formatHsl:SR,formatRgb:FS,toString:FS});function XS(){return this.rgb().formatHex()}function bR(){return this.rgb().formatHex8()}function SR(){return Vk(this).formatHsl()}function FS(){return this.rgb().formatRgb()}function so(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=dR.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?GS(e):n===3?new yn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pR.exec(t))?new yn(e[1],e[2],e[3],1):(e=gR.exec(t))?new yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mR.exec(t))?Lf(e[1],e[2],e[3],e[4]):(e=yR.exec(t))?Lf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xR.exec(t))?ZS(e[1],e[2]/100,e[3]/100,1):(e=vR.exec(t))?ZS(e[1],e[2]/100,e[3]/100,e[4]):YS.hasOwnProperty(t)?GS(YS[t]):t==="transparent"?new yn(NaN,NaN,NaN,0):null}function GS(t){return new yn(t>>16&255,t>>8&255,t&255,1)}function Lf(t,e,n,i){return i<=0&&(t=e=n=NaN),new yn(t,e,n,i)}function wR(t){return t instanceof Gc||(t=so(t)),t?(t=t.rgb(),new yn(t.r,t.g,t.b,t.opacity)):new yn}function b0(t,e,n,i){return arguments.length===1?wR(t):new yn(t,e,n,i??1)}function yn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}qy(yn,b0,Ik(Gc,{brighter(t){return t=t==null?Mh:Math.pow(Mh,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yc:Math.pow(yc,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yn(Zr(this.r),Zr(this.g),Zr(this.b),Nh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:WS,formatHex:WS,formatHex8:CR,formatRgb:KS,toString:KS}));function WS(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}`}function CR(){return`#${Xr(this.r)}${Xr(this.g)}${Xr(this.b)}${Xr((isNaN(this.opacity)?1:this.opacity)*255)}`}function KS(){const t=Nh(this.opacity);return`${t===1?"rgb(":"rgba("}${Zr(this.r)}, ${Zr(this.g)}, ${Zr(this.b)}${t===1?")":`, ${t})`}`}function Nh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Zr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xr(t){return t=Zr(t),(t<16?"0":"")+t.toString(16)}function ZS(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ii(t,e,n,i)}function Vk(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);if(t instanceof Gc||(t=so(t)),!t)return new ii;if(t instanceof ii)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,s=Math.min(e,n,i),o=Math.max(e,n,i),l=NaN,c=o-s,f=(o+s)/2;return c?(e===o?l=(n-i)/c+(n<i)*6:n===o?l=(i-e)/c+2:l=(e-n)/c+4,c/=f<.5?o+s:2-o-s,l*=60):c=f>0&&f<1?0:l,new ii(l,c,f,t.opacity)}function kR(t,e,n,i){return arguments.length===1?Vk(t):new ii(t,e,n,i??1)}function ii(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}qy(ii,kR,Ik(Gc,{brighter(t){return t=t==null?Mh:Math.pow(Mh,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yc:Math.pow(yc,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,s=2*n-i;return new yn(Sm(t>=240?t-240:t+120,s,i),Sm(t,s,i),Sm(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new ii(JS(this.h),_f(this.s),_f(this.l),Nh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nh(this.opacity);return`${t===1?"hsl(":"hsla("}${JS(this.h)}, ${_f(this.s)*100}%, ${_f(this.l)*100}%${t===1?")":`, ${t})`}`}}));function JS(t){return t=(t||0)%360,t<0?t+360:t}function _f(t){return Math.max(0,Math.min(1,t||0))}function Sm(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Qy=t=>()=>t;function AR(t,e){return function(n){return t+n*e}}function OR(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function ER(t){return(t=+t)==1?$k:function(e,n){return n-e?OR(e,n,t):Qy(isNaN(e)?n:e)}}function $k(t,e){var n=e-t;return n?AR(t,n):Qy(isNaN(t)?e:t)}const Th=(function t(e){var n=ER(e);function i(s,o){var l=n((s=b0(s)).r,(o=b0(o)).r),c=n(s.g,o.g),f=n(s.b,o.b),h=$k(s.opacity,o.opacity);return function(p){return s.r=l(p),s.g=c(p),s.b=f(p),s.opacity=h(p),s+""}}return i.gamma=t,i})(1);function MR(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),s;return function(o){for(s=0;s<n;++s)i[s]=t[s]*(1-o)+e[s]*o;return i}}function NR(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function TR(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,s=new Array(i),o=new Array(n),l;for(l=0;l<i;++l)s[l]=sc(t[l],e[l]);for(;l<n;++l)o[l]=e[l];return function(c){for(l=0;l<i;++l)o[l]=s[l](c);return o}}function DR(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ci(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function RR(t,e){var n={},i={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=sc(t[s],e[s]):i[s]=e[s];return function(o){for(s in n)i[s]=n[s](o);return i}}var S0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wm=new RegExp(S0.source,"g");function LR(t){return function(){return t}}function _R(t){return function(e){return t(e)+""}}function Uk(t,e){var n=S0.lastIndex=wm.lastIndex=0,i,s,o,l=-1,c=[],f=[];for(t=t+"",e=e+"";(i=S0.exec(t))&&(s=wm.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[l]?c[l]+=o:c[++l]=o),(i=i[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:Ci(i,s)})),n=wm.lastIndex;return n<e.length&&(o=e.slice(n),c[l]?c[l]+=o:c[++l]=o),c.length<2?f[0]?_R(f[0].x):LR(e):(e=f.length,function(h){for(var p=0,g;p<e;++p)c[(g=f[p]).i]=g.x(h);return c.join("")})}function sc(t,e){var n=typeof e,i;return e==null||n==="boolean"?Qy(e):(n==="number"?Ci:n==="string"?(i=so(e))?(e=i,Th):Uk:e instanceof so?Th:e instanceof Date?DR:NR(e)?MR:Array.isArray(e)?TR:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?RR:Ci)(t,e)}var ew=180/Math.PI,w0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qk(t,e,n,i,s,o){var l,c,f;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,f/=c),t*i<e*n&&(t=-t,e=-e,f=-f,l=-l),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*ew,skewX:Math.atan(f)*ew,scaleX:l,scaleY:c}}var Bf;function BR(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?w0:qk(e.a,e.b,e.c,e.d,e.e,e.f)}function zR(t){return t==null||(Bf||(Bf=document.createElementNS("http://www.w3.org/2000/svg","g")),Bf.setAttribute("transform",t),!(t=Bf.transform.baseVal.consolidate()))?w0:(t=t.matrix,qk(t.a,t.b,t.c,t.d,t.e,t.f))}function Qk(t,e,n,i){function s(h){return h.length?h.pop()+" ":""}function o(h,p,g,y,v,b){if(h!==g||p!==y){var S=v.push("translate(",null,e,null,n);b.push({i:S-4,x:Ci(h,g)},{i:S-2,x:Ci(p,y)})}else(g||y)&&v.push("translate("+g+e+y+n)}function l(h,p,g,y){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),y.push({i:g.push(s(g)+"rotate(",null,i)-2,x:Ci(h,p)})):p&&g.push(s(g)+"rotate("+p+i)}function c(h,p,g,y){h!==p?y.push({i:g.push(s(g)+"skewX(",null,i)-2,x:Ci(h,p)}):p&&g.push(s(g)+"skewX("+p+i)}function f(h,p,g,y,v,b){if(h!==g||p!==y){var S=v.push(s(v)+"scale(",null,",",null,")");b.push({i:S-4,x:Ci(h,g)},{i:S-2,x:Ci(p,y)})}else(g!==1||y!==1)&&v.push(s(v)+"scale("+g+","+y+")")}return function(h,p){var g=[],y=[];return h=t(h),p=t(p),o(h.translateX,h.translateY,p.translateX,p.translateY,g,y),l(h.rotate,p.rotate,g,y),c(h.skewX,p.skewX,g,y),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,g,y),h=p=null,function(v){for(var b=-1,S=y.length,k;++b<S;)g[(k=y[b]).i]=k.x(v);return g.join("")}}}var PR=Qk(BR,"px, ","px)","deg)"),jR=Qk(zR,", ",")",")"),HR=1e-12;function tw(t){return((t=Math.exp(t))+1/t)/2}function IR(t){return((t=Math.exp(t))-1/t)/2}function VR(t){return((t=Math.exp(2*t))-1)/(t+1)}const dh=(function t(e,n,i){function s(o,l){var c=o[0],f=o[1],h=o[2],p=l[0],g=l[1],y=l[2],v=p-c,b=g-f,S=v*v+b*b,k,A;if(S<HR)A=Math.log(y/h)/e,k=function(R){return[c+R*v,f+R*b,h*Math.exp(e*R*A)]};else{var N=Math.sqrt(S),O=(y*y-h*h+i*S)/(2*h*n*N),M=(y*y-h*h-i*S)/(2*y*n*N),_=Math.log(Math.sqrt(O*O+1)-O),L=Math.log(Math.sqrt(M*M+1)-M);A=(L-_)/e,k=function(R){var X=R*A,$=tw(_),ne=h/(n*N)*($*VR(e*X+_)-IR(_));return[c+ne*v,f+ne*b,h*$/tw(e*X+_)]}}return k.duration=A*1e3*e/Math.SQRT2,k}return s.rho=function(o){var l=Math.max(.001,+o),c=l*l,f=c*c;return t(l,c,f)},s})(Math.SQRT2,2,4);var Ml=0,Ka=0,qa=0,Yk=1e3,Dh,Za,Rh=0,ro=0,Cd=0,vc=typeof performance=="object"&&performance.now?performance:Date,Xk=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yy(){return ro||(Xk($R),ro=vc.now()+Cd)}function $R(){ro=0}function Lh(){this._call=this._time=this._next=null}Lh.prototype=Fk.prototype={constructor:Lh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Yy():+n)+(e==null?0:+e),!this._next&&Za!==this&&(Za?Za._next=this:Dh=this,Za=this),this._call=t,this._time=n,C0()},stop:function(){this._call&&(this._call=null,this._time=1/0,C0())}};function Fk(t,e,n){var i=new Lh;return i.restart(t,e,n),i}function UR(){Yy(),++Ml;for(var t=Dh,e;t;)(e=ro-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ml}function nw(){ro=(Rh=vc.now())+Cd,Ml=Ka=0;try{UR()}finally{Ml=0,QR(),ro=0}}function qR(){var t=vc.now(),e=t-Rh;e>Yk&&(Cd-=e,Rh=t)}function QR(){for(var t,e=Dh,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Dh=n);Za=t,C0(i)}function C0(t){if(!Ml){Ka&&(Ka=clearTimeout(Ka));var e=t-ro;e>24?(t<1/0&&(Ka=setTimeout(nw,t-vc.now()-Cd)),qa&&(qa=clearInterval(qa))):(qa||(Rh=vc.now(),qa=setInterval(qR,Yk)),Ml=1,Xk(nw))}}function iw(t,e,n){var i=new Lh;return e=e==null?0:+e,i.restart(s=>{i.stop(),t(s+e)},e,n),i}var YR=Sd("start","end","cancel","interrupt"),XR=[],Gk=0,sw=1,k0=2,ph=3,rw=4,A0=5,gh=6;function kd(t,e,n,i,s,o){var l=t.__transition;if(!l)t.__transition={};else if(n in l)return;FR(t,n,{name:e,index:i,group:s,on:YR,tween:XR,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Gk})}function Xy(t,e){var n=ui(t,e);if(n.state>Gk)throw new Error("too late; already scheduled");return n}function Li(t,e){var n=ui(t,e);if(n.state>ph)throw new Error("too late; already running");return n}function ui(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function FR(t,e,n){var i=t.__transition,s;i[e]=n,n.timer=Fk(o,0,n.time);function o(h){n.state=sw,n.timer.restart(l,n.delay,n.time),n.delay<=h&&l(h-n.delay)}function l(h){var p,g,y,v;if(n.state!==sw)return f();for(p in i)if(v=i[p],v.name===n.name){if(v.state===ph)return iw(l);v.state===rw?(v.state=gh,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete i[p]):+p<e&&(v.state=gh,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete i[p])}if(iw(function(){n.state===ph&&(n.state=rw,n.timer.restart(c,n.delay,n.time),c(h))}),n.state=k0,n.on.call("start",t,t.__data__,n.index,n.group),n.state===k0){for(n.state=ph,s=new Array(y=n.tween.length),p=0,g=-1;p<y;++p)(v=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(s[++g]=v);s.length=g+1}}function c(h){for(var p=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(f),n.state=A0,1),g=-1,y=s.length;++g<y;)s[g].call(t,p);n.state===A0&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=gh,n.timer.stop(),delete i[e];for(var h in i)return;delete t.__transition}}function mh(t,e){var n=t.__transition,i,s,o=!0,l;if(n){e=e==null?null:e+"";for(l in n){if((i=n[l]).name!==e){o=!1;continue}s=i.state>k0&&i.state<A0,i.state=gh,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[l]}o&&delete t.__transition}}function GR(t){return this.each(function(){mh(this,t)})}function WR(t,e){var n,i;return function(){var s=Li(this,t),o=s.tween;if(o!==n){i=n=o;for(var l=0,c=i.length;l<c;++l)if(i[l].name===e){i=i.slice(),i.splice(l,1);break}}s.tween=i}}function KR(t,e,n){var i,s;if(typeof n!="function")throw new Error;return function(){var o=Li(this,t),l=o.tween;if(l!==i){s=(i=l).slice();for(var c={name:e,value:n},f=0,h=s.length;f<h;++f)if(s[f].name===e){s[f]=c;break}f===h&&s.push(c)}o.tween=s}}function ZR(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ui(this.node(),n).tween,s=0,o=i.length,l;s<o;++s)if((l=i[s]).name===t)return l.value;return null}return this.each((e==null?WR:KR)(n,t,e))}function Fy(t,e,n){var i=t._id;return t.each(function(){var s=Li(this,i);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return ui(s,i).value[e]}}function Wk(t,e){var n;return(typeof e=="number"?Ci:e instanceof so?Th:(n=so(e))?(e=n,Th):Uk)(t,e)}function JR(t){return function(){this.removeAttribute(t)}}function e4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function t4(t,e,n){var i,s=n+"",o;return function(){var l=this.getAttribute(t);return l===s?null:l===i?o:o=e(i=l,n)}}function n4(t,e,n){var i,s=n+"",o;return function(){var l=this.getAttributeNS(t.space,t.local);return l===s?null:l===i?o:o=e(i=l,n)}}function i4(t,e,n){var i,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),f=c+"",l===f?null:l===i&&f===s?o:(s=f,o=e(i=l,c)))}}function s4(t,e,n){var i,s,o;return function(){var l,c=n(this),f;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),f=c+"",l===f?null:l===i&&f===s?o:(s=f,o=e(i=l,c)))}}function r4(t,e){var n=wd(t),i=n==="transform"?jR:Wk;return this.attrTween(t,typeof e=="function"?(n.local?s4:i4)(n,i,Fy(this,"attr."+t,e)):e==null?(n.local?e4:JR)(n):(n.local?n4:t4)(n,i,e))}function o4(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function l4(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function a4(t,e){var n,i;function s(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&l4(t,o)),n}return s._value=e,s}function c4(t,e){var n,i;function s(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&o4(t,o)),n}return s._value=e,s}function u4(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=wd(t);return this.tween(n,(i.local?a4:c4)(i,e))}function f4(t,e){return function(){Xy(this,t).delay=+e.apply(this,arguments)}}function h4(t,e){return e=+e,function(){Xy(this,t).delay=e}}function d4(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?f4:h4)(e,t)):ui(this.node(),e).delay}function p4(t,e){return function(){Li(this,t).duration=+e.apply(this,arguments)}}function g4(t,e){return e=+e,function(){Li(this,t).duration=e}}function m4(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?p4:g4)(e,t)):ui(this.node(),e).duration}function y4(t,e){if(typeof e!="function")throw new Error;return function(){Li(this,t).ease=e}}function x4(t){var e=this._id;return arguments.length?this.each(y4(e,t)):ui(this.node(),e).ease}function v4(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Li(this,t).ease=n}}function b4(t){if(typeof t!="function")throw new Error;return this.each(v4(this._id,t))}function S4(t){typeof t!="function"&&(t=Ek(t));for(var e=this._groups,n=e.length,i=new Array(n),s=0;s<n;++s)for(var o=e[s],l=o.length,c=i[s]=[],f,h=0;h<l;++h)(f=o[h])&&t.call(f,f.__data__,h,o)&&c.push(f);return new ds(i,this._parents,this._name,this._id)}function w4(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,s=n.length,o=Math.min(i,s),l=new Array(i),c=0;c<o;++c)for(var f=e[c],h=n[c],p=f.length,g=l[c]=new Array(p),y,v=0;v<p;++v)(y=f[v]||h[v])&&(g[v]=y);for(;c<i;++c)l[c]=e[c];return new ds(l,this._parents,this._name,this._id)}function C4(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function k4(t,e,n){var i,s,o=C4(e)?Xy:Li;return function(){var l=o(this,t),c=l.on;c!==i&&(s=(i=c).copy()).on(e,n),l.on=s}}function A4(t,e){var n=this._id;return arguments.length<2?ui(this.node(),n).on.on(t):this.each(k4(n,t,e))}function O4(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function E4(){return this.on("end.remove",O4(this._id))}function M4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$y(t));for(var i=this._groups,s=i.length,o=new Array(s),l=0;l<s;++l)for(var c=i[l],f=c.length,h=o[l]=new Array(f),p,g,y=0;y<f;++y)(p=c[y])&&(g=t.call(p,p.__data__,y,c))&&("__data__"in p&&(g.__data__=p.__data__),h[y]=g,kd(h[y],e,n,y,h,ui(p,n)));return new ds(o,this._parents,e,n)}function N4(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ok(t));for(var i=this._groups,s=i.length,o=[],l=[],c=0;c<s;++c)for(var f=i[c],h=f.length,p,g=0;g<h;++g)if(p=f[g]){for(var y=t.call(p,p.__data__,g,f),v,b=ui(p,n),S=0,k=y.length;S<k;++S)(v=y[S])&&kd(v,e,n,S,y,b);o.push(y),l.push(p)}return new ds(o,l,e,n)}var T4=Fc.prototype.constructor;function D4(){return new T4(this._groups,this._parents)}function R4(t,e){var n,i,s;return function(){var o=El(this,t),l=(this.style.removeProperty(t),El(this,t));return o===l?null:o===n&&l===i?s:s=e(n=o,i=l)}}function Kk(t){return function(){this.style.removeProperty(t)}}function L4(t,e,n){var i,s=n+"",o;return function(){var l=El(this,t);return l===s?null:l===i?o:o=e(i=l,n)}}function _4(t,e,n){var i,s,o;return function(){var l=El(this,t),c=n(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(t),El(this,t))),l===f?null:l===i&&f===s?o:(s=f,o=e(i=l,c))}}function B4(t,e){var n,i,s,o="style."+e,l="end."+o,c;return function(){var f=Li(this,t),h=f.on,p=f.value[o]==null?c||(c=Kk(e)):void 0;(h!==n||s!==p)&&(i=(n=h).copy()).on(l,s=p),f.on=i}}function z4(t,e,n){var i=(t+="")=="transform"?PR:Wk;return e==null?this.styleTween(t,R4(t,i)).on("end.style."+t,Kk(t)):typeof e=="function"?this.styleTween(t,_4(t,i,Fy(this,"style."+t,e))).each(B4(this._id,t)):this.styleTween(t,L4(t,i,e),n).on("end.style."+t,null)}function P4(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function j4(t,e,n){var i,s;function o(){var l=e.apply(this,arguments);return l!==s&&(i=(s=l)&&P4(t,l,n)),i}return o._value=e,o}function H4(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,j4(t,e,n??""))}function I4(t){return function(){this.textContent=t}}function V4(t){return function(){var e=t(this);this.textContent=e??""}}function $4(t){return this.tween("text",typeof t=="function"?V4(Fy(this,"text",t)):I4(t==null?"":t+""))}function U4(t){return function(e){this.textContent=t.call(this,e)}}function q4(t){var e,n;function i(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&U4(s)),e}return i._value=t,i}function Q4(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,q4(t))}function Y4(){for(var t=this._name,e=this._id,n=Zk(),i=this._groups,s=i.length,o=0;o<s;++o)for(var l=i[o],c=l.length,f,h=0;h<c;++h)if(f=l[h]){var p=ui(f,e);kd(f,t,n,h,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ds(i,this._parents,t,n)}function X4(){var t,e,n=this,i=n._id,s=n.size();return new Promise(function(o,l){var c={value:l},f={value:function(){--s===0&&o()}};n.each(function(){var h=Li(this,i),p=h.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(f)),h.on=e}),s===0&&o()})}var F4=0;function ds(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Zk(){return++F4}var os=Fc.prototype;ds.prototype={constructor:ds,select:M4,selectAll:N4,selectChild:os.selectChild,selectChildren:os.selectChildren,filter:S4,merge:w4,selection:D4,transition:Y4,call:os.call,nodes:os.nodes,node:os.node,size:os.size,empty:os.empty,each:os.each,on:A4,attr:r4,attrTween:u4,style:z4,styleTween:H4,text:$4,textTween:Q4,remove:E4,tween:ZR,delay:d4,duration:m4,ease:x4,easeVarying:b4,end:X4,[Symbol.iterator]:os[Symbol.iterator]};function G4(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var W4={time:null,delay:0,duration:250,ease:G4};function K4(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Z4(t){var e,n;t instanceof ds?(e=t._id,t=t._name):(e=Zk(),(n=W4).time=Yy(),t=t==null?null:t+"");for(var i=this._groups,s=i.length,o=0;o<s;++o)for(var l=i[o],c=l.length,f,h=0;h<c;++h)(f=l[h])&&kd(f,t,e,h,l,n||K4(f,e));return new ds(i,this._parents,t,e)}Fc.prototype.interrupt=GR;Fc.prototype.transition=Z4;const zf=t=>()=>t;function J4(t,{sourceEvent:e,target:n,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function us(t,e,n){this.k=t,this.x=e,this.y=n}us.prototype={constructor:us,scale:function(t){return t===1?this:new us(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new us(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ad=new us(1,0,0);Jk.prototype=us.prototype;function Jk(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ad;return t.__zoom}function Cm(t){t.stopImmediatePropagation()}function Qa(t){t.preventDefault(),t.stopImmediatePropagation()}function eL(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function tL(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ow(){return this.__zoom||Ad}function nL(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function iL(){return navigator.maxTouchPoints||"ontouchstart"in this}function sL(t,e,n){var i=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],l=t.invertY(e[1][1])-n[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),l>o?(o+l)/2:Math.min(0,o)||Math.max(0,l))}function eA(){var t=eL,e=tL,n=sL,i=nL,s=iL,o=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=dh,h=Sd("start","zoom","end"),p,g,y,v=500,b=150,S=0,k=10;function A(B){B.property("__zoom",ow).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",ne).filter(s).on("touchstart.zoom",q).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}A.transform=function(B,V,T,P){var H=B.selection?B.selection():B;H.property("__zoom",ow),B!==H?_(B,V,T,P):H.interrupt().each(function(){L(this,arguments).event(P).start().zoom(null,typeof V=="function"?V.apply(this,arguments):V).end()})},A.scaleBy=function(B,V,T,P){A.scaleTo(B,function(){var H=this.__zoom.k,z=typeof V=="function"?V.apply(this,arguments):V;return H*z},T,P)},A.scaleTo=function(B,V,T,P){A.transform(B,function(){var H=e.apply(this,arguments),z=this.__zoom,G=T==null?M(H):typeof T=="function"?T.apply(this,arguments):T,D=z.invert(G),j=typeof V=="function"?V.apply(this,arguments):V;return n(O(N(z,j),G,D),H,l)},T,P)},A.translateBy=function(B,V,T,P){A.transform(B,function(){return n(this.__zoom.translate(typeof V=="function"?V.apply(this,arguments):V,typeof T=="function"?T.apply(this,arguments):T),e.apply(this,arguments),l)},null,P)},A.translateTo=function(B,V,T,P,H){A.transform(B,function(){var z=e.apply(this,arguments),G=this.__zoom,D=P==null?M(z):typeof P=="function"?P.apply(this,arguments):P;return n(Ad.translate(D[0],D[1]).scale(G.k).translate(typeof V=="function"?-V.apply(this,arguments):-V,typeof T=="function"?-T.apply(this,arguments):-T),z,l)},P,H)};function N(B,V){return V=Math.max(o[0],Math.min(o[1],V)),V===B.k?B:new us(V,B.x,B.y)}function O(B,V,T){var P=V[0]-T[0]*B.k,H=V[1]-T[1]*B.k;return P===B.x&&H===B.y?B:new us(B.k,P,H)}function M(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function _(B,V,T,P){B.on("start.zoom",function(){L(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(P).end()}).tween("zoom",function(){var H=this,z=arguments,G=L(H,z).event(P),D=e.apply(H,z),j=T==null?M(D):typeof T=="function"?T.apply(H,z):T,ee=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),ie=H.__zoom,ce=typeof V=="function"?V.apply(H,z):V,he=f(ie.invert(j).concat(ee/ie.k),ce.invert(j).concat(ee/ce.k));return function(fe){if(fe===1)fe=ce;else{var ue=he(fe),ge=ee/ue[2];fe=new us(ge,j[0]-ue[0]*ge,j[1]-ue[1]*ge)}G.zoom(null,fe)}})}function L(B,V,T){return!T&&B.__zooming||new R(B,V)}function R(B,V){this.that=B,this.args=V,this.active=0,this.sourceEvent=null,this.extent=e.apply(B,V),this.taps=0}R.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,V){return this.mouse&&B!=="mouse"&&(this.mouse[1]=V.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=V.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=V.invert(this.touch1[0])),this.that.__zoom=V,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var V=Ln(this.that).datum();h.call(B,this.that,new J4(B,{sourceEvent:this.sourceEvent,target:A,transform:this.that.__zoom,dispatch:h}),V)}};function X(B,...V){if(!t.apply(this,arguments))return;var T=L(this,V).event(B),P=this.__zoom,H=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,i.apply(this,arguments)))),z=ni(B);if(T.wheel)(T.mouse[0][0]!==z[0]||T.mouse[0][1]!==z[1])&&(T.mouse[1]=P.invert(T.mouse[0]=z)),clearTimeout(T.wheel);else{if(P.k===H)return;T.mouse=[z,P.invert(z)],mh(this),T.start()}Qa(B),T.wheel=setTimeout(G,b),T.zoom("mouse",n(O(N(P,H),T.mouse[0],T.mouse[1]),T.extent,l));function G(){T.wheel=null,T.end()}}function $(B,...V){if(y||!t.apply(this,arguments))return;var T=B.currentTarget,P=L(this,V,!0).event(B),H=Ln(B.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",ee,!0),z=ni(B,T),G=B.clientX,D=B.clientY;Pk(B.view),Cm(B),P.mouse=[z,this.__zoom.invert(z)],mh(this),P.start();function j(ie){if(Qa(ie),!P.moved){var ce=ie.clientX-G,he=ie.clientY-D;P.moved=ce*ce+he*he>S}P.event(ie).zoom("mouse",n(O(P.that.__zoom,P.mouse[0]=ni(ie,T),P.mouse[1]),P.extent,l))}function ee(ie){H.on("mousemove.zoom mouseup.zoom",null),jk(ie.view,P.moved),Qa(ie),P.event(ie).end()}}function ne(B,...V){if(t.apply(this,arguments)){var T=this.__zoom,P=ni(B.changedTouches?B.changedTouches[0]:B,this),H=T.invert(P),z=T.k*(B.shiftKey?.5:2),G=n(O(N(T,z),P,H),e.apply(this,V),l);Qa(B),c>0?Ln(this).transition().duration(c).call(_,G,P,B):Ln(this).call(A.transform,G,P,B)}}function q(B,...V){if(t.apply(this,arguments)){var T=B.touches,P=T.length,H=L(this,V,B.changedTouches.length===P).event(B),z,G,D,j;for(Cm(B),G=0;G<P;++G)D=T[G],j=ni(D,this),j=[j,this.__zoom.invert(j),D.identifier],H.touch0?!H.touch1&&H.touch0[2]!==j[2]&&(H.touch1=j,H.taps=0):(H.touch0=j,z=!0,H.taps=1+!!p);p&&(p=clearTimeout(p)),z&&(H.taps<2&&(g=j[0],p=setTimeout(function(){p=null},v)),mh(this),H.start())}}function Q(B,...V){if(this.__zooming){var T=L(this,V).event(B),P=B.changedTouches,H=P.length,z,G,D,j;for(Qa(B),z=0;z<H;++z)G=P[z],D=ni(G,this),T.touch0&&T.touch0[2]===G.identifier?T.touch0[0]=D:T.touch1&&T.touch1[2]===G.identifier&&(T.touch1[0]=D);if(G=T.that.__zoom,T.touch1){var ee=T.touch0[0],ie=T.touch0[1],ce=T.touch1[0],he=T.touch1[1],fe=(fe=ce[0]-ee[0])*fe+(fe=ce[1]-ee[1])*fe,ue=(ue=he[0]-ie[0])*ue+(ue=he[1]-ie[1])*ue;G=N(G,Math.sqrt(fe/ue)),D=[(ee[0]+ce[0])/2,(ee[1]+ce[1])/2],j=[(ie[0]+he[0])/2,(ie[1]+he[1])/2]}else if(T.touch0)D=T.touch0[0],j=T.touch0[1];else return;T.zoom("touch",n(O(G,D,j),T.extent,l))}}function Z(B,...V){if(this.__zooming){var T=L(this,V).event(B),P=B.changedTouches,H=P.length,z,G;for(Cm(B),y&&clearTimeout(y),y=setTimeout(function(){y=null},v),z=0;z<H;++z)G=P[z],T.touch0&&T.touch0[2]===G.identifier?delete T.touch0:T.touch1&&T.touch1[2]===G.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(G=ni(G,this),Math.hypot(g[0]-G[0],g[1]-G[1])<k)){var D=Ln(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return A.wheelDelta=function(B){return arguments.length?(i=typeof B=="function"?B:zf(+B),A):i},A.filter=function(B){return arguments.length?(t=typeof B=="function"?B:zf(!!B),A):t},A.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:zf(!!B),A):s},A.extent=function(B){return arguments.length?(e=typeof B=="function"?B:zf([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),A):e},A.scaleExtent=function(B){return arguments.length?(o[0]=+B[0],o[1]=+B[1],A):[o[0],o[1]]},A.translateExtent=function(B){return arguments.length?(l[0][0]=+B[0][0],l[1][0]=+B[1][0],l[0][1]=+B[0][1],l[1][1]=+B[1][1],A):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},A.constrain=function(B){return arguments.length?(n=B,A):n},A.duration=function(B){return arguments.length?(c=+B,A):c},A.interpolate=function(B){return arguments.length?(f=B,A):f},A.on=function(){var B=h.on.apply(h,arguments);return B===h?A:B},A.clickDistance=function(B){return arguments.length?(S=(B=+B)*B,A):Math.sqrt(S)},A.tapDistance=function(B){return arguments.length?(k=+B,A):k},A}const Ri={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},bc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],tA=["Enter"," ","Escape"],nA={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Nl;(function(t){t.Strict="strict",t.Loose="loose"})(Nl||(Nl={}));var Jr;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Jr||(Jr={}));var Sc;(function(t){t.Partial="partial",t.Full="full"})(Sc||(Sc={}));const iA={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Js;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Js||(Js={}));var eo;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(eo||(eo={}));var be;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(be||(be={}));const lw={[be.Left]:be.Right,[be.Right]:be.Left,[be.Top]:be.Bottom,[be.Bottom]:be.Top};function sA(t){return t===null?null:t?"valid":"invalid"}const rA=t=>"id"in t&&"source"in t&&"target"in t,rL=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),Gy=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),Wc=(t,e=[0,0])=>{const{width:n,height:i}=vs(t),s=t.origin??e,o=n*s[0],l=i*s[1];return{x:t.position.x-o,y:t.position.y-l}},oL=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,s)=>{const o=typeof s=="string";let l=!e.nodeLookup&&!o?s:void 0;e.nodeLookup&&(l=o?e.nodeLookup.get(s):Gy(s)?s:e.nodeLookup.get(s.id));const c=l?_h(l,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Od(i,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ed(n)},Kc=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return t.forEach(s=>{(e.filter===void 0||e.filter(s))&&(n=Od(n,_h(s)),i=!0)}),i?Ed(n):{x:0,y:0,width:0,height:0}},Wy=(t,e,[n,i,s]=[0,0,1],o=!1,l=!1)=>{const c={...Jc(e,[n,i,s]),width:e.width/s,height:e.height/s},f=[];for(const h of t.values()){const{measured:p,selectable:g=!0,hidden:y=!1}=h;if(l&&!g||y)continue;const v=p.width??h.width??h.initialWidth??null,b=p.height??h.height??h.initialHeight??null,S=wc(c,Dl(h)),k=(v??0)*(b??0),A=o&&S>0;(!h.internals.handleBounds||A||S>=k||h.dragging)&&f.push(h)}return f},lL=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function aL(t,e){const n=new Map,i=e?.nodes?new Set(e.nodes.map(s=>s.id)):null;return t.forEach(s=>{s.measured.width&&s.measured.height&&(e?.includeHiddenNodes||!s.hidden)&&(!i||i.has(s.id))&&n.set(s.id,s)}),n}async function cL({nodes:t,width:e,height:n,panZoom:i,minZoom:s,maxZoom:o},l){if(t.size===0)return Promise.resolve(!0);const c=aL(t,l),f=Kc(c),h=Ky(f,e,n,l?.minZoom??s,l?.maxZoom??o,l?.padding??.1);return await i.setViewport(h,{duration:l?.duration,ease:l?.ease,interpolate:l?.interpolate}),Promise.resolve(!0)}function oA({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:s,onError:o}){const l=n.get(t),c=l.parentId?n.get(l.parentId):void 0,{x:f,y:h}=c?c.internals.positionAbsolute:{x:0,y:0},p=l.origin??i;let g=l.extent||s;if(l.extent==="parent"&&!l.expandParent)if(!c)o?.("005",Ri.error005());else{const v=c.measured.width,b=c.measured.height;v&&b&&(g=[[f,h],[f+v,h+b]])}else c&&Rl(l.extent)&&(g=[[l.extent[0][0]+f,l.extent[0][1]+h],[l.extent[1][0]+f,l.extent[1][1]+h]]);const y=Rl(g)?oo(e,g,l.measured):e;return(l.measured.width===void 0||l.measured.height===void 0)&&o?.("015",Ri.error015()),{position:{x:y.x-f+(l.measured.width??0)*p[0],y:y.y-h+(l.measured.height??0)*p[1]},positionAbsolute:y}}async function uL({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:s}){const o=new Set(t.map(y=>y.id)),l=[];for(const y of n){if(y.deletable===!1)continue;const v=o.has(y.id),b=!v&&y.parentId&&l.find(S=>S.id===y.parentId);(v||b)&&l.push(y)}const c=new Set(e.map(y=>y.id)),f=i.filter(y=>y.deletable!==!1),p=lL(l,f);for(const y of f)c.has(y.id)&&!p.find(b=>b.id===y.id)&&p.push(y);if(!s)return{edges:p,nodes:l};const g=await s({nodes:l,edges:p});return typeof g=="boolean"?g?{edges:p,nodes:l}:{edges:[],nodes:[]}:g}const Tl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),oo=(t={x:0,y:0},e,n)=>({x:Tl(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Tl(t.y,e[0][1],e[1][1]-(n?.height??0))});function lA(t,e,n){const{width:i,height:s}=vs(n),{x:o,y:l}=n.internals.positionAbsolute;return oo(t,[[o,l],[o+i,l+s]],e)}const aw=(t,e,n)=>t<e?Tl(Math.abs(t-e),1,e)/e:t>n?-Tl(Math.abs(t-n),1,e)/e:0,aA=(t,e,n=15,i=40)=>{const s=aw(t.x,i,e.width-i)*n,o=aw(t.y,i,e.height-i)*n;return[s,o]},Od=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),O0=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),Ed=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Dl=(t,e=[0,0])=>{const{x:n,y:i}=Gy(t)?t.internals.positionAbsolute:Wc(t,e);return{x:n,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},_h=(t,e=[0,0])=>{const{x:n,y:i}=Gy(t)?t.internals.positionAbsolute:Wc(t,e);return{x:n,y:i,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},cA=(t,e)=>Ed(Od(O0(t),O0(e))),wc=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},cw=t=>ri(t.width)&&ri(t.height)&&ri(t.x)&&ri(t.y),ri=t=>!isNaN(t)&&isFinite(t),fL=(t,e)=>{},Zc=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Jc=({x:t,y:e},[n,i,s],o=!1,l=[1,1])=>{const c={x:(t-n)/s,y:(e-i)/s};return o?Zc(c,l):c},Bh=({x:t,y:e},[n,i,s])=>({x:t*s+n,y:e*s+i});function nl(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function hL(t,e,n){if(typeof t=="string"||typeof t=="number"){const i=nl(t,n),s=nl(t,e);return{top:i,right:s,bottom:i,left:s,x:s*2,y:i*2}}if(typeof t=="object"){const i=nl(t.top??t.y??0,n),s=nl(t.bottom??t.y??0,n),o=nl(t.left??t.x??0,e),l=nl(t.right??t.x??0,e);return{top:i,right:l,bottom:s,left:o,x:o+l,y:i+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function dL(t,e,n,i,s,o){const{x:l,y:c}=Bh(t,[e,n,i]),{x:f,y:h}=Bh({x:t.x+t.width,y:t.y+t.height},[e,n,i]),p=s-f,g=o-h;return{left:Math.floor(l),top:Math.floor(c),right:Math.floor(p),bottom:Math.floor(g)}}const Ky=(t,e,n,i,s,o)=>{const l=hL(o,e,n),c=(e-l.x)/t.width,f=(n-l.y)/t.height,h=Math.min(c,f),p=Tl(h,i,s),g=t.x+t.width/2,y=t.y+t.height/2,v=e/2-g*p,b=n/2-y*p,S=dL(t,v,b,p,e,n),k={left:Math.min(S.left-l.left,0),top:Math.min(S.top-l.top,0),right:Math.min(S.right-l.right,0),bottom:Math.min(S.bottom-l.bottom,0)};return{x:v-k.left+k.right,y:b-k.top+k.bottom,zoom:p}},Cc=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Rl(t){return t!=null&&t!=="parent"}function vs(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function uA(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function fA(t,e={width:0,height:0},n,i,s){const o={...t},l=i.get(n);if(l){const c=l.origin||s;o.x+=l.internals.positionAbsolute.x-(e.width??0)*c[0],o.y+=l.internals.positionAbsolute.y-(e.height??0)*c[1]}return o}function uw(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function pL(){let t,e;return{promise:new Promise((i,s)=>{t=i,e=s}),resolve:t,reject:e}}function gL(t){return{...nA,...t||{}}}function rc(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i,containerBounds:s}){const{x:o,y:l}=oi(t),c=Jc({x:o-(s?.left??0),y:l-(s?.top??0)},i),{x:f,y:h}=n?Zc(c,e):c;return{xSnapped:f,ySnapped:h,...c}}const Zy=t=>({width:t.offsetWidth,height:t.offsetHeight}),hA=t=>t?.getRootNode?.()||window?.document,mL=["INPUT","SELECT","TEXTAREA"];function dA(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:mL.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const pA=t=>"clientX"in t,oi=(t,e)=>{const n=pA(t),i=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:s-(e?.top??0)}},fw=(t,e,n,i,s)=>{const o=e.querySelectorAll(`.${t}`);return!o||!o.length?null:Array.from(o).map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:t,nodeId:s,position:l.getAttribute("data-handlepos"),x:(c.left-n.left)/i,y:(c.top-n.top)/i,...Zy(l)}})};function gA({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:s,sourceControlY:o,targetControlX:l,targetControlY:c}){const f=t*.125+s*.375+l*.375+n*.125,h=e*.125+o*.375+c*.375+i*.125,p=Math.abs(f-t),g=Math.abs(h-e);return[f,h,p,g]}function Pf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function hw({pos:t,x1:e,y1:n,x2:i,y2:s,c:o}){switch(t){case be.Left:return[e-Pf(e-i,o),n];case be.Right:return[e+Pf(i-e,o),n];case be.Top:return[e,n-Pf(n-s,o)];case be.Bottom:return[e,n+Pf(s-n,o)]}}function Jy({sourceX:t,sourceY:e,sourcePosition:n=be.Bottom,targetX:i,targetY:s,targetPosition:o=be.Top,curvature:l=.25}){const[c,f]=hw({pos:n,x1:t,y1:e,x2:i,y2:s,c:l}),[h,p]=hw({pos:o,x1:i,y1:s,x2:t,y2:e,c:l}),[g,y,v,b]=gA({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${t},${e} C${c},${f} ${h},${p} ${i},${s}`,g,y,v,b]}function mA({sourceX:t,sourceY:e,targetX:n,targetY:i}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,l=Math.abs(i-e)/2,c=i<e?i+l:i-l;return[o,c,s,l]}function yL({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:s=!1,zIndexMode:o="basic"}){if(o==="manual")return i;const l=s&&n?i+1e3:i,c=Math.max(t.parentId||s&&t.selected?t.internals.z:0,e.parentId||s&&e.selected?e.internals.z:0);return l+c}function xL({sourceNode:t,targetNode:e,width:n,height:i,transform:s}){const o=Od(_h(t),_h(e));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const l={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:i/s[2]};return wc(l,Ed(o))>0}const vL=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,bL=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),SL=(t,e,n={})=>{if(!t.source||!t.target)return e;const i=n.getEdgeId||vL;let s;return rA(t)?s={...t}:s={...t,id:i(t)},bL(s,e)?e:(s.sourceHandle===null&&delete s.sourceHandle,s.targetHandle===null&&delete s.targetHandle,e.concat(s))};function yA({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[s,o,l,c]=mA({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,s,o,l,c]}const dw={[be.Left]:{x:-1,y:0},[be.Right]:{x:1,y:0},[be.Top]:{x:0,y:-1},[be.Bottom]:{x:0,y:1}},wL=({source:t,sourcePosition:e=be.Bottom,target:n})=>e===be.Left||e===be.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},pw=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function CL({source:t,sourcePosition:e=be.Bottom,target:n,targetPosition:i=be.Top,center:s,offset:o,stepPosition:l}){const c=dw[e],f=dw[i],h={x:t.x+c.x*o,y:t.y+c.y*o},p={x:n.x+f.x*o,y:n.y+f.y*o},g=wL({source:h,sourcePosition:e,target:p}),y=g.x!==0?"x":"y",v=g[y];let b=[],S,k;const A={x:0,y:0},N={x:0,y:0},[,,O,M]=mA({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[y]*f[y]===-1){y==="x"?(S=s.x??h.x+(p.x-h.x)*l,k=s.y??(h.y+p.y)/2):(S=s.x??(h.x+p.x)/2,k=s.y??h.y+(p.y-h.y)*l);const L=[{x:S,y:h.y},{x:S,y:p.y}],R=[{x:h.x,y:k},{x:p.x,y:k}];c[y]===v?b=y==="x"?L:R:b=y==="x"?R:L}else{const L=[{x:h.x,y:p.y}],R=[{x:p.x,y:h.y}];if(y==="x"?b=c.x===v?R:L:b=c.y===v?L:R,e===i){const Q=Math.abs(t[y]-n[y]);if(Q<=o){const Z=Math.min(o-1,o-Q);c[y]===v?A[y]=(h[y]>t[y]?-1:1)*Z:N[y]=(p[y]>n[y]?-1:1)*Z}}if(e!==i){const Q=y==="x"?"y":"x",Z=c[y]===f[Q],B=h[Q]>p[Q],V=h[Q]<p[Q];(c[y]===1&&(!Z&&B||Z&&V)||c[y]!==1&&(!Z&&V||Z&&B))&&(b=y==="x"?L:R)}const X={x:h.x+A.x,y:h.y+A.y},$={x:p.x+N.x,y:p.y+N.y},ne=Math.max(Math.abs(X.x-b[0].x),Math.abs($.x-b[0].x)),q=Math.max(Math.abs(X.y-b[0].y),Math.abs($.y-b[0].y));ne>=q?(S=(X.x+$.x)/2,k=b[0].y):(S=b[0].x,k=(X.y+$.y)/2)}return[[t,{x:h.x+A.x,y:h.y+A.y},...b,{x:p.x+N.x,y:p.y+N.y},n],S,k,O,M]}function kL(t,e,n,i){const s=Math.min(pw(t,e)/2,pw(e,n)/2,i),{x:o,y:l}=e;if(t.x===o&&o===n.x||t.y===l&&l===n.y)return`L${o} ${l}`;if(t.y===l){const h=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+s*h},${l}Q ${o},${l} ${o},${l+s*p}`}const c=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${o},${l+s*f}Q ${o},${l} ${o+s*c},${l}`}function E0({sourceX:t,sourceY:e,sourcePosition:n=be.Bottom,targetX:i,targetY:s,targetPosition:o=be.Top,borderRadius:l=5,centerX:c,centerY:f,offset:h=20,stepPosition:p=.5}){const[g,y,v,b,S]=CL({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:s},targetPosition:o,center:{x:c,y:f},offset:h,stepPosition:p});return[g.reduce((A,N,O)=>{let M="";return O>0&&O<g.length-1?M=kL(g[O-1],N,g[O+1],l):M=`${O===0?"M":"L"}${N.x} ${N.y}`,A+=M,A},""),y,v,b,S]}function gw(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function AL(t){const{sourceNode:e,targetNode:n}=t;if(!gw(e)||!gw(n))return null;const i=e.internals.handleBounds||mw(e.handles),s=n.internals.handleBounds||mw(n.handles),o=yw(i?.source??[],t.sourceHandle),l=yw(t.connectionMode===Nl.Strict?s?.target??[]:(s?.target??[]).concat(s?.source??[]),t.targetHandle);if(!o||!l)return t.onError?.("008",Ri.error008(o?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const c=o?.position||be.Bottom,f=l?.position||be.Top,h=lo(e,o,c),p=lo(n,l,f);return{sourceX:h.x,sourceY:h.y,targetX:p.x,targetY:p.y,sourcePosition:c,targetPosition:f}}function mw(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function lo(t,e,n=be.Left,i=!1){const s=(e?.x??0)+t.internals.positionAbsolute.x,o=(e?.y??0)+t.internals.positionAbsolute.y,{width:l,height:c}=e??vs(t);if(i)return{x:s+l/2,y:o+c/2};switch(e?.position??n){case be.Top:return{x:s+l/2,y:o};case be.Right:return{x:s+l,y:o+c/2};case be.Bottom:return{x:s+l/2,y:o+c};case be.Left:return{x:s,y:o+c/2}}}function yw(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function M0(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function OL(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:s}){const o=new Set;return t.reduce((l,c)=>([c.markerStart||i,c.markerEnd||s].forEach(f=>{if(f&&typeof f=="object"){const h=M0(f,e);o.has(h)||(l.push({id:h,color:f.color||n,...f}),o.add(h))}}),l),[]).sort((l,c)=>l.id.localeCompare(c.id))}const xA=1e3,EL=10,ex={nodeOrigin:[0,0],nodeExtent:bc,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},ML={...ex,checkEquality:!0};function tx(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function NL(t,e,n){const i=tx(ex,n);for(const s of t.values())if(s.parentId)ix(s,t,e,i);else{const o=Wc(s,i.nodeOrigin),l=Rl(s.extent)?s.extent:i.nodeExtent,c=oo(o,l,vs(s));s.internals.positionAbsolute=c}}function TL(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],i=[];for(const s of t.handles){const o={id:s.id,width:s.width??1,height:s.height??1,nodeId:t.id,x:s.x,y:s.y,position:s.position,type:s.type};s.type==="source"?n.push(o):s.type==="target"&&i.push(o)}return{source:n,target:i}}function nx(t){return t==="manual"}function N0(t,e,n,i={}){const s=tx(ML,i),o={i:0},l=new Map(e),c=s?.elevateNodesOnSelect&&!nx(s.zIndexMode)?xA:0;let f=t.length>0;e.clear(),n.clear();for(const h of t){let p=l.get(h.id);if(s.checkEquality&&h===p?.internals.userNode)e.set(h.id,p);else{const g=Wc(h,s.nodeOrigin),y=Rl(h.extent)?h.extent:s.nodeExtent,v=oo(g,y,vs(h));p={...s.defaults,...h,measured:{width:h.measured?.width,height:h.measured?.height},internals:{positionAbsolute:v,handleBounds:TL(h,p),z:vA(h,c,s.zIndexMode),userNode:h}},e.set(h.id,p)}(p.measured===void 0||p.measured.width===void 0||p.measured.height===void 0)&&!p.hidden&&(f=!1),h.parentId&&ix(p,e,n,i,o)}return f}function DL(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function ix(t,e,n,i,s){const{elevateNodesOnSelect:o,nodeOrigin:l,nodeExtent:c,zIndexMode:f}=tx(ex,i),h=t.parentId,p=e.get(h);if(!p){console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}DL(t,n),s&&!p.parentId&&p.internals.rootParentIndex===void 0&&f==="auto"&&(p.internals.rootParentIndex=++s.i,p.internals.z=p.internals.z+s.i*EL),s&&p.internals.rootParentIndex!==void 0&&(s.i=p.internals.rootParentIndex);const g=o&&!nx(f)?xA:0,{x:y,y:v,z:b}=RL(t,p,l,c,g,f),{positionAbsolute:S}=t.internals,k=y!==S.x||v!==S.y;(k||b!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:k?{x:y,y:v}:S,z:b}})}function vA(t,e,n){const i=ri(t.zIndex)?t.zIndex:0;return nx(n)?i:i+(t.selected?e:0)}function RL(t,e,n,i,s,o){const{x:l,y:c}=e.internals.positionAbsolute,f=vs(t),h=Wc(t,n),p=Rl(t.extent)?oo(h,t.extent,f):h;let g=oo({x:l+p.x,y:c+p.y},i,f);t.extent==="parent"&&(g=lA(g,f,e));const y=vA(t,s,o),v=e.internals.z??0;return{x:g.x,y:g.y,z:v>=y?v+1:y}}function sx(t,e,n,i=[0,0]){const s=[],o=new Map;for(const l of t){const c=e.get(l.parentId);if(!c)continue;const f=o.get(l.parentId)?.expandedRect??Dl(c),h=cA(f,l.rect);o.set(l.parentId,{expandedRect:h,parent:c})}return o.size>0&&o.forEach(({expandedRect:l,parent:c},f)=>{const h=c.internals.positionAbsolute,p=vs(c),g=c.origin??i,y=l.x<h.x?Math.round(Math.abs(h.x-l.x)):0,v=l.y<h.y?Math.round(Math.abs(h.y-l.y)):0,b=Math.max(p.width,Math.round(l.width)),S=Math.max(p.height,Math.round(l.height)),k=(b-p.width)*g[0],A=(S-p.height)*g[1];(y>0||v>0||k||A)&&(s.push({id:f,type:"position",position:{x:c.position.x-y+k,y:c.position.y-v+A}}),n.get(f)?.forEach(N=>{t.some(O=>O.id===N.id)||s.push({id:N.id,type:"position",position:{x:N.position.x+y,y:N.position.y+v}})})),(p.width<l.width||p.height<l.height||y||v)&&s.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:b+(y?g[0]*y-k:0),height:S+(v?g[1]*v-A:0)}})}),s}function LL(t,e,n,i,s,o,l){const c=i?.querySelector(".xyflow__viewport");let f=!1;if(!c)return{changes:[],updatedInternals:f};const h=[],p=window.getComputedStyle(c),{m22:g}=new window.DOMMatrixReadOnly(p.transform),y=[];for(const v of t.values()){const b=e.get(v.id);if(!b)continue;if(b.hidden){e.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),f=!0;continue}const S=Zy(v.nodeElement),k=b.measured.width!==S.width||b.measured.height!==S.height;if(!!(S.width&&S.height&&(k||!b.internals.handleBounds||v.force))){const N=v.nodeElement.getBoundingClientRect(),O=Rl(b.extent)?b.extent:o;let{positionAbsolute:M}=b.internals;b.parentId&&b.extent==="parent"?M=lA(M,S,e.get(b.parentId)):O&&(M=oo(M,O,S));const _={...b,measured:S,internals:{...b.internals,positionAbsolute:M,handleBounds:{source:fw("source",v.nodeElement,N,g,b.id),target:fw("target",v.nodeElement,N,g,b.id)}}};e.set(b.id,_),b.parentId&&ix(_,e,n,{nodeOrigin:s,zIndexMode:l}),f=!0,k&&(h.push({id:b.id,type:"dimensions",dimensions:S}),b.expandParent&&b.parentId&&y.push({id:b.id,parentId:b.parentId,rect:Dl(_,s)}))}}if(y.length>0){const v=sx(y,e,n,s);h.push(...v)}return{changes:h,updatedInternals:f}}async function _L({delta:t,panZoom:e,transform:n,translateExtent:i,width:s,height:o}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const l=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[s,o]],i),c=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(c)}function xw(t,e,n,i,s,o){let l=s;const c=i.get(l)||new Map;i.set(l,c.set(n,e)),l=`${s}-${t}`;const f=i.get(l)||new Map;if(i.set(l,f.set(n,e)),o){l=`${s}-${t}-${o}`;const h=i.get(l)||new Map;i.set(l,h.set(n,e))}}function bA(t,e,n){t.clear(),e.clear();for(const i of n){const{source:s,target:o,sourceHandle:l=null,targetHandle:c=null}=i,f={edgeId:i.id,source:s,target:o,sourceHandle:l,targetHandle:c},h=`${s}-${l}--${o}-${c}`,p=`${o}-${c}--${s}-${l}`;xw("source",f,p,t,s,l),xw("target",f,h,t,o,c),e.set(i.id,i)}}function SA(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:SA(n,e):!1}function vw(t,e,n){let i=t;do{if(i?.matches?.(e))return!0;if(i===n)return!1;i=i?.parentElement}while(i);return!1}function BL(t,e,n,i){const s=new Map;for(const[o,l]of t)if((l.selected||l.id===i)&&(!l.parentId||!SA(l,t))&&(l.draggable||e&&typeof l.draggable>"u")){const c=t.get(o);c&&s.set(o,{id:o,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return s}function km({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){const s=[];for(const[l,c]of e){const f=n.get(l)?.internals.userNode;f&&s.push({...f,position:c.position,dragging:i})}if(!t)return[s[0],s];const o=n.get(t)?.internals.userNode;return[o?{...o,position:e.get(t)?.position||o.position,dragging:i}:s[0],s]}function zL({dragItems:t,snapGrid:e,x:n,y:i}){const s=t.values().next().value;if(!s)return null;const o={x:n-s.distance.x,y:i-s.distance.y},l=Zc(o,e);return{x:l.x-o.x,y:l.y-o.y}}function PL({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:s}){let o={x:null,y:null},l=0,c=new Map,f=!1,h={x:0,y:0},p=null,g=!1,y=null,v=!1,b=!1,S=null;function k({noDragClassName:N,handleSelector:O,domNode:M,isSelectable:_,nodeId:L,nodeClickDistance:R=0}){y=Ln(M);function X({x:Q,y:Z}){const{nodeLookup:B,nodeExtent:V,snapGrid:T,snapToGrid:P,nodeOrigin:H,onNodeDrag:z,onSelectionDrag:G,onError:D,updateNodePositions:j}=e();o={x:Q,y:Z};let ee=!1;const ie=c.size>1,ce=ie&&V?O0(Kc(c)):null,he=ie&&P?zL({dragItems:c,snapGrid:T,x:Q,y:Z}):null;for(const[fe,ue]of c){if(!B.has(fe))continue;let ge={x:Q-ue.distance.x,y:Z-ue.distance.y};P&&(ge=he?{x:Math.round(ge.x+he.x),y:Math.round(ge.y+he.y)}:Zc(ge,T));let De=null;if(ie&&V&&!ue.extent&&ce){const{positionAbsolute:Oe}=ue.internals,Pe=Oe.x-ce.x+V[0][0],We=Oe.x+ue.measured.width-ce.x2+V[1][0],Xe=Oe.y-ce.y+V[0][1],Lt=Oe.y+ue.measured.height-ce.y2+V[1][1];De=[[Pe,Xe],[We,Lt]]}const{position:Ne,positionAbsolute:ke}=oA({nodeId:fe,nextPosition:ge,nodeLookup:B,nodeExtent:De||V,nodeOrigin:H,onError:D});ee=ee||ue.position.x!==Ne.x||ue.position.y!==Ne.y,ue.position=Ne,ue.internals.positionAbsolute=ke}if(b=b||ee,!!ee&&(j(c,!0),S&&(i||z||!L&&G))){const[fe,ue]=km({nodeId:L,dragItems:c,nodeLookup:B});i?.(S,c,fe,ue),z?.(S,fe,ue),L||G?.(S,ue)}}async function $(){if(!p)return;const{transform:Q,panBy:Z,autoPanSpeed:B,autoPanOnNodeDrag:V}=e();if(!V){f=!1,cancelAnimationFrame(l);return}const[T,P]=aA(h,p,B);(T!==0||P!==0)&&(o.x=(o.x??0)-T/Q[2],o.y=(o.y??0)-P/Q[2],await Z({x:T,y:P})&&X(o)),l=requestAnimationFrame($)}function ne(Q){const{nodeLookup:Z,multiSelectionActive:B,nodesDraggable:V,transform:T,snapGrid:P,snapToGrid:H,selectNodesOnDrag:z,onNodeDragStart:G,onSelectionDragStart:D,unselectNodesAndEdges:j}=e();g=!0,(!z||!_)&&!B&&L&&(Z.get(L)?.selected||j()),_&&z&&L&&t?.(L);const ee=rc(Q.sourceEvent,{transform:T,snapGrid:P,snapToGrid:H,containerBounds:p});if(o=ee,c=BL(Z,V,ee,L),c.size>0&&(n||G||!L&&D)){const[ie,ce]=km({nodeId:L,dragItems:c,nodeLookup:Z});n?.(Q.sourceEvent,c,ie,ce),G?.(Q.sourceEvent,ie,ce),L||D?.(Q.sourceEvent,ce)}}const q=Hk().clickDistance(R).on("start",Q=>{const{domNode:Z,nodeDragThreshold:B,transform:V,snapGrid:T,snapToGrid:P}=e();p=Z?.getBoundingClientRect()||null,v=!1,b=!1,S=Q.sourceEvent,B===0&&ne(Q),o=rc(Q.sourceEvent,{transform:V,snapGrid:T,snapToGrid:P,containerBounds:p}),h=oi(Q.sourceEvent,p)}).on("drag",Q=>{const{autoPanOnNodeDrag:Z,transform:B,snapGrid:V,snapToGrid:T,nodeDragThreshold:P,nodeLookup:H}=e(),z=rc(Q.sourceEvent,{transform:B,snapGrid:V,snapToGrid:T,containerBounds:p});if(S=Q.sourceEvent,(Q.sourceEvent.type==="touchmove"&&Q.sourceEvent.touches.length>1||L&&!H.has(L))&&(v=!0),!v){if(!f&&Z&&g&&(f=!0,$()),!g){const G=oi(Q.sourceEvent,p),D=G.x-h.x,j=G.y-h.y;Math.sqrt(D*D+j*j)>P&&ne(Q)}(o.x!==z.xSnapped||o.y!==z.ySnapped)&&c&&g&&(h=oi(Q.sourceEvent,p),X(z))}}).on("end",Q=>{if(!(!g||v)&&(f=!1,g=!1,cancelAnimationFrame(l),c.size>0)){const{nodeLookup:Z,updateNodePositions:B,onNodeDragStop:V,onSelectionDragStop:T}=e();if(b&&(B(c,!1),b=!1),s||V||!L&&T){const[P,H]=km({nodeId:L,dragItems:c,nodeLookup:Z,dragging:!1});s?.(Q.sourceEvent,c,P,H),V?.(Q.sourceEvent,P,H),L||T?.(Q.sourceEvent,H)}}}).filter(Q=>{const Z=Q.target;return!Q.button&&(!N||!vw(Z,`.${N}`,M))&&(!O||vw(Z,O,M))});y.call(q)}function A(){y?.on(".drag",null)}return{update:k,destroy:A}}function jL(t,e,n){const i=[],s={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const o of e.values())wc(s,Dl(o))>0&&i.push(o);return i}const HL=250;function IL(t,e,n,i){let s=[],o=1/0;const l=jL(t,n,e+HL);for(const c of l){const f=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const h of f){if(i.nodeId===h.nodeId&&i.type===h.type&&i.id===h.id)continue;const{x:p,y:g}=lo(c,h,h.position,!0),y=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(g-t.y,2));y>e||(y<o?(s=[{...h,x:p,y:g}],o=y):y===o&&s.push({...h,x:p,y:g}))}}if(!s.length)return null;if(s.length>1){const c=i.type==="source"?"target":"source";return s.find(f=>f.type===c)??s[0]}return s[0]}function wA(t,e,n,i,s,o=!1){const l=i.get(t);if(!l)return null;const c=s==="strict"?l.internals.handleBounds?.[e]:[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]],f=(n?c?.find(h=>h.id===n):c?.[0])??null;return f&&o?{...f,...lo(l,f,f.position,!0)}:f}function CA(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function VL(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const kA=()=>!0;function $L(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:s,edgeUpdaterType:o,isTarget:l,domNode:c,nodeLookup:f,lib:h,autoPanOnConnect:p,flowId:g,panBy:y,cancelConnection:v,onConnectStart:b,onConnect:S,onConnectEnd:k,isValidConnection:A=kA,onReconnectEnd:N,updateConnection:O,getTransform:M,getFromHandle:_,autoPanSpeed:L,dragThreshold:R=1,handleDomNode:X}){const $=hA(t.target);let ne=0,q;const{x:Q,y:Z}=oi(t),B=CA(o,X),V=c?.getBoundingClientRect();let T=!1;if(!V||!B)return;const P=wA(s,B,i,f,e);if(!P)return;let H=oi(t,V),z=!1,G=null,D=!1,j=null;function ee(){if(!p||!V)return;const[Ne,ke]=aA(H,V,L);y({x:Ne,y:ke}),ne=requestAnimationFrame(ee)}const ie={...P,nodeId:s,type:B,position:P.position},ce=f.get(s);let fe={inProgress:!0,isValid:null,from:lo(ce,ie,be.Left,!0),fromHandle:ie,fromPosition:ie.position,fromNode:ce,to:H,toHandle:null,toPosition:lw[ie.position],toNode:null,pointer:H};function ue(){T=!0,O(fe),b?.(t,{nodeId:s,handleId:i,handleType:B})}R===0&&ue();function ge(Ne){if(!T){const{x:Lt,y:Wn}=oi(Ne),wn=Lt-Q,Kn=Wn-Z;if(!(wn*wn+Kn*Kn>R*R))return;ue()}if(!_()||!ie){De(Ne);return}const ke=M();H=oi(Ne,V),q=IL(Jc(H,ke,!1,[1,1]),n,f,ie),z||(ee(),z=!0);const Oe=AA(Ne,{handle:q,connectionMode:e,fromNodeId:s,fromHandleId:i,fromType:l?"target":"source",isValidConnection:A,doc:$,lib:h,flowId:g,nodeLookup:f});j=Oe.handleDomNode,G=Oe.connection,D=VL(!!q,Oe.isValid);const Pe=f.get(s),We=Pe?lo(Pe,ie,be.Left,!0):fe.from,Xe={...fe,from:We,isValid:D,to:Oe.toHandle&&D?Bh({x:Oe.toHandle.x,y:Oe.toHandle.y},ke):H,toHandle:Oe.toHandle,toPosition:D&&Oe.toHandle?Oe.toHandle.position:lw[ie.position],toNode:Oe.toHandle?f.get(Oe.toHandle.nodeId):null,pointer:H};O(Xe),fe=Xe}function De(Ne){if(!("touches"in Ne&&Ne.touches.length>0)){if(T){(q||j)&&G&&D&&S?.(G);const{inProgress:ke,...Oe}=fe,Pe={...Oe,toPosition:fe.toHandle?fe.toPosition:null};k?.(Ne,Pe),o&&N?.(Ne,Pe)}v(),cancelAnimationFrame(ne),z=!1,D=!1,G=null,j=null,$.removeEventListener("mousemove",ge),$.removeEventListener("mouseup",De),$.removeEventListener("touchmove",ge),$.removeEventListener("touchend",De)}}$.addEventListener("mousemove",ge),$.addEventListener("mouseup",De),$.addEventListener("touchmove",ge),$.addEventListener("touchend",De)}function AA(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:s,fromType:o,doc:l,lib:c,flowId:f,isValidConnection:h=kA,nodeLookup:p}){const g=o==="target",y=e?l.querySelector(`.${c}-flow__handle[data-id="${f}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:v,y:b}=oi(t),S=l.elementFromPoint(v,b),k=S?.classList.contains(`${c}-flow__handle`)?S:y,A={handleDomNode:k,isValid:!1,connection:null,toHandle:null};if(k){const N=CA(void 0,k),O=k.getAttribute("data-nodeid"),M=k.getAttribute("data-handleid"),_=k.classList.contains("connectable"),L=k.classList.contains("connectableend");if(!O||!N)return A;const R={source:g?O:i,sourceHandle:g?M:s,target:g?i:O,targetHandle:g?s:M};A.connection=R;const $=_&&L&&(n===Nl.Strict?g&&N==="source"||!g&&N==="target":O!==i||M!==s);A.isValid=$&&h(R),A.toHandle=wA(O,N,M,p,n,!0)}return A}const T0={onPointerDown:$L,isValid:AA};function UL({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const s=Ln(t);function o({translateExtent:c,width:f,height:h,zoomStep:p=1,pannable:g=!0,zoomable:y=!0,inversePan:v=!1}){const b=O=>{if(O.sourceEvent.type!=="wheel"||!e)return;const M=n(),_=O.sourceEvent.ctrlKey&&Cc()?10:1,L=-O.sourceEvent.deltaY*(O.sourceEvent.deltaMode===1?.05:O.sourceEvent.deltaMode?1:.002)*p,R=M[2]*Math.pow(2,L*_);e.scaleTo(R)};let S=[0,0];const k=O=>{(O.sourceEvent.type==="mousedown"||O.sourceEvent.type==="touchstart")&&(S=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY])},A=O=>{const M=n();if(O.sourceEvent.type!=="mousemove"&&O.sourceEvent.type!=="touchmove"||!e)return;const _=[O.sourceEvent.clientX??O.sourceEvent.touches[0].clientX,O.sourceEvent.clientY??O.sourceEvent.touches[0].clientY],L=[_[0]-S[0],_[1]-S[1]];S=_;const R=i()*Math.max(M[2],Math.log(M[2]))*(v?-1:1),X={x:M[0]-L[0]*R,y:M[1]-L[1]*R},$=[[0,0],[f,h]];e.setViewportConstrained({x:X.x,y:X.y,zoom:M[2]},$,c)},N=eA().on("start",k).on("zoom",g?A:null).on("zoom.wheel",y?b:null);s.call(N,{})}function l(){s.on("zoom",null)}return{update:o,destroy:l,pointer:ni}}const Md=t=>({x:t.x,y:t.y,zoom:t.k}),Am=({x:t,y:e,zoom:n})=>Ad.translate(t,e).scale(n),cl=(t,e)=>t.target.closest(`.${e}`),OA=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),qL=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Om=(t,e=0,n=qL,i=()=>{})=>{const s=typeof e=="number"&&e>0;return s||i(),s?t.transition().duration(e).ease(n).on("end",i):t},EA=t=>{const e=t.ctrlKey&&Cc()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function QL({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:l,onPanZoomStart:c,onPanZoom:f,onPanZoomEnd:h}){return p=>{if(cl(p,e))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const g=n.property("__zoom").k||1;if(p.ctrlKey&&l){const k=ni(p),A=EA(p),N=g*Math.pow(2,A);i.scaleTo(n,N,k,p);return}const y=p.deltaMode===1?20:1;let v=s===Jr.Vertical?0:p.deltaX*y,b=s===Jr.Horizontal?0:p.deltaY*y;!Cc()&&p.shiftKey&&s!==Jr.Vertical&&(v=p.deltaY*y,b=0),i.translateBy(n,-(v/g)*o,-(b/g)*o,{internal:!0});const S=Md(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(f?.(p,S),t.panScrollTimeout=setTimeout(()=>{h?.(p,S),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,c?.(p,S))}}function YL({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,s){const o=i.type==="wheel",l=!e&&o&&!i.ctrlKey,c=cl(i,t);if(i.ctrlKey&&o&&c&&i.preventDefault(),l||c)return null;i.preventDefault(),n.call(this,i,s)}}function XL({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{if(i.sourceEvent?.internal)return;const s=Md(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=s,i.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(i.sourceEvent,s)}}function FL({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:s}){return o=>{t.usedRightMouseButton=!!(n&&OA(e,t.mouseButton??0)),o.sourceEvent?.sync||i([o.transform.x,o.transform.y,o.transform.k]),s&&!o.sourceEvent?.internal&&s?.(o.sourceEvent,Md(o.transform))}}function GL({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:s,onPaneContextMenu:o}){return l=>{if(!l.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,o&&OA(e,t.mouseButton??0)&&!t.usedRightMouseButton&&l.sourceEvent&&o(l.sourceEvent),t.usedRightMouseButton=!1,i(!1),s)){const c=Md(l.transform);t.prevViewport=c,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{s?.(l.sourceEvent,c)},n?150:0)}}}function WL({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:l,noWheelClassName:c,noPanClassName:f,lib:h,connectionInProgress:p}){return g=>{const y=t||e,v=n&&g.ctrlKey,b=g.type==="wheel";if(g.button===1&&g.type==="mousedown"&&(cl(g,`${h}-flow__node`)||cl(g,`${h}-flow__edge`)))return!0;if(!i&&!y&&!s&&!o&&!n||l||p&&!b||cl(g,c)&&b||cl(g,f)&&(!b||s&&b&&!t)||!n&&g.ctrlKey&&b)return!1;if(!n&&g.type==="touchstart"&&g.touches?.length>1)return g.preventDefault(),!1;if(!y&&!s&&!v&&b||!i&&(g.type==="mousedown"||g.type==="touchstart")||Array.isArray(i)&&!i.includes(g.button)&&g.type==="mousedown")return!1;const S=Array.isArray(i)&&i.includes(g.button)||!g.button||g.button<=1;return(!g.ctrlKey||b)&&S}}function KL({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),g=eA().scaleExtent([e,n]).translateExtent(i),y=Ln(t).call(g);N({x:s.x,y:s.y,zoom:Tl(s.zoom,e,n)},[[0,0],[p.width,p.height]],i);const v=y.on("wheel.zoom"),b=y.on("dblclick.zoom");g.wheelDelta(EA);function S(q,Q){return y?new Promise(Z=>{g?.interpolate(Q?.interpolate==="linear"?sc:dh).transform(Om(y,Q?.duration,Q?.ease,()=>Z(!0)),q)}):Promise.resolve(!1)}function k({noWheelClassName:q,noPanClassName:Q,onPaneContextMenu:Z,userSelectionActive:B,panOnScroll:V,panOnDrag:T,panOnScrollMode:P,panOnScrollSpeed:H,preventScrolling:z,zoomOnPinch:G,zoomOnScroll:D,zoomOnDoubleClick:j,zoomActivationKeyPressed:ee,lib:ie,onTransformChange:ce,connectionInProgress:he,paneClickDistance:fe,selectionOnDrag:ue}){B&&!h.isZoomingOrPanning&&A();const ge=V&&!ee&&!B;g.clickDistance(ue?1/0:!ri(fe)||fe<0?0:fe);const De=ge?QL({zoomPanValues:h,noWheelClassName:q,d3Selection:y,d3Zoom:g,panOnScrollMode:P,panOnScrollSpeed:H,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:c}):YL({noWheelClassName:q,preventScrolling:z,d3ZoomHandler:v});if(y.on("wheel.zoom",De,{passive:!1}),!B){const ke=XL({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:l});g.on("start",ke);const Oe=FL({zoomPanValues:h,panOnDrag:T,onPaneContextMenu:!!Z,onPanZoom:o,onTransformChange:ce});g.on("zoom",Oe);const Pe=GL({zoomPanValues:h,panOnDrag:T,panOnScroll:V,onPaneContextMenu:Z,onPanZoomEnd:c,onDraggingChange:f});g.on("end",Pe)}const Ne=WL({zoomActivationKeyPressed:ee,panOnDrag:T,zoomOnScroll:D,panOnScroll:V,zoomOnDoubleClick:j,zoomOnPinch:G,userSelectionActive:B,noPanClassName:Q,noWheelClassName:q,lib:ie,connectionInProgress:he});g.filter(Ne),j?y.on("dblclick.zoom",b):y.on("dblclick.zoom",null)}function A(){g.on("zoom",null)}async function N(q,Q,Z){const B=Am(q),V=g?.constrain()(B,Q,Z);return V&&await S(V),new Promise(T=>T(V))}async function O(q,Q){const Z=Am(q);return await S(Z,Q),new Promise(B=>B(Z))}function M(q){if(y){const Q=Am(q),Z=y.property("__zoom");(Z.k!==q.zoom||Z.x!==q.x||Z.y!==q.y)&&g?.transform(y,Q,null,{sync:!0})}}function _(){const q=y?Jk(y.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function L(q,Q){return y?new Promise(Z=>{g?.interpolate(Q?.interpolate==="linear"?sc:dh).scaleTo(Om(y,Q?.duration,Q?.ease,()=>Z(!0)),q)}):Promise.resolve(!1)}function R(q,Q){return y?new Promise(Z=>{g?.interpolate(Q?.interpolate==="linear"?sc:dh).scaleBy(Om(y,Q?.duration,Q?.ease,()=>Z(!0)),q)}):Promise.resolve(!1)}function X(q){g?.scaleExtent(q)}function $(q){g?.translateExtent(q)}function ne(q){const Q=!ri(q)||q<0?0:q;g?.clickDistance(Q)}return{update:k,destroy:A,setViewport:O,setViewportConstrained:N,getViewport:_,scaleTo:L,scaleBy:R,setScaleExtent:X,setTranslateExtent:$,syncViewport:M,setClickDistance:ne}}var Ll;(function(t){t.Line="line",t.Handle="handle"})(Ll||(Ll={}));function ZL({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:s,affectsY:o}){const l=t-e,c=n-i,f=[l>0?1:l<0?-1:0,c>0?1:c<0?-1:0];return l&&s&&(f[0]=f[0]*-1),c&&o&&(f[1]=f[1]*-1),f}function bw(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),s=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:s}}function Gs(t,e){return Math.max(0,e-t)}function Ws(t,e){return Math.max(0,t-e)}function jf(t,e,n){return Math.max(0,e-t,t-n)}function Sw(t,e){return t?!e:e}function JL(t,e,n,i,s,o,l,c){let{affectsX:f,affectsY:h}=e;const{isHorizontal:p,isVertical:g}=e,y=p&&g,{xSnapped:v,ySnapped:b}=n,{minWidth:S,maxWidth:k,minHeight:A,maxHeight:N}=i,{x:O,y:M,width:_,height:L,aspectRatio:R}=t;let X=Math.floor(p?v-t.pointerX:0),$=Math.floor(g?b-t.pointerY:0);const ne=_+(f?-X:X),q=L+(h?-$:$),Q=-o[0]*_,Z=-o[1]*L;let B=jf(ne,S,k),V=jf(q,A,N);if(l){let H=0,z=0;f&&X<0?H=Gs(O+X+Q,l[0][0]):!f&&X>0&&(H=Ws(O+ne+Q,l[1][0])),h&&$<0?z=Gs(M+$+Z,l[0][1]):!h&&$>0&&(z=Ws(M+q+Z,l[1][1])),B=Math.max(B,H),V=Math.max(V,z)}if(c){let H=0,z=0;f&&X>0?H=Ws(O+X,c[0][0]):!f&&X<0&&(H=Gs(O+ne,c[1][0])),h&&$>0?z=Ws(M+$,c[0][1]):!h&&$<0&&(z=Gs(M+q,c[1][1])),B=Math.max(B,H),V=Math.max(V,z)}if(s){if(p){const H=jf(ne/R,A,N)*R;if(B=Math.max(B,H),l){let z=0;!f&&!h||f&&!h&&y?z=Ws(M+Z+ne/R,l[1][1])*R:z=Gs(M+Z+(f?X:-X)/R,l[0][1])*R,B=Math.max(B,z)}if(c){let z=0;!f&&!h||f&&!h&&y?z=Gs(M+ne/R,c[1][1])*R:z=Ws(M+(f?X:-X)/R,c[0][1])*R,B=Math.max(B,z)}}if(g){const H=jf(q*R,S,k)/R;if(V=Math.max(V,H),l){let z=0;!f&&!h||h&&!f&&y?z=Ws(O+q*R+Q,l[1][0])/R:z=Gs(O+(h?$:-$)*R+Q,l[0][0])/R,V=Math.max(V,z)}if(c){let z=0;!f&&!h||h&&!f&&y?z=Gs(O+q*R,c[1][0])/R:z=Ws(O+(h?$:-$)*R,c[0][0])/R,V=Math.max(V,z)}}}$=$+($<0?V:-V),X=X+(X<0?B:-B),s&&(y?ne>q*R?$=(Sw(f,h)?-X:X)/R:X=(Sw(f,h)?-$:$)*R:p?($=X/R,h=f):(X=$*R,f=h));const T=f?O+X:O,P=h?M+$:M;return{width:_+(f?-X:X),height:L+(h?-$:$),x:o[0]*X*(f?-1:1)+T,y:o[1]*$*(h?-1:1)+P}}const MA={width:0,height:0,x:0,y:0},e_={...MA,pointerX:0,pointerY:0,aspectRatio:1};function t_(t){return[[0,0],[t.measured.width,t.measured.height]]}function n_(t,e,n){const i=e.position.x+t.position.x,s=e.position.y+t.position.y,o=t.measured.width??0,l=t.measured.height??0,c=n[0]*o,f=n[1]*l;return[[i-c,s-f],[i+o-c,s+l-f]]}function i_({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:s}){const o=Ln(t);let l={controlDirection:bw("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:h,boundaries:p,keepAspectRatio:g,resizeDirection:y,onResizeStart:v,onResize:b,onResizeEnd:S,shouldResize:k}){let A={...MA},N={...e_};l={boundaries:p,resizeDirection:y,keepAspectRatio:g,controlDirection:bw(h)};let O,M=null,_=[],L,R,X,$=!1;const ne=Hk().on("start",q=>{const{nodeLookup:Q,transform:Z,snapGrid:B,snapToGrid:V,nodeOrigin:T,paneDomNode:P}=n();if(O=Q.get(e),!O)return;M=P?.getBoundingClientRect()??null;const{xSnapped:H,ySnapped:z}=rc(q.sourceEvent,{transform:Z,snapGrid:B,snapToGrid:V,containerBounds:M});A={width:O.measured.width??0,height:O.measured.height??0,x:O.position.x??0,y:O.position.y??0},N={...A,pointerX:H,pointerY:z,aspectRatio:A.width/A.height},L=void 0,O.parentId&&(O.extent==="parent"||O.expandParent)&&(L=Q.get(O.parentId),R=L&&O.extent==="parent"?t_(L):void 0),_=[],X=void 0;for(const[G,D]of Q)if(D.parentId===e&&(_.push({id:G,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const j=n_(D,O,D.origin??T);X?X=[[Math.min(j[0][0],X[0][0]),Math.min(j[0][1],X[0][1])],[Math.max(j[1][0],X[1][0]),Math.max(j[1][1],X[1][1])]]:X=j}v?.(q,{...A})}).on("drag",q=>{const{transform:Q,snapGrid:Z,snapToGrid:B,nodeOrigin:V}=n(),T=rc(q.sourceEvent,{transform:Q,snapGrid:Z,snapToGrid:B,containerBounds:M}),P=[];if(!O)return;const{x:H,y:z,width:G,height:D}=A,j={},ee=O.origin??V,{width:ie,height:ce,x:he,y:fe}=JL(N,l.controlDirection,T,l.boundaries,l.keepAspectRatio,ee,R,X),ue=ie!==G,ge=ce!==D,De=he!==H&&ue,Ne=fe!==z&&ge;if(!De&&!Ne&&!ue&&!ge)return;if((De||Ne||ee[0]===1||ee[1]===1)&&(j.x=De?he:A.x,j.y=Ne?fe:A.y,A.x=j.x,A.y=j.y,_.length>0)){const We=he-H,Xe=fe-z;for(const Lt of _)Lt.position={x:Lt.position.x-We+ee[0]*(ie-G),y:Lt.position.y-Xe+ee[1]*(ce-D)},P.push(Lt)}if((ue||ge)&&(j.width=ue&&(!l.resizeDirection||l.resizeDirection==="horizontal")?ie:A.width,j.height=ge&&(!l.resizeDirection||l.resizeDirection==="vertical")?ce:A.height,A.width=j.width,A.height=j.height),L&&O.expandParent){const We=ee[0]*(j.width??0);j.x&&j.x<We&&(A.x=We,N.x=N.x-(j.x-We));const Xe=ee[1]*(j.height??0);j.y&&j.y<Xe&&(A.y=Xe,N.y=N.y-(j.y-Xe))}const ke=ZL({width:A.width,prevWidth:G,height:A.height,prevHeight:D,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),Oe={...A,direction:ke};k?.(q,Oe)!==!1&&($=!0,b?.(q,Oe),i(j,P))}).on("end",q=>{$&&(S?.(q,{...A}),s?.({...A}),$=!1)});o.call(ne)}function f(){o.on(".drag",null)}return{update:c,destroy:f}}var Em={exports:{}},Mm={},Nm={exports:{}},Tm={};var ww;function s_(){if(ww)return Tm;ww=1;var t=Xc();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,s=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(g,y){var v=y(),b=i({inst:{value:v,getSnapshot:y}}),S=b[0].inst,k=b[1];return o(function(){S.value=v,S.getSnapshot=y,f(S)&&k({inst:S})},[g,v,y]),s(function(){return f(S)&&k({inst:S}),g(function(){f(S)&&k({inst:S})})},[g]),l(v),v}function f(g){var y=g.getSnapshot;g=g.value;try{var v=y();return!n(g,v)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Tm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Tm}var Cw;function r_(){return Cw||(Cw=1,Nm.exports=s_()),Nm.exports}var kw;function o_(){if(kw)return Mm;kw=1;var t=Xc(),e=r_();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var i=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,f=t.useDebugValue;return Mm.useSyncExternalStoreWithSelector=function(h,p,g,y,v){var b=o(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=c(function(){function A(L){if(!N){if(N=!0,O=L,L=y(L),v!==void 0&&S.hasValue){var R=S.value;if(v(R,L))return M=R}return M=L}if(R=M,i(O,L))return R;var X=y(L);return v!==void 0&&v(R,X)?(O=L,R):(O=L,M=X)}var N=!1,O,M,_=g===void 0?null:g;return[function(){return A(p())},_===null?void 0:function(){return A(_())}]},[p,g,y,v]);var k=s(h,b[0],b[1]);return l(function(){S.hasValue=!0,S.value=k},[k]),f(k),k},Mm}var Aw;function l_(){return Aw||(Aw=1,Em.exports=o_()),Em.exports}var a_=l_();const c_=wk(a_),u_={},Ow=t=>{let e;const n=new Set,i=(p,g)=>{const y=typeof p=="function"?p(e):p;if(!Object.is(y,e)){const v=e;e=g??(typeof y!="object"||y===null)?y:Object.assign({},e,y),n.forEach(b=>b(e,v))}},s=()=>e,f={setState:i,getState:s,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(u_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(i,s,f);return f},f_=t=>t?Ow(t):Ow,{useDebugValue:h_}=m3,{useSyncExternalStoreWithSelector:d_}=c_,p_=t=>t;function NA(t,e=p_,n){const i=d_(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return h_(i),i}const Ew=(t,e)=>{const n=f_(t),i=(s,o=e)=>NA(n,s,o);return Object.assign(i,n),i},g_=(t,e)=>t?Ew(t,e):Ew;function ct(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,s]of t)if(!Object.is(s,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var m_=Ck();const Nd=U.createContext(null),y_=Nd.Provider,TA=Ri.error001();function $e(t,e){const n=U.useContext(Nd);if(n===null)throw new Error(TA);return NA(n,t,e)}function ut(){const t=U.useContext(Nd);if(t===null)throw new Error(TA);return U.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const Mw={display:"none"},x_={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},DA="react-flow__node-desc",RA="react-flow__edge-desc",v_="react-flow__aria-live",b_=t=>t.ariaLiveMessage,S_=t=>t.ariaLabelConfig;function w_({rfId:t}){const e=$e(b_);return w.jsx("div",{id:`${v_}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:x_,children:e})}function C_({rfId:t,disableKeyboardA11y:e}){const n=$e(S_);return w.jsxs(w.Fragment,{children:[w.jsx("div",{id:`${DA}-${t}`,style:Mw,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),w.jsx("div",{id:`${RA}-${t}`,style:Mw,children:n["edge.a11yDescription.default"]}),!e&&w.jsx(w_,{rfId:t})]})}const Td=U.forwardRef(({position:t="top-left",children:e,className:n,style:i,...s},o)=>{const l=`${t}`.split("-");return w.jsx("div",{className:Ot(["react-flow__panel",n,...l]),style:i,ref:o,...s,children:e})});Td.displayName="Panel";function k_({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:w.jsx(Td,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:w.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const A_=t=>{const e=[],n=[];for(const[,i]of t.nodeLookup)i.selected&&e.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&n.push(i);return{selectedNodes:e,selectedEdges:n}},Hf=t=>t.id;function O_(t,e){return ct(t.selectedNodes.map(Hf),e.selectedNodes.map(Hf))&&ct(t.selectedEdges.map(Hf),e.selectedEdges.map(Hf))}function E_({onSelectionChange:t}){const e=ut(),{selectedNodes:n,selectedEdges:i}=$e(A_,O_);return U.useEffect(()=>{const s={nodes:n,edges:i};t?.(s),e.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[n,i,t]),null}const M_=t=>!!t.onSelectionChangeHandlers;function N_({onSelectionChange:t}){const e=$e(M_);return t||e?w.jsx(E_,{onSelectionChange:t}):null}const LA=[0,0],T_={x:0,y:0,zoom:1},D_=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Nw=[...D_,"rfId"],R_=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges}),Tw={translateExtent:bc,nodeOrigin:LA,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function L_(t){const{setNodes:e,setEdges:n,setMinZoom:i,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:l,reset:c,setDefaultNodesAndEdges:f}=$e(R_,ct),h=ut();U.useEffect(()=>(f(t.defaultNodes,t.defaultEdges),()=>{p.current=Tw,c()}),[]);const p=U.useRef(Tw);return U.useEffect(()=>{for(const g of Nw){const y=t[g],v=p.current[g];y!==v&&(typeof t[g]>"u"||(g==="nodes"?e(y):g==="edges"?n(y):g==="minZoom"?i(y):g==="maxZoom"?s(y):g==="translateExtent"?o(y):g==="nodeExtent"?l(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:gL(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=t},Nw.map(g=>t[g])),null}function Dw(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function __(t){const[e,n]=U.useState(t==="system"?null:t);return U.useEffect(()=>{if(t!=="system"){n(t);return}const i=Dw(),s=()=>n(i?.matches?"dark":"light");return s(),i?.addEventListener("change",s),()=>{i?.removeEventListener("change",s)}},[t]),e!==null?e:Dw()?.matches?"dark":"light"}const Rw=typeof document<"u"?document:null;function kc(t=null,e={target:Rw,actInsideInputWithModifier:!0}){const[n,i]=U.useState(!1),s=U.useRef(!1),o=U.useRef(new Set([])),[l,c]=U.useMemo(()=>{if(t!==null){const h=(Array.isArray(t)?t:[t]).filter(g=>typeof g=="string").map(g=>g.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=h.reduce((g,y)=>g.concat(...y),[]);return[h,p]}return[[],[]]},[t]);return U.useEffect(()=>{const f=e?.target??Rw,h=e?.actInsideInputWithModifier??!0;if(t!==null){const p=v=>{if(s.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!s.current||s.current&&!h)&&dA(v))return!1;const S=_w(v.code,c);if(o.current.add(v[S]),Lw(l,o.current,!1)){const k=v.composedPath?.()?.[0]||v.target,A=k?.nodeName==="BUTTON"||k?.nodeName==="A";e.preventDefault!==!1&&(s.current||!A)&&v.preventDefault(),i(!0)}},g=v=>{const b=_w(v.code,c);Lw(l,o.current,!0)?(i(!1),o.current.clear()):o.current.delete(v[b]),v.key==="Meta"&&o.current.clear(),s.current=!1},y=()=>{o.current.clear(),i(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",g),window.addEventListener("blur",y),window.addEventListener("contextmenu",y),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",g),window.removeEventListener("blur",y),window.removeEventListener("contextmenu",y)}}},[t,i]),n}function Lw(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function _w(t,e){return e.includes(t)?"code":"key"}const B_=()=>{const t=ut();return U.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[i,s,o],panZoom:l}=t.getState();return l?(await l.setViewport({x:e.x??i,y:e.y??s,zoom:e.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,i]=t.getState().transform;return{x:e,y:n,zoom:i}},setCenter:async(e,n,i)=>t.getState().setCenter(e,n,i),fitBounds:async(e,n)=>{const{width:i,height:s,minZoom:o,maxZoom:l,panZoom:c}=t.getState(),f=Ky(e,i,s,o,l,n?.padding??.1);return c?(await c.setViewport(f,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:i,snapGrid:s,snapToGrid:o,domNode:l}=t.getState();if(!l)return e;const{x:c,y:f}=l.getBoundingClientRect(),h={x:e.x-c,y:e.y-f},p=n.snapGrid??s,g=n.snapToGrid??o;return Jc(h,i,g,p)},flowToScreenPosition:e=>{const{transform:n,domNode:i}=t.getState();if(!i)return e;const{x:s,y:o}=i.getBoundingClientRect(),l=Bh(e,n);return{x:l.x+s,y:l.y+o}}}),[])};function _A(t,e){const n=[],i=new Map,s=[];for(const o of t)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")i.set(o.id,[o]);else{const l=i.get(o.id);l?l.push(o):i.set(o.id,[o])}for(const o of e){const l=i.get(o.id);if(!l){n.push(o);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const c={...o};for(const f of l)z_(f,c);n.push(c)}return s.length&&s.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function z_(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured={...t.dimensions},t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function BA(t,e){return _A(t,e)}function zA(t,e){return _A(t,e)}function $r(t,e){return{id:t,type:"select",selected:e}}function ul(t,e=new Set,n=!1){const i=[];for(const[s,o]of t){const l=e.has(s);!(o.selected===void 0&&!l)&&o.selected!==l&&(n&&(o.selected=l),i.push($r(o.id,l)))}return i}function Bw({items:t=[],lookup:e}){const n=[],i=new Map(t.map(s=>[s.id,s]));for(const[s,o]of t.entries()){const l=e.get(o.id),c=l?.internals?.userNode??l;c!==void 0&&c!==o&&n.push({id:o.id,item:o,type:"replace"}),c===void 0&&n.push({item:o,type:"add",index:s})}for(const[s]of e)i.get(s)===void 0&&n.push({id:s,type:"remove"});return n}function zw(t){return{id:t.id,type:"remove"}}const Pw=t=>rL(t),P_=t=>rA(t);function PA(t){return U.forwardRef(t)}const j_=typeof window<"u"?U.useLayoutEffect:U.useEffect;function jw(t){const[e,n]=U.useState(BigInt(0)),[i]=U.useState(()=>H_(()=>n(s=>s+BigInt(1))));return j_(()=>{const s=i.get();s.length&&(t(s),i.reset())},[e]),i}function H_(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const jA=U.createContext(null);function I_({children:t}){const e=ut(),n=U.useCallback(c=>{const{nodes:f=[],setNodes:h,hasDefaultNodes:p,onNodesChange:g,nodeLookup:y,fitViewQueued:v,onNodesChangeMiddlewareMap:b}=e.getState();let S=f;for(const A of c)S=typeof A=="function"?A(S):A;let k=Bw({items:S,lookup:y});for(const A of b.values())k=A(k);p&&h(S),k.length>0?g?.(k):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:A,nodes:N,setNodes:O}=e.getState();A&&O(N)})},[]),i=jw(n),s=U.useCallback(c=>{const{edges:f=[],setEdges:h,hasDefaultEdges:p,onEdgesChange:g,edgeLookup:y}=e.getState();let v=f;for(const b of c)v=typeof b=="function"?b(v):b;p?h(v):g&&g(Bw({items:v,lookup:y}))},[]),o=jw(s),l=U.useMemo(()=>({nodeQueue:i,edgeQueue:o}),[]);return w.jsx(jA.Provider,{value:l,children:t})}function V_(){const t=U.useContext(jA);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const $_=t=>!!t.panZoom;function Dd(){const t=B_(),e=ut(),n=V_(),i=$e($_),s=U.useMemo(()=>{const o=g=>e.getState().nodeLookup.get(g),l=g=>{n.nodeQueue.push(g)},c=g=>{n.edgeQueue.push(g)},f=g=>{const{nodeLookup:y,nodeOrigin:v}=e.getState(),b=Pw(g)?g:y.get(g.id),S=b.parentId?fA(b.position,b.measured,b.parentId,y,v):b.position,k={...b,position:S,width:b.measured?.width??b.width,height:b.measured?.height??b.height};return Dl(k)},h=(g,y,v={replace:!1})=>{l(b=>b.map(S=>{if(S.id===g){const k=typeof y=="function"?y(S):y;return v.replace&&Pw(k)?k:{...S,...k}}return S}))},p=(g,y,v={replace:!1})=>{c(b=>b.map(S=>{if(S.id===g){const k=typeof y=="function"?y(S):y;return v.replace&&P_(k)?k:{...S,...k}}return S}))};return{getNodes:()=>e.getState().nodes.map(g=>({...g})),getNode:g=>o(g)?.internals.userNode,getInternalNode:o,getEdges:()=>{const{edges:g=[]}=e.getState();return g.map(y=>({...y}))},getEdge:g=>e.getState().edgeLookup.get(g),setNodes:l,setEdges:c,addNodes:g=>{const y=Array.isArray(g)?g:[g];n.nodeQueue.push(v=>[...v,...y])},addEdges:g=>{const y=Array.isArray(g)?g:[g];n.edgeQueue.push(v=>[...v,...y])},toObject:()=>{const{nodes:g=[],edges:y=[],transform:v}=e.getState(),[b,S,k]=v;return{nodes:g.map(A=>({...A})),edges:y.map(A=>({...A})),viewport:{x:b,y:S,zoom:k}}},deleteElements:async({nodes:g=[],edges:y=[]})=>{const{nodes:v,edges:b,onNodesDelete:S,onEdgesDelete:k,triggerNodeChanges:A,triggerEdgeChanges:N,onDelete:O,onBeforeDelete:M}=e.getState(),{nodes:_,edges:L}=await uL({nodesToRemove:g,edgesToRemove:y,nodes:v,edges:b,onBeforeDelete:M}),R=L.length>0,X=_.length>0;if(R){const $=L.map(zw);k?.(L),N($)}if(X){const $=_.map(zw);S?.(_),A($)}return(X||R)&&O?.({nodes:_,edges:L}),{deletedNodes:_,deletedEdges:L}},getIntersectingNodes:(g,y=!0,v)=>{const b=cw(g),S=b?g:f(g),k=v!==void 0;return S?(v||e.getState().nodes).filter(A=>{const N=e.getState().nodeLookup.get(A.id);if(N&&!b&&(A.id===g.id||!N.internals.positionAbsolute))return!1;const O=Dl(k?A:N),M=wc(O,S);return y&&M>0||M>=O.width*O.height||M>=S.width*S.height}):[]},isNodeIntersecting:(g,y,v=!0)=>{const S=cw(g)?g:f(g);if(!S)return!1;const k=wc(S,y);return v&&k>0||k>=y.width*y.height||k>=S.width*S.height},updateNode:h,updateNodeData:(g,y,v={replace:!1})=>{h(g,b=>{const S=typeof y=="function"?y(b):y;return v.replace?{...b,data:S}:{...b,data:{...b.data,...S}}},v)},updateEdge:p,updateEdgeData:(g,y,v={replace:!1})=>{p(g,b=>{const S=typeof y=="function"?y(b):y;return v.replace?{...b,data:S}:{...b,data:{...b.data,...S}}},v)},getNodesBounds:g=>{const{nodeLookup:y,nodeOrigin:v}=e.getState();return oL(g,{nodeLookup:y,nodeOrigin:v})},getHandleConnections:({type:g,id:y,nodeId:v})=>Array.from(e.getState().connectionLookup.get(`${v}-${g}${y?`-${y}`:""}`)?.values()??[]),getNodeConnections:({type:g,handleId:y,nodeId:v})=>Array.from(e.getState().connectionLookup.get(`${v}${g?y?`-${g}-${y}`:`-${g}`:""}`)?.values()??[]),fitView:async g=>{const y=e.getState().fitViewResolver??pL();return e.setState({fitViewQueued:!0,fitViewOptions:g,fitViewResolver:y}),n.nodeQueue.push(v=>[...v]),y.promise}}},[]);return U.useMemo(()=>({...s,...t,viewportInitialized:i}),[i])}const Hw=t=>t.selected,U_=typeof window<"u"?window:void 0;function q_({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=ut(),{deleteElements:i}=Dd(),s=kc(t,{actInsideInputWithModifier:!1}),o=kc(e,{target:U_});U.useEffect(()=>{if(s){const{edges:l,nodes:c}=n.getState();i({nodes:c.filter(Hw),edges:l.filter(Hw)}),n.setState({nodesSelectionActive:!1})}},[s]),U.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function Q_(t){const e=ut();U.useEffect(()=>{const n=()=>{if(!t.current||!(t.current.checkVisibility?.()??!0))return!1;const i=Zy(t.current);(i.height===0||i.width===0)&&e.getState().onError?.("004",Ri.error004()),e.setState({width:i.width||500,height:i.height||500})};if(t.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(t.current),()=>{window.removeEventListener("resize",n),i&&t.current&&i.unobserve(t.current)}}},[])}const Rd={position:"absolute",width:"100%",height:"100%",top:0,left:0},Y_=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib,connectionInProgress:t.connection.inProgress});function X_({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=Jr.Free,zoomOnDoubleClick:l=!0,panOnDrag:c=!0,defaultViewport:f,translateExtent:h,minZoom:p,maxZoom:g,zoomActivationKeyCode:y,preventScrolling:v=!0,children:b,noWheelClassName:S,noPanClassName:k,onViewportChange:A,isControlledViewport:N,paneClickDistance:O,selectionOnDrag:M}){const _=ut(),L=U.useRef(null),{userSelectionActive:R,lib:X,connectionInProgress:$}=$e(Y_,ct),ne=kc(y),q=U.useRef();Q_(L);const Q=U.useCallback(Z=>{A?.({x:Z[0],y:Z[1],zoom:Z[2]}),N||_.setState({transform:Z})},[A,N]);return U.useEffect(()=>{if(L.current){q.current=KL({domNode:L.current,minZoom:p,maxZoom:g,translateExtent:h,viewport:f,onDraggingChange:T=>_.setState({paneDragging:T}),onPanZoomStart:(T,P)=>{const{onViewportChangeStart:H,onMoveStart:z}=_.getState();z?.(T,P),H?.(P)},onPanZoom:(T,P)=>{const{onViewportChange:H,onMove:z}=_.getState();z?.(T,P),H?.(P)},onPanZoomEnd:(T,P)=>{const{onViewportChangeEnd:H,onMoveEnd:z}=_.getState();z?.(T,P),H?.(P)}});const{x:Z,y:B,zoom:V}=q.current.getViewport();return _.setState({panZoom:q.current,transform:[Z,B,V],domNode:L.current.closest(".react-flow")}),()=>{q.current?.destroy()}}},[]),U.useEffect(()=>{q.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:l,panOnDrag:c,zoomActivationKeyPressed:ne,preventScrolling:v,noPanClassName:k,userSelectionActive:R,noWheelClassName:S,lib:X,onTransformChange:Q,connectionInProgress:$,selectionOnDrag:M,paneClickDistance:O})},[t,e,n,i,s,o,l,c,ne,v,k,R,S,X,Q,$,M,O]),w.jsx("div",{className:"react-flow__renderer",ref:L,style:Rd,children:b})}const F_=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function G_(){const{userSelectionActive:t,userSelectionRect:e}=$e(F_,ct);return t&&e?w.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const Dm=(t,e)=>n=>{n.target===e.current&&t?.(n)},W_=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function K_({isSelecting:t,selectionKeyPressed:e,selectionMode:n=Sc.Full,panOnDrag:i,paneClickDistance:s,selectionOnDrag:o,onSelectionStart:l,onSelectionEnd:c,onPaneClick:f,onPaneContextMenu:h,onPaneScroll:p,onPaneMouseEnter:g,onPaneMouseMove:y,onPaneMouseLeave:v,children:b}){const S=ut(),{userSelectionActive:k,elementsSelectable:A,dragging:N,connectionInProgress:O}=$e(W_,ct),M=A&&(t||k),_=U.useRef(null),L=U.useRef(),R=U.useRef(new Set),X=U.useRef(new Set),$=U.useRef(!1),ne=H=>{if($.current||O){$.current=!1;return}f?.(H),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},q=H=>{if(Array.isArray(i)&&i?.includes(2)){H.preventDefault();return}h?.(H)},Q=p?H=>p(H):void 0,Z=H=>{$.current&&(H.stopPropagation(),$.current=!1)},B=H=>{const{domNode:z}=S.getState();if(L.current=z?.getBoundingClientRect(),!L.current)return;const G=H.target===_.current;if(!G&&!!H.target.closest(".nokey")||!t||!(o&&G||e)||H.button!==0||!H.isPrimary)return;H.target?.setPointerCapture?.(H.pointerId),$.current=!1;const{x:ee,y:ie}=oi(H.nativeEvent,L.current);S.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:ie,x:ee,y:ie}}),G||(H.stopPropagation(),H.preventDefault())},V=H=>{const{userSelectionRect:z,transform:G,nodeLookup:D,edgeLookup:j,connectionLookup:ee,triggerNodeChanges:ie,triggerEdgeChanges:ce,defaultEdgeOptions:he,resetSelectedElements:fe}=S.getState();if(!L.current||!z)return;const{x:ue,y:ge}=oi(H.nativeEvent,L.current),{startX:De,startY:Ne}=z;if(!$.current){const Xe=e?0:s;if(Math.hypot(ue-De,ge-Ne)<=Xe)return;fe(),l?.(H)}$.current=!0;const ke={startX:De,startY:Ne,x:ue<De?ue:De,y:ge<Ne?ge:Ne,width:Math.abs(ue-De),height:Math.abs(ge-Ne)},Oe=R.current,Pe=X.current;R.current=new Set(Wy(D,ke,G,n===Sc.Partial,!0).map(Xe=>Xe.id)),X.current=new Set;const We=he?.selectable??!0;for(const Xe of R.current){const Lt=ee.get(Xe);if(Lt)for(const{edgeId:Wn}of Lt.values()){const wn=j.get(Wn);wn&&(wn.selectable??We)&&X.current.add(Wn)}}if(!uw(Oe,R.current)){const Xe=ul(D,R.current,!0);ie(Xe)}if(!uw(Pe,X.current)){const Xe=ul(j,X.current);ce(Xe)}S.setState({userSelectionRect:ke,userSelectionActive:!0,nodesSelectionActive:!1})},T=H=>{H.button===0&&(H.target?.releasePointerCapture?.(H.pointerId),!k&&H.target===_.current&&S.getState().userSelectionRect&&ne?.(H),S.setState({userSelectionActive:!1,userSelectionRect:null}),$.current&&(c?.(H),S.setState({nodesSelectionActive:R.current.size>0})))},P=i===!0||Array.isArray(i)&&i.includes(0);return w.jsxs("div",{className:Ot(["react-flow__pane",{draggable:P,dragging:N,selection:t}]),onClick:M?void 0:Dm(ne,_),onContextMenu:Dm(q,_),onWheel:Dm(Q,_),onPointerEnter:M?void 0:g,onPointerMove:M?V:y,onPointerUp:M?T:void 0,onPointerDownCapture:M?B:void 0,onClickCapture:M?Z:void 0,onPointerLeave:v,ref:_,style:Rd,children:[b,w.jsx(G_,{})]})}function D0({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:l,nodeLookup:c,onError:f}=e.getState(),h=c.get(t);if(!h){f?.("012",Ri.error012(t));return}e.setState({nodesSelectionActive:!1}),h.selected?(n||h.selected&&l)&&(o({nodes:[h],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):s([t])}function HA({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:s,isSelectable:o,nodeClickDistance:l}){const c=ut(),[f,h]=U.useState(!1),p=U.useRef();return U.useEffect(()=>{p.current=PL({getStoreItems:()=>c.getState(),onNodeMouseDown:g=>{D0({id:g,store:c,nodeRef:t})},onDragStart:()=>{h(!0)},onDragStop:()=>{h(!1)}})},[]),U.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:i,domNode:t.current,isSelectable:o,nodeId:s,nodeClickDistance:l}),()=>{p.current?.destroy()}},[n,i,e,o,t,s]),f}const Z_=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function IA(){const t=ut();return U.useCallback(n=>{const{nodeExtent:i,snapToGrid:s,snapGrid:o,nodesDraggable:l,onError:c,updateNodePositions:f,nodeLookup:h,nodeOrigin:p}=t.getState(),g=new Map,y=Z_(l),v=s?o[0]:5,b=s?o[1]:5,S=n.direction.x*v*n.factor,k=n.direction.y*b*n.factor;for(const[,A]of h){if(!y(A))continue;let N={x:A.internals.positionAbsolute.x+S,y:A.internals.positionAbsolute.y+k};s&&(N=Zc(N,o));const{position:O,positionAbsolute:M}=oA({nodeId:A.id,nextPosition:N,nodeLookup:h,nodeExtent:i,nodeOrigin:p,onError:c});A.position=O,A.internals.positionAbsolute=M,g.set(A.id,A)}f(g)},[])}const rx=U.createContext(null),J_=rx.Provider;rx.Consumer;const VA=()=>U.useContext(rx),eB=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),tB=(t,e,n)=>i=>{const{connectionClickStartHandle:s,connectionMode:o,connection:l}=i,{fromHandle:c,toHandle:f,isValid:h}=l,p=f?.nodeId===t&&f?.id===e&&f?.type===n;return{connectingFrom:c?.nodeId===t&&c?.id===e&&c?.type===n,connectingTo:p,clickConnecting:s?.nodeId===t&&s?.id===e&&s?.type===n,isPossibleEndHandle:o===Nl.Strict?c?.type!==n:t!==c?.nodeId||e!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!s,valid:p&&h}};function nB({type:t="source",position:e=be.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:l,onConnect:c,children:f,className:h,onMouseDown:p,onTouchStart:g,...y},v){const b=l||null,S=t==="target",k=ut(),A=VA(),{connectOnClick:N,noPanClassName:O,rfId:M}=$e(eB,ct),{connectingFrom:_,connectingTo:L,clickConnecting:R,isPossibleEndHandle:X,connectionInProcess:$,clickConnectionInProcess:ne,valid:q}=$e(tB(A,b,t),ct);A||k.getState().onError?.("010",Ri.error010());const Q=V=>{const{defaultEdgeOptions:T,onConnect:P,hasDefaultEdges:H}=k.getState(),z={...T,...V};if(H){const{edges:G,setEdges:D}=k.getState();D(SL(z,G))}P?.(z),c?.(z)},Z=V=>{if(!A)return;const T=pA(V.nativeEvent);if(s&&(T&&V.button===0||!T)){const P=k.getState();T0.onPointerDown(V.nativeEvent,{handleDomNode:V.currentTarget,autoPanOnConnect:P.autoPanOnConnect,connectionMode:P.connectionMode,connectionRadius:P.connectionRadius,domNode:P.domNode,nodeLookup:P.nodeLookup,lib:P.lib,isTarget:S,handleId:b,nodeId:A,flowId:P.rfId,panBy:P.panBy,cancelConnection:P.cancelConnection,onConnectStart:P.onConnectStart,onConnectEnd:P.onConnectEnd,updateConnection:P.updateConnection,onConnect:Q,isValidConnection:n||P.isValidConnection,getTransform:()=>k.getState().transform,getFromHandle:()=>k.getState().connection.fromHandle,autoPanSpeed:P.autoPanSpeed,dragThreshold:P.connectionDragThreshold})}T?p?.(V):g?.(V)},B=V=>{const{onClickConnectStart:T,onClickConnectEnd:P,connectionClickStartHandle:H,connectionMode:z,isValidConnection:G,lib:D,rfId:j,nodeLookup:ee,connection:ie}=k.getState();if(!A||!H&&!s)return;if(!H){T?.(V.nativeEvent,{nodeId:A,handleId:b,handleType:t}),k.setState({connectionClickStartHandle:{nodeId:A,type:t,id:b}});return}const ce=hA(V.target),he=n||G,{connection:fe,isValid:ue}=T0.isValid(V.nativeEvent,{handle:{nodeId:A,id:b,type:t},connectionMode:z,fromNodeId:H.nodeId,fromHandleId:H.id||null,fromType:H.type,isValidConnection:he,flowId:j,doc:ce,lib:D,nodeLookup:ee});ue&&fe&&Q(fe);const ge=structuredClone(ie);delete ge.inProgress,ge.toPosition=ge.toHandle?ge.toHandle.position:null,P?.(V,ge),k.setState({connectionClickStartHandle:null})};return w.jsx("div",{"data-handleid":b,"data-nodeid":A,"data-handlepos":e,"data-id":`${M}-${A}-${b}-${t}`,className:Ot(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",O,h,{source:!S,target:S,connectable:i,connectablestart:s,connectableend:o,clickconnecting:R,connectingfrom:_,connectingto:L,valid:q,connectionindicator:i&&(!$||X)&&($||ne?o:s)}]),onMouseDown:Z,onTouchStart:Z,onClick:N?B:void 0,ref:v,...y,children:f})}const or=U.memo(PA(nB));function iB({data:t,isConnectable:e,sourcePosition:n=be.Bottom}){return w.jsxs(w.Fragment,{children:[t?.label,w.jsx(or,{type:"source",position:n,isConnectable:e})]})}function sB({data:t,isConnectable:e,targetPosition:n=be.Top,sourcePosition:i=be.Bottom}){return w.jsxs(w.Fragment,{children:[w.jsx(or,{type:"target",position:n,isConnectable:e}),t?.label,w.jsx(or,{type:"source",position:i,isConnectable:e})]})}function rB(){return null}function oB({data:t,isConnectable:e,targetPosition:n=be.Top}){return w.jsxs(w.Fragment,{children:[w.jsx(or,{type:"target",position:n,isConnectable:e}),t?.label]})}const zh={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Iw={input:iB,default:sB,output:oB,group:rB};function lB(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const aB=t=>{const{width:e,height:n,x:i,y:s}=Kc(t.nodeLookup,{filter:o=>!!o.selected});return{width:ri(e)?e:null,height:ri(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${s}px)`}};function cB({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ut(),{width:s,height:o,transformString:l,userSelectionActive:c}=$e(aB,ct),f=IA(),h=U.useRef(null);if(U.useEffect(()=>{n||h.current?.focus({preventScroll:!0})},[n]),HA({nodeRef:h}),c||!s||!o)return null;const p=t?y=>{const v=i.getState().nodes.filter(b=>b.selected);t(y,v)}:void 0,g=y=>{Object.prototype.hasOwnProperty.call(zh,y.key)&&(y.preventDefault(),f({direction:zh[y.key],factor:y.shiftKey?4:1}))};return w.jsx("div",{className:Ot(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l},children:w.jsx("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:s,height:o}})})}const Vw=typeof window<"u"?window:void 0,uB=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function $A({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,paneClickDistance:c,deleteKeyCode:f,selectionKeyCode:h,selectionOnDrag:p,selectionMode:g,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:S,zoomActivationKeyCode:k,elementsSelectable:A,zoomOnScroll:N,zoomOnPinch:O,panOnScroll:M,panOnScrollSpeed:_,panOnScrollMode:L,zoomOnDoubleClick:R,panOnDrag:X,defaultViewport:$,translateExtent:ne,minZoom:q,maxZoom:Q,preventScrolling:Z,onSelectionContextMenu:B,noWheelClassName:V,noPanClassName:T,disableKeyboardA11y:P,onViewportChange:H,isControlledViewport:z}){const{nodesSelectionActive:G,userSelectionActive:D}=$e(uB,ct),j=kc(h,{target:Vw}),ee=kc(S,{target:Vw}),ie=ee||X,ce=ee||M,he=p&&ie!==!0,fe=j||D||he;return q_({deleteKeyCode:f,multiSelectionKeyCode:b}),w.jsx(X_,{onPaneContextMenu:o,elementsSelectable:A,zoomOnScroll:N,zoomOnPinch:O,panOnScroll:ce,panOnScrollSpeed:_,panOnScrollMode:L,zoomOnDoubleClick:R,panOnDrag:!j&&ie,defaultViewport:$,translateExtent:ne,minZoom:q,maxZoom:Q,zoomActivationKeyCode:k,preventScrolling:Z,noWheelClassName:V,noPanClassName:T,onViewportChange:H,isControlledViewport:z,paneClickDistance:c,selectionOnDrag:he,children:w.jsxs(K_,{onSelectionStart:y,onSelectionEnd:v,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:l,panOnDrag:ie,isSelecting:!!fe,selectionMode:g,selectionKeyPressed:j,paneClickDistance:c,selectionOnDrag:he,children:[t,G&&w.jsx(cB,{onSelectionContextMenu:B,noPanClassName:T,disableKeyboardA11y:P})]})})}$A.displayName="FlowRenderer";const fB=U.memo($A),hB=t=>e=>t?Wy(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function dB(t){return $e(U.useCallback(hB(t),[t]),ct)}const pB=t=>t.updateNodeInternals;function gB(){const t=$e(pB),[e]=U.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(s=>{const o=s.target.getAttribute("data-id");i.set(o,{id:o,nodeElement:s.target,force:!0})}),t(i)}));return U.useEffect(()=>()=>{e?.disconnect()},[e]),e}function mB({node:t,nodeType:e,hasDimensions:n,resizeObserver:i}){const s=ut(),o=U.useRef(null),l=U.useRef(null),c=U.useRef(t.sourcePosition),f=U.useRef(t.targetPosition),h=U.useRef(e),p=n&&!!t.internals.handleBounds;return U.useEffect(()=>{o.current&&!t.hidden&&(!p||l.current!==o.current)&&(l.current&&i?.unobserve(l.current),i?.observe(o.current),l.current=o.current)},[p,t.hidden]),U.useEffect(()=>()=>{l.current&&(i?.unobserve(l.current),l.current=null)},[]),U.useEffect(()=>{if(o.current){const g=h.current!==e,y=c.current!==t.sourcePosition,v=f.current!==t.targetPosition;(g||y||v)&&(h.current=e,c.current=t.sourcePosition,f.current=t.targetPosition,s.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:o.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),o}function yB({id:t,onClick:e,onMouseEnter:n,onMouseMove:i,onMouseLeave:s,onContextMenu:o,onDoubleClick:l,nodesDraggable:c,elementsSelectable:f,nodesConnectable:h,nodesFocusable:p,resizeObserver:g,noDragClassName:y,noPanClassName:v,disableKeyboardA11y:b,rfId:S,nodeTypes:k,nodeClickDistance:A,onError:N}){const{node:O,internals:M,isParent:_}=$e(ue=>{const ge=ue.nodeLookup.get(t),De=ue.parentLookup.has(t);return{node:ge,internals:ge.internals,isParent:De}},ct);let L=O.type||"default",R=k?.[L]||Iw[L];R===void 0&&(N?.("003",Ri.error003(L)),L="default",R=k?.default||Iw.default);const X=!!(O.draggable||c&&typeof O.draggable>"u"),$=!!(O.selectable||f&&typeof O.selectable>"u"),ne=!!(O.connectable||h&&typeof O.connectable>"u"),q=!!(O.focusable||p&&typeof O.focusable>"u"),Q=ut(),Z=uA(O),B=mB({node:O,nodeType:L,hasDimensions:Z,resizeObserver:g}),V=HA({nodeRef:B,disabled:O.hidden||!X,noDragClassName:y,handleSelector:O.dragHandle,nodeId:t,isSelectable:$,nodeClickDistance:A}),T=IA();if(O.hidden)return null;const P=vs(O),H=lB(O),z=$||X||e||n||i||s,G=n?ue=>n(ue,{...M.userNode}):void 0,D=i?ue=>i(ue,{...M.userNode}):void 0,j=s?ue=>s(ue,{...M.userNode}):void 0,ee=o?ue=>o(ue,{...M.userNode}):void 0,ie=l?ue=>l(ue,{...M.userNode}):void 0,ce=ue=>{const{selectNodesOnDrag:ge,nodeDragThreshold:De}=Q.getState();$&&(!ge||!X||De>0)&&D0({id:t,store:Q,nodeRef:B}),e&&e(ue,{...M.userNode})},he=ue=>{if(!(dA(ue.nativeEvent)||b)){if(tA.includes(ue.key)&&$){const ge=ue.key==="Escape";D0({id:t,store:Q,unselect:ge,nodeRef:B})}else if(X&&O.selected&&Object.prototype.hasOwnProperty.call(zh,ue.key)){ue.preventDefault();const{ariaLabelConfig:ge}=Q.getState();Q.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:ue.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),T({direction:zh[ue.key],factor:ue.shiftKey?4:1})}}},fe=()=>{if(b||!B.current?.matches(":focus-visible"))return;const{transform:ue,width:ge,height:De,autoPanOnNodeFocus:Ne,setCenter:ke}=Q.getState();if(!Ne)return;Wy(new Map([[t,O]]),{x:0,y:0,width:ge,height:De},ue,!0).length>0||ke(O.position.x+P.width/2,O.position.y+P.height/2,{zoom:ue[2]})};return w.jsx("div",{className:Ot(["react-flow__node",`react-flow__node-${L}`,{[v]:X},O.className,{selected:O.selected,selectable:$,parent:_,draggable:X,dragging:V}]),ref:B,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:z?"all":"none",visibility:Z?"visible":"hidden",...O.style,...H},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:G,onMouseMove:D,onMouseLeave:j,onContextMenu:ee,onClick:ce,onDoubleClick:ie,onKeyDown:q?he:void 0,tabIndex:q?0:void 0,onFocus:q?fe:void 0,role:O.ariaRole??(q?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${DA}-${S}`,"aria-label":O.ariaLabel,...O.domAttributes,children:w.jsx(J_,{value:t,children:w.jsx(R,{id:t,data:O.data,type:L,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:O.selected??!1,selectable:$,draggable:X,deletable:O.deletable??!0,isConnectable:ne,sourcePosition:O.sourcePosition,targetPosition:O.targetPosition,dragging:V,dragHandle:O.dragHandle,zIndex:M.z,parentId:O.parentId,...P})})})}var xB=U.memo(yB);const vB=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function UA(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,onError:o}=$e(vB,ct),l=dB(t.onlyRenderVisibleElements),c=gB();return w.jsx("div",{className:"react-flow__nodes",style:Rd,children:l.map(f=>w.jsx(xB,{id:f,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:c,nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:s,nodeClickDistance:t.nodeClickDistance,onError:o},f))})}UA.displayName="NodeRenderer";const bB=U.memo(UA);function SB(t){return $e(U.useCallback(n=>{if(!t)return n.edges.map(s=>s.id);const i=[];if(n.width&&n.height)for(const s of n.edges){const o=n.nodeLookup.get(s.source),l=n.nodeLookup.get(s.target);o&&l&&xL({sourceNode:o,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&i.push(s.id)}return i},[t]),ct)}const wB=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return w.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},CB=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return w.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},$w={[eo.Arrow]:wB,[eo.ArrowClosed]:CB};function kB(t){const e=ut();return U.useMemo(()=>Object.prototype.hasOwnProperty.call($w,t)?$w[t]:(e.getState().onError?.("009",Ri.error009(t)),null),[t])}const AB=({id:t,type:e,color:n,width:i=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const f=kB(e);return f?w.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0",children:w.jsx(f,{color:n,strokeWidth:l})}):null},qA=({defaultColor:t,rfId:e})=>{const n=$e(o=>o.edges),i=$e(o=>o.defaultEdgeOptions),s=U.useMemo(()=>OL(n,{id:e,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[n,i,e,t]);return s.length?w.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:w.jsx("defs",{children:s.map(o=>w.jsx(AB,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};qA.displayName="MarkerDefinitions";var OB=U.memo(qA);function QA({x:t,y:e,label:n,labelStyle:i,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...p}){const[g,y]=U.useState({x:1,y:0,width:0,height:0}),v=Ot(["react-flow__edge-textwrapper",h]),b=U.useRef(null);return U.useEffect(()=>{if(b.current){const S=b.current.getBBox();y({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?w.jsxs("g",{transform:`translate(${t-g.width/2} ${e-g.height/2})`,className:v,visibility:g.width?"visible":"hidden",...p,children:[s&&w.jsx("rect",{width:g.width+2*l[0],x:-l[0],y:-l[1],height:g.height+2*l[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),w.jsx("text",{className:"react-flow__edge-text",y:g.height/2,dy:"0.3em",ref:b,style:i,children:n}),f]}):null}QA.displayName="EdgeText";const EB=U.memo(QA);function eu({path:t,labelX:e,labelY:n,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f,interactionWidth:h=20,...p}){return w.jsxs(w.Fragment,{children:[w.jsx("path",{...p,d:t,fill:"none",className:Ot(["react-flow__edge-path",p.className])}),h?w.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}):null,i&&ri(e)&&ri(n)?w.jsx(EB,{x:e,y:n,label:i,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:f}):null]})}function Uw({pos:t,x1:e,y1:n,x2:i,y2:s}){return t===be.Left||t===be.Right?[.5*(e+i),n]:[e,.5*(n+s)]}function YA({sourceX:t,sourceY:e,sourcePosition:n=be.Bottom,targetX:i,targetY:s,targetPosition:o=be.Top}){const[l,c]=Uw({pos:n,x1:t,y1:e,x2:i,y2:s}),[f,h]=Uw({pos:o,x1:i,y1:s,x2:t,y2:e}),[p,g,y,v]=gA({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${t},${e} C${l},${c} ${f},${h} ${i},${s}`,p,g,y,v]}function XA(t){return U.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:c,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:k,interactionWidth:A})=>{const[N,O,M]=YA({sourceX:n,sourceY:i,sourcePosition:l,targetX:s,targetY:o,targetPosition:c}),_=t.isInternal?void 0:e;return w.jsx(eu,{id:_,path:N,labelX:O,labelY:M,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:k,interactionWidth:A})})}const MB=XA({isInternal:!1}),FA=XA({isInternal:!0});MB.displayName="SimpleBezierEdge";FA.displayName="SimpleBezierEdgeInternal";function GA(t){return U.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,sourcePosition:v=be.Bottom,targetPosition:b=be.Top,markerEnd:S,markerStart:k,pathOptions:A,interactionWidth:N})=>{const[O,M,_]=E0({sourceX:n,sourceY:i,sourcePosition:v,targetX:s,targetY:o,targetPosition:b,borderRadius:A?.borderRadius,offset:A?.offset,stepPosition:A?.stepPosition}),L=t.isInternal?void 0:e;return w.jsx(eu,{id:L,path:O,labelX:M,labelY:_,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:S,markerStart:k,interactionWidth:N})})}const WA=GA({isInternal:!1}),KA=GA({isInternal:!0});WA.displayName="SmoothStepEdge";KA.displayName="SmoothStepEdgeInternal";function ZA(t){return U.memo(({id:e,...n})=>{const i=t.isInternal?void 0:e;return w.jsx(WA,{...n,id:i,pathOptions:U.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const NB=ZA({isInternal:!1}),JA=ZA({isInternal:!0});NB.displayName="StepEdge";JA.displayName="StepEdgeInternal";function eO(t){return U.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:b,interactionWidth:S})=>{const[k,A,N]=yA({sourceX:n,sourceY:i,targetX:s,targetY:o}),O=t.isInternal?void 0:e;return w.jsx(eu,{id:O,path:k,labelX:A,labelY:N,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:v,markerStart:b,interactionWidth:S})})}const TB=eO({isInternal:!1}),tO=eO({isInternal:!0});TB.displayName="StraightEdge";tO.displayName="StraightEdgeInternal";function nO(t){return U.memo(({id:e,sourceX:n,sourceY:i,targetX:s,targetY:o,sourcePosition:l=be.Bottom,targetPosition:c=be.Top,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:k,pathOptions:A,interactionWidth:N})=>{const[O,M,_]=Jy({sourceX:n,sourceY:i,sourcePosition:l,targetX:s,targetY:o,targetPosition:c,curvature:A?.curvature}),L=t.isInternal?void 0:e;return w.jsx(eu,{id:L,path:O,labelX:M,labelY:_,label:f,labelStyle:h,labelShowBg:p,labelBgStyle:g,labelBgPadding:y,labelBgBorderRadius:v,style:b,markerEnd:S,markerStart:k,interactionWidth:N})})}const DB=nO({isInternal:!1}),iO=nO({isInternal:!0});DB.displayName="BezierEdge";iO.displayName="BezierEdgeInternal";const qw={default:iO,straight:tO,step:JA,smoothstep:KA,simplebezier:FA},Qw={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},RB=(t,e,n)=>n===be.Left?t-e:n===be.Right?t+e:t,LB=(t,e,n)=>n===be.Top?t-e:n===be.Bottom?t+e:t,Yw="react-flow__edgeupdater";function Xw({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:s,onMouseEnter:o,onMouseOut:l,type:c}){return w.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:l,className:Ot([Yw,`${Yw}-${c}`]),cx:RB(e,i,t),cy:LB(n,i,t),r:i,stroke:"transparent",fill:"transparent"})}function _B({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:c,targetPosition:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,setReconnecting:y,setUpdateHover:v}){const b=ut(),S=(M,_)=>{if(M.button!==0)return;const{autoPanOnConnect:L,domNode:R,isValidConnection:X,connectionMode:$,connectionRadius:ne,lib:q,onConnectStart:Q,onConnectEnd:Z,cancelConnection:B,nodeLookup:V,rfId:T,panBy:P,updateConnection:H}=b.getState(),z=_.type==="target",G=(ee,ie)=>{y(!1),g?.(ee,n,_.type,ie)},D=ee=>h?.(n,ee),j=(ee,ie)=>{y(!0),p?.(M,n,_.type),Q?.(ee,ie)};T0.onPointerDown(M.nativeEvent,{autoPanOnConnect:L,connectionMode:$,connectionRadius:ne,domNode:R,handleId:_.id,nodeId:_.nodeId,nodeLookup:V,isTarget:z,edgeUpdaterType:_.type,lib:q,flowId:T,cancelConnection:B,panBy:P,isValidConnection:X,onConnect:D,onConnectStart:j,onConnectEnd:Z,onReconnectEnd:G,updateConnection:H,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},k=M=>S(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),A=M=>S(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>v(!0),O=()=>v(!1);return w.jsxs(w.Fragment,{children:[(t===!0||t==="source")&&w.jsx(Xw,{position:c,centerX:i,centerY:s,radius:e,onMouseDown:k,onMouseEnter:N,onMouseOut:O,type:"source"}),(t===!0||t==="target")&&w.jsx(Xw,{position:f,centerX:o,centerY:l,radius:e,onMouseDown:A,onMouseEnter:N,onMouseOut:O,type:"target"})]})}function BB({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:i,onClick:s,onDoubleClick:o,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,reconnectRadius:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:v,rfId:b,edgeTypes:S,noPanClassName:k,onError:A,disableKeyboardA11y:N}){let O=$e(ke=>ke.edgeLookup.get(t));const M=$e(ke=>ke.defaultEdgeOptions);O=M?{...M,...O}:O;let _=O.type||"default",L=S?.[_]||qw[_];L===void 0&&(A?.("011",Ri.error011(_)),_="default",L=S?.default||qw.default);const R=!!(O.focusable||e&&typeof O.focusable>"u"),X=typeof g<"u"&&(O.reconnectable||n&&typeof O.reconnectable>"u"),$=!!(O.selectable||i&&typeof O.selectable>"u"),ne=U.useRef(null),[q,Q]=U.useState(!1),[Z,B]=U.useState(!1),V=ut(),{zIndex:T,sourceX:P,sourceY:H,targetX:z,targetY:G,sourcePosition:D,targetPosition:j}=$e(U.useCallback(ke=>{const Oe=ke.nodeLookup.get(O.source),Pe=ke.nodeLookup.get(O.target);if(!Oe||!Pe)return{zIndex:O.zIndex,...Qw};const We=AL({id:t,sourceNode:Oe,targetNode:Pe,sourceHandle:O.sourceHandle||null,targetHandle:O.targetHandle||null,connectionMode:ke.connectionMode,onError:A});return{zIndex:yL({selected:O.selected,zIndex:O.zIndex,sourceNode:Oe,targetNode:Pe,elevateOnSelect:ke.elevateEdgesOnSelect,zIndexMode:ke.zIndexMode}),...We||Qw}},[O.source,O.target,O.sourceHandle,O.targetHandle,O.selected,O.zIndex]),ct),ee=U.useMemo(()=>O.markerStart?`url('#${M0(O.markerStart,b)}')`:void 0,[O.markerStart,b]),ie=U.useMemo(()=>O.markerEnd?`url('#${M0(O.markerEnd,b)}')`:void 0,[O.markerEnd,b]);if(O.hidden||P===null||H===null||z===null||G===null)return null;const ce=ke=>{const{addSelectedEdges:Oe,unselectNodesAndEdges:Pe,multiSelectionActive:We}=V.getState();$&&(V.setState({nodesSelectionActive:!1}),O.selected&&We?(Pe({nodes:[],edges:[O]}),ne.current?.blur()):Oe([t])),s&&s(ke,O)},he=o?ke=>{o(ke,{...O})}:void 0,fe=l?ke=>{l(ke,{...O})}:void 0,ue=c?ke=>{c(ke,{...O})}:void 0,ge=f?ke=>{f(ke,{...O})}:void 0,De=h?ke=>{h(ke,{...O})}:void 0,Ne=ke=>{if(!N&&tA.includes(ke.key)&&$){const{unselectNodesAndEdges:Oe,addSelectedEdges:Pe}=V.getState();ke.key==="Escape"?(ne.current?.blur(),Oe({edges:[O]})):Pe([t])}};return w.jsx("svg",{style:{zIndex:T},children:w.jsxs("g",{className:Ot(["react-flow__edge",`react-flow__edge-${_}`,O.className,k,{selected:O.selected,animated:O.animated,inactive:!$&&!s,updating:q,selectable:$}]),onClick:ce,onDoubleClick:he,onContextMenu:fe,onMouseEnter:ue,onMouseMove:ge,onMouseLeave:De,onKeyDown:R?Ne:void 0,tabIndex:R?0:void 0,role:O.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":O.ariaLabel===null?void 0:O.ariaLabel||`Edge from ${O.source} to ${O.target}`,"aria-describedby":R?`${RA}-${b}`:void 0,ref:ne,...O.domAttributes,children:[!Z&&w.jsx(L,{id:t,source:O.source,target:O.target,type:O.type,selected:O.selected,animated:O.animated,selectable:$,deletable:O.deletable??!0,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,sourceX:P,sourceY:H,targetX:z,targetY:G,sourcePosition:D,targetPosition:j,data:O.data,style:O.style,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerStart:ee,markerEnd:ie,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth}),X&&w.jsx(_B,{edge:O,isReconnectable:X,reconnectRadius:p,onReconnect:g,onReconnectStart:y,onReconnectEnd:v,sourceX:P,sourceY:H,targetX:z,targetY:G,sourcePosition:D,targetPosition:j,setUpdateHover:Q,setReconnecting:B})]})})}var zB=U.memo(BB);const PB=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function sO({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:i,noPanClassName:s,onReconnect:o,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:p,reconnectRadius:g,onEdgeDoubleClick:y,onReconnectStart:v,onReconnectEnd:b,disableKeyboardA11y:S}){const{edgesFocusable:k,edgesReconnectable:A,elementsSelectable:N,onError:O}=$e(PB,ct),M=SB(e);return w.jsxs("div",{className:"react-flow__edges",children:[w.jsx(OB,{defaultColor:t,rfId:n}),M.map(_=>w.jsx(zB,{id:_,edgesFocusable:k,edgesReconnectable:A,elementsSelectable:N,noPanClassName:s,onReconnect:o,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:p,reconnectRadius:g,onDoubleClick:y,onReconnectStart:v,onReconnectEnd:b,rfId:n,onError:O,edgeTypes:i,disableKeyboardA11y:S},_))]})}sO.displayName="EdgeRenderer";const jB=U.memo(sO),HB=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function IB({children:t}){const e=$e(HB);return w.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function VB(t){const e=Dd(),n=U.useRef(!1);U.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const $B=t=>t.panZoom?.syncViewport;function UB(t){const e=$e($B),n=ut();return U.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function qB(t){return t.connection.inProgress?{...t.connection,to:Jc(t.connection.to,t.transform)}:{...t.connection}}function QB(t){return qB}function YB(t){const e=QB();return $e(e,ct)}const XB=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function FB({containerStyle:t,style:e,type:n,component:i}){const{nodesConnectable:s,width:o,height:l,isValid:c,inProgress:f}=$e(XB,ct);return!(o&&s&&f)?null:w.jsx("svg",{style:t,width:o,height:l,className:"react-flow__connectionline react-flow__container",children:w.jsx("g",{className:Ot(["react-flow__connection",sA(c)]),children:w.jsx(rO,{style:e,type:n,CustomComponent:i,isValid:c})})})}const rO=({style:t,type:e=Js.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:s,from:o,fromNode:l,fromHandle:c,fromPosition:f,to:h,toNode:p,toHandle:g,toPosition:y,pointer:v}=YB();if(!s)return;if(n)return w.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:l,fromHandle:c,fromX:o.x,fromY:o.y,toX:h.x,toY:h.y,fromPosition:f,toPosition:y,connectionStatus:sA(i),toNode:p,toHandle:g,pointer:v});let b="";const S={sourceX:o.x,sourceY:o.y,sourcePosition:f,targetX:h.x,targetY:h.y,targetPosition:y};switch(e){case Js.Bezier:[b]=Jy(S);break;case Js.SimpleBezier:[b]=YA(S);break;case Js.Step:[b]=E0({...S,borderRadius:0});break;case Js.SmoothStep:[b]=E0(S);break;default:[b]=yA(S)}return w.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:t})};rO.displayName="ConnectionLine";const GB={};function Fw(t=GB){U.useRef(t),ut(),U.useEffect(()=>{},[t])}function WB(){ut(),U.useRef(!1),U.useEffect(()=>{},[])}function oO({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:y,onSelectionEnd:v,connectionLineType:b,connectionLineStyle:S,connectionLineComponent:k,connectionLineContainerStyle:A,selectionKeyCode:N,selectionOnDrag:O,selectionMode:M,multiSelectionKeyCode:_,panActivationKeyCode:L,zoomActivationKeyCode:R,deleteKeyCode:X,onlyRenderVisibleElements:$,elementsSelectable:ne,defaultViewport:q,translateExtent:Q,minZoom:Z,maxZoom:B,preventScrolling:V,defaultMarkerColor:T,zoomOnScroll:P,zoomOnPinch:H,panOnScroll:z,panOnScrollSpeed:G,panOnScrollMode:D,zoomOnDoubleClick:j,panOnDrag:ee,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:he,onPaneMouseLeave:fe,onPaneScroll:ue,onPaneContextMenu:ge,paneClickDistance:De,nodeClickDistance:Ne,onEdgeContextMenu:ke,onEdgeMouseEnter:Oe,onEdgeMouseMove:Pe,onEdgeMouseLeave:We,reconnectRadius:Xe,onReconnect:Lt,onReconnectStart:Wn,onReconnectEnd:wn,noDragClassName:Kn,noWheelClassName:Pi,noPanClassName:gr,disableKeyboardA11y:mr,nodeExtent:Pt,rfId:po,viewport:ji,onViewportChange:bs}){return Fw(t),Fw(e),WB(),VB(n),UB(ji),w.jsx(fB,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:he,onPaneMouseLeave:fe,onPaneContextMenu:ge,onPaneScroll:ue,paneClickDistance:De,deleteKeyCode:X,selectionKeyCode:N,selectionOnDrag:O,selectionMode:M,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:_,panActivationKeyCode:L,zoomActivationKeyCode:R,elementsSelectable:ne,zoomOnScroll:P,zoomOnPinch:H,zoomOnDoubleClick:j,panOnScroll:z,panOnScrollSpeed:G,panOnScrollMode:D,panOnDrag:ee,defaultViewport:q,translateExtent:Q,minZoom:Z,maxZoom:B,onSelectionContextMenu:g,preventScrolling:V,noDragClassName:Kn,noWheelClassName:Pi,noPanClassName:gr,disableKeyboardA11y:mr,onViewportChange:bs,isControlledViewport:!!ji,children:w.jsxs(IB,{children:[w.jsx(jB,{edgeTypes:e,onEdgeClick:s,onEdgeDoubleClick:l,onReconnect:Lt,onReconnectStart:Wn,onReconnectEnd:wn,onlyRenderVisibleElements:$,onEdgeContextMenu:ke,onEdgeMouseEnter:Oe,onEdgeMouseMove:Pe,onEdgeMouseLeave:We,reconnectRadius:Xe,defaultMarkerColor:T,noPanClassName:gr,disableKeyboardA11y:mr,rfId:po}),w.jsx(FB,{style:S,type:b,component:k,containerStyle:A}),w.jsx("div",{className:"react-flow__edgelabel-renderer"}),w.jsx(bB,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:o,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,nodeClickDistance:Ne,onlyRenderVisibleElements:$,noPanClassName:gr,noDragClassName:Kn,disableKeyboardA11y:mr,nodeExtent:Pt,rfId:po}),w.jsx("div",{className:"react-flow__viewport-portal"})]})})}oO.displayName="GraphView";const KB=U.memo(oO),Gw=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f=.5,maxZoom:h=2,nodeOrigin:p,nodeExtent:g,zIndexMode:y="basic"}={})=>{const v=new Map,b=new Map,S=new Map,k=new Map,A=i??e??[],N=n??t??[],O=p??[0,0],M=g??bc;bA(S,k,A);const _=N0(N,v,b,{nodeOrigin:O,nodeExtent:M,zIndexMode:y});let L=[0,0,1];if(l&&s&&o){const R=Kc(v,{filter:q=>!!((q.width||q.initialWidth)&&(q.height||q.initialHeight))}),{x:X,y:$,zoom:ne}=Ky(R,s,o,f,h,c?.padding??.1);L=[X,$,ne]}return{rfId:"1",width:s??0,height:o??0,transform:L,nodes:N,nodesInitialized:_,nodeLookup:v,parentLookup:b,edges:A,edgeLookup:k,connectionLookup:S,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:f,maxZoom:h,translateExtent:bc,nodeExtent:M,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Nl.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:O,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:c,fitViewResolver:null,connection:{...iA},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:fL,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:nA,zIndexMode:y,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},ZB=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g,zIndexMode:y})=>g_((v,b)=>{async function S(){const{nodeLookup:k,panZoom:A,fitViewOptions:N,fitViewResolver:O,width:M,height:_,minZoom:L,maxZoom:R}=b();A&&(await cL({nodes:k,width:M,height:_,panZoom:A,minZoom:L,maxZoom:R},N),O?.resolve(!0),v({fitViewResolver:null}))}return{...Gw({nodes:t,edges:e,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g,defaultNodes:n,defaultEdges:i,zIndexMode:y}),setNodes:k=>{const{nodeLookup:A,parentLookup:N,nodeOrigin:O,elevateNodesOnSelect:M,fitViewQueued:_,zIndexMode:L}=b(),R=N0(k,A,N,{nodeOrigin:O,nodeExtent:g,elevateNodesOnSelect:M,checkEquality:!0,zIndexMode:L});_&&R?(S(),v({nodes:k,nodesInitialized:R,fitViewQueued:!1,fitViewOptions:void 0})):v({nodes:k,nodesInitialized:R})},setEdges:k=>{const{connectionLookup:A,edgeLookup:N}=b();bA(A,N,k),v({edges:k})},setDefaultNodesAndEdges:(k,A)=>{if(k){const{setNodes:N}=b();N(k),v({hasDefaultNodes:!0})}if(A){const{setEdges:N}=b();N(A),v({hasDefaultEdges:!0})}},updateNodeInternals:k=>{const{triggerNodeChanges:A,nodeLookup:N,parentLookup:O,domNode:M,nodeOrigin:_,nodeExtent:L,debug:R,fitViewQueued:X,zIndexMode:$}=b(),{changes:ne,updatedInternals:q}=LL(k,N,O,M,_,L,$);q&&(NL(N,O,{nodeOrigin:_,nodeExtent:L,zIndexMode:$}),X?(S(),v({fitViewQueued:!1,fitViewOptions:void 0})):v({}),ne?.length>0&&(R&&console.log("React Flow: trigger node changes",ne),A?.(ne)))},updateNodePositions:(k,A=!1)=>{const N=[];let O=[];const{nodeLookup:M,triggerNodeChanges:_,connection:L,updateConnection:R,onNodesChangeMiddlewareMap:X}=b();for(const[$,ne]of k){const q=M.get($),Q=!!(q?.expandParent&&q?.parentId&&ne?.position),Z={id:$,type:"position",position:Q?{x:Math.max(0,ne.position.x),y:Math.max(0,ne.position.y)}:ne.position,dragging:A};if(q&&L.inProgress&&L.fromNode.id===q.id){const B=lo(q,L.fromHandle,be.Left,!0);R({...L,from:B})}Q&&q.parentId&&N.push({id:$,parentId:q.parentId,rect:{...ne.internals.positionAbsolute,width:ne.measured.width??0,height:ne.measured.height??0}}),O.push(Z)}if(N.length>0){const{parentLookup:$,nodeOrigin:ne}=b(),q=sx(N,M,$,ne);O.push(...q)}for(const $ of X.values())O=$(O);_(O)},triggerNodeChanges:k=>{const{onNodesChange:A,setNodes:N,nodes:O,hasDefaultNodes:M,debug:_}=b();if(k?.length){if(M){const L=BA(k,O);N(L)}_&&console.log("React Flow: trigger node changes",k),A?.(k)}},triggerEdgeChanges:k=>{const{onEdgesChange:A,setEdges:N,edges:O,hasDefaultEdges:M,debug:_}=b();if(k?.length){if(M){const L=zA(k,O);N(L)}_&&console.log("React Flow: trigger edge changes",k),A?.(k)}},addSelectedNodes:k=>{const{multiSelectionActive:A,edgeLookup:N,nodeLookup:O,triggerNodeChanges:M,triggerEdgeChanges:_}=b();if(A){const L=k.map(R=>$r(R,!0));M(L);return}M(ul(O,new Set([...k]),!0)),_(ul(N))},addSelectedEdges:k=>{const{multiSelectionActive:A,edgeLookup:N,nodeLookup:O,triggerNodeChanges:M,triggerEdgeChanges:_}=b();if(A){const L=k.map(R=>$r(R,!0));_(L);return}_(ul(N,new Set([...k]))),M(ul(O,new Set,!0))},unselectNodesAndEdges:({nodes:k,edges:A}={})=>{const{edges:N,nodes:O,nodeLookup:M,triggerNodeChanges:_,triggerEdgeChanges:L}=b(),R=k||O,X=A||N,$=R.map(q=>{const Q=M.get(q.id);return Q&&(Q.selected=!1),$r(q.id,!1)}),ne=X.map(q=>$r(q.id,!1));_($),L(ne)},setMinZoom:k=>{const{panZoom:A,maxZoom:N}=b();A?.setScaleExtent([k,N]),v({minZoom:k})},setMaxZoom:k=>{const{panZoom:A,minZoom:N}=b();A?.setScaleExtent([N,k]),v({maxZoom:k})},setTranslateExtent:k=>{b().panZoom?.setTranslateExtent(k),v({translateExtent:k})},resetSelectedElements:()=>{const{edges:k,nodes:A,triggerNodeChanges:N,triggerEdgeChanges:O,elementsSelectable:M}=b();if(!M)return;const _=A.reduce((R,X)=>X.selected?[...R,$r(X.id,!1)]:R,[]),L=k.reduce((R,X)=>X.selected?[...R,$r(X.id,!1)]:R,[]);N(_),O(L)},setNodeExtent:k=>{const{nodes:A,nodeLookup:N,parentLookup:O,nodeOrigin:M,elevateNodesOnSelect:_,nodeExtent:L,zIndexMode:R}=b();k[0][0]===L[0][0]&&k[0][1]===L[0][1]&&k[1][0]===L[1][0]&&k[1][1]===L[1][1]||(N0(A,N,O,{nodeOrigin:M,nodeExtent:k,elevateNodesOnSelect:_,checkEquality:!1,zIndexMode:R}),v({nodeExtent:k}))},panBy:k=>{const{transform:A,width:N,height:O,panZoom:M,translateExtent:_}=b();return _L({delta:k,panZoom:M,transform:A,translateExtent:_,width:N,height:O})},setCenter:async(k,A,N)=>{const{width:O,height:M,maxZoom:_,panZoom:L}=b();if(!L)return Promise.resolve(!1);const R=typeof N?.zoom<"u"?N.zoom:_;return await L.setViewport({x:O/2-k*R,y:M/2-A*R,zoom:R},{duration:N?.duration,ease:N?.ease,interpolate:N?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{v({connection:{...iA}})},updateConnection:k=>{v({connection:k})},reset:()=>v({...Gw()})}},Object.is);function lO({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:i,initialWidth:s,initialHeight:o,initialMinZoom:l,initialMaxZoom:c,initialFitViewOptions:f,fitView:h,nodeOrigin:p,nodeExtent:g,zIndexMode:y,children:v}){const[b]=U.useState(()=>ZB({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:s,height:o,fitView:h,minZoom:l,maxZoom:c,fitViewOptions:f,nodeOrigin:p,nodeExtent:g,zIndexMode:y}));return w.jsx(y_,{value:b,children:w.jsx(I_,{children:v})})}function JB({children:t,nodes:e,edges:n,defaultNodes:i,defaultEdges:s,width:o,height:l,fitView:c,fitViewOptions:f,minZoom:h,maxZoom:p,nodeOrigin:g,nodeExtent:y,zIndexMode:v}){return U.useContext(Nd)?w.jsx(w.Fragment,{children:t}):w.jsx(lO,{initialNodes:e,initialEdges:n,defaultNodes:i,defaultEdges:s,initialWidth:o,initialHeight:l,fitView:c,initialFitViewOptions:f,initialMinZoom:h,initialMaxZoom:p,nodeOrigin:g,nodeExtent:y,zIndexMode:v,children:t})}const e6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function t6({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:s,nodeTypes:o,edgeTypes:l,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:g,onMoveEnd:y,onConnect:v,onConnectStart:b,onConnectEnd:S,onClickConnectStart:k,onClickConnectEnd:A,onNodeMouseEnter:N,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:_,onNodeDoubleClick:L,onNodeDragStart:R,onNodeDrag:X,onNodeDragStop:$,onNodesDelete:ne,onEdgesDelete:q,onDelete:Q,onSelectionChange:Z,onSelectionDragStart:B,onSelectionDrag:V,onSelectionDragStop:T,onSelectionContextMenu:P,onSelectionStart:H,onSelectionEnd:z,onBeforeDelete:G,connectionMode:D,connectionLineType:j=Js.Bezier,connectionLineStyle:ee,connectionLineComponent:ie,connectionLineContainerStyle:ce,deleteKeyCode:he="Backspace",selectionKeyCode:fe="Shift",selectionOnDrag:ue=!1,selectionMode:ge=Sc.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Ne=Cc()?"Meta":"Control",zoomActivationKeyCode:ke=Cc()?"Meta":"Control",snapToGrid:Oe,snapGrid:Pe,onlyRenderVisibleElements:We=!1,selectNodesOnDrag:Xe,nodesDraggable:Lt,autoPanOnNodeFocus:Wn,nodesConnectable:wn,nodesFocusable:Kn,nodeOrigin:Pi=LA,edgesFocusable:gr,edgesReconnectable:mr,elementsSelectable:Pt=!0,defaultViewport:po=T_,minZoom:ji=.5,maxZoom:bs=2,translateExtent:yr=bc,preventScrolling:Kd=!0,nodeExtent:go,defaultMarkerColor:Zd="#b1b1b7",zoomOnScroll:Jd=!0,zoomOnPinch:xr=!0,panOnScroll:Zt=!1,panOnScrollSpeed:di=.5,panOnScrollMode:Jt=Jr.Free,zoomOnDoubleClick:ep=!0,panOnDrag:tp=!0,onPaneClick:np,onPaneMouseEnter:mo,onPaneMouseMove:yo,onPaneMouseLeave:xo,onPaneScroll:Hi,onPaneContextMenu:vo,paneClickDistance:vr=1,nodeClickDistance:ip=0,children:au,onReconnect:Gl,onReconnectStart:br,onReconnectEnd:sp,onEdgeContextMenu:cu,onEdgeDoubleClick:uu,onEdgeMouseEnter:fu,onEdgeMouseMove:Wl,onEdgeMouseLeave:Kl,reconnectRadius:hu=10,onNodesChange:du,onEdgesChange:pi,noDragClassName:Et="nodrag",noWheelClassName:Yt="nowheel",noPanClassName:Ii="nopan",fitView:bo,fitViewOptions:pu,connectOnClick:rp,attributionPosition:gu,proOptions:Sr,defaultEdgeOptions:Zl,elevateNodesOnSelect:Ss=!0,elevateEdgesOnSelect:ws=!1,disableKeyboardA11y:Cs=!1,autoPanOnConnect:ks,autoPanOnNodeDrag:vt,autoPanSpeed:mu,connectionRadius:yu,isValidConnection:Vi,onError:As,style:op,id:Jl,nodeDragThreshold:xu,connectionDragThreshold:lp,viewport:So,onViewportChange:wo,width:Zn,height:on,colorMode:vu="light",debug:ap,onScroll:Co,ariaLabelConfig:bu,zIndexMode:wr="basic",...cp},ln){const Cr=Jl||"1",Su=__(vu),ea=U.useCallback($i=>{$i.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Co?.($i)},[Co]);return w.jsx("div",{"data-testid":"rf__wrapper",...cp,onScroll:ea,style:{...op,...e6},ref:ln,className:Ot(["react-flow",s,Su]),id:Jl,role:"application",children:w.jsxs(JB,{nodes:t,edges:e,width:Zn,height:on,fitView:bo,fitViewOptions:pu,minZoom:ji,maxZoom:bs,nodeOrigin:Pi,nodeExtent:go,zIndexMode:wr,children:[w.jsx(KB,{onInit:h,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:N,onNodeMouseMove:O,onNodeMouseLeave:M,onNodeContextMenu:_,onNodeDoubleClick:L,nodeTypes:o,edgeTypes:l,connectionLineType:j,connectionLineStyle:ee,connectionLineComponent:ie,connectionLineContainerStyle:ce,selectionKeyCode:fe,selectionOnDrag:ue,selectionMode:ge,deleteKeyCode:he,multiSelectionKeyCode:Ne,panActivationKeyCode:De,zoomActivationKeyCode:ke,onlyRenderVisibleElements:We,defaultViewport:po,translateExtent:yr,minZoom:ji,maxZoom:bs,preventScrolling:Kd,zoomOnScroll:Jd,zoomOnPinch:xr,zoomOnDoubleClick:ep,panOnScroll:Zt,panOnScrollSpeed:di,panOnScrollMode:Jt,panOnDrag:tp,onPaneClick:np,onPaneMouseEnter:mo,onPaneMouseMove:yo,onPaneMouseLeave:xo,onPaneScroll:Hi,onPaneContextMenu:vo,paneClickDistance:vr,nodeClickDistance:ip,onSelectionContextMenu:P,onSelectionStart:H,onSelectionEnd:z,onReconnect:Gl,onReconnectStart:br,onReconnectEnd:sp,onEdgeContextMenu:cu,onEdgeDoubleClick:uu,onEdgeMouseEnter:fu,onEdgeMouseMove:Wl,onEdgeMouseLeave:Kl,reconnectRadius:hu,defaultMarkerColor:Zd,noDragClassName:Et,noWheelClassName:Yt,noPanClassName:Ii,rfId:Cr,disableKeyboardA11y:Cs,nodeExtent:go,viewport:So,onViewportChange:wo}),w.jsx(L_,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:v,onConnectStart:b,onConnectEnd:S,onClickConnectStart:k,onClickConnectEnd:A,nodesDraggable:Lt,autoPanOnNodeFocus:Wn,nodesConnectable:wn,nodesFocusable:Kn,edgesFocusable:gr,edgesReconnectable:mr,elementsSelectable:Pt,elevateNodesOnSelect:Ss,elevateEdgesOnSelect:ws,minZoom:ji,maxZoom:bs,nodeExtent:go,onNodesChange:du,onEdgesChange:pi,snapToGrid:Oe,snapGrid:Pe,connectionMode:D,translateExtent:yr,connectOnClick:rp,defaultEdgeOptions:Zl,fitView:bo,fitViewOptions:pu,onNodesDelete:ne,onEdgesDelete:q,onDelete:Q,onNodeDragStart:R,onNodeDrag:X,onNodeDragStop:$,onSelectionDrag:V,onSelectionDragStart:B,onSelectionDragStop:T,onMove:p,onMoveStart:g,onMoveEnd:y,noPanClassName:Ii,nodeOrigin:Pi,rfId:Cr,autoPanOnConnect:ks,autoPanOnNodeDrag:vt,autoPanSpeed:mu,onError:As,connectionRadius:yu,isValidConnection:Vi,selectNodesOnDrag:Xe,nodeDragThreshold:xu,connectionDragThreshold:lp,onBeforeDelete:G,debug:ap,ariaLabelConfig:bu,zIndexMode:wr}),w.jsx(N_,{onSelectionChange:Z}),au,w.jsx(k_,{proOptions:Sr,position:gu}),w.jsx(C_,{rfId:Cr,disableKeyboardA11y:Cs})]})})}var n6=PA(t6);const i6=t=>t.domNode?.querySelector(".react-flow__edgelabel-renderer");function s6({children:t}){const e=$e(i6);return e?m_.createPortal(t,e):null}function r6(t){const[e,n]=U.useState(t),i=U.useCallback(s=>n(o=>BA(s,o)),[]);return[e,n,i]}function o6(t){const[e,n]=U.useState(t),i=U.useCallback(s=>n(o=>zA(s,o)),[]);return[e,n,i]}function l6({dimensions:t,lineWidth:e,variant:n,className:i}){return w.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Ot(["react-flow__background-pattern",n,i])})}function a6({radius:t,className:e}){return w.jsx("circle",{cx:t,cy:t,r:t,className:Ot(["react-flow__background-pattern","dots",e])})}var hs;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(hs||(hs={}));const c6={[hs.Dots]:1,[hs.Lines]:1,[hs.Cross]:6},u6=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function aO({id:t,variant:e=hs.Dots,gap:n=20,size:i,lineWidth:s=1,offset:o=0,color:l,bgColor:c,style:f,className:h,patternClassName:p}){const g=U.useRef(null),{transform:y,patternId:v}=$e(u6,ct),b=i||c6[e],S=e===hs.Dots,k=e===hs.Cross,A=Array.isArray(n)?n:[n,n],N=[A[0]*y[2]||1,A[1]*y[2]||1],O=b*y[2],M=Array.isArray(o)?o:[o,o],_=k?[O,O]:N,L=[M[0]*y[2]||1+_[0]/2,M[1]*y[2]||1+_[1]/2],R=`${v}${t||""}`;return w.jsxs("svg",{className:Ot(["react-flow__background",h]),style:{...f,...Rd,"--xy-background-color-props":c,"--xy-background-pattern-color-props":l},ref:g,"data-testid":"rf__background",children:[w.jsx("pattern",{id:R,x:y[0]%N[0],y:y[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${L[0]},-${L[1]})`,children:S?w.jsx(a6,{radius:O/2,className:p}):w.jsx(l6,{dimensions:_,lineWidth:s,variant:e,className:p})}),w.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}aO.displayName="Background";const f6=U.memo(aO);function h6(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:w.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function d6(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:w.jsx("path",{d:"M0 0h32v4.2H0z"})})}function p6(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:w.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function g6(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:w.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function m6(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:w.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function If({children:t,className:e,...n}){return w.jsx("button",{type:"button",className:Ot(["react-flow__controls-button",e]),...n,children:t})}const y6=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function cO({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:l,onFitView:c,onInteractiveChange:f,className:h,children:p,position:g="bottom-left",orientation:y="vertical","aria-label":v}){const b=ut(),{isInteractive:S,minZoomReached:k,maxZoomReached:A,ariaLabelConfig:N}=$e(y6,ct),{zoomIn:O,zoomOut:M,fitView:_}=Dd(),L=()=>{O(),o?.()},R=()=>{M(),l?.()},X=()=>{_(s),c?.()},$=()=>{b.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),f?.(!S)},ne=y==="horizontal"?"horizontal":"vertical";return w.jsxs(Td,{className:Ot(["react-flow__controls",ne,h]),position:g,style:t,"data-testid":"rf__controls","aria-label":v??N["controls.ariaLabel"],children:[e&&w.jsxs(w.Fragment,{children:[w.jsx(If,{onClick:L,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:A,children:w.jsx(h6,{})}),w.jsx(If,{onClick:R,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:k,children:w.jsx(d6,{})})]}),n&&w.jsx(If,{className:"react-flow__controls-fitview",onClick:X,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:w.jsx(p6,{})}),i&&w.jsx(If,{className:"react-flow__controls-interactive",onClick:$,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?w.jsx(m6,{}):w.jsx(g6,{})}),p]})}cO.displayName="Controls";const x6=U.memo(cO);function v6({id:t,x:e,y:n,width:i,height:s,style:o,color:l,strokeColor:c,strokeWidth:f,className:h,borderRadius:p,shapeRendering:g,selected:y,onClick:v}){const{background:b,backgroundColor:S}=o||{},k=l||b||S;return w.jsx("rect",{className:Ot(["react-flow__minimap-node",{selected:y},h]),x:e,y:n,rx:p,ry:p,width:i,height:s,style:{fill:k,stroke:c,strokeWidth:f},shapeRendering:g,onClick:v?A=>v(A,t):void 0})}const b6=U.memo(v6),S6=t=>t.nodes.map(e=>e.id),Rm=t=>t instanceof Function?t:()=>t;function w6({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:o=b6,onClick:l}){const c=$e(S6,ct),f=Rm(e),h=Rm(t),p=Rm(n),g=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return w.jsx(w.Fragment,{children:c.map(y=>w.jsx(k6,{id:y,nodeColorFunc:f,nodeStrokeColorFunc:h,nodeClassNameFunc:p,nodeBorderRadius:i,nodeStrokeWidth:s,NodeComponent:o,onClick:l,shapeRendering:g},y))})}function C6({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:l,NodeComponent:c,onClick:f}){const{node:h,x:p,y:g,width:y,height:v}=$e(b=>{const{internals:S}=b.nodeLookup.get(t),k=S.userNode,{x:A,y:N}=S.positionAbsolute,{width:O,height:M}=vs(k);return{node:k,x:A,y:N,width:O,height:M}},ct);return!h||h.hidden||!uA(h)?null:w.jsx(c,{x:p,y:g,width:y,height:v,style:h.style,selected:!!h.selected,className:i(h),color:e(h),borderRadius:s,strokeColor:n(h),strokeWidth:o,shapeRendering:l,onClick:f,id:h.id})}const k6=U.memo(C6);var A6=U.memo(w6);const O6=200,E6=150,M6=t=>!t.hidden,N6=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?cA(Kc(t.nodeLookup,{filter:M6}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},T6="react-flow__minimap-desc";function uO({style:t,className:e,nodeStrokeColor:n,nodeColor:i,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:l,nodeComponent:c,bgColor:f,maskColor:h,maskStrokeColor:p,maskStrokeWidth:g,position:y="bottom-right",onClick:v,onNodeClick:b,pannable:S=!1,zoomable:k=!1,ariaLabel:A,inversePan:N,zoomStep:O=1,offsetScale:M=5}){const _=ut(),L=U.useRef(null),{boundingRect:R,viewBB:X,rfId:$,panZoom:ne,translateExtent:q,flowWidth:Q,flowHeight:Z,ariaLabelConfig:B}=$e(N6,ct),V=t?.width??O6,T=t?.height??E6,P=R.width/V,H=R.height/T,z=Math.max(P,H),G=z*V,D=z*T,j=M*z,ee=R.x-(G-R.width)/2-j,ie=R.y-(D-R.height)/2-j,ce=G+j*2,he=D+j*2,fe=`${T6}-${$}`,ue=U.useRef(0),ge=U.useRef();ue.current=z,U.useEffect(()=>{if(L.current&&ne)return ge.current=UL({domNode:L.current,panZoom:ne,getTransform:()=>_.getState().transform,getViewScale:()=>ue.current}),()=>{ge.current?.destroy()}},[ne]),U.useEffect(()=>{ge.current?.update({translateExtent:q,width:Q,height:Z,inversePan:N,pannable:S,zoomStep:O,zoomable:k})},[S,k,N,O,q,Q,Z]);const De=v?Oe=>{const[Pe,We]=ge.current?.pointer(Oe)||[0,0];v(Oe,{x:Pe,y:We})}:void 0,Ne=b?U.useCallback((Oe,Pe)=>{const We=_.getState().nodeLookup.get(Pe).internals.userNode;b(Oe,We)},[]):void 0,ke=A??B["minimap.ariaLabel"];return w.jsx(Td,{position:y,style:{...t,"--xy-minimap-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-background-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof g=="number"?g*z:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:Ot(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:w.jsxs("svg",{width:V,height:T,viewBox:`${ee} ${ie} ${ce} ${he}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":fe,ref:L,onClick:De,children:[ke&&w.jsx("title",{id:fe,children:ke}),w.jsx(A6,{onClick:Ne,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:c}),w.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-j},${ie-j}h${ce+j*2}v${he+j*2}h${-ce-j*2}z
        M${X.x},${X.y}h${X.width}v${X.height}h${-X.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}uO.displayName="MiniMap";U.memo(uO);const D6=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,R6={[Ll.Line]:"right",[Ll.Handle]:"bottom-right"};function L6({nodeId:t,position:e,variant:n=Ll.Handle,className:i,style:s=void 0,children:o,color:l,minWidth:c=10,minHeight:f=10,maxWidth:h=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:g=!1,resizeDirection:y,autoScale:v=!0,shouldResize:b,onResizeStart:S,onResize:k,onResizeEnd:A}){const N=VA(),O=typeof t=="string"?t:N,M=ut(),_=U.useRef(null),L=n===Ll.Handle,R=$e(U.useCallback(D6(L&&v),[L,v]),ct),X=U.useRef(null),$=e??R6[n];U.useEffect(()=>{if(!(!_.current||!O))return X.current||(X.current=i_({domNode:_.current,nodeId:O,getStoreItems:()=>{const{nodeLookup:q,transform:Q,snapGrid:Z,snapToGrid:B,nodeOrigin:V,domNode:T}=M.getState();return{nodeLookup:q,transform:Q,snapGrid:Z,snapToGrid:B,nodeOrigin:V,paneDomNode:T}},onChange:(q,Q)=>{const{triggerNodeChanges:Z,nodeLookup:B,parentLookup:V,nodeOrigin:T}=M.getState(),P=[],H={x:q.x,y:q.y},z=B.get(O);if(z&&z.expandParent&&z.parentId){const G=z.origin??T,D=q.width??z.measured.width??0,j=q.height??z.measured.height??0,ee={id:z.id,parentId:z.parentId,rect:{width:D,height:j,...fA({x:q.x??z.position.x,y:q.y??z.position.y},{width:D,height:j},z.parentId,B,G)}},ie=sx([ee],B,V,T);P.push(...ie),H.x=q.x?Math.max(G[0]*D,q.x):void 0,H.y=q.y?Math.max(G[1]*j,q.y):void 0}if(H.x!==void 0&&H.y!==void 0){const G={id:O,type:"position",position:{...H}};P.push(G)}if(q.width!==void 0&&q.height!==void 0){const D={id:O,type:"dimensions",resizing:!0,setAttributes:y?y==="horizontal"?"width":"height":!0,dimensions:{width:q.width,height:q.height}};P.push(D)}for(const G of Q){const D={...G,type:"position"};P.push(D)}Z(P)},onEnd:({width:q,height:Q})=>{const Z={id:O,type:"dimensions",resizing:!1,dimensions:{width:q,height:Q}};M.getState().triggerNodeChanges([Z])}})),X.current.update({controlPosition:$,boundaries:{minWidth:c,minHeight:f,maxWidth:h,maxHeight:p},keepAspectRatio:g,resizeDirection:y,onResizeStart:S,onResize:k,onResizeEnd:A,shouldResize:b}),()=>{X.current?.destroy()}},[$,c,f,h,p,g,S,k,A,b]);const ne=$.split("-");return w.jsx("div",{className:Ot(["react-flow__resize-control","nodrag",...ne,n,i]),ref:_,style:{...s,scale:R,...l&&{[L?"backgroundColor":"borderColor"]:l}},children:o})}U.memo(L6);function R0(){return R0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R0.apply(null,arguments)}function _6(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}let L0=[],fO=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?fO:L0).push(n=n+t[e])})();function B6(t){if(t<768)return!1;for(let e=0,n=L0.length;;){let i=e+n>>1;if(t<L0[i])n=i;else if(t>=fO[i])e=i+1;else return!0;if(e==n)return!1}}function Ww(t){return t>=127462&&t<=127487}const Kw=8205;function z6(t,e,n=!0,i=!0){return(n?hO:P6)(t,e,i)}function hO(t,e,n){if(e==t.length)return e;e&&dO(t.charCodeAt(e))&&pO(t.charCodeAt(e-1))&&e--;let i=Lm(t,e);for(e+=Zw(i);e<t.length;){let s=Lm(t,e);if(i==Kw||s==Kw||n&&B6(s))e+=Zw(s),i=s;else if(Ww(s)){let o=0,l=e-2;for(;l>=0&&Ww(Lm(t,l));)o++,l-=2;if(o%2==0)break;e+=2}else break}return e}function P6(t,e,n){for(;e>0;){let i=hO(t,e-2,n);if(i<e)return i;e--}return 0}function Lm(t,e){let n=t.charCodeAt(e);if(!pO(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return dO(i)?(n-55296<<10)+(i-56320)+65536:n}function dO(t){return t>=56320&&t<57344}function pO(t){return t>=55296&&t<56320}function Zw(t){return t<65536?1:2}class Qe{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=_l(this,e,n);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(n,this.length,s,1),ki.from(s,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=_l(this,e,n);let i=[];return this.decompose(e,n,i,0),ki.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new oc(this),o=new oc(e);for(let l=n,c=n;;){if(s.next(l),o.next(l),l=0,s.lineBreak!=o.lineBreak||s.done!=o.done||s.value!=o.value)return!1;if(c+=s.value.length,s.done||c>=i)return!0}}iter(e=1){return new oc(this,e)}iterRange(e,n=this.length){return new gO(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new mO(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Qe.empty:e.length<=32?new mt(e):ki.from(mt.split(e,[]))}}class mt extends Qe{constructor(e,n=j6(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,s){for(let o=0;;o++){let l=this.text[o],c=s+l.length;if((n?i:c)>=e)return new H6(s,c,i,l);s=c+1,i++}}decompose(e,n,i,s){let o=e<=0&&n>=this.length?this:new mt(Jw(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let l=i.pop(),c=yh(o.text,l.text.slice(),0,o.length);if(c.length<=32)i.push(new mt(c,l.length+o.length));else{let f=c.length>>1;i.push(new mt(c.slice(0,f)),new mt(c.slice(f)))}}else i.push(o)}replace(e,n,i){if(!(i instanceof mt))return super.replace(e,n,i);[e,n]=_l(this,e,n);let s=yh(this.text,yh(i.text,Jw(this.text,0,e)),n),o=this.length+i.length-(n-e);return s.length<=32?new mt(s,o):ki.from(mt.split(s,[]),o)}sliceString(e,n=this.length,i=`
`){[e,n]=_l(this,e,n);let s="";for(let o=0,l=0;o<=n&&l<this.text.length;l++){let c=this.text[l],f=o+c.length;o>e&&l&&(s+=i),e<f&&n>o&&(s+=c.slice(Math.max(0,e-o),n-o)),o=f+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],s=-1;for(let o of e)i.push(o),s+=o.length+1,i.length==32&&(n.push(new mt(i,s)),i=[],s=-1);return s>-1&&n.push(new mt(i,s)),n}}class ki extends Qe{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,s){for(let o=0;;o++){let l=this.children[o],c=s+l.length,f=i+l.lines-1;if((n?f:c)>=e)return l.lineInner(e,n,i,s);s=c+1,i=f+1}}decompose(e,n,i,s){for(let o=0,l=0;l<=n&&o<this.children.length;o++){let c=this.children[o],f=l+c.length;if(e<=f&&n>=l){let h=s&((l<=e?1:0)|(f>=n?2:0));l>=e&&f<=n&&!h?i.push(c):c.decompose(e-l,n-l,i,h)}l=f+1}}replace(e,n,i){if([e,n]=_l(this,e,n),i.lines<this.lines)for(let s=0,o=0;s<this.children.length;s++){let l=this.children[s],c=o+l.length;if(e>=o&&n<=c){let f=l.replace(e-o,n-o,i),h=this.lines-l.lines+f.lines;if(f.lines<h>>4&&f.lines>h>>6){let p=this.children.slice();return p[s]=f,new ki(p,this.length-(n-e)+i.length)}return super.replace(o,c,f)}o=c+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=_l(this,e,n);let s="";for(let o=0,l=0;o<this.children.length&&l<=n;o++){let c=this.children[o],f=l+c.length;l>e&&o&&(s+=i),e<f&&n>l&&(s+=c.sliceString(e-l,n-l,i)),l=f+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof ki))return 0;let i=0,[s,o,l,c]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,o+=n){if(s==l||o==c)return i;let f=this.children[s],h=e.children[o];if(f!=h)return i+f.scanIdentical(h,n);i+=f.length+1}}static from(e,n=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let v of e)i+=v.lines;if(i<32){let v=[];for(let b of e)b.flatten(v);return new mt(v,n)}let s=Math.max(32,i>>5),o=s<<1,l=s>>1,c=[],f=0,h=-1,p=[];function g(v){let b;if(v.lines>o&&v instanceof ki)for(let S of v.children)g(S);else v.lines>l&&(f>l||!f)?(y(),c.push(v)):v instanceof mt&&f&&(b=p[p.length-1])instanceof mt&&v.lines+b.lines<=32?(f+=v.lines,h+=v.length+1,p[p.length-1]=new mt(b.text.concat(v.text),b.length+1+v.length)):(f+v.lines>s&&y(),f+=v.lines,h+=v.length+1,p.push(v))}function y(){f!=0&&(c.push(p.length==1?p[0]:ki.from(p,h)),h=-1,f=p.length=0)}for(let v of e)g(v);return y(),c.length==1?c[0]:new ki(c,n)}}Qe.empty=new mt([""],0);function j6(t){let e=-1;for(let n of t)e+=n.length+1;return e}function yh(t,e,n=0,i=1e9){for(let s=0,o=0,l=!0;o<t.length&&s<=i;o++){let c=t[o],f=s+c.length;f>=n&&(f>i&&(c=c.slice(0,i-s)),s<n&&(c=c.slice(n-s)),l?(e[e.length-1]+=c,l=!1):e.push(c)),s=f+1}return e}function Jw(t,e,n){return yh(t,[""],e,n)}class oc{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof mt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],o=this.offsets[i],l=o>>1,c=s instanceof mt?s.text.length:s.children.length;if(l==(n>0?c:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof mt){let f=s.text[l+(n<0?-1:0)];if(this.offsets[i]+=n,f.length>Math.max(0,e))return this.value=e==0?f:n>0?f.slice(e):f.slice(0,f.length-e),this;e-=f.length}else{let f=s.children[l+(n<0?-1:0)];e>f.length?(e-=f.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(f),this.offsets.push(n>0?1:(f instanceof mt?f.text.length:f.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class gO{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new oc(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=i?s:n<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class mO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Qe.prototype[Symbol.iterator]=function(){return this.iter()},oc.prototype[Symbol.iterator]=gO.prototype[Symbol.iterator]=mO.prototype[Symbol.iterator]=function(){return this});class H6{constructor(e,n,i,s){this.from=e,this.to=n,this.number=i,this.text=s}get length(){return this.to-this.from}}function _l(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Dt(t,e,n=!0,i=!0){return z6(t,e,n,i)}function I6(t){return t>=56320&&t<57344}function V6(t){return t>=55296&&t<56320}function pn(t,e){let n=t.charCodeAt(e);if(!V6(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return I6(i)?(n-55296<<10)+(i-56320)+65536:n}function ox(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Ai(t){return t<65536?1:2}const _0=/\r\n?|\n/;var nn=(function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t})(nn||(nn={}));class Ti{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,s=0;n<this.sections.length;){let o=this.sections[n++],l=this.sections[n++];l<0?(e(i,s,o),s+=o):s+=l,i+=o}}iterChangedRanges(e,n=!1){B0(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];s<0?e.push(i,s):e.push(s,i)}return new Ti(e)}composeDesc(e){return this.empty?e:e.empty?this:yO(this,e)}mapDesc(e,n=!1){return e.empty?this:z0(this,e,n)}mapPos(e,n=-1,i=nn.Simple){let s=0,o=0;for(let l=0;l<this.sections.length;){let c=this.sections[l++],f=this.sections[l++],h=s+c;if(f<0){if(h>e)return o+(e-s);o+=c}else{if(i!=nn.Simple&&h>=e&&(i==nn.TrackDel&&s<e&&h>e||i==nn.TrackBefore&&s<e||i==nn.TrackAfter&&h>e))return null;if(h>e||h==e&&n<0&&!c)return e==s||n<0?o:o+f;o+=f}s=h}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return o}touchesRange(e,n=e){for(let i=0,s=0;i<this.sections.length&&s<=n;){let o=this.sections[i++],l=this.sections[i++],c=s+o;if(l>=0&&s<=n&&c>=e)return s<e&&c>n?"cover":!0;s=c}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ti(e)}static create(e){return new Ti(e)}}class Nt extends Ti{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return B0(this,(n,i,s,o,l)=>e=e.replace(s,s+(i-n),l),!1),e}mapDesc(e,n=!1){return z0(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let s=0,o=0;s<n.length;s+=2){let l=n[s],c=n[s+1];if(c>=0){n[s]=c,n[s+1]=l;let f=s>>1;for(;i.length<f;)i.push(Qe.empty);i.push(l?e.slice(o,o+l):Qe.empty)}o+=l}return new Nt(n,i)}compose(e){return this.empty?e:e.empty?this:yO(this,e,!0)}map(e,n=!1){return e.empty?this:z0(this,e,n,!0)}iterChanges(e,n=!1){B0(this,e,n)}get desc(){return Ti.create(this.sections)}filter(e){let n=[],i=[],s=[],o=new Ac(this);e:for(let l=0,c=0;;){let f=l==e.length?1e9:e[l++];for(;c<f||c==f&&o.len==0;){if(o.done)break e;let p=Math.min(o.len,f-c);Ft(s,p,-1);let g=o.ins==-1?-1:o.off==0?o.ins:0;Ft(n,p,g),g>0&&tr(i,n,o.text),o.forward(p),c+=p}let h=e[l++];for(;c<h;){if(o.done)break e;let p=Math.min(o.len,h-c);Ft(n,p,-1),Ft(s,p,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(p),c+=p}}return{changes:new Nt(n,i),filtered:Ti.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],s=this.sections[n+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let s=[],o=[],l=0,c=null;function f(p=!1){if(!p&&!s.length)return;l<n&&Ft(s,n-l,-1);let g=new Nt(s,o);c=c?c.compose(g.map(c)):g,s=[],o=[],l=0}function h(p){if(Array.isArray(p))for(let g of p)h(g);else if(p instanceof Nt){if(p.length!=n)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${n})`);f(),c=c?c.compose(p.map(c)):p}else{let{from:g,to:y=g,insert:v}=p;if(g>y||g<0||y>n)throw new RangeError(`Invalid change range ${g} to ${y} (in doc of length ${n})`);let b=v?typeof v=="string"?Qe.of(v.split(i||_0)):v:Qe.empty,S=b.length;if(g==y&&S==0)return;g<l&&f(),g>l&&Ft(s,g-l,-1),Ft(s,y-g,S),tr(o,s,b),l=y}}return h(e),f(!c),c}static empty(e){return new Nt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let s=0;s<e.length;s++){let o=e[s];if(typeof o=="number")n.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((l,c)=>c&&typeof l!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)n.push(o[0],0);else{for(;i.length<s;)i.push(Qe.empty);i[s]=Qe.of(o.slice(1)),n.push(o[0],i[s].length)}}}return new Nt(n,i)}static createSet(e,n){return new Nt(e,n)}}function Ft(t,e,n,i=!1){if(e==0&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=n:i?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function tr(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Qe.empty);t.push(n)}}function B0(t,e,n){let i=t.inserted;for(let s=0,o=0,l=0;l<t.sections.length;){let c=t.sections[l++],f=t.sections[l++];if(f<0)s+=c,o+=c;else{let h=s,p=o,g=Qe.empty;for(;h+=c,p+=f,f&&i&&(g=g.append(i[l-2>>1])),!(n||l==t.sections.length||t.sections[l+1]<0);)c=t.sections[l++],f=t.sections[l++];e(s,h,o,p,g),s=h,o=p}}}function z0(t,e,n,i=!1){let s=[],o=i?[]:null,l=new Ac(t),c=new Ac(e);for(let f=-1;;){if(l.done&&c.len||c.done&&l.len)throw new Error("Mismatched change set lengths");if(l.ins==-1&&c.ins==-1){let h=Math.min(l.len,c.len);Ft(s,h,-1),l.forward(h),c.forward(h)}else if(c.ins>=0&&(l.ins<0||f==l.i||l.off==0&&(c.len<l.len||c.len==l.len&&!n))){let h=c.len;for(Ft(s,c.ins,-1);h;){let p=Math.min(l.len,h);l.ins>=0&&f<l.i&&l.len<=p&&(Ft(s,0,l.ins),o&&tr(o,s,l.text),f=l.i),l.forward(p),h-=p}c.next()}else if(l.ins>=0){let h=0,p=l.len;for(;p;)if(c.ins==-1){let g=Math.min(p,c.len);h+=g,p-=g,c.forward(g)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;Ft(s,h,f<l.i?l.ins:0),o&&f<l.i&&tr(o,s,l.text),f=l.i,l.forward(l.len-p)}else{if(l.done&&c.done)return o?Nt.createSet(s,o):Ti.create(s);throw new Error("Mismatched change set lengths")}}}function yO(t,e,n=!1){let i=[],s=n?[]:null,o=new Ac(t),l=new Ac(e);for(let c=!1;;){if(o.done&&l.done)return s?Nt.createSet(i,s):Ti.create(i);if(o.ins==0)Ft(i,o.len,0,c),o.next();else if(l.len==0&&!l.done)Ft(i,0,l.ins,c),s&&tr(s,i,l.text),l.next();else{if(o.done||l.done)throw new Error("Mismatched change set lengths");{let f=Math.min(o.len2,l.len),h=i.length;if(o.ins==-1){let p=l.ins==-1?-1:l.off?0:l.ins;Ft(i,f,p,c),s&&p&&tr(s,i,l.text)}else l.ins==-1?(Ft(i,o.off?0:o.len,f,c),s&&tr(s,i,o.textBit(f))):(Ft(i,o.off?0:o.len,l.off?0:l.ins,c),s&&!l.off&&tr(s,i,l.text));c=(o.ins>f||l.ins>=0&&l.len>f)&&(c||i.length>h),o.forward2(f),l.forward(f)}}}}class Ac{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Qe.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Qe.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Fr{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new Fr(i,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return ae.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return ae.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ae.range(e.anchor,e.head)}static create(e,n,i){return new Fr(e,n,i)}}class ae{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:ae.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ae([this.main],0)}addRange(e,n=!0){return ae.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,ae.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ae(e.ranges.map(n=>Fr.fromJSON(n)),e.main)}static single(e,n=e){return new ae([ae.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let o=e[s];if(o.empty?o.from<=i:o.from<i)return ae.normalized(e.slice(),n);i=o.to}return new ae(e,n)}static cursor(e,n=0,i,s){return Fr.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,n,i,s){let o=(i??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?Fr.create(n,e,48|o):Fr.create(e,n,(n>e?8:0)|o)}static normalized(e,n=0){let i=e[n];e.sort((s,o)=>s.from-o.from),n=e.indexOf(i);for(let s=1;s<e.length;s++){let o=e[s],l=e[s-1];if(o.empty?o.from<=l.to:o.from<l.to){let c=l.from,f=Math.max(o.to,l.to);s<=n&&n--,e.splice(--s,2,o.anchor>o.head?ae.range(f,c):ae.range(c,f))}}return new ae(e,n)}}function xO(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let lx=0;class ye{constructor(e,n,i,s,o){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=s,this.id=lx++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}get reader(){return this}static define(e={}){return new ye(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:ax),!!e.static,e.enables)}of(e){return new xh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new xh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new xh(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function ax(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class xh{constructor(e,n,i,s){this.dependencies=e,this.facet=n,this.type=i,this.value=s,this.id=lx++}dynamicSlot(e){var n;let i=this.value,s=this.facet.compareInput,o=this.id,l=e[o]>>1,c=this.type==2,f=!1,h=!1,p=[];for(let g of this.dependencies)g=="doc"?f=!0:g=="selection"?h=!0:(((n=e[g.id])!==null&&n!==void 0?n:1)&1)==0&&p.push(e[g.id]);return{create(g){return g.values[l]=i(g),1},update(g,y){if(f&&y.docChanged||h&&(y.docChanged||y.selection)||P0(g,p)){let v=i(g);if(c?!e2(v,g.values[l],s):!s(v,g.values[l]))return g.values[l]=v,1}return 0},reconfigure:(g,y)=>{let v,b=y.config.address[o];if(b!=null){let S=jh(y,b);if(this.dependencies.every(k=>k instanceof ye?y.facet(k)===g.facet(k):k instanceof zt?y.field(k,!1)==g.field(k,!1):!0)||(c?e2(v=i(g),S,s):s(v=i(g),S)))return g.values[l]=S,0}else v=i(g);return g.values[l]=v,1}}}}function e2(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function P0(t,e){let n=!1;for(let i of e)lc(t,i)&1&&(n=!0);return n}function $6(t,e,n){let i=n.map(f=>t[f.id]),s=n.map(f=>f.type),o=i.filter(f=>!(f&1)),l=t[e.id]>>1;function c(f){let h=[];for(let p=0;p<i.length;p++){let g=jh(f,i[p]);if(s[p]==2)for(let y of g)h.push(y);else h.push(g)}return e.combine(h)}return{create(f){for(let h of i)lc(f,h);return f.values[l]=c(f),1},update(f,h){if(!P0(f,o))return 0;let p=c(f);return e.compare(p,f.values[l])?0:(f.values[l]=p,1)},reconfigure(f,h){let p=P0(f,i),g=h.config.facets[e.id],y=h.facet(e);if(g&&!p&&ax(n,g))return f.values[l]=y,0;let v=c(f);return e.compare(v,y)?(f.values[l]=y,0):(f.values[l]=v,1)}}}const Vf=ye.define({static:!0});class zt{constructor(e,n,i,s,o){this.id=e,this.createF=n,this.updateF=i,this.compareF=s,this.spec=o,this.provides=void 0}static define(e){let n=new zt(lx++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Vf).find(i=>i.field==this);return(n?.create||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,s)=>{let o=i.values[n],l=this.updateF(o,s);return this.compareF(o,l)?0:(i.values[n]=l,1)},reconfigure:(i,s)=>{let o=i.facet(Vf),l=s.facet(Vf),c;return(c=o.find(f=>f.field==this))&&c!=l.find(f=>f.field==this)?(i.values[n]=c.create(i),1):s.config.address[this.id]!=null?(i.values[n]=s.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,Vf.of({field:this,create:e})]}get extension(){return this}}const qr={lowest:4,low:3,default:2,high:1,highest:0};function Ya(t){return e=>new vO(e,t)}const ho={highest:Ya(qr.highest),high:Ya(qr.high),default:Ya(qr.default),low:Ya(qr.low),lowest:Ya(qr.lowest)};class vO{constructor(e,n){this.inner=e,this.prec=n}}class Ld{of(e){return new j0(this,e)}reconfigure(e){return Ld.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class j0{constructor(e,n){this.compartment=e,this.inner=n}}class Ph{constructor(e,n,i,s,o,l){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=s,this.staticValues=o,this.facets=l,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let s=[],o=Object.create(null),l=new Map;for(let y of U6(e,n,l))y instanceof zt?s.push(y):(o[y.facet.id]||(o[y.facet.id]=[])).push(y);let c=Object.create(null),f=[],h=[];for(let y of s)c[y.id]=h.length<<1,h.push(v=>y.slot(v));let p=i?.config.facets;for(let y in o){let v=o[y],b=v[0].facet,S=p&&p[y]||[];if(v.every(k=>k.type==0))if(c[b.id]=f.length<<1|1,ax(S,v))f.push(i.facet(b));else{let k=b.combine(v.map(A=>A.value));f.push(i&&b.compare(k,i.facet(b))?i.facet(b):k)}else{for(let k of v)k.type==0?(c[k.id]=f.length<<1|1,f.push(k.value)):(c[k.id]=h.length<<1,h.push(A=>k.dynamicSlot(A)));c[b.id]=h.length<<1,h.push(k=>$6(k,b,v))}}let g=h.map(y=>y(c));return new Ph(e,l,g,c,f,o)}}function U6(t,e,n){let i=[[],[],[],[],[]],s=new Map;function o(l,c){let f=s.get(l);if(f!=null){if(f<=c)return;let h=i[f].indexOf(l);h>-1&&i[f].splice(h,1),l instanceof j0&&n.delete(l.compartment)}if(s.set(l,c),Array.isArray(l))for(let h of l)o(h,c);else if(l instanceof j0){if(n.has(l.compartment))throw new RangeError("Duplicate use of compartment in extensions");let h=e.get(l.compartment)||l.inner;n.set(l.compartment,h),o(h,c)}else if(l instanceof vO)o(l.inner,l.prec);else if(l instanceof zt)i[c].push(l),l.provides&&o(l.provides,c);else if(l instanceof xh)i[c].push(l),l.facet.extensions&&o(l.facet.extensions,qr.default);else{let h=l.extension;if(!h)throw new Error(`Unrecognized extension value in extension set (${l}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(h,c)}}return o(t,qr.default),i.reduce((l,c)=>l.concat(c))}function lc(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function jh(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const bO=ye.define(),H0=ye.define({combine:t=>t.some(e=>e),static:!0}),SO=ye.define({combine:t=>t.length?t[0]:void 0,static:!0}),wO=ye.define(),CO=ye.define(),kO=ye.define(),AO=ye.define({combine:t=>t.length?t[0]:!1});class _i{constructor(e,n){this.type=e,this.value=n}static define(){return new q6}}class q6{of(e){return new _i(this,e)}}class Q6{constructor(e){this.map=e}of(e){return new Me(this,e)}}class Me{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Me(this.type,n)}is(e){return this.type==e}static define(e={}){return new Q6(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let s of e){let o=s.map(n);o&&i.push(o)}return i}}Me.reconfigure=Me.define();Me.appendConfig=Me.define();class Rt{constructor(e,n,i,s,o,l){this.startState=e,this.changes=n,this.selection=i,this.effects=s,this.annotations=o,this.scrollIntoView=l,this._doc=null,this._state=null,i&&xO(i,n.newLength),o.some(c=>c.type==Rt.time)||(this.annotations=o.concat(Rt.time.of(Date.now())))}static create(e,n,i,s,o,l){return new Rt(e,n,i,s,o,l)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Rt.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Rt.time=_i.define();Rt.userEvent=_i.define();Rt.addToHistory=_i.define();Rt.remote=_i.define();function Y6(t,e){let n=[];for(let i=0,s=0;;){let o,l;if(i<t.length&&(s==e.length||e[s]>=t[i]))o=t[i++],l=t[i++];else if(s<e.length)o=e[s++],l=e[s++];else return n;!n.length||n[n.length-1]<o?n.push(o,l):n[n.length-1]<l&&(n[n.length-1]=l)}}function OO(t,e,n){var i;let s,o,l;return n?(s=e.changes,o=Nt.empty(e.changes.length),l=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),o=t.changes.mapDesc(e.changes,!0),l=t.changes.compose(s)),{changes:l,selection:e.selection?e.selection.map(o):(i=t.selection)===null||i===void 0?void 0:i.map(s),effects:Me.mapEffects(t.effects,s).concat(Me.mapEffects(e.effects,o)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function I0(t,e,n){let i=e.selection,s=vl(e.annotations);return e.userEvent&&(s=s.concat(Rt.userEvent.of(e.userEvent))),{changes:e.changes instanceof Nt?e.changes:Nt.of(e.changes||[],n,t.facet(SO)),selection:i&&(i instanceof ae?i:ae.single(i.anchor,i.head)),effects:vl(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function EO(t,e,n){let i=I0(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(n=!1);let l=!!e[o].sequential;i=OO(i,I0(t,e[o],l?i.changes.newLength:t.doc.length),l)}let s=Rt.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return F6(n?X6(s):s)}function X6(t){let e=t.startState,n=!0;for(let s of e.facet(wO)){let o=s(t);if(o===!1){n=!1;break}Array.isArray(o)&&(n=n===!0?o:Y6(n,o))}if(n!==!0){let s,o;if(n===!1)o=t.changes.invertedDesc,s=Nt.empty(e.doc.length);else{let l=t.changes.filter(n);s=l.changes,o=l.filtered.mapDesc(l.changes).invertedDesc}t=Rt.create(e,s,t.selection&&t.selection.map(o),Me.mapEffects(t.effects,o),t.annotations,t.scrollIntoView)}let i=e.facet(CO);for(let s=i.length-1;s>=0;s--){let o=i[s](t);o instanceof Rt?t=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Rt?t=o[0]:t=EO(e,vl(o),!1)}return t}function F6(t){let e=t.startState,n=e.facet(kO),i=t;for(let s=n.length-1;s>=0;s--){let o=n[s](t);o&&Object.keys(o).length&&(i=OO(i,I0(e,o,t.changes.newLength),!0))}return i==t?t:Rt.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const G6=[];function vl(t){return t==null?G6:Array.isArray(t)?t:[t]}var at=(function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t})(at||(at={}));const W6=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let V0;try{V0=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function K6(t){if(V0)return V0.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||W6.test(n)))return!0}return!1}function Z6(t){return e=>{if(!/\S/.test(e))return at.Space;if(K6(e))return at.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return at.Word;return at.Other}}class Ve{constructor(e,n,i,s,o,l){this.config=e,this.doc=n,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=o,l&&(l._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)lc(this,c<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return lc(this,i),jh(this,i)}update(...e){return EO(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:s}=n;for(let c of e.effects)c.is(Ld.reconfigure)?(n&&(s=new Map,n.compartments.forEach((f,h)=>s.set(h,f)),n=null),s.set(c.value.compartment,c.value.extension)):c.is(Me.reconfigure)?(n=null,i=c.value):c.is(Me.appendConfig)&&(n=null,i=vl(i).concat(c.value));let o;n?o=e.startState.values.slice():(n=Ph.resolve(i,s,this),o=new Ve(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(f,h)=>h.reconfigure(f,this),null).values);let l=e.startState.facet(H0)?e.newSelection:e.newSelection.asSingle();new Ve(n,e.newDoc,l,o,(c,f)=>f.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:ae.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),s=this.changes(i.changes),o=[i.range],l=vl(i.effects);for(let c=1;c<n.ranges.length;c++){let f=e(n.ranges[c]),h=this.changes(f.changes),p=h.map(s);for(let y=0;y<c;y++)o[y]=o[y].map(p);let g=s.mapDesc(h,!0);o.push(f.range.map(g)),s=s.compose(p),l=Me.mapEffects(l,p).concat(Me.mapEffects(vl(f.effects),g))}return{changes:s,selection:ae.create(o,n.mainIndex),effects:l}}changes(e=[]){return e instanceof Nt?e:Nt.of(e,this.doc.length,this.facet(Ve.lineSeparator))}toText(e){return Qe.of(e.split(this.facet(Ve.lineSeparator)||_0))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(lc(this,n),jh(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof zt&&this.config.address[s.id]!=null&&(n[i]=s.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let o in i)if(Object.prototype.hasOwnProperty.call(e,o)){let l=i[o],c=e[o];s.push(l.init(f=>l.spec.fromJSON(c,f)))}}return Ve.create({doc:e.doc,selection:ae.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=Ph.resolve(e.extensions||[],new Map),i=e.doc instanceof Qe?e.doc:Qe.of((e.doc||"").split(n.staticFacet(Ve.lineSeparator)||_0)),s=e.selection?e.selection instanceof ae?e.selection:ae.single(e.selection.anchor,e.selection.head):ae.single(0);return xO(s,i.length),n.staticFacet(H0)||(s=s.asSingle()),new Ve(n,i,s,n.dynamicSlots.map(()=>null),(o,l)=>l.create(o),null)}get tabSize(){return this.facet(Ve.tabSize)}get lineBreak(){return this.facet(Ve.lineSeparator)||`
`}get readOnly(){return this.facet(AO)}phrase(e,...n){for(let i of this.facet(Ve.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let o=+(s||1);return!o||o>n.length?i:n[o-1]})),e}languageDataAt(e,n,i=-1){let s=[];for(let o of this.facet(bO))for(let l of o(this,n,i))Object.prototype.hasOwnProperty.call(l,e)&&s.push(l[e]);return s}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return Z6(n.length?n[0]:"")}wordAt(e){let{text:n,from:i,length:s}=this.doc.lineAt(e),o=this.charCategorizer(e),l=e-i,c=e-i;for(;l>0;){let f=Dt(n,l,!1);if(o(n.slice(f,l))!=at.Word)break;l=f}for(;c<s;){let f=Dt(n,c);if(o(n.slice(c,f))!=at.Word)break;c=f}return l==c?null:ae.range(l+i,c+i)}}Ve.allowMultipleSelections=H0;Ve.tabSize=ye.define({combine:t=>t.length?t[0]:4});Ve.lineSeparator=SO;Ve.readOnly=AO;Ve.phrases=ye.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(s=>t[s]==e[s])}});Ve.languageData=bO;Ve.changeFilter=wO;Ve.transactionFilter=CO;Ve.transactionExtender=kO;Ld.reconfigure=Me.define();function Bi(t,e,n={}){let i={};for(let s of t)for(let o of Object.keys(s)){let l=s[o],c=i[o];if(c===void 0)i[o]=l;else if(!(c===l||l===void 0))if(Object.hasOwnProperty.call(n,o))i[o]=n[o](c,l);else throw new Error("Config merge conflict for field "+o)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class lr{eq(e){return this==e}range(e,n=e){return $0.create(e,n,this)}}lr.prototype.startSide=lr.prototype.endSide=0;lr.prototype.point=!1;lr.prototype.mapMode=nn.TrackDel;function cx(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let $0=class MO{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new MO(e,n,i)}};function U0(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class ux{constructor(e,n,i,s){this.from=e,this.to=n,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,s=0){let o=i?this.to:this.from;for(let l=s,c=o.length;;){if(l==c)return l;let f=l+c>>1,h=o[f]-e||(i?this.value[f].endSide:this.value[f].startSide)-n;if(f==l)return h>=0?l:c;h>=0?c=f:l=f+1}}between(e,n,i,s){for(let o=this.findIndex(n,-1e9,!0),l=this.findIndex(i,1e9,!1,o);o<l;o++)if(s(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,n){let i=[],s=[],o=[],l=-1,c=-1;for(let f=0;f<this.value.length;f++){let h=this.value[f],p=this.from[f]+e,g=this.to[f]+e,y,v;if(p==g){let b=n.mapPos(p,h.startSide,h.mapMode);if(b==null||(y=v=b,h.startSide!=h.endSide&&(v=n.mapPos(p,h.endSide),v<y)))continue}else if(y=n.mapPos(p,h.startSide),v=n.mapPos(g,h.endSide),y>v||y==v&&h.startSide>0&&h.endSide<=0)continue;(v-y||h.endSide-h.startSide)<0||(l<0&&(l=y),h.point&&(c=Math.max(c,v-y)),i.push(h),s.push(y-l),o.push(v-l))}return{mapped:i.length?new ux(s,o,i,c):null,pos:l}}}class ze{constructor(e,n,i,s){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=s}static create(e,n,i,s){return new ze(e,n,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:s=0,filterTo:o=this.length}=e,l=e.filter;if(n.length==0&&!l)return this;if(i&&(n=n.slice().sort(U0)),this.isEmpty)return n.length?ze.of(n):this;let c=new NO(this,null,-1).goto(0),f=0,h=[],p=new ps;for(;c.value||f<n.length;)if(f<n.length&&(c.from-n[f].from||c.startSide-n[f].value.startSide)>=0){let g=n[f++];p.addInner(g.from,g.to,g.value)||h.push(g)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(f==n.length||this.chunkEnd(c.chunkIndex)<n[f].from)&&(!l||s>this.chunkEnd(c.chunkIndex)||o<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!l||s>c.to||o<c.from||l(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||h.push($0.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!h.length?ze.empty:this.nextLayer.update({add:h,filter:l,filterFrom:s,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],s=-1;for(let l=0;l<this.chunk.length;l++){let c=this.chunkPos[l],f=this.chunk[l],h=e.touchesRange(c,c+f.length);if(h===!1)s=Math.max(s,f.maxPoint),n.push(f),i.push(e.mapPos(c));else if(h===!0){let{mapped:p,pos:g}=f.map(c,e);p&&(s=Math.max(s,p.maxPoint),n.push(p),i.push(g))}}let o=this.nextLayer.map(e);return n.length==0?o:new ze(i,n,o||ze.empty,s)}between(e,n,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let o=this.chunkPos[s],l=this.chunk[s];if(n>=o&&e<=o+l.length&&l.between(o,e-o,n-o,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Oc.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Oc.from(e).goto(n)}static compare(e,n,i,s,o=-1){let l=e.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),c=n.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=o),f=t2(l,c,i),h=new Xa(l,f,o),p=new Xa(c,f,o);i.iterGaps((g,y,v)=>n2(h,g,p,y,v,s)),i.empty&&i.length==0&&n2(h,0,p,0,0,s)}static eq(e,n,i=0,s){s==null&&(s=999999999);let o=e.filter(p=>!p.isEmpty&&n.indexOf(p)<0),l=n.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(o.length!=l.length)return!1;if(!o.length)return!0;let c=t2(o,l),f=new Xa(o,c,0).goto(i),h=new Xa(l,c,0).goto(i);for(;;){if(f.to!=h.to||!q0(f.active,h.active)||f.point&&(!h.point||!cx(f.point,h.point)))return!1;if(f.to>s)return!0;f.next(),h.next()}}static spans(e,n,i,s,o=-1){let l=new Xa(e,null,o).goto(n),c=n,f=l.openStart;for(;;){let h=Math.min(l.to,i);if(l.point){let p=l.activeForPoint(l.to),g=l.pointFrom<n?p.length+1:l.point.startSide<0?p.length:Math.min(p.length,f);s.point(c,h,l.point,p,g,l.pointRank),f=Math.min(l.openEnd(h),p.length)}else h>c&&(s.span(c,h,l.active,f),f=l.openEnd(h));if(l.to>i)return f+(l.point&&l.to>i?1:0);c=l.to,l.next()}}static of(e,n=!1){let i=new ps;for(let s of e instanceof $0?[e]:n?J6(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return ze.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=ze.empty;s=s.nextLayer)n=new ze(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}ze.empty=new ze([],[],null,-1);function J6(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(U0(e,i)>0)return t.slice().sort(U0);e=i}return t}ze.empty.nextLayer=ze.empty;class ps{finishChunk(e){this.chunks.push(new ux(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new ps)).add(e,n,i)}addInner(e,n,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ze.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ze.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function t2(t,e,n){let i=new Map;for(let o of t)for(let l=0;l<o.chunk.length;l++)o.chunk[l].maxPoint<=0&&i.set(o.chunk[l],o.chunkPos[l]);let s=new Set;for(let o of e)for(let l=0;l<o.chunk.length;l++){let c=i.get(o.chunk[l]);c!=null&&(n?n.mapPos(c):c)==o.chunkPos[l]&&!n?.touchesRange(c,c+o.chunk[l].length)&&s.add(o.chunk[l])}return s}class NO{constructor(e,n,i,s=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Oc{constructor(e){this.heap=e}static from(e,n=null,i=-1){let s=[];for(let o=0;o<e.length;o++)for(let l=e[o];!l.isEmpty;l=l.nextLayer)l.maxPoint>=i&&s.push(new NO(l,n,i,o));return s.length==1?s[0]:new Oc(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)_m(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)_m(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_m(this.heap,0)}}}function _m(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let s=t[i];if(i+1<t.length&&s.compare(t[i+1])>=0&&(s=t[i+1],i++),n.compare(s)<0)break;t[i]=n,t[e]=s,e=i}}class Xa{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Oc.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){$f(this.active,e),$f(this.activeTo,e),$f(this.activeRank,e),this.minActive=i2(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:s,rank:o}=this.cursor;for(;n<this.activeRank.length&&(o-this.activeRank[n]||s-this.activeTo[n])>0;)n++;Uf(this.active,n,i),Uf(this.activeTo,n,s),Uf(this.activeRank,n,o),e&&Uf(e,n,this.cursor.from),this.minActive=i2(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&$f(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let o=this.cursor.value;if(!o.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=o,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=o.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function n2(t,e,n,i,s,o){t.goto(e),n.goto(i);let l=i+s,c=i,f=i-e,h=!!o.boundChange;for(let p=!1;;){let g=t.to+f-n.to,y=g||t.endSide-n.endSide,v=y<0?t.to+f:n.to,b=Math.min(v,l);if(t.point||n.point?(t.point&&n.point&&cx(t.point,n.point)&&q0(t.activeForPoint(t.to),n.activeForPoint(n.to))||o.comparePoint(c,b,t.point,n.point),p=!1):(p&&o.boundChange(c),b>c&&!q0(t.active,n.active)&&o.compareRange(c,b,t.active,n.active),h&&b<l&&(g||t.openEnd(v)!=n.openEnd(v))&&(p=!0)),v>l)break;c=v,y<=0&&t.next(),y>=0&&n.next()}}function q0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!cx(t[n],e[n]))return!1;return!0}function $f(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Uf(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function i2(t,e){let n=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||t[s].endSide-t[n].endSide)<0&&(n=s,i=e[s]);return n}function ql(t,e,n=t.length){let i=0;for(let s=0;s<n&&s<t.length;)t.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=Dt(t,s));return i}function Q0(t,e,n,i){for(let s=0,o=0;;){if(o>=e)return s;if(s==t.length)break;o+=t.charCodeAt(s)==9?n-o%n:1,s=Dt(t,s)}return i===!0?-1:t.length}const Y0="",s2=typeof Symbol>"u"?"__"+Y0:Symbol.for(Y0),X0=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ar{constructor(e,n){this.rules=[];let{finish:i}=n||{};function s(l){return/^@/.test(l)?[l]:l.split(/,\s*/)}function o(l,c,f,h){let p=[],g=/^@(\w+)\b/.exec(l[0]),y=g&&g[1]=="keyframes";if(g&&c==null)return f.push(l[0]+";");for(let v in c){let b=c[v];if(/&/.test(v))o(v.split(/,\s*/).map(S=>l.map(k=>S.replace(/&/,k))).reduce((S,k)=>S.concat(k)),b,f);else if(b&&typeof b=="object"){if(!g)throw new RangeError("The value of a property ("+v+") should be a primitive value.");o(s(v),b,p,y)}else b!=null&&p.push(v.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+b+";")}(p.length||y)&&f.push((i&&!g&&!h?l.map(i):l).join(", ")+" {"+p.join(" ")+"}")}for(let l in e)o(s(l),e[l],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=r2[s2]||1;return r2[s2]=e+1,Y0+e.toString(36)}static mount(e,n,i){let s=e[X0],o=i&&i.nonce;s?o&&s.setNonce(o):s=new e8(e,o),s.mount(Array.isArray(n)?n:[n],e)}}let o2=new Map;class e8{constructor(e,n){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let o=o2.get(i);if(o)return e[X0]=o;this.sheet=new s.CSSStyleSheet,o2.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[X0]=this}mount(e,n){let i=this.sheet,s=0,o=0;for(let l=0;l<e.length;l++){let c=e[l],f=this.modules.indexOf(c);if(f<o&&f>-1&&(this.modules.splice(f,1),o--,f=-1),f==-1){if(this.modules.splice(o++,0,c),i)for(let h=0;h<c.rules.length;h++)i.insertRule(c.rules[h],s++)}else{for(;o<f;)s+=this.modules[o++].rules.length;s+=c.rules.length,o++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let l="";for(let f=0;f<this.modules.length;f++)l+=this.modules[f].getRules()+`
`;this.styleTag.textContent=l;let c=n.head||n;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var cr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ec={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},t8=typeof navigator<"u"&&/Mac/.test(navigator.platform),n8=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ut=0;Ut<10;Ut++)cr[48+Ut]=cr[96+Ut]=String(Ut);for(var Ut=1;Ut<=24;Ut++)cr[Ut+111]="F"+Ut;for(var Ut=65;Ut<=90;Ut++)cr[Ut]=String.fromCharCode(Ut+32),Ec[Ut]=String.fromCharCode(Ut);for(var Bm in cr)Ec.hasOwnProperty(Bm)||(Ec[Bm]=cr[Bm]);function i8(t){var e=t8&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||n8&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ec:cr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function et(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];typeof s=="string"?t.setAttribute(i,s):s!=null&&(t[i]=s)}e++}for(;e<arguments.length;e++)TO(t,arguments[e]);return t}function TO(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)TO(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let tn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},F0=typeof document<"u"?document:{documentElement:{style:{}}};const G0=/Edge\/(\d+)/.exec(tn.userAgent),DO=/MSIE \d/.test(tn.userAgent),W0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tn.userAgent),_d=!!(DO||W0||G0),l2=!_d&&/gecko\/(\d+)/i.test(tn.userAgent),zm=!_d&&/Chrome\/(\d+)/.exec(tn.userAgent),s8="webkitFontSmoothing"in F0.documentElement.style,K0=!_d&&/Apple Computer/.test(tn.vendor),a2=K0&&(/Mobile\/\w+/.test(tn.userAgent)||tn.maxTouchPoints>2);var me={mac:a2||/Mac/.test(tn.platform),windows:/Win/.test(tn.platform),linux:/Linux|X11/.test(tn.platform),ie:_d,ie_version:DO?F0.documentMode||6:W0?+W0[1]:G0?+G0[1]:0,gecko:l2,gecko_version:l2?+(/Firefox\/(\d+)/.exec(tn.userAgent)||[0,0])[1]:0,chrome:!!zm,chrome_version:zm?+zm[1]:0,ios:a2,android:/Android\b/.test(tn.userAgent),webkit_version:s8?+(/\bAppleWebKit\/(\d+)/.exec(tn.userAgent)||[0,0])[1]:0,safari:K0,safari_version:K0?+(/\bVersion\/(\d+(\.\d+)?)/.exec(tn.userAgent)||[0,0])[1]:0,tabSize:F0.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function fx(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const Hh=Object.create(null);function hx(t,e,n){if(t==e)return!0;t||(t=Hh),e||(e=Hh);let i=Object.keys(t),s=Object.keys(e);if(i.length-0!=s.length-0)return!1;for(let o of i)if(o!=n&&(s.indexOf(o)==-1||t[o]!==e[o]))return!1;return!0}function r8(t,e){for(let n=t.attributes.length-1;n>=0;n--){let i=t.attributes[n].name;e[i]==null&&t.removeAttribute(i)}for(let n in e){let i=e[n];n=="style"?t.style.cssText=i:t.getAttribute(n)!=i&&t.setAttribute(n,i)}}function c2(t,e,n){let i=!1;if(e)for(let s in e)n&&s in n||(i=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(i=!0,s=="style"?t.style.cssText=n[s]:t.setAttribute(s,n[s]));return i}function o8(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class zi{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var qt=(function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t})(qt||(qt={}));class Se extends lr{constructor(e,n,i,s){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new tu(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ao(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:o,end:l}=RO(e,n);i=(o?n?-3e8:-1:5e8)-1,s=(l?n?2e8:1:-6e8)+1}return new ao(e,i,s,n,e.widget||null,!0)}static line(e){return new nu(e)}static set(e,n=!1){return ze.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Se.none=ze.empty;class tu extends Se{constructor(e){let{start:n,end:i}=RO(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?fx(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||Hh}eq(e){return this==e||e instanceof tu&&this.tagName==e.tagName&&hx(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}tu.prototype.point=!1;class nu extends Se{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof nu&&this.spec.class==e.spec.class&&hx(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}nu.prototype.mapMode=nn.TrackBefore;nu.prototype.point=!0;class ao extends Se{constructor(e,n,i,s,o,l){super(n,i,o,e),this.block=s,this.isReplace=l,this.mapMode=s?n<=0?nn.TrackBefore:nn.TrackAfter:nn.TrackDel}get type(){return this.startSide!=this.endSide?qt.WidgetRange:this.startSide<=0?qt.WidgetBefore:qt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ao&&l8(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ao.prototype.point=!0;function RO(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function l8(t,e){return t==e||!!(t&&e&&t.compare(e))}function bl(t,e,n,i=0){let s=n.length-1;s>=0&&n[s]+i>=t?n[s]=Math.max(n[s],e):n.push(t,e)}class Mc extends lr{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof Mc&&this.tagName==e.tagName&&hx(this.attributes,e.attributes)}static create(e){return new Mc(e.tagName,e.attributes||Hh)}static set(e,n=!1){return ze.of(e,n)}}Mc.prototype.startSide=Mc.prototype.endSide=-1;function Bl(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Z0(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function ac(t,e){if(!e.anchorNode)return!1;try{return Z0(t,e.anchorNode)}catch{return!1}}function cc(t){return t.nodeType==3?Tc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function uc(t,e,n,i){return n?u2(t,e,n,i,-1)||u2(t,e,n,i,1):!1}function ur(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function Ih(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function u2(t,e,n,i,s){for(;;){if(t==n&&e==i)return!0;if(e==(s<0?0:gs(t))){if(t.nodeName=="DIV")return!1;let o=t.parentNode;if(!o||o.nodeType!=1)return!1;e=ur(t)+(s<0?0:1),t=o}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?gs(t):0}else return!1}}function gs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Nc(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function a8(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function LO(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function c8(t,e,n,i,s,o,l,c){let f=t.ownerDocument,h=f.defaultView||window;for(let p=t,g=!1;p&&!g;)if(p.nodeType==1){let y,v=p==f.body,b=1,S=1;if(v)y=a8(h);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(g=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let N=p.getBoundingClientRect();({scaleX:b,scaleY:S}=LO(p,N)),y={left:N.left,right:N.left+p.clientWidth*b,top:N.top,bottom:N.top+p.clientHeight*S}}let k=0,A=0;if(s=="nearest")e.top<y.top?(A=e.top-(y.top+l),n>0&&e.bottom>y.bottom+A&&(A=e.bottom-y.bottom+l)):e.bottom>y.bottom&&(A=e.bottom-y.bottom+l,n<0&&e.top-A<y.top&&(A=e.top-(y.top+l)));else{let N=e.bottom-e.top,O=y.bottom-y.top;A=(s=="center"&&N<=O?e.top+N/2-O/2:s=="start"||s=="center"&&n<0?e.top-l:e.bottom-O+l)-y.top}if(i=="nearest"?e.left<y.left?(k=e.left-(y.left+o),n>0&&e.right>y.right+k&&(k=e.right-y.right+o)):e.right>y.right&&(k=e.right-y.right+o,n<0&&e.left<y.left+k&&(k=e.left-(y.left+o))):k=(i=="center"?e.left+(e.right-e.left)/2-(y.right-y.left)/2:i=="start"==c?e.left-o:e.right-(y.right-y.left)+o)-y.left,k||A)if(v)h.scrollBy(k,A);else{let N=0,O=0;if(A){let M=p.scrollTop;p.scrollTop+=A/S,O=(p.scrollTop-M)*S}if(k){let M=p.scrollLeft;p.scrollLeft+=k/b,N=(p.scrollLeft-M)*b}e={left:e.left-N,top:e.top-O,right:e.right-N,bottom:e.bottom-O},N&&Math.abs(N-k)<1&&(i="nearest"),O&&Math.abs(O-A)<1&&(s="nearest")}if(v)break;(e.top<y.top||e.bottom>y.bottom||e.left<y.left||e.right>y.right)&&(e={left:Math.max(e.left,y.left),right:Math.min(e.right,y.right),top:Math.max(e.top,y.top),bottom:Math.min(e.bottom,y.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function u8(t){let e=t.ownerDocument,n,i;for(let s=t.parentNode;s&&!(s==e.body||n&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:i}}class f8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?gs(n):0),i,Math.min(e.focusOffset,i?gs(i):0))}set(e,n,i,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=s}}let Ur=null;me.safari&&me.safari_version>=26&&(Ur=!1);function _O(t){if(t.setActive)return t.setActive();if(Ur)return t.focus(Ur);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Ur==null?{get preventScroll(){return Ur={preventScroll:!0},!0}}:void 0),!Ur){Ur=!1;for(let n=0;n<e.length;){let i=e[n++],s=e[n++],o=e[n++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let f2;function Tc(t,e,n=e){let i=f2||(f2=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Sl(t,e,n,i){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let o=new KeyboardEvent("keydown",s);o.synthetic=!0,t.dispatchEvent(o);let l=new KeyboardEvent("keyup",s);return l.synthetic=!0,t.dispatchEvent(l),o.defaultPrevented||l.defaultPrevented}function h8(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function d8(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,gs(n));;)if(i){if(n.nodeType!=1)return!1;let s=n.childNodes[i-1];s.contentEditable=="false"?i--:(n=s,i=gs(n))}else{if(n==t)return!0;i=ur(n),n=n.parentNode}}function BO(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function zO(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=gs(n)}else if(n.parentNode&&!Ih(n))i=ur(n),n=n.parentNode;else return null}}function PO(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!Ih(n))i=ur(n)+1,n=n.parentNode;else return null}}class li{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new li(e.parentNode,ur(e),n)}static after(e,n){return new li(e.parentNode,ur(e)+1,n)}}var it=(function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t})(it||(it={}));const co=it.LTR,dx=it.RTL;function jO(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const p8=jO("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),g8=jO("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),J0=Object.create(null),vi=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);J0[e]=n,J0[n]=-e}function HO(t){return t<=247?p8[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?g8[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const m8=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class fs{get dir(){return this.level%2?dx:co}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,s){let o=-1;for(let l=0;l<e.length;l++){let c=e[l];if(c.from<=n&&c.to>=n){if(c.level==i)return l;(o<0||(s!=0?s<0?c.from<n:c.to>n:e[o].level>c.level))&&(o=l)}}if(o<0)throw new RangeError("Index out of range");return o}}function IO(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=e[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!IO(i.inner,s.inner))return!1}return!0}const nt=[];function y8(t,e,n,i,s){for(let o=0;o<=i.length;o++){let l=o?i[o-1].to:e,c=o<i.length?i[o].from:n,f=o?256:s;for(let h=l,p=f,g=f;h<c;h++){let y=HO(t.charCodeAt(h));y==512?y=p:y==8&&g==4&&(y=16),nt[h]=y==4?2:y,y&7&&(g=y),p=y}for(let h=l,p=f,g=f;h<c;h++){let y=nt[h];if(y==128)h<c-1&&p==nt[h+1]&&p&24?y=nt[h]=p:nt[h]=256;else if(y==64){let v=h+1;for(;v<c&&nt[v]==64;)v++;let b=h&&p==8||v<n&&nt[v]==8?g==1?1:8:256;for(let S=h;S<v;S++)nt[S]=b;h=v-1}else y==8&&g==1&&(nt[h]=1);p=y,y&7&&(g=y)}}}function x8(t,e,n,i,s){let o=s==1?2:1;for(let l=0,c=0,f=0;l<=i.length;l++){let h=l?i[l-1].to:e,p=l<i.length?i[l].from:n;for(let g=h,y,v,b;g<p;g++)if(v=J0[y=t.charCodeAt(g)])if(v<0){for(let S=c-3;S>=0;S-=3)if(vi[S+1]==-v){let k=vi[S+2],A=k&2?s:k&4?k&1?o:s:0;A&&(nt[g]=nt[vi[S]]=A),c=S;break}}else{if(vi.length==189)break;vi[c++]=g,vi[c++]=y,vi[c++]=f}else if((b=nt[g])==2||b==1){let S=b==s;f=S?0:1;for(let k=c-3;k>=0;k-=3){let A=vi[k+2];if(A&2)break;if(S)vi[k+2]|=2;else{if(A&4)break;vi[k+2]|=4}}}}}function v8(t,e,n,i){for(let s=0,o=i;s<=n.length;s++){let l=s?n[s-1].to:t,c=s<n.length?n[s].from:e;for(let f=l;f<c;){let h=nt[f];if(h==256){let p=f+1;for(;;)if(p==c){if(s==n.length)break;p=n[s++].to,c=s<n.length?n[s].from:e}else if(nt[p]==256)p++;else break;let g=o==1,y=(p<e?nt[p]:i)==1,v=g==y?g?1:2:i;for(let b=p,S=s,k=S?n[S-1].to:t;b>f;)b==k&&(b=n[--S].from,k=S?n[S-1].to:t),nt[--b]=v;f=p}else o=h,f++}}}function ey(t,e,n,i,s,o,l){let c=i%2?2:1;if(i%2==s%2)for(let f=e,h=0;f<n;){let p=!0,g=!1;if(h==o.length||f<o[h].from){let S=nt[f];S!=c&&(p=!1,g=S==16)}let y=!p&&c==1?[]:null,v=p?i:i+1,b=f;e:for(;;)if(h<o.length&&b==o[h].from){if(g)break e;let S=o[h];if(!p)for(let k=S.to,A=h+1;;){if(k==n)break e;if(A<o.length&&o[A].from==k)k=o[A++].to;else{if(nt[k]==c)break e;break}}if(h++,y)y.push(S);else{S.from>f&&l.push(new fs(f,S.from,v));let k=S.direction==co!=!(v%2);ty(t,k?i+1:i,s,S.inner,S.from,S.to,l),f=S.to}b=S.to}else{if(b==n||(p?nt[b]!=c:nt[b]==c))break;b++}y?ey(t,f,b,i+1,s,y,l):f<b&&l.push(new fs(f,b,v)),f=b}else for(let f=n,h=o.length;f>e;){let p=!0,g=!1;if(!h||f>o[h-1].to){let S=nt[f-1];S!=c&&(p=!1,g=S==16)}let y=!p&&c==1?[]:null,v=p?i:i+1,b=f;e:for(;;)if(h&&b==o[h-1].to){if(g)break e;let S=o[--h];if(!p)for(let k=S.from,A=h;;){if(k==e)break e;if(A&&o[A-1].to==k)k=o[--A].from;else{if(nt[k-1]==c)break e;break}}if(y)y.push(S);else{S.to<f&&l.push(new fs(S.to,f,v));let k=S.direction==co!=!(v%2);ty(t,k?i+1:i,s,S.inner,S.from,S.to,l),f=S.from}b=S.from}else{if(b==e||(p?nt[b-1]!=c:nt[b-1]==c))break;b--}y?ey(t,b,f,i+1,s,y,l):b<f&&l.push(new fs(b,f,v)),f=b}}function ty(t,e,n,i,s,o,l){let c=e%2?2:1;y8(t,s,o,i,c),x8(t,s,o,i,c),v8(s,o,i,c),ey(t,s,o,e,n,i,l)}function b8(t,e,n){if(!t)return[new fs(0,0,e==dx?1:0)];if(e==co&&!n.length&&!m8.test(t))return VO(t.length);if(n.length)for(;t.length>nt.length;)nt[nt.length]=256;let i=[],s=e==co?0:1;return ty(t,s,s,n,0,t.length,i),i}function VO(t){return[new fs(0,t,0)]}let $O="";function S8(t,e,n,i,s){var o;let l=i.head-t.from,c=fs.find(e,l,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc),f=e[c],h=f.side(s,n);if(l==h){let y=c+=s?1:-1;if(y<0||y>=e.length)return null;f=e[c=y],l=f.side(!s,n),h=f.side(s,n)}let p=Dt(t.text,l,f.forward(s,n));(p<f.from||p>f.to)&&(p=h),$O=t.text.slice(Math.min(l,p),Math.max(l,p));let g=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return g&&p==h&&g.level+(s?0:1)<f.level?ae.cursor(g.side(!s,n)+t.from,g.forward(s,n)?1:-1,g.level):ae.cursor(p+t.from,f.forward(s,n)?-1:1,f.level)}function w8(t,e,n){for(let i=e;i<n;i++){let s=HO(t.charCodeAt(i));if(s==1)return co;if(s==2||s==4)return dx}return co}const UO=ye.define(),qO=ye.define(),QO=ye.define(),YO=ye.define(),ny=ye.define(),XO=ye.define(),FO=ye.define(),px=ye.define(),gx=ye.define(),GO=ye.define({combine:t=>t.some(e=>e)}),WO=ye.define({combine:t=>t.some(e=>e)}),KO=ye.define();class wl{constructor(e,n="nearest",i="nearest",s=5,o=5,l=!1){this.range=e,this.y=n,this.x=i,this.yMargin=s,this.xMargin=o,this.isSnapshot=l}map(e){return e.empty?this:new wl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new wl(ae.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const qf=Me.define({map:(t,e)=>t.map(e)}),ZO=Me.define();function xn(t,e,n){let i=t.facet(YO);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const cs=ye.define({combine:t=>t.length?t[0]:!0});let C8=0;const fl=ye.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class xt{constructor(e,n,i,s,o){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=o(this),this.extension=this.baseExtensions.concat(fl.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(fl.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:s,provide:o,decorations:l}=n||{};return new xt(C8++,e,i,s,c=>{let f=[];return l&&f.push(Bd.of(h=>{let p=h.plugin(c);return p?l(p):Se.none})),o&&f.push(o(c)),f})}static fromClass(e,n){return xt.define((i,s)=>new e(i,s),n)}}class Pm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(xn(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){xn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){xn(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const JO=ye.define(),mx=ye.define(),Bd=ye.define(),eE=ye.define(),yx=ye.define(),iu=ye.define(),tE=ye.define();function h2(t,e){let n=t.state.facet(tE);if(!n.length)return n;let i=n.map(o=>o instanceof Function?o(t):o),s=[];return ze.spans(i,e.from,e.to,{point(){},span(o,l,c,f){let h=o-e.from,p=l-e.from,g=s;for(let y=c.length-1;y>=0;y--,f--){let v=c[y].spec.bidiIsolate,b;if(v==null&&(v=w8(e.text,h,p)),f>0&&g.length&&(b=g[g.length-1]).to==h&&b.direction==v)b.to=p,g=b.inner;else{let S={from:h,to:p,direction:v,inner:[]};g.push(S),g=S.inner}}}}),s}const nE=ye.define();function xx(t){let e=0,n=0,i=0,s=0;for(let o of t.state.facet(nE)){let l=o(t);l&&(l.left!=null&&(e=Math.max(e,l.left)),l.right!=null&&(n=Math.max(n,l.right)),l.top!=null&&(i=Math.max(i,l.top)),l.bottom!=null&&(s=Math.max(s,l.bottom)))}return{left:e,right:n,top:i,bottom:s}}const Ja=ye.define();class qn{constructor(e,n,i,s){this.fromA=e,this.toA=n,this.fromB=i,this.toB=s}join(e){return new qn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let s=0,o=0,l=0;;){let c=s<e.length?e[s].fromB:1e9,f=o<n.length?n[o]:1e9,h=Math.min(c,f);if(h==1e9)break;let p=h+l,g=h,y=p;for(;;)if(o<n.length&&n[o]<=g){let v=n[o+1];o+=2,g=Math.max(g,v);for(let b=s;b<e.length&&e[b].fromB<=g;b++)l=e[b].toA-e[b].toB;y=Math.max(y,v+l)}else if(s<e.length&&e[s].fromB<=g){let v=e[s++];g=Math.max(g,v.toB),y=Math.max(y,v.toA),l=v.toA-v.toB}else break;i.push(new qn(p,y,h,g))}return i}}class Vh{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Nt.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let s=[];this.changes.iterChangedRanges((o,l,c,f)=>s.push(new qn(o,l,c,f))),this.changedRanges=s}static create(e,n,i){return new Vh(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const k8=[];class At{constructor(e,n,i=0){this.dom=e,this.length=n,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return k8}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&r8(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let i=n;for(let s of this.children){if(s==e)return i;i+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let i=ur(this.dom),s=this.length?e>0:n>0;return new li(this.parent.dom,i+(s?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Pd)return e;return null}static get(e){return e.cmTile}}class zd extends At{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,i=null,s,o=e?.node==n?e:null,l=0;for(let c of this.children){if(c.sync(e),l+=c.length+c.breakAfter,s=i?i.nextSibling:n.firstChild,o&&s!=c.dom&&(o.written=!0),c.dom.parentNode==n)for(;s&&s!=c.dom;)s=d2(s);else n.insertBefore(c.dom,s);i=c.dom}for(s=i?i.nextSibling:n.firstChild,o&&s&&(o.written=!0);s;)s=d2(s);this.length=l}}function d2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Pd extends zd{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=At.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],i=this,s=0,o=0;;)if(s==i.children.length){if(!n.length)return;i=i.parent,i.breakAfter&&o++,s=n.pop()}else{let l=i.children[s++];if(l instanceof ir)n.push(s),i=l,s=0;else{let c=o+l.length,f=e(l,o);if(f!==void 0)return f;o=c+l.breakAfter}}}resolveBlock(e,n){let i,s=-1,o,l=-1;if(this.blockTiles((c,f)=>{let h=f+c.length;if(e>=f&&e<=h){if(c.isWidget()&&n>=-1&&n<=1){if(c.flags&32)return!0;c.flags&16&&(i=void 0)}(f<e||e==h&&(n<-1?c.length:c.covers(1)))&&(!i||!c.isWidget()&&i.isWidget())&&(i=c,s=e-f),(h>e||e==f&&(n>1?c.length:c.covers(-1)))&&(!o||!c.isWidget()&&o.isWidget())&&(o=c,l=e-f)}}),!i&&!o)throw new Error("No tile at position "+e);return i&&n<0||!o?{tile:i,offset:s}:{tile:o,offset:l}}}class ir extends zd{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let i=new ir(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class zl extends zd{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,i){let s=new zl(n||document.createElement("div"),e);return(!n||!i)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(e,n,i){let s=null,o=-1,l=null,c=-1;function f(p,g){for(let y=0,v=0;y<p.children.length&&v<=g;y++){let b=p.children[y],S=v+b.length;S>=g&&(b.isComposite()?f(b,g-v):(!l||l.isHidden&&(n>0||i&&O8(l,b)))&&(S>g||b.flags&32)?(l=b,c=g-v):(v<g||b.flags&16&&!b.isHidden)&&(s=b,o=g-v)),v=S}}f(this,e);let h=(n<0?s:l)||s||l;return h?{tile:h,offset:h==s?o:c}:null}coordsIn(e,n){let i=this.resolveInline(e,n,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),n):A8(this)}domIn(e,n){let i=this.resolveInline(e,n);if(i){let{tile:s,offset:o}=i;if(this.dom.contains(s.dom))return s.isText()?new li(s.dom,Math.min(s.dom.nodeValue.length,o)):s.domPosFor(o,s.flags&16?1:s.flags&32?-1:n);let l=i.tile.parent,c=!1;for(let f of l.children){if(c)return new li(f.dom,0);f==i.tile&&(c=!0)}}return new li(this.dom,0)}}function A8(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=cc(e);return n[n.length-1]||null}function O8(t,e){let n=t.coordsIn(0,1),i=e.coordsIn(0,1);return n&&i&&i.top<n.bottom}class mn extends zd{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let i=new mn(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class Gr extends At{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let i=this.dom.nodeValue.length;e>i&&(e=i);let s=e,o=e,l=0;e==0&&n<0||e==i&&n>=0?me.chrome||me.gecko||(e?(s--,l=1):o<i&&(o++,l=-1)):n<0?s--:o<i&&o++;let c=Tc(this.dom,s,o).getClientRects();if(!c.length)return null;let f=c[(l?l<0:n>=0)?0:c.length-1];return me.safari&&!l&&f.width==0&&(f=Array.prototype.find.call(c,h=>h.width)||f),l?Nc(f,l<0):f||null}static of(e,n){let i=new Gr(n||document.createTextNode(e),e);return n||(i.flags|=2),i}}class uo extends At{constructor(e,n,i,s){super(e,n,s),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,i){let s=this.widget.coordsAt(this.dom,e,n);if(s)return s;if(i)return Nc(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let o=this.dom.getClientRects(),l=null;if(!o.length)return null;let c=this.flags&16?!0:this.flags&32?!1:e>0;for(let f=c?o.length-1:0;l=o[f],!(e>0?f==0:f==o.length-1||l.top<l.bottom);f+=c?-1:1);return Nc(l,!c)}}get overrideDOMText(){if(!this.length)return Qe.empty;let{root:e}=this;if(!e)return Qe.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,i,s,o){return o||(o=e.toDOM(n),e.editable||(o.contentEditable="false")),new uo(o,i,e,s)}}class $h extends At{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return Qe.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class E8{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,i){let{tile:s,index:o,beforeBreak:l,parents:c}=this;for(;e||n>0;)if(s.isComposite())if(l){if(!e)break;i&&i.break(),e--,l=!1}else if(o==s.children.length){if(!e&&!c.length)break;i&&i.leave(s),l=!!s.breakAfter,{tile:s,index:o}=c.pop(),o++}else{let f=s.children[o],h=f.breakAfter;(n>0?f.length<=e:f.length<e)&&(!i||i.skip(f,0,f.length)!==!1||!f.isComposite)?(l=!!h,o++,e-=f.length):(c.push({tile:s,index:o}),s=f,o=0,i&&f.isComposite()&&i.enter(f))}else if(o==s.length)l=!!s.breakAfter,{tile:s,index:o}=c.pop(),o++;else if(e){let f=Math.min(e,s.length-o);i&&i.skip(s,o,o+f),e-=f,o+=f}else break;return this.tile=s,this.index=o,this.beforeBreak=l,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class M8{constructor(e,n,i,s){this.from=e,this.to=n,this.wrapper=i,this.rank=s}}class N8{constructor(e,n,i){this.cache=e,this.root=n,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,i,s){var o;this.flushBuffer();let l=this.ensureMarks(n,i),c=l.lastChild;if(c&&c.isText()&&!(c.flags&8)&&c.length+e.length<512){this.cache.reused.set(c,2);let f=l.children[l.children.length-1]=new Gr(c.dom,c.text+e);f.parent=l}else l.append(s||Gr.of(e,(o=this.cache.find(Gr))===null||o===void 0?void 0:o.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let i=this.curLine;i.dom!=n.line.dom&&(i.setDOM(this.cache.reused.has(n.line)?jm(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let s=i;for(let c=n.marks.length-1;c>=0;c--){let f=n.marks[c],h=s.lastChild;if(h instanceof mn&&h.mark.eq(f.mark))h.dom!=f.dom&&h.setDOM(jm(f.dom)),s=h;else{if(this.cache.reused.get(f)){let g=At.get(f.dom);g&&g.setDOM(jm(f.dom))}let p=mn.of(f.mark,f.dom);s.append(p),s=p}this.cache.reused.set(f,2)}let o=At.get(e.text);o&&this.cache.reused.set(o,2);let l=new Gr(e.text,e.text.nodeValue);l.flags|=8,s.append(l)}addInlineWidget(e,n,i){let s=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);s||this.flushBuffer();let o=this.ensureMarks(n,i);!s&&!(e.flags&16)&&o.append(this.getBuffer(1)),o.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,i){this.flushBuffer(),this.ensureMarks(n,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var i;e||(e=iE);let s=zl.start(e,n||((i=this.cache.find(zl))===null||i===void 0?void 0:i.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var i;let s=this.curLine;for(let o=e.length-1;o>=0;o--){let l=e[o],c;if(n>0&&(c=s.lastChild)&&c instanceof mn&&c.mark.eq(l))s=c,n--;else{let f=mn.of(l,(i=this.cache.find(mn,h=>h.mark.eq(l)))===null||i===void 0?void 0:i.dom);s.append(f),s=f,n=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!p2(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(me.ios&&p2(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(Hm,0,32)||new uo(Hm.toDOM(),0,Hm,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new M8(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-n.rank||this.wrappers[i-1].to-n.to)<0;)i--;this.wrappers.splice(i,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let i of this.wrappers){let s=n.lastChild;if(i.from<this.pos&&s instanceof ir&&s.wrapper.eq(i.wrapper))n=s;else{let o=ir.of(i.wrapper,(e=this.cache.find(ir,l=>l.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);n.append(o),n=o}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),i=this.cache.find($h,void 0,1);return i&&(i.flags=n),i||new $h(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class T8{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skipCount);if(this.skipCount=0,l)throw new Error("Ran out of text content when drawing inline views");this.text=s;let c=this.textOff=Math.min(e,s.length);return o?null:s.slice(0,c)}let n=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,n);return this.textOff=n,i}}const Uh=[uo,zl,Gr,mn,$h,ir,Pd];for(let t=0;t<Uh.length;t++)Uh[t].bucket=t;class D8{constructor(e){this.view=e,this.buckets=Uh.map(()=>[]),this.index=Uh.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,i=this.buckets[n];i.length<6?i.push(e):i[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,i=2){let s=e.bucket,o=this.buckets[s],l=this.index[s];for(let c=o.length-1;c>=0;c--){let f=(c+l)%o.length,h=o[f];if((!n||n(h))&&!this.reused.has(h))return o.splice(f,1),f<l&&this.index[s]--,this.reused.set(h,i),h}return null}findWidget(e,n,i){let s=this.buckets[0];if(s.length)for(let o=0,l=0;;o++){if(o==s.length){if(l)return null;l=1,o=0}let c=s[o];if(!this.reused.has(c)&&(l==0?c.widget.compare(e):c.widget.constructor==e.constructor&&e.updateDOM(c.dom,this.view)))return s.splice(o,1),o<this.index[0]&&this.index[0]--,c.widget==e&&c.length==n&&(c.flags&497)==i?(this.reused.set(c,1),c):(this.reused.set(c,2),new uo(c.dom,n,e,c.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class R8{constructor(e,n,i,s,o){this.view=e,this.decorations=s,this.disallowBlockEffectsFor=o,this.openWidget=!1,this.openMarks=0,this.cache=new D8(e),this.text=new T8(e.state.doc),this.builder=new N8(this.cache,new Pd(e,e.contentDOM),ze.iter(i)),this.cache.reused.set(n,2),this.old=new E8(n),this.reuseWalker={skip:(l,c,f)=>{if(this.cache.add(l),l.isComposite())return!1},enter:l=>this.cache.add(l),leave:()=>{},break:()=>{}}}run(e,n){let i=n&&this.getCompositionContext(n.text);for(let s=0,o=0,l=0;;){let c=l<e.length?e[l++]:null,f=c?c.fromA:this.old.root.length;if(f>s){let h=f-s;this.preserve(h,!l,!c),s=f,o+=h}if(!c)break;n&&c.fromA<=n.range.fromA&&c.toA>=n.range.toA?(this.forward(c.fromA,n.range.fromA,n.range.fromA<n.range.toA?1:-1),this.emit(o,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,i),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,c.toA),this.emit(n.range.toB,c.toB)):(this.forward(c.fromA,c.toA),this.emit(o,c.toB)),o=c.toB,s=c.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,i){let s=B8(this.old),o=this.openMarks;this.old.advance(e,i?1:-1,{skip:(l,c,f)=>{if(l.isWidget())if(this.openWidget)this.builder.continueWidget(f-c);else{let h=f>0||c<l.length?uo.of(l.widget,this.view,f-c,l.flags&496,this.cache.maybeReuse(l)):this.cache.reuse(l);h.flags&256?(h.flags&=-2,this.builder.addBlockWidget(h)):(this.builder.ensureLine(null),this.builder.addInlineWidget(h,s,o),o=s.length)}else if(l.isText())this.builder.ensureLine(null),!c&&f==l.length?this.builder.addText(l.text,s,o,this.cache.reuse(l)):(this.cache.add(l),this.builder.addText(l.text.slice(c,f),s,o)),o=s.length;else if(l.isLine())l.flags&=-2,this.cache.reused.set(l,1),this.builder.addLine(l);else if(l instanceof $h)this.cache.add(l);else if(l instanceof mn)this.builder.ensureLine(null),this.builder.addMark(l,s,o),this.cache.reused.set(l,1),o=s.length;else return!1;this.openWidget=!1},enter:l=>{l.isLine()?this.builder.addLineStart(l.attrs,this.cache.maybeReuse(l)):(this.cache.add(l),l instanceof mn&&s.unshift(l.mark)),this.openWidget=!1},leave:l=>{l.isLine()?s.length&&(s.length=o=0):l instanceof mn&&(s.shift(),o=Math.min(o,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let i=null,s=this.builder,o=0,l=ze.spans(this.decorations,e,n,{point:(c,f,h,p,g,y)=>{if(h instanceof ao){if(this.disallowBlockEffectsFor[y]){if(h.block)throw new RangeError("Block decorations may not be specified via plugins");if(f>this.view.state.doc.lineAt(c).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(o=p.length,g>p.length)s.continueWidget(f-c);else{let v=h.widget||(h.block?Pl.block:Pl.inline),b=L8(h),S=this.cache.findWidget(v,f-c,b)||uo.of(v,this.view,f-c,b);h.block?(h.startSide>0&&s.addLineStartIfNotCovered(i),s.addBlockWidget(S)):(s.ensureLine(i),s.addInlineWidget(S,p,g))}i=null}else i=_8(i,h);f>c&&this.text.skip(f-c)},span:(c,f,h,p)=>{for(let g=c;g<f;){let y=this.text.next(Math.min(512,f-g));y==null?(s.addLineStartIfNotCovered(i),s.addBreak(),g++):(s.ensureLine(i),s.addText(y,h,g==c?p:h.length),g+=y.length),i=null}}});s.addLineStartIfNotCovered(i),this.openWidget=l>o,this.openMarks=l}forward(e,n,i=1){n-e<=10?this.old.advance(n-e,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(e){let n=[],i=null;for(let s=e.parentNode;;s=s.parentNode){let o=At.get(s);if(s==this.view.contentDOM)break;o instanceof mn?n.push(o):o?.isLine()?i=o:s.nodeName=="DIV"&&!i&&s!=this.view.contentDOM?i=new zl(s,iE):n.push(mn.of(new tu({tagName:s.nodeName.toLowerCase(),attributes:o8(s)}),s))}return{line:i,marks:n}}}function p2(t,e){let n=i=>{for(let s of i.children)if((e?s.isText():s.length)||n(s))return!0;return!1};return n(t)}function L8(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const iE={class:"cm-line"};function _8(t,e){let n=e.spec.attributes,i=e.spec.class;return!n&&!i||(t||(t={class:"cm-line"}),n&&fx(n,t),i&&(t.class+=" "+i)),t}function B8(t){let e=[];for(let n=t.parents.length;n>1;n--){let i=n==t.parents.length?t.tile:t.parents[n].tile;i instanceof mn&&e.push(i.mark)}return e}function jm(t){let e=At.get(t);return e&&e.setDOM(t.cloneNode()),t}class Pl extends zi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Pl.inline=new Pl("span");Pl.block=new Pl("div");const Hm=new class extends zi{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class g2{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=Se.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Pd(e,e.contentDOM),this.updateInner([new qn(0,0,0,e.state.doc.length)],null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:p,toA:g})=>g<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!q8(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let o=s>-1?P8(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:g}=this.hasComposition;i=new qn(p,g,e.changes.mapPos(p,-1),e.changes.mapPos(g,1)).addToSet(i.slice())}this.hasComposition=o?{from:o.range.fromB,to:o.range.toB}:null,(me.ie||me.chrome)&&!o&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let l=this.decorations,c=this.blockWrappers;this.updateDeco();let f=I8(l,this.decorations,e.changes);f.length&&(i=qn.extendWithRanges(i,f));let h=$8(c,this.blockWrappers,e.changes);return h.length&&(i=qn.extendWithRanges(i,h)),o&&!i.some(p=>p.fromA<=o.range.fromA&&p.toA>=o.range.toA)&&(i=o.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,o),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(n||e.length){let l=this.tile,c=new R8(this.view,l,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=c.run(e,n),iy(l,c.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=me.chrome||me.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(o),o&&(o.written||i.selectionRange.focusNode!=o.node||!this.tile.dom.contains(o.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.tile.children)o.isWidget()&&o.widget instanceof Im&&s.push(o.dom);i.updateGaps(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(ZO)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,s=this.view.root.activeElement,o=s==i,l=!o&&!(this.view.state.facet(cs)||i.tabIndex>-1)&&ac(i,this.view.observer.selectionRange)&&!(s&&i.contains(s));if(!(o||n||l))return;let c=this.forceSelection;this.forceSelection=!1;let f=this.view.state.selection.main,h,p;if(f.empty?p=h=this.inlineDOMNearPos(f.anchor,f.assoc||1):(p=this.inlineDOMNearPos(f.head,f.head==f.from?1:-1),h=this.inlineDOMNearPos(f.anchor,f.anchor==f.from?1:-1)),me.gecko&&f.empty&&!this.hasComposition&&z8(h)){let y=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(y,h.node.childNodes[h.offset]||null)),h=p=new li(y,0),c=!0}let g=this.view.observer.selectionRange;(c||!g.focusNode||(!uc(h.node,h.offset,g.anchorNode,g.anchorOffset)||!uc(p.node,p.offset,g.focusNode,g.focusOffset))&&!this.suppressWidgetCursorChange(g,f))&&(this.view.observer.ignore(()=>{me.android&&me.chrome&&i.contains(g.focusNode)&&U8(g.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let y=Bl(this.view.root);if(y)if(f.empty){if(me.gecko){let v=j8(h.node,h.offset);if(v&&v!=3){let b=(v==1?zO:PO)(h.node,h.offset);b&&(h=new li(b.node,b.offset))}}y.collapse(h.node,h.offset),f.bidiLevel!=null&&y.caretBidiLevel!==void 0&&(y.caretBidiLevel=f.bidiLevel)}else if(y.extend){y.collapse(h.node,h.offset);try{y.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();f.anchor>f.head&&([h,p]=[p,h]),v.setEnd(p.node,p.offset),v.setStart(h.node,h.offset),y.removeAllRanges(),y.addRange(v)}l&&this.view.root.activeElement==i&&(i.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new li(g.anchorNode,g.anchorOffset),this.impreciseHead=p.precise?null:new li(g.focusNode,g.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&uc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Bl(e.root),{anchorNode:s,anchorOffset:o}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let l=this.lineAt(n.head,n.assoc);if(!l)return;let c=l.posAtStart;if(n.head==c||n.head==c+l.length)return;let f=this.coordsAt(n.head,-1),h=this.coordsAt(n.head,1);if(!f||!h||f.bottom>h.top)return;let p=this.domAtPos(n.head+n.assoc,n.assoc);i.collapse(p.node,p.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let g=e.observer.selectionRange;e.docView.posFromDOM(g.anchorNode,g.anchorOffset)!=n.from&&i.collapse(s,o)}posFromDOM(e,n){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let s=i.posAtStart;if(i.isComposite()){let o;if(e==i.dom)o=i.dom.childNodes[n];else{let l=gs(e)==0?0:n==0?-1:1;for(;;){let c=e.parentNode;if(c==i.dom)break;l==0&&c.firstChild!=c.lastChild&&(e==c.firstChild?l=-1:l=1),e=c}l<0?o=e:o=e.nextSibling}if(o==i.dom.firstChild)return s;for(;o&&!At.get(o);)o=o.nextSibling;if(!o)return s+i.length;for(let l=0,c=s;;l++){let f=i.children[l];if(f.dom==o)return c;c+=f.length+f.breakAfter}}else return i.isText()?e==i.dom?s+n:s+(n?i.length:0):s}domAtPos(e,n){let{tile:i,offset:s}=this.tile.resolveBlock(e,n);return i.isWidget()?i.domPosFor(e,n):i.domIn(s,n)}inlineDOMNearPos(e,n){let i,s=-1,o=!1,l,c=-1,f=!1;return this.tile.blockTiles((h,p)=>{if(h.isWidget()){if(h.flags&32&&p>=e)return!0;h.flags&16&&(o=!0)}else{let g=p+h.length;if(p<=e&&(i=h,s=e-p,o=g<e),g>=e&&!l&&(l=h,c=e-p,f=p>e),p>e&&l)return!0}}),!i&&!l?this.domAtPos(e,n):(o&&l?i=null:f&&i&&(l=null),i&&n<0||!l?i.domIn(s,n):l.domIn(c,n))}coordsAt(e,n){let{tile:i,offset:s}=this.tile.resolveBlock(e,n);return i.isWidget()?i.widget instanceof Im?null:i.coordsInWidget(s,n,!0):i.coordsIn(s,n)}lineAt(e,n){let{tile:i}=this.tile.resolveBlock(e,n);return i.isLine()?i:null}coordsForChar(e){let{tile:n,offset:i}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function s(o,l){if(o.isComposite())for(let c of o.children){if(c.length>=l){let f=s(c,l);if(f)return f}if(l-=c.length,l<0)break}else if(o.isText()&&l<o.length){let c=Dt(o.text,l);if(c==l)return null;let f=Tc(o.dom,l,c).getClientRects();for(let h=0;h<f.length;h++){let p=f[h];if(h==f.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return s(n,i)}measureVisibleLineHeights(e){let n=[],{from:i,to:s}=e,o=this.view.contentDOM.clientWidth,l=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,f=this.view.textDirection==it.LTR,h=0,p=(g,y,v)=>{for(let b=0;b<g.children.length&&!(y>s);b++){let S=g.children[b],k=y+S.length,A=S.dom.getBoundingClientRect(),{height:N}=A;if(v&&!b&&(h+=A.top-v.top),S instanceof ir)k>i&&p(S,y,A);else if(y>=i&&(h>0&&n.push(-h),n.push(N+h),h=0,l)){let O=S.dom.lastChild,M=O?cc(O):[];if(M.length){let _=M[M.length-1],L=f?_.right-A.left:A.right-_.left;L>c&&(c=L,this.minWidth=o,this.minWidthFrom=y,this.minWidthTo=k)}}v&&b==g.children.length-1&&(h+=v.bottom-A.bottom),y=k+S.breakAfter}};return p(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?it.RTL:it.LTR}measureTextSize(){let e=this.tile.blockTiles(l=>{if(l.isLine()&&l.children.length&&l.length<=20){let c=0,f;for(let h of l.children){if(!h.isText()||/[^ -~]/.test(h.text))return;let p=cc(h.dom);if(p.length!=1)return;c+=p[0].width,f=p[0].height}if(c)return{lineHeight:l.dom.getBoundingClientRect().height,charWidth:c/l.length,textHeight:f}}});if(e)return e;let n=document.createElement("div"),i,s,o;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let l=cc(n.firstChild)[0];i=n.getBoundingClientRect().height,s=l&&l.width?l.width/27:7,o=l&&l.height?l.height:i,n.remove()}),{lineHeight:i,charWidth:s,textHeight:o}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,s=0;;s++){let o=s==n.viewports.length?null:n.viewports[s],l=o?o.from-1:this.view.state.doc.length;if(l>i){let c=(n.lineBlockAt(l).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Se.replace({widget:new Im(c),block:!0,inclusive:!0,isBlockGap:!0}).range(i,l))}if(!o)break;i=o.to+1}return Se.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Bd).map(o=>(this.dynamicDecorationMap[e++]=typeof o=="function")?o(this.view):o),i=!1,s=this.view.state.facet(yx).map((o,l)=>{let c=typeof o=="function";return c&&(i=!0),c?o(this.view):o});for(s.length&&(this.dynamicDecorationMap[e++]=i,n.push(ze.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(eE).map(o=>typeof o=="function"?o(this.view):o)}scrollIntoView(e){if(e.isSnapshot){let h=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=h.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let h of this.view.state.facet(KO))try{if(h(this.view,e.range,e))return!0}catch(p){xn(this.view.state,p,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!i)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let o=xx(this.view),l={left:i.left-o.left,top:i.top-o.top,right:i.right+o.right,bottom:i.bottom+o.bottom},{offsetWidth:c,offsetHeight:f}=this.view.scrollDOM;c8(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,f),-f),this.view.textDirection==it.LTR)}lineHasWidget(e){let n=i=>i.isWidget()||i.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){iy(this.tile)}}function iy(t,e){let n=e?.get(t);if(n!=1){n==null&&t.destroy();for(let i of t.children)iy(i,e)}}function z8(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function sE(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=zO(n.focusNode,n.focusOffset),s=PO(n.focusNode,n.focusOffset),o=i||s;if(s&&i&&s.node!=i.node){let c=At.get(s.node);if(!c||c.isText()&&c.text!=s.node.nodeValue)o=s;else if(t.docView.lastCompositionAfterCursor){let f=At.get(i.node);!f||f.isText()&&f.text!=i.node.nodeValue||(o=s)}}if(t.docView.lastCompositionAfterCursor=o!=i,!o)return null;let l=e-o.offset;return{from:l,to:l+o.node.nodeValue.length,node:o.node}}function P8(t,e,n){let i=sE(t,n);if(!i)return null;let{node:s,from:o,to:l}=i,c=s.nodeValue;if(/[\n\r]/.test(c)||t.state.doc.sliceString(i.from,i.to)!=c)return null;let f=e.invertedDesc;return{range:new qn(f.mapPos(o),f.mapPos(l),o,l),text:s}}function j8(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let H8=class{constructor(){this.changes=[]}compareRange(e,n){bl(e,n,this.changes)}comparePoint(e,n){bl(e,n,this.changes)}boundChange(e){bl(e,e,this.changes)}};function I8(t,e,n){let i=new H8;return ze.compare(t,e,n,i),i.changes}class V8{constructor(){this.changes=[]}compareRange(e,n){bl(e,n,this.changes)}comparePoint(){}boundChange(e){bl(e,e,this.changes)}}function $8(t,e,n){let i=new V8;return ze.compare(t,e,n,i),i.changes}function U8(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function q8(t,e){let n=!1;return e&&t.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(n=!0)}),n}class Im extends zi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function Q8(t,e,n=1){let i=t.charCategorizer(e),s=t.doc.lineAt(e),o=e-s.from;if(s.length==0)return ae.cursor(e);o==0?n=1:o==s.length&&(n=-1);let l=o,c=o;n<0?l=Dt(s.text,o,!1):c=Dt(s.text,o);let f=i(s.text.slice(l,c));for(;l>0;){let h=Dt(s.text,l,!1);if(i(s.text.slice(h,l))!=f)break;l=h}for(;c<s.length;){let h=Dt(s.text,c);if(i(s.text.slice(c,h))!=f)break;c=h}return ae.range(l+s.from,c+s.from)}function Y8(t,e,n,i,s){let o=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let c=t.viewState.heightOracle.textHeight,f=Math.floor((s-n.top-(t.defaultLineHeight-c)*.5)/c);o+=f*t.viewState.heightOracle.lineLength}let l=t.state.sliceDoc(n.from,n.to);return n.from+Q0(l,o,t.state.tabSize)}function sy(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let s;for(let o of i.type){if(o.from>e)break;if(!(o.to<e)){if(o.from<e&&o.to>e)return o;(!s||o.type==qt.Text&&(s.type!=o.type||(n<0?o.from<e:o.to>e)))&&(s=o)}}return s||i}return i}function X8(t,e,n,i){let s=sy(t,e.head,e.assoc||-1),o=!i||s.type!=qt.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(o){let l=t.dom.getBoundingClientRect(),c=t.textDirectionAt(s.from),f=t.posAtCoords({x:n==(c==it.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(f!=null)return ae.cursor(f,n?-1:1)}return ae.cursor(n?s.to:s.from,n?-1:1)}function m2(t,e,n,i){let s=t.state.doc.lineAt(e.head),o=t.bidiSpans(s),l=t.textDirectionAt(s.from);for(let c=e,f=null;;){let h=S8(s,o,l,c,n),p=$O;if(!h){if(s.number==(n?t.state.doc.lines:1))return c;p=`
`,s=t.state.doc.line(s.number+(n?1:-1)),o=t.bidiSpans(s),h=t.visualLineSide(s,!n)}if(f){if(!f(p))return c}else{if(!i)return h;f=i(p)}c=h}}function F8(t,e,n){let i=t.state.charCategorizer(e),s=i(n);return o=>{let l=i(o);return s==at.Space&&(s=l),s==l}}function G8(t,e,n,i){let s=e.head,o=n?1:-1;if(s==(n?t.state.doc.length:0))return ae.cursor(s,e.assoc);let l=e.goalColumn,c,f=t.contentDOM.getBoundingClientRect(),h=t.coordsAtPos(s,e.assoc||-1),p=t.documentTop;if(h)l==null&&(l=h.left-f.left),c=o<0?h.top:h.bottom;else{let b=t.viewState.lineBlockAt(s);l==null&&(l=Math.min(f.right-f.left,t.defaultCharacterWidth*(s-b.from))),c=(o<0?b.top:b.bottom)+p}let g=f.left+l,y=i??t.viewState.heightOracle.textHeight>>1,v=ry(t,{x:g,y:c+y*o},!1,o);return ae.cursor(v.pos,v.assoc,void 0,l)}function fc(t,e,n){for(;;){let i=0;for(let s of t)s.between(e-1,e+1,(o,l,c)=>{if(e>o&&e<l){let f=i||n||(e-o<l-e?-1:1);e=f<0?o:l,i=f}});if(!i)return e}}function rE(t,e){let n=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],o=null;if(s.empty){let l=fc(t,s.from,0);l!=s.from&&(o=ae.cursor(l,-1))}else{let l=fc(t,s.from,-1),c=fc(t,s.to,1);(l!=s.from||c!=s.to)&&(o=ae.range(s.from==s.anchor?l:c,s.from==s.head?l:c))}o&&(n||(n=e.ranges.slice()),n[i]=o)}return n?ae.create(n,e.mainIndex):e}function Vm(t,e,n){let i=fc(t.state.facet(iu).map(s=>s(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:ae.cursor(i,i<n.from?1:-1)}class Oi{constructor(e,n){this.pos=e,this.assoc=n}}function ry(t,e,n,i){let s=t.contentDOM.getBoundingClientRect(),o=s.top+t.viewState.paddingTop,{x:l,y:c}=e,f=c-o,h;for(;;){if(f<0)return new Oi(0,1);if(f>t.viewState.docHeight)return new Oi(t.state.doc.length,-1);if(h=t.elementAtHeight(f),i==null)break;if(h.type==qt.Text){if(i<0?h.to<t.viewport.from:h.from>t.viewport.to)break;let y=t.docView.coordsAt(i<0?h.from:h.to,i);if(y&&(i<0?y.top<=f+o:y.bottom>=f+o))break}let g=t.viewState.heightOracle.textHeight/2;f=i>0?h.bottom+g:h.top-g}if(t.viewport.from>=h.to||t.viewport.to<=h.from){if(n)return null;if(h.type==qt.Text){let g=Y8(t,s,h,l,c);return new Oi(g,g==h.from?1:-1)}}if(h.type!=qt.Text)return f<(h.top+h.bottom)/2?new Oi(h.from,1):new Oi(h.to,-1);let p=t.docView.lineAt(h.from,2);return(!p||p.length!=h.length)&&(p=t.docView.lineAt(h.from,-2)),oE(t,p,h.from,l,c)}function oE(t,e,n,i,s){let o=-1,l=null,c=1e9,f=1e9,h=s,p=s,g=(y,v)=>{for(let b=0;b<y.length;b++){let S=y[b];if(S.top==S.bottom)continue;let k=S.left>i?S.left-i:S.right<i?i-S.right:0,A=S.top>s?S.top-s:S.bottom<s?s-S.bottom:0;S.top<=p&&S.bottom>=h&&(h=Math.min(S.top,h),p=Math.max(S.bottom,p),A=0),(o<0||(A-f||k-c)<0)&&(o>=0&&f&&c<k&&l.top<=p-2&&l.bottom>=h+2?f=0:(o=v,c=k,f=A,l=S))}};if(e.isText()){for(let v=0;v<e.length;){let b=Dt(e.text,v);if(g(Tc(e.dom,v,b).getClientRects(),v),!c&&!f)break;v=b}return i>(l.left+l.right)/2==(y2(t,o+n)==it.LTR)?new Oi(n+Dt(e.text,o),-1):new Oi(n+o,1)}else{if(!e.length)return new Oi(n,1);for(let S=0;S<e.children.length;S++){let k=e.children[S];if(k.flags&48)continue;let A=(k.dom.nodeType==1?k.dom:Tc(k.dom,0,k.length)).getClientRects();if(g(A,S),!c&&!f)break}let y=e.children[o],v=e.posBefore(y,n);return y.isComposite()||y.isText()?oE(t,y,v,Math.max(l.left,Math.min(l.right,i)),s):i>(l.left+l.right)/2==(y2(t,o+n)==it.LTR)?new Oi(v+y.length,-1):new Oi(v,1)}}function y2(t,e){let n=t.state.doc.lineAt(e);return t.bidiSpans(n)[fs.find(t.bidiSpans(n),e-n.from,-1,1)].dir}const ec="";class W8{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(Ve.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ec}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let o=this.text.length;this.readNode(s);let l=At.get(s),c=s.nextSibling;if(c==n){l?.breakAfter&&!c&&i!=this.view.contentDOM&&this.lineBreak();break}let f=At.get(c);(l&&f?l.breakAfter:(l?l.breakAfter:Ih(s))||Ih(c)&&(s.nodeName!="BR"||l?.isWidget())&&this.text.length>o)&&!Z8(c,n)&&this.lineBreak(),s=c}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,l=1,c;if(this.lineSeparator?(o=n.indexOf(this.lineSeparator,i),l=this.lineSeparator.length):(c=s.exec(n))&&(o=c.index,l=c[0].length),this.append(n.slice(i,o<0?n.length:o)),o<0)break;if(this.lineBreak(),l>1)for(let f of this.points)f.node==e&&f.pos>this.text.length&&(f.pos-=l-1);i=o+l}}readNode(e){let n=At.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(K8(e,i.node,i.offset)?n:0))}}function K8(t,e,n){for(;;){if(!e||n<gs(e))return!1;if(e==t)return!0;n=ur(e)+1,e=e.parentNode}}function Z8(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let i=At.get(t);if(!i?.isWidget())return!1;i&&(n||(n=[])).push(i)}if(n)for(let i of n){let s=i.overrideDOMText;if(s?.length)return!1}return!0}class x2{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class J8{constructor(e,n,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:o,impreciseAnchor:l}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=lE(e.docView.tile,n,i,0))){let c=o||l?[]:tz(e),f=new W8(c,e);f.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=f.text,this.newSel=nz(c,this.bounds.from)}else{let c=e.observer.selectionRange,f=o&&o.node==c.focusNode&&o.offset==c.focusOffset||!Z0(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),h=l&&l.node==c.anchorNode&&l.offset==c.anchorOffset||!Z0(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((me.ios||me.chrome)&&e.state.selection.main.empty&&f!=h&&(p.from>0||p.to<e.state.doc.length)){let g=Math.min(f,h),y=Math.max(f,h),v=p.from-g,b=p.to-y;(v==0||v==1||g==0)&&(b==0||b==-1||y==e.state.doc.length)&&(f=0,h=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ae.range(h,f)):this.newSel=ae.single(h,f)}}}function lE(t,e,n,i){if(t.isComposite()){let s=-1,o=-1,l=-1,c=-1;for(let f=0,h=i,p=i;f<t.children.length;f++){let g=t.children[f],y=h+g.length;if(h<e&&y>n)return lE(g,e,n,h);if(y>=e&&s==-1&&(s=f,o=h),h>n&&g.dom.parentNode==t.dom){l=f,c=p;break}p=y,h=y+g.breakAfter}return{from:o,to:c<0?i+t.length:c,startDOM:(s?t.children[s-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:l<t.children.length&&l>=0?t.children[l].dom:null}}else return t.isText()?{from:i,to:i+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function aE(t,e){let n,{newSel:i}=e,s=t.state.selection.main,o=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:l,to:c}=e.bounds,f=s.from,h=null;(o===8||me.android&&e.text.length<c-l)&&(f=s.to,h="end");let p=cE(t.state.doc.sliceString(l,c,ec),e.text,f-l,h);p&&(me.chrome&&o==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==ec+ec&&p.toB--,n={from:l+p.from,to:l+p.toA,insert:Qe.of(e.text.slice(p.from,p.toB).split(ec))})}else i&&(!t.hasFocus&&t.state.facet(cs)||qh(i,s))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!s.empty&&i&&i.main.empty?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(me.mac||me.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=ae.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Qe.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,s.to))}:t.state.doc.lineAt(s.from).to<s.to&&t.docView.lineHasWidget(s.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:s.from,to:s.to,insert:t.state.toText(t.inputState.insertingText)}:me.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=ae.single(i.main.anchor-1,i.main.head-1)),n={from:s.from,to:s.to,insert:Qe.of([" "])}),n)return vx(t,n,i,o);if(i&&!qh(i,s)){let l=!1,c="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(l=!0),c=t.inputState.lastSelectionOrigin,c=="select.pointer"&&(i=rE(t.state.facet(iu).map(f=>f(t)),i))),t.dispatch({selection:i,scrollIntoView:l,userEvent:c}),!0}else return!1}function vx(t,e,n,i=-1){if(me.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(me.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Sl(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Sl(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Sl(t.contentDOM,"Delete",46)))return!0;let o=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let l,c=()=>l||(l=ez(t,e,n));return t.state.facet(XO).some(f=>f(t,e.from,e.to,o,c))||t.dispatch(c()),!0}function ez(t,e,n){let i,s=t.state,o=s.selection.main,l=-1;if(e.from==e.to&&e.from<o.from||e.from>o.to){let f=e.from<o.from?-1:1,h=f<0?o.from:o.to,p=fc(s.facet(iu).map(g=>g(t)),h,f);e.from==p&&(l=p)}if(l>-1)i={changes:e,selection:ae.cursor(e.from+e.insert.length,-1)};else if(e.from>=o.from&&e.to<=o.to&&e.to-e.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let f=o.from<e.from?s.sliceDoc(o.from,e.from):"",h=o.to>e.to?s.sliceDoc(e.to,o.to):"";i=s.replaceSelection(t.state.toText(f+e.insert.sliceString(0,void 0,t.state.lineBreak)+h))}else{let f=s.changes(e),h=n&&n.main.to<=f.newLength?n.main:void 0;if(s.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=o.to+10&&e.to>=o.to-10){let p=t.state.sliceDoc(e.from,e.to),g,y=n&&sE(t,n.main.head);if(y){let b=e.insert.length-(e.to-e.from);g={from:y.from,to:y.to-b}}else g=t.state.doc.lineAt(o.head);let v=o.to-e.to;i=s.changeByRange(b=>{if(b.from==o.from&&b.to==o.to)return{changes:f,range:h||b.map(f)};let S=b.to-v,k=S-p.length;if(t.state.sliceDoc(k,S)!=p||S>=g.from&&k<=g.to)return{range:b};let A=s.changes({from:k,to:S,insert:e.insert}),N=b.to-o.to;return{changes:A,range:h?ae.range(Math.max(0,h.anchor+N),Math.max(0,h.head+N)):b.map(A)}})}else i={changes:f,selection:h&&s.selection.replaceRange(h)}}let c="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,c+=".compose",t.inputState.compositionFirstChange&&(c+=".start",t.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:c,scrollIntoView:!0})}function cE(t,e,n,i){let s=Math.min(t.length,e.length),o=0;for(;o<s&&t.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==s&&t.length==e.length)return null;let l=t.length,c=e.length;for(;l>0&&c>0&&t.charCodeAt(l-1)==e.charCodeAt(c-1);)l--,c--;if(i=="end"){let f=Math.max(0,o-Math.min(l,c));n-=l+f-o}if(l<o&&t.length<e.length){let f=n<=o&&n>=l?o-n:0;o-=f,c=o+(c-l),l=o}else if(c<o){let f=n<=o&&n>=c?o-n:0;o-=f,l=o+(l-c),c=o}return{from:o,toA:l,toB:c}}function tz(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}=t.observer.selectionRange;return n&&(e.push(new x2(n,i)),(s!=n||o!=i)&&e.push(new x2(s,o))),e}function nz(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?ae.single(n+e,i+e):null}function qh(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class iz{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,me.safari&&e.contentDOM.addEventListener("input",()=>null),me.gecko&&xz(e.contentDOM.ownerDocument)}handleEvent(e){!fz(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,n);for(let s of i.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=sz(e),i=this.handlers,s=this.view.contentDOM;for(let o in n)if(o!="scroll"){let l=!n[o].handlers.length,c=i[o];c&&l!=!c.handlers.length&&(s.removeEventListener(o,this.handleEvent),c=null),c||s.addEventListener(o,this.handleEvent,{passive:l})}for(let o in i)o!="scroll"&&!n[o]&&s.removeEventListener(o,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&fE.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),me.android&&me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=uE.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||rz.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Sl(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:me.safari&&!me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function v2(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(s){xn(n.state,s)}}}function sz(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let s=i.spec,o=s&&s.plugin.domEventHandlers,l=s&&s.plugin.domEventObservers;if(o)for(let c in o){let f=o[c];f&&n(c).handlers.push(v2(i.value,f))}if(l)for(let c in l){let f=l[c];f&&n(c).observers.push(v2(i.value,f))}}for(let i in ci)n(i).handlers.push(ci[i]);for(let i in Fn)n(i).observers.push(Fn[i]);return e}const uE=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rz="dthko",fE=[16,17,18,20,91,92,224,225],Qf=6;function Yf(t){return Math.max(0,t)*.7+8}function oz(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class lz{constructor(e,n,i,s){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=u8(e.contentDOM),this.atoms=e.state.facet(iu).map(l=>l(e));let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ve.allowMultipleSelections)&&az(e,n),this.dragging=uz(e,n)&&pE(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&oz(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,s=0,o=0,l=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:l}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:c}=this.scrollParents.y.getBoundingClientRect());let f=xx(this.view);e.clientX-f.left<=s+Qf?n=-Yf(s-e.clientX):e.clientX+f.right>=l-Qf&&(n=Yf(e.clientX-l)),e.clientY-f.top<=o+Qf?i=-Yf(o-e.clientY):e.clientY+f.bottom>=c-Qf&&(i=Yf(e.clientY-c)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,i=rE(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function az(t,e){let n=t.state.facet(UO);return n.length?n[0](e):me.mac?e.metaKey:e.ctrlKey}function cz(t,e){let n=t.state.facet(qO);return n.length?n[0](e):me.mac?!e.altKey:!e.ctrlKey}function uz(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Bl(t.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let o=0;o<s.length;o++){let l=s[o];if(l.left<=e.clientX&&l.right>=e.clientX&&l.top<=e.clientY&&l.bottom>=e.clientY)return!0}return!1}function fz(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=At.get(n))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const ci=Object.create(null),Fn=Object.create(null),hE=me.ie&&me.ie_version<15||me.ios&&me.webkit_version<604;function hz(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),dE(t,n.value)},50)}function jd(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function dE(t,e){e=jd(t.state,px,e);let{state:n}=t,i,s=1,o=n.toText(e),l=o.lines==n.selection.ranges.length;if(oy!=null&&n.selection.ranges.every(f=>f.empty)&&oy==o.toString()){let f=-1;i=n.changeByRange(h=>{let p=n.doc.lineAt(h.from);if(p.from==f)return{range:h};f=p.from;let g=n.toText((l?o.line(s++).text:e)+n.lineBreak);return{changes:{from:p.from,insert:g},range:ae.cursor(h.from+g.length)}})}else l?i=n.changeByRange(f=>{let h=o.line(s++);return{changes:{from:f.from,to:f.to,insert:h.text},range:ae.cursor(f.from+h.length)}}):i=n.replaceSelection(o);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Fn.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};ci.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Fn.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Fn.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};ci.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(QO))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=pz(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new lz(t,e,n,i)),i&&t.observer.ignore(()=>{_O(t.contentDOM);let o=t.root.activeElement;o&&!o.contains(t.contentDOM)&&o.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function b2(t,e,n,i){if(i==1)return ae.cursor(e,n);if(i==2)return Q8(t.state,e,n);{let s=t.docView.lineAt(e,n),o=t.state.doc.lineAt(s?s.posAtEnd:e),l=s?s.posAtStart:o.from,c=s?s.posAtEnd:o.to;return c<t.state.doc.length&&c==o.to&&c++,ae.range(l,c)}}const dz=me.ie&&me.ie_version<=11;let S2=null,w2=0,C2=0;function pE(t){if(!dz)return t.detail;let e=S2,n=C2;return S2=t,C2=Date.now(),w2=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(w2+1)%3:1}function pz(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=pE(e),s=t.state.selection;return{update(o){o.docChanged&&(n.pos=o.changes.mapPos(n.pos),s=s.map(o.changes))},get(o,l,c){let f=t.posAndSideAtCoords({x:o.clientX,y:o.clientY},!1),h,p=b2(t,f.pos,f.assoc,i);if(n.pos!=f.pos&&!l){let g=b2(t,n.pos,n.assoc,i),y=Math.min(g.from,p.from),v=Math.max(g.to,p.to);p=y<p.from?ae.range(y,v):ae.range(v,y)}return l?s.replaceRange(s.main.extend(p.from,p.to)):c&&i==1&&s.ranges.length>1&&(h=gz(s,f.pos))?h:c?s.addRange(p):ae.create([p])}}}function gz(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:s}=t.ranges[n];if(i<=e&&s>=e)return ae.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}ci.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let s=t.docView.tile.nearest(e.target);if(s&&s.isWidget()){let o=s.posAtStart,l=o+s.length;(o>=n.to||l<=n.from)&&(n=ae.range(o,l))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",jd(t.state,gx,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ci.dragend=t=>(t.inputState.draggedContent=null,!1);function k2(t,e,n,i){if(n=jd(t.state,px,n),!n)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:o}=t.inputState,l=i&&o&&cz(t,e)?{from:o.from,to:o.to}:null,c={from:s,insert:n},f=t.state.changes(l?[l,c]:c);t.focus(),t.dispatch({changes:f,selection:{anchor:f.mapPos(s,-1),head:f.mapPos(s,1)},userEvent:l?"move.drop":"input.drop"}),t.inputState.draggedContent=null}ci.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),s=0,o=()=>{++s==n.length&&k2(t,e,i.filter(l=>l!=null).join(t.state.lineBreak),!1)};for(let l=0;l<n.length;l++){let c=new FileReader;c.onerror=o,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(i[l]=c.result),o()},c.readAsText(n[l])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return k2(t,e,i,!0),!0}return!1};ci.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=hE?null:e.clipboardData;return n?(dE(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(hz(t),!1)};function mz(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function yz(t){let e=[],n=[],i=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:o}of t.selection.ranges){let l=t.doc.lineAt(o);l.number>s&&(e.push(l.text),n.push({from:l.from,to:Math.min(t.doc.length,l.to+1)})),s=l.number}i=!0}return{text:jd(t,gx,e.join(t.lineBreak)),ranges:n,linewise:i}}let oy=null;ci.copy=ci.cut=(t,e)=>{let n=Bl(t.root);if(n&&!ac(t.contentDOM,n))return!1;let{text:i,ranges:s,linewise:o}=yz(t.state);if(!i&&!o)return!1;oy=o?i:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:s,scrollIntoView:!0,userEvent:"delete.cut"});let l=hE?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",i),!0):(mz(t,i),!1)};const gE=_i.define();function mE(t,e){let n=[];for(let i of t.facet(FO)){let s=i(t,e);s&&n.push(s)}return n.length?t.update({effects:n,annotations:gE.of(!0)}):null}function yE(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=mE(t.state,e);n?t.dispatch(n):t.update([])}},10)}Fn.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),yE(t)};Fn.blur=t=>{t.observer.clearSelectionRange(),yE(t)};Fn.compositionstart=Fn.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Fn.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,me.chrome&&me.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Fn.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};ci.beforeinput=(t,e)=>{var n,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let o=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),l=e.getTargetRanges();if(o&&l.length){let c=l[0],f=t.posAtDOM(c.startContainer,c.startOffset),h=t.posAtDOM(c.endContainer,c.endOffset);return vx(t,{from:f,to:h,insert:t.state.toText(o)},null),!0}}let s;if(me.chrome&&me.android&&(s=uE.find(o=>o.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let o=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var l;(((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0)>o+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return me.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),me.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Fn.compositionend(t,e),20),!1};const A2=new Set;function xz(t){A2.has(t)||(A2.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const O2=["pre-wrap","normal","pre-line","break-spaces"];let jl=!1;function E2(){jl=!1}class vz{constructor(e){this.lineWrapping=e,this.doc=Qe.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return O2.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,i,s,o,l){let c=O2.indexOf(e)>-1,f=Math.abs(n-this.lineHeight)>.3||this.lineWrapping!=c||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=c,this.lineHeight=n,this.charWidth=i,this.textHeight=s,this.lineLength=o,f){this.heightSamples={};for(let h=0;h<l.length;h++){let p=l[h];p<0?h++:this.heightSamples[Math.floor(p*10)]=!0}}return f}}class bz{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class si{constructor(e,n,i,s,o){this.from=e,this.length=n,this.top=i,this.height=s,this._content=o}get type(){return typeof this._content=="number"?qt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ao?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new si(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var st=(function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t})(st||(st={}));const vh=.001;class rn{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>vh&&(jl=!0),this.height=e)}replace(e,n,i){return rn.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,s){let o=this,l=i.doc;for(let c=s.length-1;c>=0;c--){let{fromA:f,toA:h,fromB:p,toB:g}=s[c],y=o.lineAt(f,st.ByPosNoHeight,i.setDoc(n),0,0),v=y.to>=h?y:o.lineAt(h,st.ByPosNoHeight,i,0,0);for(g+=v.to-h,h=v.to;c>0&&y.from<=s[c-1].toA;)f=s[c-1].fromA,p=s[c-1].fromB,c--,f<y.from&&(y=o.lineAt(f,st.ByPosNoHeight,i,0,0));p+=y.from-f,f=y.from;let b=bx.build(i.setDoc(l),e,p,g);o=Qh(o,o.replace(f,h,b))}return o.updateHeight(i,0)}static empty(){return new Rn(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,s=0,o=0;for(;;)if(n==i)if(s>o*2){let c=e[n-1];c.break?e.splice(--n,1,c.left,null,c.right):e.splice(--n,1,c.left,c.right),i+=1+c.break,s-=c.size}else if(o>s*2){let c=e[i];c.break?e.splice(i,1,c.left,null,c.right):e.splice(i,1,c.left,c.right),i+=2+c.break,o-=c.size}else break;else if(s<o){let c=e[n++];c&&(s+=c.size)}else{let c=e[--i];c&&(o+=c.size)}let l=0;return e[n-1]==null?(l=1,n--):e[n]==null&&(l=1,i++),new wz(rn.of(e.slice(0,n)),l,rn.of(e.slice(i)))}}function Qh(t,e){return t==e?t:(t.constructor!=e.constructor&&(jl=!0),e)}rn.prototype.size=1;const Sz=Se.replace({});class xE extends rn{constructor(e,n,i){super(e,n),this.deco=i,this.spaceAbove=0}mainBlock(e,n){return new si(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,i,s){return this.spaceAbove&&e<i+this.spaceAbove?new si(s,0,i,this.spaceAbove,Sz):this.mainBlock(i,s)}lineAt(e,n,i,s,o){let l=this.mainBlock(s,o);return this.spaceAbove?this.blockAt(0,i,s,o).join(l):l}forEachLine(e,n,i,s,o,l){e<=o+this.length&&n>=o&&l(this.lineAt(0,st.ByPos,i,s,o))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Rn extends xE{constructor(e,n,i){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,n){return new si(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,i){let s=i[0];return i.length==1&&(s instanceof Rn||s instanceof $t&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof $t?s=new Rn(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):rn.of(i)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more?this.setMeasuredHeight(s):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $t extends rn{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,o=s-i+1,l,c=0;if(e.lineWrapping){let f=Math.min(this.height,e.lineHeight*o);l=f/o,this.length>o+1&&(c=(this.height-f)/(this.length-o-1))}else l=this.height/o;return{firstLine:i,lastLine:s,perLine:l,perChar:c}}blockAt(e,n,i,s){let{firstLine:o,lastLine:l,perLine:c,perChar:f}=this.heightMetrics(n,s);if(n.lineWrapping){let h=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),p=n.doc.lineAt(h),g=c+p.length*f,y=Math.max(i,e-g/2);return new si(p.from,p.length,y,g,0)}else{let h=Math.max(0,Math.min(l-o,Math.floor((e-i)/c))),{from:p,length:g}=n.doc.line(o+h);return new si(p,g,i+c*h,c,0)}}lineAt(e,n,i,s,o){if(n==st.ByHeight)return this.blockAt(e,i,s,o);if(n==st.ByPosNoHeight){let{from:v,to:b}=i.doc.lineAt(e);return new si(v,b-v,0,0,0)}let{firstLine:l,perLine:c,perChar:f}=this.heightMetrics(i,o),h=i.doc.lineAt(e),p=c+h.length*f,g=h.number-l,y=s+c*g+f*(h.from-o-g);return new si(h.from,h.length,Math.max(s,Math.min(y,s+this.height-p)),p,0)}forEachLine(e,n,i,s,o,l){e=Math.max(e,o),n=Math.min(n,o+this.length);let{firstLine:c,perLine:f,perChar:h}=this.heightMetrics(i,o);for(let p=e,g=s;p<=n;){let y=i.doc.lineAt(p);if(p==e){let b=y.number-c;g+=f*b+h*(e-o-b)}let v=f+h*y.length;l(new si(y.from,y.length,g,v,0)),g+=v,p=y.to+1}}replace(e,n,i){let s=this.length-n;if(s>0){let o=i[i.length-1];o instanceof $t?i[i.length-1]=new $t(o.length+s):i.push(null,new $t(s-1))}if(e>0){let o=i[0];o instanceof $t?i[0]=new $t(e+o.length):i.unshift(new $t(e-1),null)}return rn.of(i)}decomposeLeft(e,n){n.push(new $t(e-1),null)}decomposeRight(e,n){n.push(null,new $t(this.length-e-1))}updateHeight(e,n=0,i=!1,s){let o=n+this.length;if(s&&s.from<=n+this.length&&s.more){let l=[],c=Math.max(n,s.from),f=-1;for(s.from>n&&l.push(new $t(s.from-n-1).updateHeight(e,n));c<=o&&s.more;){let p=e.doc.lineAt(c).length;l.length&&l.push(null);let g=s.heights[s.index++],y=0;g<0&&(y=-g,g=s.heights[s.index++]),f==-1?f=g:Math.abs(g-f)>=vh&&(f=-2);let v=new Rn(p,g,y);v.outdated=!1,l.push(v),c+=p+1}c<=o&&l.push(null,new $t(o-c).updateHeight(e,c));let h=rn.of(l);return(f<0||Math.abs(h.height-this.height)>=vh||Math.abs(f-this.heightMetrics(e,n).perLine)>=vh)&&(jl=!0),Qh(this,h)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class wz extends rn{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,s){let o=i+this.left.height;return e<o?this.left.blockAt(e,n,i,s):this.right.blockAt(e,n,o,s+this.left.length+this.break)}lineAt(e,n,i,s,o){let l=s+this.left.height,c=o+this.left.length+this.break,f=n==st.ByHeight?e<l:e<c,h=f?this.left.lineAt(e,n,i,s,o):this.right.lineAt(e,n,i,l,c);if(this.break||(f?h.to<c:h.from>c))return h;let p=n==st.ByPosNoHeight?st.ByPosNoHeight:st.ByPos;return f?h.join(this.right.lineAt(c,p,i,l,c)):this.left.lineAt(c,p,i,s,o).join(h)}forEachLine(e,n,i,s,o,l){let c=s+this.left.height,f=o+this.left.length+this.break;if(this.break)e<f&&this.left.forEachLine(e,n,i,s,o,l),n>=f&&this.right.forEachLine(e,n,i,c,f,l);else{let h=this.lineAt(f,st.ByPos,i,s,o);e<h.from&&this.left.forEachLine(e,h.from-1,i,s,o,l),h.to>=e&&h.from<=n&&l(h),n>h.to&&this.right.forEachLine(h.to+1,n,i,c,f,l)}}replace(e,n,i){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,i));let o=[];e>0&&this.decomposeLeft(e,o);let l=o.length;for(let c of i)o.push(c);if(e>0&&M2(o,l-1),n<this.length){let c=o.length;this.decomposeRight(n,o),M2(o,c)}return rn.of(o)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?rn.of(this.break?[e,null,n]:[e,n]):(this.left=Qh(this.left,e),this.right=Qh(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,s){let{left:o,right:l}=this,c=n+o.length+this.break,f=null;return s&&s.from<=n+o.length&&s.more?f=o=o.updateHeight(e,n,i,s):o.updateHeight(e,n,i),s&&s.from<=c+l.length&&s.more?f=l=l.updateHeight(e,c,i,s):l.updateHeight(e,c,i),f?this.balanced(o,l):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function M2(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof $t&&(i=t[e+1])instanceof $t&&t.splice(e-1,3,new $t(n.length+1+i.length))}const Cz=5;class bx{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Rn?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Rn(i-this.pos,-1,0)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,o=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let l=n-e;i.block?this.addBlock(new xE(l,s,i)):(l||o||s>=Cz)&&this.addLineDeco(s,o,l)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Rn(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let i=new $t(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Rn)return e;let n=new Rn(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Rn)&&!this.isCovered?this.nodes.push(new Rn(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof Rn&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,n,i,s){let o=new bx(i,e);return ze.spans(n,i,s,o,0),o.finish(i)}}function kz(t,e,n){let i=new Az;return ze.compare(t,e,n,i,0),i.changes}class Az{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,s){(e<n||i&&i.heightRelevant||s&&s.heightRelevant)&&bl(e,n,this.changes,5)}}function Oz(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,s=i.defaultView||window,o=Math.max(0,n.left),l=Math.min(s.innerWidth,n.right),c=Math.max(0,n.top),f=Math.min(s.innerHeight,n.bottom);for(let h=t.parentNode;h&&h!=i.body;)if(h.nodeType==1){let p=h,g=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&g.overflow!="visible"){let y=p.getBoundingClientRect();o=Math.max(o,y.left),l=Math.min(l,y.right),c=Math.max(c,y.top),f=Math.min(h==t.parentNode?s.innerHeight:f,y.bottom)}h=g.position=="absolute"||g.position=="fixed"?p.offsetParent:p.parentNode}else if(h.nodeType==11)h=h.host;else break;return{left:o-n.left,right:Math.max(o,l)-n.left,top:c-(n.top+e),bottom:Math.max(c,f)-(n.top+e)}}function Ez(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function Mz(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class $m{constructor(e,n,i,s){this.from=e,this.to=n,this.size=i,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],o=n[i];if(s.from!=o.from||s.to!=o.to||s.size!=o.size)return!1}return!0}draw(e,n){return Se.replace({widget:new Nz(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Nz extends zi{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class N2{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=T2,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=it.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(mx).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new vz(n),this.stateDeco=D2(e),this.heightMap=rn.empty().applyChanges(this.stateDeco,Qe.empty,this.heightOracle.setDoc(e.doc),[new qn(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Se.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let s=i?n.head:n.anchor;if(!e.some(({from:o,to:l})=>s>=o&&s<=l)){let{from:o,to:l}=this.lineBlockAt(s);e.push(new Xf(o,l))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?T2:new Sx(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(tc(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=D2(this.state);let s=e.changedRanges,o=qn.extendWithRanges(s,kz(i,this.stateDeco,e?e.changes:Nt.empty(this.state.doc.length))),l=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);E2(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),(this.heightMap.height!=l||jl)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=l);let f=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<f.from||n.range.head>f.to)||!this.viewportIsAppropriate(f))&&(f=this.getViewport(0,n));let h=f.from!=this.viewport.from||f.to!=this.viewport.to;this.viewport=f,e.flags|=this.updateForViewport(),(h||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(WO)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),s=this.heightOracle,o=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?it.RTL:it.LTR;let l=this.heightOracle.mustRefreshForWrapping(o)||this.mustMeasureContent,c=n.getBoundingClientRect(),f=l||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let h=0,p=0;if(c.width&&c.height){let{scaleX:M,scaleY:_}=LO(n,c);(M>.005&&Math.abs(this.scaleX-M)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=M,this.scaleY=_,h|=16,l=f=!0)}let g=(parseInt(i.paddingTop)||0)*this.scaleY,y=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=g||this.paddingBottom!=y)&&(this.paddingTop=g,this.paddingBottom=y,h|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(f=!0),this.editorWidth=e.scrollDOM.clientWidth,h|=16);let v=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=v&&(this.scrollAnchorHeight=-1,this.scrollTop=v),this.scrolledToBottom=BO(e.scrollDOM);let b=(this.printing?Mz:Oz)(n,this.paddingTop),S=b.top-this.pixelViewport.top,k=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let A=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(A!=this.inView&&(this.inView=A,A&&(f=!0)),!this.inView&&!this.scrollTarget&&!Ez(e.dom))return 0;let N=c.width;if((this.contentDOMWidth!=N||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,h|=16),f){let M=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(M)&&(l=!0),l||s.lineWrapping&&Math.abs(N-this.contentDOMWidth)>s.charWidth){let{lineHeight:_,charWidth:L,textHeight:R}=e.docView.measureTextSize();l=_>0&&s.refresh(o,_,L,R,Math.max(5,N/L),M),l&&(e.docView.minWidth=0,h|=16)}S>0&&k>0?p=Math.max(S,k):S<0&&k<0&&(p=Math.min(S,k)),E2();for(let _ of this.viewports){let L=_.from==this.viewport.from?M:e.docView.measureVisibleLineHeights(_);this.heightMap=(l?rn.empty().applyChanges(this.stateDeco,Qe.empty,this.heightOracle,[new qn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,l,new bz(_.from,L))}jl&&(h|=2)}let O=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(h&2&&(h|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),h|=this.updateForViewport()),(h&2||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(l?[]:this.lineGaps,e)),h|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),h}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,o=this.heightOracle,{visibleTop:l,visibleBottom:c}=this,f=new Xf(s.lineAt(l-i*1e3,st.ByHeight,o,0,0).from,s.lineAt(c+(1-i)*1e3,st.ByHeight,o,0,0).to);if(n){let{head:h}=n.range;if(h<f.from||h>f.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),g=s.lineAt(h,st.ByPos,o,0,0),y;n.y=="center"?y=(g.top+g.bottom)/2-p/2:n.y=="start"||n.y=="nearest"&&h<f.from?y=g.top:y=g.bottom-p,f=new Xf(s.lineAt(y-1e3/2,st.ByHeight,o,0,0).from,s.lineAt(y+p+1e3/2,st.ByHeight,o,0,0).to)}}return f}mapViewport(e,n){let i=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new Xf(this.heightMap.lineAt(i,st.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,st.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,st.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,st.ByPos,this.heightOracle,0,0),{visibleTop:l,visibleBottom:c}=this;return(e==0||s<=l-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||o>=c+Math.max(10,Math.min(i,250)))&&s>l-2*1e3&&o<c+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let s of e)n.touchesRange(s.from,s.to)||i.push(new $m(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,o=s>>1,l=s<<1;if(this.defaultTextDirection!=it.LTR&&!i)return[];let c=[],f=(p,g,y,v)=>{if(g-p<o)return;let b=this.state.selection.main,S=[b.from];b.empty||S.push(b.to);for(let A of S)if(A>p&&A<g){f(p,A-10,y,v),f(A+10,g,y,v);return}let k=Dz(e,A=>A.from>=y.from&&A.to<=y.to&&Math.abs(A.from-p)<o&&Math.abs(A.to-g)<o&&!S.some(N=>A.from<N&&A.to>N));if(!k){if(g<y.to&&n&&i&&n.visibleRanges.some(O=>O.from<=g&&O.to>=g)){let O=n.moveToLineBoundary(ae.cursor(g),!1,!0).head;O>p&&(g=O)}let A=this.gapSize(y,p,g,v),N=i||A<2e6?A:2e6;k=new $m(p,g,A,N)}c.push(k)},h=p=>{if(p.length<l||p.type!=qt.Text)return;let g=Tz(p.from,p.to,this.stateDeco);if(g.total<l)return;let y=this.scrollTarget?this.scrollTarget.range.head:null,v,b;if(i){let S=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,A;if(y!=null){let N=Gf(g,y),O=((this.visibleBottom-this.visibleTop)/2+S)/p.height;k=N-O,A=N+O}else k=(this.visibleTop-p.top-S)/p.height,A=(this.visibleBottom-p.top+S)/p.height;v=Ff(g,k),b=Ff(g,A)}else{let S=g.total*this.heightOracle.charWidth,k=s*this.heightOracle.charWidth,A=0;if(S>2e6)for(let L of e)L.from>=p.from&&L.from<p.to&&L.size!=L.displaySize&&L.from*this.heightOracle.charWidth+A<this.pixelViewport.left&&(A=L.size-L.displaySize);let N=this.pixelViewport.left+A,O=this.pixelViewport.right+A,M,_;if(y!=null){let L=Gf(g,y),R=((O-N)/2+k)/S;M=L-R,_=L+R}else M=(N-k)/S,_=(O+k)/S;v=Ff(g,M),b=Ff(g,_)}v>p.from&&f(p.from,v,p,g),b<p.to&&f(b,p.to,p,g)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(h):h(p);return c}gapSize(e,n,i,s){let o=Gf(s,i)-Gf(s,n);return this.heightOracle.lineWrapping?e.height*o:s.total*this.heightOracle.charWidth*o}updateLineGaps(e){$m.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Se.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];ze.spans(n,this.viewport.from,this.viewport.to,{span(o,l){i.push({from:o,to:l})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let o=0;o<i.length&&!(s&8);o++){let l=this.visibleRanges[o],c=i[o];(l.from!=c.from||l.to!=c.to)&&(s|=4,e&&e.mapPos(l.from,-1)==c.from&&e.mapPos(l.to,1)==c.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||tc(this.heightMap.lineAt(e,st.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||tc(this.heightMap.lineAt(this.scaler.fromDOM(e),st.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return tc(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xf{constructor(e,n){this.from=e,this.to=n}}function Tz(t,e,n){let i=[],s=t,o=0;return ze.spans(n,t,e,{span(){},point(l,c){l>s&&(i.push({from:s,to:l}),o+=l-s),s=c}},20),s<e&&(i.push({from:s,to:e}),o+=e-s),{total:o,ranges:i}}function Ff({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let s=0;;s++){let{from:o,to:l}=e[s],c=l-o;if(i<=c)return o+i;i-=c}}function Gf(t,e){let n=0;for(let{from:i,to:s}of t.ranges){if(e<=s){n+=e-i;break}n+=s-i}return n/t.total}function Dz(t,e){for(let n of t)if(e(n))return n}const T2={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function D2(t){let e=t.facet(Bd).filter(i=>typeof i!="function"),n=t.facet(yx).filter(i=>typeof i!="function");return n.length&&e.push(ze.join(n)),e}class Sx{constructor(e,n,i){let s=0,o=0,l=0;this.viewports=i.map(({from:c,to:f})=>{let h=n.lineAt(c,st.ByPos,e,0,0).top,p=n.lineAt(f,st.ByPos,e,0,0).bottom;return s+=p-h,{from:c,to:f,top:h,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let c of this.viewports)c.domTop=l+(c.top-o)*this.scale,l=c.domBottom=c.domTop+(c.bottom-c.top),o=c.bottom}toDOM(e){for(let n=0,i=0,s=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.top)return s+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,s=o.domBottom}}fromDOM(e){for(let n=0,i=0,s=0;;n++){let o=n<this.viewports.length?this.viewports[n]:null;if(!o||e<o.domTop)return i+(e-s)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,s=o.domBottom}}eq(e){return e instanceof Sx?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function tc(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new si(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(s=>tc(s,e)):t._content)}const Wf=ye.define({combine:t=>t.join(" ")}),ly=ye.define({combine:t=>t.indexOf(!0)>-1}),ay=ar.newName(),vE=ar.newName(),bE=ar.newName(),SE={"&light":"."+vE,"&dark":"."+bE};function cy(t,e,n){return new ar(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return t;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):t+" "+i}})}const Rz=cy("."+ay,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},SE),Lz={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Um=me.ie&&me.ie_version<=11;class _z{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new f8,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(me.ie&&me.ie_version<=11||me.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&me.android&&e.constructor.EDIT_CONTEXT!==!1&&!(me.chrome&&me.chrome_version<126)&&(this.editContext=new zz(e),e.state.facet(cs)&&(e.contentDOM.editContext=this.editContext.editContext)),Um&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(cs)?i.root.activeElement!=this.dom:!ac(this.dom,s))return;let o=s.anchorNode&&i.docView.tile.nearest(s.anchorNode);if(o&&o.isWidget()&&o.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(me.ie&&me.ie_version<=11||me.android&&me.chrome)&&!i.state.selection.main.empty&&s.focusNode&&uc(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Bl(e.root);if(!n)return!1;let i=me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Bz(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let s=ac(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&d8(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Lz),Um&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Um&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let s=()=>{let o=this.delayedAndroidKey;o&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=o.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&o.force&&Sl(this.dom,o.key,o.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,s=!1;for(let o of e){let l=this.readMutation(o);l&&(l.typeOver&&(s=!0),n==-1?{from:n,to:i}=l:(n=Math.min(l.from,n),i=Math.max(l.to,i)))}return{from:n,to:i,typeOver:s}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),s=this.selectionChanged&&ac(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let o=new J8(this.view,e,n,i);return this.view.docView.domChanged={newSel:o.newSel?o.newSel.main:null},o}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,s=aE(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!qh(this.view.state.selection,n.newSel.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let i=R2(n,e.previousSibling||e.target.previousSibling,-1),s=R2(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(cs)!=e.state.facet(cs)&&(e.view.contentDOM.editContext=e.state.facet(cs)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function R2(t,e,n){for(;e;){let i=At.get(e);if(i&&i.parent==t)return i;let s=e.parentNode;e=s!=t.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function L2(t,e){let n=e.startContainer,i=e.startOffset,s=e.endContainer,o=e.endOffset,l=t.docView.domAtPos(t.state.selection.main.anchor,1);return uc(l.node,l.offset,s,o)&&([n,i,s,o]=[s,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:o}}function Bz(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return L2(t,s)}let n=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?L2(t,n):null}class zz{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:o,head:l}=s,c=this.toEditorPos(i.updateRangeStart),f=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:c,drifted:!1});let h=f-c>i.text.length;c==this.from&&o<this.from?c=o:f==this.to&&o>this.to&&(f=o);let p=cE(e.state.sliceDoc(c,f),i.text,(h?s.from:s.to)-c,h?"end":null);if(!p){let y=ae.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));qh(y,s)||e.dispatch({selection:y,userEvent:"select"});return}let g={from:p.from+c,to:p.toA+c,insert:Qe.of(i.text.slice(p.from,p.toB).split(`
`))};if((me.mac||me.android)&&g.from==l-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(g={from:c,to:f,insert:Qe.of([i.text.replace("."," ")])}),this.pendingContextChange=g,!e.state.readOnly){let y=this.to-this.from+(g.to-g.from+g.insert.length);vx(e,g,ae.single(this.toEditorPos(i.selectionStart,y),this.toEditorPos(i.selectionEnd,y)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),g.from<g.to&&!g.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(n.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],o=null;for(let l=this.toEditorPos(i.rangeStart),c=this.toEditorPos(i.rangeEnd);l<c;l++){let f=e.coordsForChar(l);o=f&&new DOMRect(f.left,f.top,f.right-f.left,f.bottom-f.top)||o||new DOMRect,s.push(o)}n.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let o of i.getTextFormats()){let l=o.underlineStyle,c=o.underlineThickness;if(!/none/i.test(l)&&!/none/i.test(c)){let f=this.toEditorPos(o.rangeStart),h=this.toEditorPos(o.rangeEnd);if(f<h){let p=`text-decoration: underline ${/^[a-z]/.test(l)?l+" ":l=="Dashed"?"dashed ":l=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(Se.mark({attributes:{style:p}}).range(f,h))}}}e.dispatch({effects:ZO.of(Se.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Bl(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((o,l,c,f,h)=>{if(i)return;let p=h.length-(l-o);if(s&&l>=s.to)if(s.from==o&&s.to==l&&s.insert.eq(h)){s=this.pendingContextChange=null,n+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(o+=n,l+=n,l<=this.from)this.from+=p,this.to+=p;else if(o<this.to){if(o<this.from||l>this.to||this.to-this.from+h.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(o),this.toContextPos(l),h.toString()),this.to+=p}n+=p}),s&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(o=>i(o,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||h8(e.parent)||document,this.viewState=new N2(e.state||Ve.create(e)),e.scrollTo&&e.scrollTo.is(qf)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(fl).map(s=>new Pm(s));for(let s of this.plugins)s.update(this);this.observer=new _z(this),this.inputState=new iz(this),this.inputState.ensureHandlers(this.plugins),this.docView=new g2(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let n=e.length==1&&e[0]instanceof Rt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,s,o=this.state;for(let y of e){if(y.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=y.state}if(this.destroyed){this.viewState.state=o;return}let l=this.hasFocus,c=0,f=null;e.some(y=>y.annotation(gE))?(this.inputState.notifiedFocused=l,c=1):l!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=l,f=mE(o,l),f||(c=1));let h=this.observer.delayedAndroidKey,p=null;if(h?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(o.doc)||!this.state.selection.eq(o.selection))&&(p=null)):this.observer.clear(),o.facet(Ve.phrases)!=this.state.facet(Ve.phrases))return this.setState(o);s=Vh.create(this,o,e),s.flags|=c;let g=this.viewState.scrollTarget;try{this.updateState=2;for(let y of e){if(g&&(g=g.map(y.changes)),y.scrollIntoView){let{main:v}=y.state.selection;g=new wl(v.empty?v:ae.cursor(v.head,v.head>v.anchor?-1:1))}for(let v of y.effects)v.is(qf)&&(g=v.value.clip(this.state))}this.viewState.update(s,g),this.bidiCache=Yh.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(Ja)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(y=>y.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Wf)!=s.state.facet(Wf)&&(this.viewState.mustMeasureContent=!0),(n||i||g||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let y of this.state.facet(ny))try{y(s)}catch(v){xn(this.state,v,"update listener")}(f||p)&&Promise.resolve().then(()=>{f&&this.state==f.startState&&this.dispatch(f),p&&!aE(this,p)&&h.force&&Sl(this.contentDOM,h.key,h.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new N2(e),this.plugins=e.facet(fl).map(i=>new Pm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new g2(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(fl),i=e.state.facet(fl);if(n!=i){let s=[];for(let o of i){let l=n.indexOf(o);if(l<0)s.push(new Pm(o));else{let c=this.plugins[l];c.mustUpdate=e,s.push(c)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){xn(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:o,scrollAnchorHeight:l}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(l=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(l<0)if(BO(i))o=-1,l=this.viewState.heightMap.height;else{let v=this.viewState.scrollAnchorAt(s);o=v.from,l=v.top}this.updateState=1;let f=this.viewState.measure(this);if(!f&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];f&4||([this.measureRequests,h]=[h,this.measureRequests]);let p=h.map(v=>{try{return v.read(this)}catch(b){return xn(this.state,b),_2}}),g=Vh.create(this,this.state,[]),y=!1;g.flags|=f,n?n.flags|=f:n=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),y=this.docView.update(g),y&&this.docViewUpdate());for(let v=0;v<h.length;v++)if(p[v]!=_2)try{let b=h[v];b.write&&b.write(p[v],this)}catch(b){xn(this.state,b)}if(y&&this.docView.updateSelection(!0),!g.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=-1;continue}else{let b=(o<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(o).top)-l;if(b>1||b<-1){s=s+b,i.scrollTop=s/this.scaleY,l=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let c of this.state.facet(ny))c(n)}get themeClasses(){return ay+" "+(this.state.facet(ly)?bE:vE)+" "+this.state.facet(Wf)}updateAttrs(){let e=B2(this,JO,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(cs)?"true":"false",class:"cm-content",style:`${me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),B2(this,mx,n);let i=this.observer.ignore(()=>{let s=c2(this.contentDOM,this.contentAttrs,n),o=c2(this.dom,this.editorAttrs,e);return s||o});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let s of i.effects)if(s.is(pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Ja);let e=this.state.facet(pe.cspNonce);ar.mount(this.root,this.styleModules.concat(Rz).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Vm(this,e,m2(this,e,n,i))}moveByGroup(e,n){return Vm(this,e,m2(this,e,n,i=>F8(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),o=i[n?i.length-1:0];return ae.cursor(o.side(n,s)+e.from,o.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,i=!0){return X8(this,e,n,i)}moveVertically(e,n,i){return Vm(this,e,G8(this,e,n,i))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let i=ry(this,e,n);return i&&i.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),ry(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),o=this.bidiSpans(s),l=o[fs.find(o,e-s.from,-1,n)];return Nc(i,l.dir==it.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(GO)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Pz)return VO(e.length);let n=this.textDirectionAt(e.from),i;for(let o of this.bidiCache)if(o.from==e.from&&o.dir==n&&(o.fresh||IO(o.isolates,i=h2(this,e))))return o.order;i||(i=h2(this,e));let s=b8(e.text,n,i);return this.bidiCache.push(new Yh(e.from,e.to,n,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{_O(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return qf.of(new wl(typeof e=="number"?ae.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return qf.of(new wl(ae.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return xt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return xt.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=ar.newName(),s=[Wf.of(i),Ja.of(cy(`.${i}`,e))];return n&&n.dark&&s.push(ly.of(!0)),s}static baseTheme(e){return ho.lowest(Ja.of(cy("."+ay,e,SE)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),s=i&&At.get(i)||At.get(e);return((n=s?.root)===null||n===void 0?void 0:n.view)||null}}pe.styleModule=Ja;pe.inputHandler=XO;pe.clipboardInputFilter=px;pe.clipboardOutputFilter=gx;pe.scrollHandler=KO;pe.focusChangeEffect=FO;pe.perLineTextDirection=GO;pe.exceptionSink=YO;pe.updateListener=ny;pe.editable=cs;pe.mouseSelectionStyle=QO;pe.dragMovesSelection=qO;pe.clickAddsSelectionRange=UO;pe.decorations=Bd;pe.blockWrappers=eE;pe.outerDecorations=yx;pe.atomicRanges=iu;pe.bidiIsolatedRanges=tE;pe.scrollMargins=nE;pe.darkTheme=ly;pe.cspNonce=ye.define({combine:t=>t.length?t[0]:""});pe.contentAttributes=mx;pe.editorAttributes=JO;pe.lineWrapping=pe.contentAttributes.of({class:"cm-lineWrapping"});pe.announce=Me.define();const Pz=4096,_2={};class Yh{constructor(e,n,i,s,o,l){this.from=e,this.to=n,this.dir=i,this.isolates=s,this.fresh=o,this.order=l}static update(e,n){if(n.empty&&!e.some(o=>o.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:it.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let l=e[o];l.dir==s&&!n.touchesRange(l.from,l.to)&&i.push(new Yh(n.mapPos(l.from,1),n.mapPos(l.to,-1),l.dir,l.isolates,!1,l.order))}return i}}function B2(t,e,n){for(let i=t.state.facet(e),s=i.length-1;s>=0;s--){let o=i[s],l=typeof o=="function"?o(t):o;l&&fx(l,n)}return n}const jz=me.mac?"mac":me.windows?"win":me.linux?"linux":"key";function Hz(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let s,o,l,c;for(let f=0;f<n.length-1;++f){const h=n[f];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))s=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))l=!0;else if(/^mod$/i.test(h))e=="mac"?c=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return s&&(i="Alt-"+i),o&&(i="Ctrl-"+i),c&&(i="Meta-"+i),l&&(i="Shift-"+i),i}function Kf(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const Iz=ho.default(pe.domEventHandlers({keydown(t,e){return CE(wE(e.state),t,e,"editor")}})),Hd=ye.define({enables:Iz}),z2=new WeakMap;function wE(t){let e=t.facet(Hd),n=z2.get(e);return n||z2.set(e,n=Uz(e.reduce((i,s)=>i.concat(s),[]))),n}function Vz(t,e,n){return CE(wE(t.state),e,t,n)}let er=null;const $z=4e3;function Uz(t,e=jz){let n=Object.create(null),i=Object.create(null),s=(l,c)=>{let f=i[l];if(f==null)i[l]=c;else if(f!=c)throw new Error("Key binding "+l+" is used both as a regular binding and as a multi-stroke prefix")},o=(l,c,f,h,p)=>{var g,y;let v=n[l]||(n[l]=Object.create(null)),b=c.split(/ (?!$)/).map(A=>Hz(A,e));for(let A=1;A<b.length;A++){let N=b.slice(0,A).join(" ");s(N,!0),v[N]||(v[N]={preventDefault:!0,stopPropagation:!1,run:[O=>{let M=er={view:O,prefix:N,scope:l};return setTimeout(()=>{er==M&&(er=null)},$z),!0}]})}let S=b.join(" ");s(S,!1);let k=v[S]||(v[S]={preventDefault:!1,stopPropagation:!1,run:((y=(g=v._any)===null||g===void 0?void 0:g.run)===null||y===void 0?void 0:y.slice())||[]});f&&k.run.push(f),h&&(k.preventDefault=!0),p&&(k.stopPropagation=!0)};for(let l of t){let c=l.scope?l.scope.split(" "):["editor"];if(l.any)for(let h of c){let p=n[h]||(n[h]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:g}=l;for(let y in p)p[y].run.push(v=>g(v,uy))}let f=l[e]||l.key;if(f)for(let h of c)o(h,f,l.run,l.preventDefault,l.stopPropagation),l.shift&&o(h,"Shift-"+f,l.shift,l.preventDefault,l.stopPropagation)}return n}let uy=null;function CE(t,e,n,i){uy=e;let s=i8(e),o=pn(s,0),l=Ai(o)==s.length&&s!=" ",c="",f=!1,h=!1,p=!1;er&&er.view==n&&er.scope==i&&(c=er.prefix+" ",fE.indexOf(e.keyCode)<0&&(h=!0,er=null));let g=new Set,y=k=>{if(k){for(let A of k.run)if(!g.has(A)&&(g.add(A),A(n)))return k.stopPropagation&&(p=!0),!0;k.preventDefault&&(k.stopPropagation&&(p=!0),h=!0)}return!1},v=t[i],b,S;return v&&(y(v[c+Kf(s,e,!l)])?f=!0:l&&(e.altKey||e.metaKey||e.ctrlKey)&&!(me.windows&&e.ctrlKey&&e.altKey)&&!(me.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=cr[e.keyCode])&&b!=s?(y(v[c+Kf(b,e,!0)])||e.shiftKey&&(S=Ec[e.keyCode])!=s&&S!=b&&y(v[c+Kf(S,e,!1)]))&&(f=!0):l&&e.shiftKey&&y(v[c+Kf(s,e,!0)])&&(f=!0),!f&&y(v._any)&&(f=!0)),h&&(f=!0),f&&p&&e.stopPropagation(),uy=null,f}class su{constructor(e,n,i,s,o){this.className=e,this.left=n,this.top=i,this.width=s,this.height=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let o=kE(e);return[new su(n,s.left-o.left,s.top-o.top,null,s.bottom-s.top)]}else return qz(e,n,i)}}function kE(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==it.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function P2(t,e,n,i){let s=t.coordsAtPos(e,n*2);if(!s)return i;let o=t.dom.getBoundingClientRect(),l=(s.top+s.bottom)/2,c=t.posAtCoords({x:o.left+1,y:l}),f=t.posAtCoords({x:o.right-1,y:l});return c==null||f==null?i:{from:Math.max(i.from,Math.min(c,f)),to:Math.min(i.to,Math.max(c,f))}}function qz(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),s=Math.min(n.to,t.viewport.to),o=t.textDirection==it.LTR,l=t.contentDOM,c=l.getBoundingClientRect(),f=kE(t),h=l.querySelector(".cm-line"),p=h&&window.getComputedStyle(h),g=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),y=c.right-(p?parseInt(p.paddingRight):0),v=sy(t,i,1),b=sy(t,s,-1),S=v.type==qt.Text?v:null,k=b.type==qt.Text?b:null;if(S&&(t.lineWrapping||v.widgetLineBreaks)&&(S=P2(t,i,1,S)),k&&(t.lineWrapping||b.widgetLineBreaks)&&(k=P2(t,s,-1,k)),S&&k&&S.from==k.from&&S.to==k.to)return N(O(n.from,n.to,S));{let _=S?O(n.from,null,S):M(v,!1),L=k?O(null,n.to,k):M(b,!0),R=[];return(S||v).to<(k||b).from-(S&&k?1:0)||v.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<L.top?R.push(A(g,_.bottom,y,L.top)):_.bottom<L.top&&t.elementAtHeight((_.bottom+L.top)/2).type==qt.Text&&(_.bottom=L.top=(_.bottom+L.top)/2),N(_).concat(R).concat(N(L))}function A(_,L,R,X){return new su(e,_-f.left,L-f.top,Math.max(0,R-_),X-L)}function N({top:_,bottom:L,horizontal:R}){let X=[];for(let $=0;$<R.length;$+=2)X.push(A(R[$],_,R[$+1],L));return X}function O(_,L,R){let X=1e9,$=-1e9,ne=[];function q(B,V,T,P,H){let z=t.coordsAtPos(B,B==R.to?-2:2),G=t.coordsAtPos(T,T==R.from?2:-2);!z||!G||(X=Math.min(z.top,G.top,X),$=Math.max(z.bottom,G.bottom,$),H==it.LTR?ne.push(o&&V?g:z.left,o&&P?y:G.right):ne.push(!o&&P?g:G.left,!o&&V?y:z.right))}let Q=_??R.from,Z=L??R.to;for(let B of t.visibleRanges)if(B.to>Q&&B.from<Z)for(let V=Math.max(B.from,Q),T=Math.min(B.to,Z);;){let P=t.state.doc.lineAt(V);for(let H of t.bidiSpans(P)){let z=H.from+P.from,G=H.to+P.from;if(z>=T)break;G>V&&q(Math.max(z,V),_==null&&z<=Q,Math.min(G,T),L==null&&G>=Z,H.dir)}if(V=P.to+1,V>=T)break}return ne.length==0&&q(Q,_==null,Z,L==null,t.textDirection),{top:X,bottom:$,horizontal:ne}}function M(_,L){let R=c.top+(L?_.top:_.bottom);return{top:R,bottom:R,horizontal:[]}}}function Qz(t,e){return t.constructor==e.constructor&&t.eq(e)}class Yz{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(bh)!=e.state.facet(bh)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(bh);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!Qz(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[i].constructor&&s.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e,me.safari&&me.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const bh=ye.define();function AE(t){return[xt.define(e=>new Yz(e,t)),bh.of(t)]}const Dc=ye.define({combine(t){return Bi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function Xz(t={}){return[Dc.of(t),Fz,Gz,Wz,WO.of(!0)]}function OE(t){return t.startState.facet(Dc)!=t.state.facet(Dc)}const Fz=AE({above:!0,markers(t){let{state:e}=t,n=e.facet(Dc),i=[];for(let s of e.selection.ranges){let o=s==e.selection.main;if(s.empty||n.drawRangeCursor){let l=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:ae.cursor(s.head,s.head>s.anchor?-1:1);for(let f of su.forRange(t,l,c))i.push(f)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=OE(t);return n&&j2(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){j2(e.state,t)},class:"cm-cursorLayer"});function j2(t,e){e.style.animationDuration=t.facet(Dc).cursorBlinkRate+"ms"}const Gz=AE({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:su.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||OE(t)},class:"cm-selectionLayer"}),Wz=ho.highest(pe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),EE=Me.define({map(t,e){return t==null?null:e.mapPos(t)}}),nc=zt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(EE)?i.value:n,t)}}),Kz=xt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(nc);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(nc)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(nc),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(nc)!=t&&this.view.dispatch({effects:EE.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Zz(){return[nc,Kz]}function H2(t,e,n,i,s){e.lastIndex=0;for(let o=t.iterRange(n,i),l=n,c;!o.next().done;l+=o.value.length)if(!o.lineBreak)for(;c=e.exec(o.value);)s(l+c.index,c)}function Jz(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:s,to:o}of n)s=Math.max(t.state.doc.lineAt(s).from,s-e),o=Math.min(t.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=o:i.push({from:s,to:o});return i}class eP{constructor(e){const{regexp:n,decoration:i,decorate:s,boundary:o,maxLength:l=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(c,f,h,p)=>s(p,h,h+c[0].length,c,f);else if(typeof i=="function")this.addMatch=(c,f,h,p)=>{let g=i(c,f,h);g&&p(h,h+c[0].length,g)};else if(i)this.addMatch=(c,f,h,p)=>p(h,h+c[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=l}createDeco(e){let n=new ps,i=n.add.bind(n);for(let{from:s,to:o}of Jz(e,this.maxLength))H2(e.state.doc,this.regexp,s,o,(l,c)=>this.addMatch(c,e,l,i));return n.finish()}updateDeco(e,n){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((o,l,c,f)=>{f>=e.view.viewport.from&&c<=e.view.viewport.to&&(i=Math.min(c,i),s=Math.max(f,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),i,s):n}updateRange(e,n,i,s){for(let o of e.visibleRanges){let l=Math.max(o.from,i),c=Math.min(o.to,s);if(c>=l){let f=e.state.doc.lineAt(l),h=f.to<c?e.state.doc.lineAt(c):f,p=Math.max(o.from,f.from),g=Math.min(o.to,h.to);if(this.boundary){for(;l>f.from;l--)if(this.boundary.test(f.text[l-1-f.from])){p=l;break}for(;c<h.to;c++)if(this.boundary.test(h.text[c-h.from])){g=c;break}}let y=[],v,b=(S,k,A)=>y.push(A.range(S,k));if(f==h)for(this.regexp.lastIndex=p-f.from;(v=this.regexp.exec(f.text))&&v.index<g-f.from;)this.addMatch(v,e,v.index+f.from,b);else H2(e.state.doc,this.regexp,p,g,(S,k)=>this.addMatch(k,e,S,b));n=n.update({filterFrom:p,filterTo:g,filter:(S,k)=>S<p||k>g,add:y})}}return n}}const fy=/x/.unicode!=null?"gu":"g",tP=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,fy),nP={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let qm=null;function iP(){var t;if(qm==null&&typeof document<"u"&&document.body){let e=document.body.style;qm=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return qm||!1}const Sh=ye.define({combine(t){let e=Bi(t,{render:null,specialChars:tP,addSpecialChars:null});return(e.replaceTabs=!iP())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,fy)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,fy)),e}});function sP(t={}){return[Sh.of(t),rP()]}let I2=null;function rP(){return I2||(I2=xt.fromClass(class{constructor(t){this.view=t,this.decorations=Se.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Sh)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new eP({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:s}=n.state,o=pn(e[0],0);if(o==9){let l=s.lineAt(i),c=n.state.tabSize,f=ql(l.text,c,i-l.from);return Se.replace({widget:new cP((c-f%c)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=Se.replace({widget:new aP(t,o)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Sh);t.startState.facet(Sh)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const oP="";function lP(t){return t>=32?oP:t==10?"":String.fromCharCode(9216+t)}class aP extends zi{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=lP(this.code),i=e.state.phrase("Control character")+" "+(nP[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,n);if(s)return s;let o=document.createElement("span");return o.textContent=n,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class cP extends zi{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function uP(){return hP}const fP=Se.line({class:"cm-activeLine"}),hP=xt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let s=t.lineBlockAt(i.head);s.from>e&&(n.push(fP.range(s.from)),e=s.from)}return Se.set(n)}},{decorations:t=>t.decorations});class dP extends zi{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?cc(e.firstChild):[];if(!n.length)return null;let i=window.getComputedStyle(e.parentNode),s=Nc(n[0],i.direction!="rtl"),o=parseInt(i.lineHeight);return s.bottom-s.top>o*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+o}:s}ignoreEvent(){return!1}}function pP(t){let e=xt.fromClass(class{constructor(n){this.view=n,this.placeholder=t?Se.set([Se.widget({widget:new dP(t),side:1}).range(0)]):Se.none}get decorations(){return this.view.state.doc.length?Se.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,pe.contentAttributes.of({"aria-placeholder":t})]:e}const hy=2e3;function gP(t,e,n){let i=Math.min(e.line,n.line),s=Math.max(e.line,n.line),o=[];if(e.off>hy||n.off>hy||e.col<0||n.col<0){let l=Math.min(e.off,n.off),c=Math.max(e.off,n.off);for(let f=i;f<=s;f++){let h=t.doc.line(f);h.length<=c&&o.push(ae.range(h.from+l,h.to+c))}}else{let l=Math.min(e.col,n.col),c=Math.max(e.col,n.col);for(let f=i;f<=s;f++){let h=t.doc.line(f),p=Q0(h.text,l,t.tabSize,!0);if(p<0)o.push(ae.cursor(h.to));else{let g=Q0(h.text,c,t.tabSize);o.push(ae.range(h.from+p,h.from+g))}}}return o}function mP(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function V2(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),s=n-i.from,o=s>hy?-1:s==i.length?mP(t,e.clientX):ql(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:o,off:s}}function yP(t,e){let n=V2(t,e),i=t.state.selection;return n?{update(s){if(s.docChanged){let o=s.changes.mapPos(s.startState.doc.line(n.line).from),l=s.state.doc.lineAt(o);n={line:l.number,col:n.col,off:Math.min(n.off,l.length)},i=i.map(s.changes)}},get(s,o,l){let c=V2(t,s);if(!c)return i;let f=gP(t.state,n,c);return f.length?l?ae.create(f.concat(i.ranges)):ae.create(f):i}}:null}function xP(t){let e=(n=>n.altKey&&n.button==0);return pe.mouseSelectionStyle.of((n,i)=>e(i)?yP(n,i):null)}const vP={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},bP={style:"cursor: crosshair"};function SP(t={}){let[e,n]=vP[t.key||"Alt"],i=xt.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||n(s))},keyup(s){(s.keyCode==e||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[i,pe.contentAttributes.of(s=>{var o;return!((o=s.plugin(i))===null||o===void 0)&&o.isDown?bP:null})]}const Zf="-10000px";class ME{constructor(e,n,i,s){this.facet=n,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(l=>l);let o=null;this.tooltipViews=this.tooltips.map(l=>o=i(l,o))}update(e,n){var i;let s=e.state.facet(this.facet),o=s.filter(f=>f);if(s===this.input){for(let f of this.tooltipViews)f.update&&f.update(e);return!1}let l=[],c=n?[]:null;for(let f=0;f<o.length;f++){let h=o[f],p=-1;if(h){for(let g=0;g<this.tooltips.length;g++){let y=this.tooltips[g];y&&y.create==h.create&&(p=g)}if(p<0)l[f]=this.createTooltipView(h,f?l[f-1]:null),c&&(c[f]=!!h.above);else{let g=l[f]=this.tooltipViews[p];c&&(c[f]=n[p]),g.update&&g.update(e)}}}for(let f of this.tooltipViews)l.indexOf(f)<0&&(this.removeTooltipView(f),(i=f.destroy)===null||i===void 0||i.call(f));return n&&(c.forEach((f,h)=>n[h]=f),n.length=c.length),this.input=s,this.tooltips=o,this.tooltipViews=l,!0}}function wP(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Qm=ye.define({combine:t=>{var e,n,i;return{position:me.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||wP}}}),$2=new WeakMap,wx=xt.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Qm);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ME(t,Cx,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Qm);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=Zf,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:o}=this.manager.tooltipViews[0];if(me.safari){let l=o.getBoundingClientRect();n=Math.abs(l.top+1e4)>1||Math.abs(l.left)>1}else n=!!o.offsetParent&&o.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let o=this.parent.getBoundingClientRect();o.width&&o.height&&(t=o.width/this.parent.offsetWidth,e=o.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=xx(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((o,l)=>{let c=this.manager.tooltipViews[l];return c.getCoords?c.getCoords(o.pos):this.view.coordsAtPos(o.pos)}),size:this.manager.tooltipViews.map(({dom:o})=>o.getBoundingClientRect()),space:this.view.state.facet(Qm).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let c of this.manager.tooltipViews)c.dom.style.position="absolute"}let{visible:n,space:i,scaleX:s,scaleY:o}=t,l=[];for(let c=0;c<this.manager.tooltips.length;c++){let f=this.manager.tooltips[c],h=this.manager.tooltipViews[c],{dom:p}=h,g=t.pos[c],y=t.size[c];if(!g||f.clip!==!1&&(g.bottom<=Math.max(n.top,i.top)||g.top>=Math.min(n.bottom,i.bottom)||g.right<Math.max(n.left,i.left)-.1||g.left>Math.min(n.right,i.right)+.1)){p.style.top=Zf;continue}let v=f.arrow?h.dom.querySelector(".cm-tooltip-arrow"):null,b=v?7:0,S=y.right-y.left,k=(e=$2.get(h))!==null&&e!==void 0?e:y.bottom-y.top,A=h.offset||kP,N=this.view.textDirection==it.LTR,O=y.width>i.right-i.left?N?i.left:i.right-y.width:N?Math.max(i.left,Math.min(g.left-(v?14:0)+A.x,i.right-S)):Math.min(Math.max(i.left,g.left-S+(v?14:0)-A.x),i.right-S),M=this.above[c];!f.strictSide&&(M?g.top-k-b-A.y<i.top:g.bottom+k+b+A.y>i.bottom)&&M==i.bottom-g.bottom>g.top-i.top&&(M=this.above[c]=!M);let _=(M?g.top-i.top:i.bottom-g.bottom)-b;if(_<k&&h.resize!==!1){if(_<this.view.defaultLineHeight){p.style.top=Zf;continue}$2.set(h,k),p.style.height=(k=_)/o+"px"}else p.style.height&&(p.style.height="");let L=M?g.top-k-b-A.y:g.bottom+b+A.y,R=O+S;if(h.overlap!==!0)for(let X of l)X.left<R&&X.right>O&&X.top<L+k&&X.bottom>L&&(L=M?X.top-k-2-b:X.bottom+b+2);if(this.position=="absolute"?(p.style.top=(L-t.parent.top)/o+"px",U2(p,(O-t.parent.left)/s)):(p.style.top=L/o+"px",U2(p,O/s)),v){let X=g.left+(N?A.x:-A.x)-(O+14-7);v.style.left=X/s+"px"}h.overlap!==!0&&l.push({left:O,top:L,right:R,bottom:L+k}),p.classList.toggle("cm-tooltip-above",M),p.classList.toggle("cm-tooltip-below",!M),h.positioned&&h.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=Zf}},{eventObservers:{scroll(){this.maybeMeasure()}}});function U2(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const CP=pe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),kP={x:0,y:0},Cx=ye.define({enables:[wx,CP]}),Xh=ye.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Id{static create(e){return new Id(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ME(e,Xh,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(n===void 0)n=s;else if(n!==s)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const AP=Cx.compute([Xh],t=>{let e=t.facet(Xh);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Id.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class OP{constructor(e,n,i,s,o){this.view=e,this.source=n,this.field=i,this.setHover=s,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.tile.nearest(n.target);if(!i)return;let s,o=1;if(i.isWidget())s=i.posAtStart;else{if(s=e.posAtCoords(n),s==null)return;let c=e.coordsAtPos(s);if(!c||n.y<c.top||n.y>c.bottom||n.x<c.left-e.defaultCharacterWidth||n.x>c.right+e.defaultCharacterWidth)return;let f=e.bidiSpans(e.state.doc.lineAt(s)).find(p=>p.from<=s&&p.to>=s),h=f&&f.dir==it.RTL?-1:1;o=n.x<c.left?-h:h}let l=this.source(e,s,o);if(l?.then){let c=this.pending={pos:s};l.then(f=>{this.pending==c&&(this.pending=null,f&&!(Array.isArray(f)&&!f.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(f)?f:[f])}))},f=>xn(e.state,f,"hover tooltip"))}else l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])})}get tooltip(){let e=this.view.plugin(wx),n=e?e.manager.tooltips.findIndex(i=>i.create==Id.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:o}=this;if(s.length&&o&&!EP(o.dom,e)||this.pending){let{pos:l}=s[0]||this.pending,c=(i=(n=s[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:l;(l==c?this.view.posAtCoords(this.lastMove)!=l:!MP(this.view,l,c,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Jf=4;function EP(t,e){let{left:n,right:i,top:s,bottom:o}=t.getBoundingClientRect(),l;if(l=t.querySelector(".cm-tooltip-arrow")){let c=l.getBoundingClientRect();s=Math.min(c.top,s),o=Math.max(c.bottom,o)}return e.clientX>=n-Jf&&e.clientX<=i+Jf&&e.clientY>=s-Jf&&e.clientY<=o+Jf}function MP(t,e,n,i,s,o){let l=t.scrollDOM.getBoundingClientRect(),c=t.documentTop+t.documentPadding.top+t.contentHeight;if(l.left>i||l.right<i||l.top>s||Math.min(l.bottom,c)<s)return!1;let f=t.posAtCoords({x:i,y:s},!1);return f>=e&&f<=n}function NP(t,e={}){let n=Me.define(),i=zt.define({create(){return[]},update(s,o){if(s.length&&(e.hideOnChange&&(o.docChanged||o.selection)?s=[]:e.hideOn&&(s=s.filter(l=>!e.hideOn(o,l))),o.docChanged)){let l=[];for(let c of s){let f=o.changes.mapPos(c.pos,-1,nn.TrackDel);if(f!=null){let h=Object.assign(Object.create(null),c);h.pos=f,h.end!=null&&(h.end=o.changes.mapPos(h.end)),l.push(h)}}s=l}for(let l of o.effects)l.is(n)&&(s=l.value),l.is(TP)&&(s=[]);return s},provide:s=>Xh.from(s)});return{active:i,extension:[i,xt.define(s=>new OP(s,t,i,n,e.hoverTime||300)),AP]}}function NE(t,e){let n=t.plugin(wx);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const TP=Me.define(),q2=ye.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function kx(t,e){let n=t.plugin(TE),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const TE=xt.fromClass(class{constructor(t){this.input=t.state.facet(Rc),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(q2);this.top=new eh(t,!0,e.topContainer),this.bottom=new eh(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(q2);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new eh(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new eh(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Rc);if(n!=this.input){let i=n.filter(f=>f),s=[],o=[],l=[],c=[];for(let f of i){let h=this.specs.indexOf(f),p;h<0?(p=f(t.view),c.push(p)):(p=this.panels[h],p.update&&p.update(t)),s.push(p),(p.top?o:l).push(p)}this.specs=i,this.panels=s,this.top.sync(o),this.bottom.sync(l);for(let f of c)f.dom.classList.add("cm-panel"),f.mount&&f.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class eh{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Q2(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Q2(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Q2(t){let e=t.nextSibling;return t.remove(),e}const Rc=ye.define({enables:TE});function DP(t,e){let n,i=new Promise(l=>n=l),s=l=>RP(l,e,n);t.state.field(Ym,!1)?t.dispatch({effects:DE.of(s)}):t.dispatch({effects:Me.appendConfig.of(Ym.init(()=>[s]))});let o=RE.of(s);return{close:o,result:i.then(l=>((t.win.queueMicrotask||(f=>t.win.setTimeout(f,10)))(()=>{t.state.field(Ym).indexOf(s)>-1&&t.dispatch({effects:o})}),l))}}const Ym=zt.define({create(){return[]},update(t,e){for(let n of e.effects)n.is(DE)?t=[n.value].concat(t):n.is(RE)&&(t=t.filter(i=>i!=n.value));return t},provide:t=>Rc.computeN([t],e=>e.field(t))}),DE=Me.define(),RE=Me.define();function RP(t,e,n){let i=e.content?e.content(t,()=>l(null)):null;if(!i){if(i=et("form"),e.input){let c=et("input",e.input);/^(text|password|number|email|tel|url)$/.test(c.type)&&c.classList.add("cm-textfield"),c.name||(c.name="input"),i.appendChild(et("label",(e.label||"")+": ",c))}else i.appendChild(document.createTextNode(e.label||""));i.appendChild(document.createTextNode(" ")),i.appendChild(et("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let s=i.nodeName=="FORM"?[i]:i.querySelectorAll("form");for(let c=0;c<s.length;c++){let f=s[c];f.addEventListener("keydown",h=>{h.keyCode==27?(h.preventDefault(),l(null)):h.keyCode==13&&(h.preventDefault(),l(f))}),f.addEventListener("submit",h=>{h.preventDefault(),l(f)})}let o=et("div",i,et("button",{onclick:()=>l(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(o.className=e.class),o.classList.add("cm-dialog");function l(c){o.contains(o.ownerDocument.activeElement)&&t.focus(),n(c)}return{dom:o,top:e.top,mount:()=>{if(e.focus){let c;typeof e.focus=="string"?c=i.querySelector(e.focus):c=i.querySelector("input")||i.querySelector("button"),c&&"select"in c?c.select():c&&"focus"in c&&c.focus()}}}}class ms extends lr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ms.prototype.elementClass="";ms.prototype.toDOM=void 0;ms.prototype.mapMode=nn.TrackBefore;ms.prototype.startSide=ms.prototype.endSide=-1;ms.prototype.point=!0;const wh=ye.define(),LP=ye.define(),_P={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ze.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},hc=ye.define();function BP(t){return[LE(),hc.of({..._P,...t})]}const Y2=ye.define({combine:t=>t.some(e=>e)});function LE(t){return[zP]}const zP=xt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(hc).map(e=>new F2(t,e)),this.fixed=!t.state.facet(Y2);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Y2)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=ze.iter(this.view.state.facet(wh),this.view.viewport.from),i=[],s=this.gutters.map(o=>new PP(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(o.type)){let l=!0;for(let c of o.type)if(c.type==qt.Text&&l){dy(n,i,c.from);for(let f of s)f.line(this.view,c,i);l=!1}else if(c.widget)for(let f of s)f.widget(this.view,c)}else if(o.type==qt.Text){dy(n,i,o.from);for(let l of s)l.line(this.view,o,i)}else if(o.widget)for(let l of s)l.widget(this.view,o);for(let o of s)o.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(hc),n=t.state.facet(hc),i=t.docChanged||t.heightChanged||t.viewportChanged||!ze.eq(t.startState.facet(wh),t.state.facet(wh),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(t)&&(i=!0);else{i=!0;let s=[];for(let o of n){let l=e.indexOf(o);l<0?s.push(new F2(this.view,o)):(this.gutters[l].update(t),s.push(this.gutters[l]))}for(let o of this.gutters)o.dom.remove(),s.indexOf(o)<0&&o.destroy();for(let o of s)o.config.side=="after"?this.getDOMAfter().appendChild(o.dom):this.dom.appendChild(o.dom);this.gutters=s}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>pe.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,s=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==it.LTR?{left:i,right:s}:{right:i,left:s}})});function X2(t){return Array.isArray(t)?t:[t]}function dy(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class PP{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ze.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:s}=this,o=(n.top-this.height)/e.scaleY,l=n.height/e.scaleY;if(this.i==s.elements.length){let c=new _E(e,l,o,i);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,l,o,i);this.height=n.bottom,this.i++}line(e,n,i){let s=[];dy(this.cursor,s,n.from),i.length&&(s=s.concat(i));let o=this.gutter.config.lineMarker(e,n,s);o&&s.unshift(o);let l=this.gutter;s.length==0&&!l.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),s=i?[i]:null;for(let o of e.state.facet(LP)){let l=o(e,n.widget,n);l&&(s||(s=[])).push(l)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class F2{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,s=>{let o=s.target,l;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let f=o.getBoundingClientRect();l=(f.top+f.bottom)/2}else l=s.clientY;let c=e.lineBlockAtHeight(l-e.documentTop);n.domEventHandlers[i](e,c,s)&&s.preventDefault()});this.markers=X2(n.markers(e)),n.initialSpacer&&(this.spacer=new _E(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=X2(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!ze.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class _E{constructor(e,n,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,s)}update(e,n,i,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),jP(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let i="cm-gutterElement",s=this.dom.firstChild;for(let o=0,l=0;;){let c=l,f=o<n.length?n[o++]:null,h=!1;if(f){let p=f.elementClass;p&&(i+=" "+p);for(let g=l;g<this.markers.length;g++)if(this.markers[g].compare(f)){c=g,h=!0;break}}else c=this.markers.length;for(;l<c;){let p=this.markers[l++];if(p.toDOM){p.destroy(s);let g=s.nextSibling;s.remove(),s=g}}if(!f)break;f.toDOM&&(h?s=s.nextSibling:this.dom.insertBefore(f.toDOM(e),s)),h&&l++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function jP(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const HP=ye.define(),IP=ye.define(),hl=ye.define({combine(t){return Bi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let s in n){let o=i[s],l=n[s];i[s]=o?(c,f,h)=>o(c,f,h)||l(c,f,h):l}return i}})}});class Xm extends ms{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Fm(t,e){return t.state.facet(hl).formatNumber(e,t.state)}const VP=hc.compute([hl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(HP)},lineMarker(e,n,i){return i.some(s=>s.toDOM)?null:new Xm(Fm(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let s of e.state.facet(IP)){let o=s(e,n,i);if(o)return o}return null},lineMarkerChange:e=>e.startState.facet(hl)!=e.state.facet(hl),initialSpacer(e){return new Xm(Fm(e,G2(e.state.doc.lines)))},updateSpacer(e,n){let i=Fm(n.view,G2(n.view.state.doc.lines));return i==e.number?e:new Xm(i)},domEventHandlers:t.facet(hl).domEventHandlers,side:"before"}));function $P(t={}){return[hl.of(t),LE(),VP]}function G2(t){let e=9;for(;e<t;)e=e*10+9;return e}const UP=new class extends ms{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},qP=wh.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.head).from;s>n&&(n=s,e.push(UP.range(s)))}return ze.of(e)});function QP(){return qP}const BE=1024;let YP=0;class Gm{constructor(e,n){this.from=e,this.to=n}}class Le{constructor(e={}){this.id=YP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Sn.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Le.closedBy=new Le({deserialize:t=>t.split(" ")});Le.openedBy=new Le({deserialize:t=>t.split(" ")});Le.group=new Le({deserialize:t=>t.split(" ")});Le.isolate=new Le({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Le.contextHash=new Le({perNode:!0});Le.lookAhead=new Le({perNode:!0});Le.mounted=new Le({perNode:!0});class dc{constructor(e,n,i,s=!1){this.tree=e,this.overlay=n,this.parser=i,this.bracketed=s}static get(e){return e&&e.props&&e.props[Le.mounted.id]}}const XP=Object.create(null);class Sn{constructor(e,n,i,s=0){this.name=e,this.props=n,this.id=i,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):XP,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Sn(e.name||"",n,e.id,i);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Le.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let s of i.split(" "))n[s]=e[i];return i=>{for(let s=i.prop(Le.group),o=-1;o<(s?s.length:0);o++){let l=n[o<0?i.name:s[o]];if(l)return l}}}}Sn.none=new Sn("",Object.create(null),0,8);class Ax{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let s=null;for(let o of e){let l=o(i);if(l){s||(s=Object.assign({},i.props));let c=l[1],f=l[0];f.combine&&f.id in s&&(c=f.combine(s[f.id],c)),s[f.id]=c}}n.push(s?new Sn(i.name,s,i.id,i.flags):i)}return new Ax(n)}}const th=new WeakMap,W2=new WeakMap;var dt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(dt||(dt={}));class yt{constructor(e,n,i,s,o){if(this.type=e,this.children=n,this.positions=i,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[l,c]of o)this.props[typeof l=="number"?l:l.id]=c}}toString(){let e=dc.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let s=i.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new gy(this.topNode,e)}cursorAt(e,n=0,i=0){let s=th.get(this)||this.topNode,o=new gy(s);return o.moveTo(e,n),th.set(this,o._tree),o}get topNode(){return new Xn(this,0,0,null)}resolve(e,n=0){let i=Lc(th.get(this)||this.topNode,e,n,!1);return th.set(this,i),i}resolveInner(e,n=0){let i=Lc(W2.get(this)||this.topNode,e,n,!0);return W2.set(this,i),i}resolveStack(e,n=0){return WP(this,e,n)}iterate(e){let{enter:n,leave:i,from:s=0,to:o=this.length}=e,l=e.mode||0,c=(l&dt.IncludeAnonymous)>0;for(let f=this.cursor(l|dt.IncludeAnonymous);;){let h=!1;if(f.from<=o&&f.to>=s&&(!c&&f.type.isAnonymous||n(f)!==!1)){if(f.firstChild())continue;h=!0}for(;h&&i&&(c||!f.type.isAnonymous)&&i(f),!f.nextSibling();){if(!f.parent())return;h=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:Mx(Sn.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,s)=>new yt(this.type,n,i,s,this.propValues),e.makeTree||((n,i,s)=>new yt(Sn.none,n,i,s)))}static build(e){return KP(e)}}yt.empty=new yt(Sn.none,[],[],0);class Ox{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ox(this.buffer,this.index)}}class fr{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Sn.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],s=this.set.types[n],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,i==e)return o;let l=[];for(;e<i;)l.push(this.childString(e)),e=this.buffer[e+3];return o+"("+l.join(",")+")"}findChild(e,n,i,s,o){let{buffer:l}=this,c=-1;for(let f=e;f!=n&&!(zE(o,s,l[f+1],l[f+2])&&(c=f,i>0));f=l[f+3]);return c}slice(e,n,i){let s=this.buffer,o=new Uint16Array(n-e),l=0;for(let c=e,f=0;c<n;){o[f++]=s[c++],o[f++]=s[c++]-i;let h=o[f++]=s[c++]-i;o[f++]=s[c++]-e,l=Math.max(l,h)}return new fr(o,l,this.set)}}function zE(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Lc(t,e,n,i){for(var s;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let l=!i&&t instanceof Xn&&t.index<0?null:t.parent;if(!l)return t;t=l}let o=i?0:dt.IgnoreOverlays;if(i)for(let l=t,c=l.parent;c;l=c,c=l.parent)l instanceof Xn&&l.index<0&&((s=c.enter(e,n,o))===null||s===void 0?void 0:s.from)!=l.from&&(t=c);for(;;){let l=t.enter(e,n,o);if(!l)return t;t=l}}class PE{cursor(e=0){return new gy(this,e)}getChild(e,n=null,i=null){let s=K2(this,e,n,i);return s.length?s[0]:null}getChildren(e,n=null,i=null){return K2(this,e,n,i)}resolve(e,n=0){return Lc(this,e,n,!1)}resolveInner(e,n=0){return Lc(this,e,n,!0)}matchContext(e){return py(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(i=n,n=s.prevSibling):n=s}return i}get node(){return this}get next(){return this.parent}}class Xn extends PE{constructor(e,n,i,s){super(),this._tree=e,this.from=n,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,s,o=0){for(let l=this;;){for(let{children:c,positions:f}=l._tree,h=n>0?c.length:-1;e!=h;e+=n){let p=c[e],g=f[e]+l.from,y;if(!(!(o&dt.EnterBracketed&&p instanceof yt&&(y=dc.get(p))&&!y.overlay&&y.bracketed&&i>=g&&i<=g+p.length)&&!zE(s,i,g,g+p.length))){if(p instanceof fr){if(o&dt.ExcludeBuffers)continue;let v=p.findChild(0,p.buffer.length,n,i-g,s);if(v>-1)return new nr(new FP(l,p,e,g),null,v)}else if(o&dt.IncludeAnonymous||!p.type.isAnonymous||Ex(p)){let v;if(!(o&dt.IgnoreMounts)&&(v=dc.get(p))&&!v.overlay)return new Xn(v.tree,g,e,l);let b=new Xn(p,g,e,l);return o&dt.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(n<0?p.children.length-1:0,n,i,s,o)}}}if(o&dt.IncludeAnonymous||!l.type.isAnonymous||(l.index>=0?e=l.index+n:e=n<0?-1:l._parent._tree.children.length,l=l._parent,!l))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,i=0){let s;if(!(i&dt.IgnoreOverlays)&&(s=dc.get(this._tree))&&s.overlay){let o=e-this.from,l=i&dt.EnterBracketed&&s.bracketed;for(let{from:c,to:f}of s.overlay)if((n>0||l?c<=o:c<o)&&(n<0||l?f>=o:f>o))return new Xn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function K2(t,e,n,i){let s=t.cursor(),o=[];if(!s.firstChild())return o;if(n!=null){for(let l=!1;!l;)if(l=s.type.is(n),!s.nextSibling())return o}for(;;){if(i!=null&&s.type.is(i))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return i==null?o:[]}}function py(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class FP{constructor(e,n,i,s){this.parent=e,this.buffer=n,this.index=i,this.start=s}}class nr extends PE{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,i);return o<0?null:new nr(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,i=0){if(i&dt.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return o<0?null:new nr(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new nr(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new nr(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,s=this.index+4,o=i.buffer[this.index+3];if(o>s){let l=i.buffer[this.index+1];e.push(i.slice(s,o,l)),n.push(0)}return new yt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function jE(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let l=t[o];(l.from>n.from||l.to<n.to)&&(n=l,e=o)}let i=n instanceof Xn&&n.index<0?null:n.parent,s=t.slice();return i?s[e]=i:s.splice(e,1),new GP(s,n)}class GP{constructor(e,n){this.heads=e,this.node=n}get next(){return jE(this.heads)}}function WP(t,e,n){let i=t.resolveInner(e,n),s=null;for(let o=i instanceof Xn?i:i.context.parent;o;o=o.parent)if(o.index<0){let l=o.parent;(s||(s=[i])).push(l.resolve(e,n)),o=l}else{let l=dc.get(o.tree);if(l&&l.overlay&&l.overlay[0].from<=e&&l.overlay[l.overlay.length-1].to>=e){let c=new Xn(l.tree,l.overlay[0].from+o.from,-1,o);(s||(s=[i])).push(Lc(c,e,n,!1))}}return s?jE(s):i}class gy{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~dt.EnterBracketed,e instanceof Xn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Xn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,i);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&dt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&dt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&dt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:n,parent:i}=s)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let o=n+e,l=e<0?-1:i._tree.children.length;o!=l;o+=e){let c=i._tree.children[o];if(this.mode&dt.IncludeAnonymous||c instanceof fr||!c.type.isAnonymous||Ex(c))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let l=e;l;l=l._parent)if(l.index==s){if(s==this.index)return l;n=l,i=o+1;break e}s=this.stack[--o]}for(let s=i;s<this.stack.length;s++)n=new nr(this.buffer,n,this.stack[s]);return this.bufferNode=new nr(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return py(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return py(this._tree,e,s);let l=i[n.buffer[this.stack[o]]];if(!l.isAnonymous){if(e[s]&&e[s]!=l.name)return!1;s--}}return!0}}function Ex(t){return t.children.some(e=>e instanceof fr||!e.type.isAnonymous||Ex(e))}function KP(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:s=BE,reused:o=[],minRepeatType:l=i.types.length}=t,c=Array.isArray(n)?new Ox(n,n.length):n,f=i.types,h=0,p=0;function g(_,L,R,X,$,ne){let{id:q,start:Q,end:Z,size:B}=c,V=p,T=h;if(B<0)if(c.next(),B==-1){let D=o[q];R.push(D),X.push(Q-_);return}else if(B==-3){h=q;return}else if(B==-4){p=q;return}else throw new RangeError(`Unrecognized record size: ${B}`);let P=f[q],H,z,G=Q-_;if(Z-Q<=s&&(z=k(c.pos-L,$))){let D=new Uint16Array(z.size-z.skip),j=c.pos-z.size,ee=D.length;for(;c.pos>j;)ee=A(z.start,D,ee);H=new fr(D,Z-z.start,i),G=z.start-_}else{let D=c.pos-B;c.next();let j=[],ee=[],ie=q>=l?q:-1,ce=0,he=Z;for(;c.pos>D;)ie>=0&&c.id==ie&&c.size>=0?(c.end<=he-s&&(b(j,ee,Q,ce,c.end,he,ie,V,T),ce=j.length,he=c.end),c.next()):ne>2500?y(Q,D,j,ee):g(Q,D,j,ee,ie,ne+1);if(ie>=0&&ce>0&&ce<j.length&&b(j,ee,Q,ce,Q,he,ie,V,T),j.reverse(),ee.reverse(),ie>-1&&ce>0){let fe=v(P,T);H=Mx(P,j,ee,0,j.length,0,Z-Q,fe,fe)}else H=S(P,j,ee,Z-Q,V-Z,T)}R.push(H),X.push(G)}function y(_,L,R,X){let $=[],ne=0,q=-1;for(;c.pos>L;){let{id:Q,start:Z,end:B,size:V}=c;if(V>4)c.next();else{if(q>-1&&Z<q)break;q<0&&(q=B-s),$.push(Q,Z,B),ne++,c.next()}}if(ne){let Q=new Uint16Array(ne*4),Z=$[$.length-2];for(let B=$.length-3,V=0;B>=0;B-=3)Q[V++]=$[B],Q[V++]=$[B+1]-Z,Q[V++]=$[B+2]-Z,Q[V++]=V;R.push(new fr(Q,$[2]-Z,i)),X.push(Z-_)}}function v(_,L){return(R,X,$)=>{let ne=0,q=R.length-1,Q,Z;if(q>=0&&(Q=R[q])instanceof yt){if(!q&&Q.type==_&&Q.length==$)return Q;(Z=Q.prop(Le.lookAhead))&&(ne=X[q]+Q.length+Z)}return S(_,R,X,$,ne,L)}}function b(_,L,R,X,$,ne,q,Q,Z){let B=[],V=[];for(;_.length>X;)B.push(_.pop()),V.push(L.pop()+R-$);_.push(S(i.types[q],B,V,ne-$,Q-ne,Z)),L.push($-R)}function S(_,L,R,X,$,ne,q){if(ne){let Q=[Le.contextHash,ne];q=q?[Q].concat(q):[Q]}if($>25){let Q=[Le.lookAhead,$];q=q?[Q].concat(q):[Q]}return new yt(_,L,R,X,q)}function k(_,L){let R=c.fork(),X=0,$=0,ne=0,q=R.end-s,Q={size:0,start:0,skip:0};e:for(let Z=R.pos-_;R.pos>Z;){let B=R.size;if(R.id==L&&B>=0){Q.size=X,Q.start=$,Q.skip=ne,ne+=4,X+=4,R.next();continue}let V=R.pos-B;if(B<0||V<Z||R.start<q)break;let T=R.id>=l?4:0,P=R.start;for(R.next();R.pos>V;){if(R.size<0)if(R.size==-3||R.size==-4)T+=4;else break e;else R.id>=l&&(T+=4);R.next()}$=P,X+=B,ne+=T}return(L<0||X==_)&&(Q.size=X,Q.start=$,Q.skip=ne),Q.size>4?Q:void 0}function A(_,L,R){let{id:X,start:$,end:ne,size:q}=c;if(c.next(),q>=0&&X<l){let Q=R;if(q>4){let Z=c.pos-(q-4);for(;c.pos>Z;)R=A(_,L,R)}L[--R]=Q,L[--R]=ne-_,L[--R]=$-_,L[--R]=X}else q==-3?h=X:q==-4&&(p=X);return R}let N=[],O=[];for(;c.pos>0;)g(t.start||0,t.bufferStart||0,N,O,-1,0);let M=(e=t.length)!==null&&e!==void 0?e:N.length?O[0]+N[0].length:0;return new yt(f[t.topID],N.reverse(),O.reverse(),M)}const Z2=new WeakMap;function Ch(t,e){if(!t.isAnonymous||e instanceof fr||e.type!=t)return 1;let n=Z2.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof yt)){n=1;break}n+=Ch(t,i)}Z2.set(e,n)}return n}function Mx(t,e,n,i,s,o,l,c,f){let h=0;for(let b=i;b<s;b++)h+=Ch(t,e[b]);let p=Math.ceil(h*1.5/8),g=[],y=[];function v(b,S,k,A,N){for(let O=k;O<A;){let M=O,_=S[O],L=Ch(t,b[O]);for(O++;O<A;O++){let R=Ch(t,b[O]);if(L+R>=p)break;L+=R}if(O==M+1){if(L>p){let R=b[M];v(R.children,R.positions,0,R.children.length,S[M]+N);continue}g.push(b[M])}else{let R=S[O-1]+b[O-1].length-_;g.push(Mx(t,b,S,M,O,_,R,null,f))}y.push(_+N-o)}}return v(e,n,i,s,0),(c||f)(g,y,l)}class to{constructor(e,n,i,s,o=!1,l=!1){this.from=e,this.to=n,this.tree=i,this.offset=s,this.open=(o?1:0)|(l?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let s=[new to(0,e.length,e,0,!1,i)];for(let o of n)o.to>e.length&&s.push(o);return s}static applyChanges(e,n,i=128){if(!n.length)return e;let s=[],o=1,l=e.length?e[0]:null;for(let c=0,f=0,h=0;;c++){let p=c<n.length?n[c]:null,g=p?p.fromA:1e9;if(g-f>=i)for(;l&&l.from<g;){let y=l;if(f>=y.from||g<=y.to||h){let v=Math.max(y.from,f)-h,b=Math.min(y.to,g)-h;y=v>=b?null:new to(v,b,y.tree,y.offset+h,c>0,!!p)}if(y&&s.push(y),l.to>g)break;l=o<e.length?e[o++]:null}if(!p)break;f=p.toA,h=p.toA-p.toB}return s}}let HE=class{startParse(e,n,i){return typeof e=="string"&&(e=new ZP(e)),i=i?i.length?i.map(s=>new Gm(s.from,s.to)):[new Gm(0,0)]:[new Gm(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let s=this.startParse(e,n,i);for(;;){let o=s.advance();if(o)return o}}};class ZP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Le({perNode:!0});let JP=0,ls=class my{constructor(e,n,i,s){this.name=e,this.set=n,this.base=i,this.modified=s,this.id=JP++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof my&&(n=e),n?.base)throw new Error("Can not derive from a modified tag");let s=new my(i,[],null,[]);if(s.set.push(s),n)for(let o of n.set)s.set.push(o);return s}static defineModifier(e){let n=new Fh(e);return i=>i.modified.indexOf(n)>-1?i:Fh.get(i.base||i,i.modified.concat(n).sort((s,o)=>s.id-o.id))}},e9=0;class Fh{constructor(e){this.name=e,this.instances=[],this.id=e9++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(c=>c.base==e&&t9(n,c.modified));if(i)return i;let s=[],o=new ls(e.name,s,e,n);for(let c of n)c.instances.push(o);let l=n9(n);for(let c of e.set)if(!c.modified.length)for(let f of l)s.push(Fh.get(c,f));return o}}function t9(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function n9(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function IE(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let s of n.split(" "))if(s){let o=[],l=2,c=s;for(let g=0;;){if(c=="..."&&g>0&&g+3==s.length){l=1;break}let y=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!y)throw new RangeError("Invalid path: "+s);if(o.push(y[0]=="*"?"":y[0][0]=='"'?JSON.parse(y[0]):y[0]),g+=y[0].length,g==s.length)break;let v=s[g++];if(g==s.length&&v=="!"){l=0;break}if(v!="/")throw new RangeError("Invalid path: "+s);c=s.slice(g)}let f=o.length-1,h=o[f];if(!h)throw new RangeError("Invalid path: "+s);let p=new _c(i,l,f>0?o.slice(0,f):null);e[h]=p.sort(e[h])}}return VE.add(e)}const VE=new Le({combine(t,e){let n,i,s;for(;t||e;){if(!t||e&&t.depth>=e.depth?(s=e,e=e.next):(s=t,t=t.next),n&&n.mode==s.mode&&!s.context&&!n.context)continue;let o=new _c(s.tags,s.mode,s.context);n?n.next=o:i=o,n=o}return i}});class _c{constructor(e,n,i,s){this.tags=e,this.mode=n,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}_c.empty=new _c([],2,null);function $E(t,e){let n=Object.create(null);for(let o of t)if(!Array.isArray(o.tag))n[o.tag.id]=o.class;else for(let l of o.tag)n[l.id]=o.class;let{scope:i,all:s=null}=e||{};return{style:o=>{let l=s;for(let c of o)for(let f of c.set){let h=n[f.id];if(h){l=l?l+" "+h:h;break}}return l},scope:i}}function i9(t,e){let n=null;for(let i of t){let s=i.style(e);s&&(n=n?n+" "+s:s)}return n}function s9(t,e,n,i=0,s=t.length){let o=new r9(i,Array.isArray(e)?e:[e],n);o.highlightRange(t.cursor(),i,s,"",o.highlighters),o.flush(s)}class r9{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,s,o){let{type:l,from:c,to:f}=e;if(c>=i||f<=n)return;l.isTop&&(o=this.highlighters.filter(v=>!v.scope||v.scope(l)));let h=s,p=o9(e)||_c.empty,g=i9(o,p.tags);if(g&&(h&&(h+=" "),h+=g,p.mode==1&&(s+=(s?" ":"")+g)),this.startSpan(Math.max(n,c),h),p.opaque)return;let y=e.tree&&e.tree.prop(Le.mounted);if(y&&y.overlay){let v=e.node.enter(y.overlay[0].from+c,1),b=this.highlighters.filter(k=>!k.scope||k.scope(y.tree.type)),S=e.firstChild();for(let k=0,A=c;;k++){let N=k<y.overlay.length?y.overlay[k]:null,O=N?N.from+c:f,M=Math.max(n,A),_=Math.min(i,O);if(M<_&&S)for(;e.from<_&&(this.highlightRange(e,M,_,s,o),this.startSpan(Math.min(_,e.to),h),!(e.to>=O||!e.nextSibling())););if(!N||O>i)break;A=N.to+c,A>n&&(this.highlightRange(v.cursor(),Math.max(n,N.from+c),Math.min(i,A),"",b),this.startSpan(Math.min(i,A),h))}S&&e.parent()}else if(e.firstChild()){y&&(s="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,s,o),this.startSpan(Math.min(i,e.to),h)}while(e.nextSibling());e.parent()}}}function o9(t){let e=t.type.prop(VE);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const de=ls.define,nh=de(),Ks=de(),J2=de(Ks),eC=de(Ks),Zs=de(),ih=de(Zs),Wm=de(Zs),wi=de(),Ir=de(wi),bi=de(),Si=de(),yy=de(),Fa=de(yy),sh=de(),te={comment:nh,lineComment:de(nh),blockComment:de(nh),docComment:de(nh),name:Ks,variableName:de(Ks),typeName:J2,tagName:de(J2),propertyName:eC,attributeName:de(eC),className:de(Ks),labelName:de(Ks),namespace:de(Ks),macroName:de(Ks),literal:Zs,string:ih,docString:de(ih),character:de(ih),attributeValue:de(ih),number:Wm,integer:de(Wm),float:de(Wm),bool:de(Zs),regexp:de(Zs),escape:de(Zs),color:de(Zs),url:de(Zs),keyword:bi,self:de(bi),null:de(bi),atom:de(bi),unit:de(bi),modifier:de(bi),operatorKeyword:de(bi),controlKeyword:de(bi),definitionKeyword:de(bi),moduleKeyword:de(bi),operator:Si,derefOperator:de(Si),arithmeticOperator:de(Si),logicOperator:de(Si),bitwiseOperator:de(Si),compareOperator:de(Si),updateOperator:de(Si),definitionOperator:de(Si),typeOperator:de(Si),controlOperator:de(Si),punctuation:yy,separator:de(yy),bracket:Fa,angleBracket:de(Fa),squareBracket:de(Fa),paren:de(Fa),brace:de(Fa),content:wi,heading:Ir,heading1:de(Ir),heading2:de(Ir),heading3:de(Ir),heading4:de(Ir),heading5:de(Ir),heading6:de(Ir),contentSeparator:de(wi),list:de(wi),quote:de(wi),emphasis:de(wi),strong:de(wi),link:de(wi),monospace:de(wi),strikethrough:de(wi),inserted:de(),deleted:de(),changed:de(),invalid:de(),meta:sh,documentMeta:de(sh),annotation:de(sh),processingInstruction:de(sh),definition:ls.defineModifier("definition"),constant:ls.defineModifier("constant"),function:ls.defineModifier("function"),standard:ls.defineModifier("standard"),local:ls.defineModifier("local"),special:ls.defineModifier("special")};for(let t in te){let e=te[t];e instanceof ls&&(e.name=t)}$E([{tag:te.link,class:"tok-link"},{tag:te.heading,class:"tok-heading"},{tag:te.emphasis,class:"tok-emphasis"},{tag:te.strong,class:"tok-strong"},{tag:te.keyword,class:"tok-keyword"},{tag:te.atom,class:"tok-atom"},{tag:te.bool,class:"tok-bool"},{tag:te.url,class:"tok-url"},{tag:te.labelName,class:"tok-labelName"},{tag:te.inserted,class:"tok-inserted"},{tag:te.deleted,class:"tok-deleted"},{tag:te.literal,class:"tok-literal"},{tag:te.string,class:"tok-string"},{tag:te.number,class:"tok-number"},{tag:[te.regexp,te.escape,te.special(te.string)],class:"tok-string2"},{tag:te.variableName,class:"tok-variableName"},{tag:te.local(te.variableName),class:"tok-variableName tok-local"},{tag:te.definition(te.variableName),class:"tok-variableName tok-definition"},{tag:te.special(te.variableName),class:"tok-variableName2"},{tag:te.definition(te.propertyName),class:"tok-propertyName tok-definition"},{tag:te.typeName,class:"tok-typeName"},{tag:te.namespace,class:"tok-namespace"},{tag:te.className,class:"tok-className"},{tag:te.macroName,class:"tok-macroName"},{tag:te.propertyName,class:"tok-propertyName"},{tag:te.operator,class:"tok-operator"},{tag:te.comment,class:"tok-comment"},{tag:te.meta,class:"tok-meta"},{tag:te.invalid,class:"tok-invalid"},{tag:te.punctuation,class:"tok-punctuation"}]);var Km;const dl=new Le;function l9(t){return ye.define({combine:t?e=>e.concat(t):void 0})}const a9=new Le;class ai{constructor(e,n,i=[],s=""){this.data=e,this.name=s,Ve.prototype.hasOwnProperty("tree")||Object.defineProperty(Ve.prototype,"tree",{get(){return Gt(this)}}),this.parser=n,this.extension=[hr.of(this),Ve.languageData.of((o,l,c)=>{let f=tC(o,l,c),h=f.type.prop(dl);if(!h)return[];let p=o.facet(h),g=f.type.prop(a9);if(g){let y=f.resolve(l-f.from,c);for(let v of g)if(v.test(y,o)){let b=o.facet(v.facet);return v.type=="replace"?b:b.concat(p)}}return p})].concat(i)}isActiveAt(e,n,i=-1){return tC(e,n,i).type.prop(dl)==this.data}findRegions(e){let n=e.facet(hr);if(n?.data==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],s=(o,l)=>{if(o.prop(dl)==this.data){i.push({from:l,to:l+o.length});return}let c=o.prop(Le.mounted);if(c){if(c.tree.prop(dl)==this.data){if(c.overlay)for(let f of c.overlay)i.push({from:f.from+l,to:f.to+l});else i.push({from:l,to:l+o.length});return}else if(c.overlay){let f=i.length;if(s(c.tree,c.overlay[0].from+l),i.length>f)return}}for(let f=0;f<o.children.length;f++){let h=o.children[f];h instanceof yt&&s(h,o.positions[f]+l)}};return s(Gt(e),0),i}get allowsNesting(){return!0}}ai.setState=Me.define();function tC(t,e,n){let i=t.facet(hr),s=Gt(t).topNode;if(!i||i.allowsNesting)for(let o=s;o;o=o.enter(e,n,dt.ExcludeBuffers|dt.EnterBracketed))o.type.isTop&&(s=o);return s}class Gh extends ai{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=l9(e.languageData);return new Gh(n,e.parser.configure({props:[dl.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new Gh(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Gt(t){let e=t.field(ai.state,!1);return e?e.tree:yt.empty}class c9{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ga=null;class Wh{constructor(e,n,i=[],s,o,l,c,f){this.parser=e,this.state=n,this.fragments=i,this.tree=s,this.treeLen=o,this.viewport=l,this.skipped=c,this.scheduleOn=f,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Wh(e,n,[],yt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new c9(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=yt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(to.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(to.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ga;Ga=this;try{return e()}finally{Ga=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=nC(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:s,treeLen:o,viewport:l,skipped:c}=this;if(this.takeTree(),!e.empty){let f=[];if(e.iterChangedRanges((h,p,g,y)=>f.push({fromA:h,toA:p,fromB:g,toB:y})),i=to.applyChanges(i,f),s=yt.empty,o=0,l={from:e.mapPos(l.from,-1),to:e.mapPos(l.to,1)},this.skipped.length){c=[];for(let h of this.skipped){let p=e.mapPos(h.from,1),g=e.mapPos(h.to,-1);p<g&&c.push({from:p,to:g})}}}return new Wh(this.parser,n,i,s,o,l,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:o}=this.skipped[i];s<e.to&&o>e.from&&(this.fragments=nC(this.fragments,s,o),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends HE{createParse(n,i,s){let o=s[0].from,l=s[s.length-1].to;return{parsedPos:o,advance(){let f=Ga;if(f){for(let h of s)f.tempSkipped.push(h);e&&(f.scheduleOn=f.scheduleOn?Promise.all([f.scheduleOn,e]):e)}return this.parsedPos=l,new yt(Sn.none,[],[],l-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ga}}function nC(t,e,n){return to.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Hl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Hl(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Wh.create(e.facet(hr).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Hl(i)}}ai.state=zt.define({create:Hl.init,update(t,e){for(let n of e.effects)if(n.is(ai.setState))return n.value;return e.startState.facet(hr)!=e.state.facet(hr)?Hl.init(e.state):t.apply(e)}});let UE=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(UE=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Zm=typeof navigator<"u"&&(!((Km=navigator.scheduling)===null||Km===void 0)&&Km.isInputPending)?()=>navigator.scheduling.isInputPending():null,u9=xt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(ai.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(ai.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=UE(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,o=i.field(ai.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let l=Date.now()+Math.min(this.chunkBudget,100,e&&!Zm?Math.max(25,e.timeRemaining()-5):1e9),c=o.context.treeLen<s&&i.doc.length>s+1e3,f=o.context.work(()=>Zm&&Zm()||Date.now()>l,s+(c?0:1e5));this.chunkBudget-=Date.now()-n,(f||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:ai.setState.of(new Hl(o.context))})),this.chunkBudget>0&&!(f&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>xn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hr=ye.define({combine(t){return t.length?t[0]:null},enables:t=>[ai.state,u9,pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class f9{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const h9=ye.define(),Vd=ye.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Kh(t){let e=t.facet(Vd);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Bc(t,e){let n="",i=t.tabSize,s=t.facet(Vd)[0];if(s=="	"){for(;e>=i;)n+="	",e-=i;s=" "}for(let o=0;o<e;o++)n+=s;return n}function Nx(t,e){t instanceof Ve&&(t=new $d(t));for(let i of t.state.facet(h9)){let s=i(t,e);if(s!==void 0)return s}let n=Gt(t.state);return n.length>=e?d9(t,n,e):null}class $d{constructor(e,n={}){this.state=e,this.options=n,this.unit=Kh(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=i.from&&s<=i.to?o&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,n);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,n=1){let{text:i,from:s}=this.lineAt(e,n),o=this.countColumn(i,e-s),l=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return l>-1&&(o+=l-this.countColumn(i,i.search(/\S|$/))),o}countColumn(e,n=e.length){return ql(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:s}=this.lineAt(e,n),o=this.options.overrideIndentation;if(o){let l=o(s);if(l>-1)return l}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const qE=new Le;function d9(t,e,n){let i=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=i.node){let o=[];for(let l=s;l&&!(l.from<i.node.from||l.to>i.node.to||l.from==i.node.from&&l.type==i.node.type);l=l.parent)o.push(l);for(let l=o.length-1;l>=0;l--)i={node:o[l],next:i}}return QE(i,t,n)}function QE(t,e,n){for(let i=t;i;i=i.next){let s=g9(i.node);if(s)return s(Tx.create(e,n,i))}return 0}function p9(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function g9(t){let e=t.type.prop(qE);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Le.closedBy))){let s=t.lastChild,o=s&&i.indexOf(s.name)>-1;return l=>YE(l,!0,1,void 0,o&&!p9(l)?s.from:void 0)}return t.parent==null?m9:null}function m9(){return 0}class Tx extends $d{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new Tx(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(y9(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return QE(this.context.next,this.base,this.pos)}}function y9(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function x9(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let s=t.options.simulateBreak,o=t.state.doc.lineAt(n.from),l=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let c=n.to;;){let f=e.childAfter(c);if(!f||f==i)return null;if(!f.type.isSkipped){if(f.from>=l)return null;let h=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+h}}c=f.to}}function iC({closing:t,align:e=!0,units:n=1}){return i=>YE(i,e,n,t)}function YE(t,e,n,i,s){let o=t.textAfter,l=o.match(/^\s*/)[0].length,c=i&&o.slice(l,l+i.length)==i||s==t.pos+l,f=e?x9(t):null;return f?c?t.column(f.from):t.column(f.to):t.baseIndent+(c?0:t.unit*n)}const v9=200;function b9(){return Ve.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,s=n.lineAt(i);if(i>s.from+v9)return t;let o=n.sliceString(s.from,i);if(!e.some(h=>h.test(o)))return t;let{state:l}=t,c=-1,f=[];for(let{head:h}of l.selection.ranges){let p=l.doc.lineAt(h);if(p.from==c)continue;c=p.from;let g=Nx(l,p.from);if(g==null)continue;let y=/^\s*/.exec(p.text)[0],v=Bc(l,g);y!=v&&f.push({from:p.from,to:p.from+y.length,insert:v})}return f.length?[t,{changes:f,sequential:!0}]:t})}const S9=ye.define(),XE=new Le;function w9(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function C9(t,e,n){let i=Gt(t);if(i.length<n)return null;let s=i.resolveStack(n,1),o=null;for(let l=s;l;l=l.next){let c=l.node;if(c.to<=n||c.from>n)continue;if(o&&c.from<e)break;let f=c.type.prop(XE);if(f&&(c.to<i.length-50||i.length==t.doc.length||!k9(c))){let h=f(c,t);h&&h.from<=n&&h.from>=e&&h.to>n&&(o=h)}}return o}function k9(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Zh(t,e,n){for(let i of t.facet(S9)){let s=i(t,e,n);if(s)return s}return C9(t,e,n)}function FE(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Ud=Me.define({map:FE}),ru=Me.define({map:FE});function GE(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const fo=zt.define({create(){return Se.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=sC(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Ud)&&!A9(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(ZE),s=i?Se.replace({widget:new R9(i(e.state,n.value))}):rC;t=t.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(ru)&&(t=t.update({filter:(i,s)=>n.value.from!=i||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=sC(t,e.selection.main.head)),t},provide:t=>pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,s)=>{n.push(i,s)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],s=t[n++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(rC.range(i,s))}return Se.set(e,!0)}});function sC(t,e,n=e){let i=!1;return t.between(e,n,(s,o)=>{s<n&&o>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(s,o)=>s>=n||o<=e}):t}function Jh(t,e,n){var i;let s=null;return(i=t.field(fo,!1))===null||i===void 0||i.between(e,n,(o,l)=>{(!s||s.from>o)&&(s={from:o,to:l})}),s}function A9(t,e,n){let i=!1;return t.between(e,e,(s,o)=>{s==e&&o==n&&(i=!0)}),i}function WE(t,e){return t.field(fo,!1)?e:e.concat(Me.appendConfig.of(JE()))}const O9=t=>{for(let e of GE(t)){let n=Zh(t.state,e.from,e.to);if(n)return t.dispatch({effects:WE(t.state,[Ud.of(n),KE(t,n)])}),!0}return!1},E9=t=>{if(!t.state.field(fo,!1))return!1;let e=[];for(let n of GE(t)){let i=Jh(t.state,n.from,n.to);i&&e.push(ru.of(i),KE(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function KE(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,s=t.state.doc.lineAt(e.to).number;return pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${s}.`)}const M9=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let s=t.lineBlockAt(i),o=Zh(e,s.from,s.to);o&&n.push(Ud.of(o)),i=(o?t.lineBlockAt(o.to):s).to+1}return n.length&&t.dispatch({effects:WE(t.state,n)}),!!n.length},N9=t=>{let e=t.state.field(fo,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,s)=>{n.push(ru.of({from:i,to:s}))}),t.dispatch({effects:n}),!0},T9=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:O9},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:E9},{key:"Ctrl-Alt-[",run:M9},{key:"Ctrl-Alt-]",run:N9}],D9={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},ZE=ye.define({combine(t){return Bi(t,D9)}});function JE(t){return[fo,B9]}function eM(t,e){let{state:n}=t,i=n.facet(ZE),s=l=>{let c=t.lineBlockAt(t.posAtDOM(l.target)),f=Jh(t.state,c.from,c.to);f&&t.dispatch({effects:ru.of(f)}),l.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,s,e);let o=document.createElement("span");return o.textContent=i.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const rC=Se.replace({widget:new class extends zi{toDOM(t){return eM(t,null)}}});class R9 extends zi{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return eM(e,this.value)}}const L9={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Jm extends ms{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function _9(t={}){let e={...L9,...t},n=new Jm(e,!0),i=new Jm(e,!1),s=xt.fromClass(class{constructor(l){this.from=l.viewport.from,this.markers=this.buildMarkers(l)}update(l){(l.docChanged||l.viewportChanged||l.startState.facet(hr)!=l.state.facet(hr)||l.startState.field(fo,!1)!=l.state.field(fo,!1)||Gt(l.startState)!=Gt(l.state)||e.foldingChanged(l))&&(this.markers=this.buildMarkers(l.view))}buildMarkers(l){let c=new ps;for(let f of l.viewportLineBlocks){let h=Jh(l.state,f.from,f.to)?i:Zh(l.state,f.from,f.to)?n:null;h&&c.add(f.from,f.from,h)}return c.finish()}}),{domEventHandlers:o}=e;return[s,BP({class:"cm-foldGutter",markers(l){var c;return((c=l.plugin(s))===null||c===void 0?void 0:c.markers)||ze.empty},initialSpacer(){return new Jm(e,!1)},domEventHandlers:{...o,click:(l,c,f)=>{if(o.click&&o.click(l,c,f))return!0;let h=Jh(l.state,c.from,c.to);if(h)return l.dispatch({effects:ru.of(h)}),!0;let p=Zh(l.state,c.from,c.to);return p?(l.dispatch({effects:Ud.of(p)}),!0):!1}}}),JE()]}const B9=pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ql{constructor(e,n){this.specs=e;let i;function s(c){let f=ar.newName();return(i||(i=Object.create(null)))["."+f]=c,f}const o=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,l=n.scope;this.scope=l instanceof ai?c=>c.prop(dl)==l.data:l?c=>c==l:void 0,this.style=$E(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:o}).style,this.module=i?new ar(i):null,this.themeType=n.themeType}static define(e,n){return new Ql(e,n||{})}}const xy=ye.define(),tM=ye.define({combine(t){return t.length?[t[0]]:null}});function e0(t){let e=t.facet(xy);return e.length?e:t.facet(tM)}function Dx(t,e){let n=[P9],i;return t instanceof Ql&&(t.module&&n.push(pe.styleModule.of(t.module)),i=t.themeType),e?.fallback?n.push(tM.of(t)):i?n.push(xy.computeN([pe.darkTheme],s=>s.facet(pe.darkTheme)==(i=="dark")?[t]:[])):n.push(xy.of(t)),n}class z9{constructor(e){this.markCache=Object.create(null),this.tree=Gt(e.state),this.decorations=this.buildDeco(e,e0(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Gt(e.state),i=e0(e.state),s=i!=e0(e.startState),{viewport:o}=e.view,l=e.changes.mapPos(this.decoratedTo,1);n.length<o.to&&!s&&n.type==this.tree.type&&l>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=l):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=o.to)}buildDeco(e,n){if(!n||!this.tree.length)return Se.none;let i=new ps;for(let{from:s,to:o}of e.visibleRanges)s9(this.tree,n,(l,c,f)=>{i.add(l,c,this.markCache[f]||(this.markCache[f]=Se.mark({class:f})))},s,o);return i.finish()}}const P9=ho.high(xt.fromClass(z9,{decorations:t=>t.decorations})),j9=Ql.define([{tag:te.meta,color:"#404740"},{tag:te.link,textDecoration:"underline"},{tag:te.heading,textDecoration:"underline",fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strong,fontWeight:"bold"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.keyword,color:"#708"},{tag:[te.atom,te.bool,te.url,te.contentSeparator,te.labelName],color:"#219"},{tag:[te.literal,te.inserted],color:"#164"},{tag:[te.string,te.deleted],color:"#a11"},{tag:[te.regexp,te.escape,te.special(te.string)],color:"#e40"},{tag:te.definition(te.variableName),color:"#00f"},{tag:te.local(te.variableName),color:"#30a"},{tag:[te.typeName,te.namespace],color:"#085"},{tag:te.className,color:"#167"},{tag:[te.special(te.variableName),te.macroName],color:"#256"},{tag:te.definition(te.propertyName),color:"#00c"},{tag:te.comment,color:"#940"},{tag:te.invalid,color:"#f00"}]),H9=pe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),nM=1e4,iM="()[]{}",sM=ye.define({combine(t){return Bi(t,{afterCursor:!0,brackets:iM,maxScanDistance:nM,renderMatch:$9})}}),I9=Se.mark({class:"cm-matchingBracket"}),V9=Se.mark({class:"cm-nonmatchingBracket"});function $9(t){let e=[],n=t.matched?I9:V9;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const U9=zt.define({create(){return Se.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(sM);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=Ei(e.state,s.head,-1,i)||s.head>0&&Ei(e.state,s.head-1,1,i)||i.afterCursor&&(Ei(e.state,s.head,1,i)||s.head<e.state.doc.length&&Ei(e.state,s.head+1,-1,i));o&&(n=n.concat(i.renderMatch(o,e.state)))}return Se.set(n,!0)},provide:t=>pe.decorations.from(t)}),q9=[U9,H9];function Q9(t={}){return[sM.of(t),q9]}const Y9=new Le;function vy(t,e,n){let i=t.prop(e<0?Le.openedBy:Le.closedBy);if(i)return i;if(t.name.length==1){let s=n.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function by(t){let e=t.type.prop(Y9);return e?e(t.node):t}function Ei(t,e,n,i={}){let s=i.maxScanDistance||nM,o=i.brackets||iM,l=Gt(t),c=l.resolveInner(e,n);for(let f=c;f;f=f.parent){let h=vy(f.type,n,o);if(h&&f.from<f.to){let p=by(f);if(p&&(n>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return X9(t,e,n,f,p,h,o)}}return F9(t,e,n,l,c.type,s,o)}function X9(t,e,n,i,s,o,l){let c=i.parent,f={from:s.from,to:s.to},h=0,p=c?.cursor();if(p&&(n<0?p.childBefore(i.from):p.childAfter(i.to)))do if(n<0?p.to<=i.from:p.from>=i.to){if(h==0&&o.indexOf(p.type.name)>-1&&p.from<p.to){let g=by(p);return{start:f,end:g?{from:g.from,to:g.to}:void 0,matched:!0}}else if(vy(p.type,n,l))h++;else if(vy(p.type,-n,l)){if(h==0){let g=by(p);return{start:f,end:g&&g.from<g.to?{from:g.from,to:g.to}:void 0,matched:!1}}h--}}while(n<0?p.prevSibling():p.nextSibling());return{start:f,matched:!1}}function F9(t,e,n,i,s,o,l){let c=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),f=l.indexOf(c);if(f<0||f%2==0!=n>0)return null;let h={from:n<0?e-1:e,to:n>0?e+1:e},p=t.doc.iterRange(e,n>0?t.doc.length:0),g=0;for(let y=0;!p.next().done&&y<=o;){let v=p.value;n<0&&(y+=v.length);let b=e+y*n;for(let S=n>0?0:v.length-1,k=n>0?v.length:-1;S!=k;S+=n){let A=l.indexOf(v[S]);if(!(A<0||i.resolveInner(b+S,1).type!=s))if(A%2==0==n>0)g++;else{if(g==1)return{start:h,end:{from:b+S,to:b+S+1},matched:A>>1==f>>1};g--}}n>0&&(y+=v.length)}return p.done?{start:h,matched:!1}:null}const G9=Object.create(null),oC=[Sn.none],lC=[],aC=Object.create(null),W9=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])W9[t]=K9(G9,e);function t0(t,e){lC.indexOf(t)>-1||(lC.push(t),console.warn(e))}function K9(t,e){let n=[];for(let c of e.split(" ")){let f=[];for(let h of c.split(".")){let p=t[h]||te[h];p?typeof p=="function"?f.length?f=f.map(p):t0(h,`Modifier ${h} used at start of tag`):f.length?t0(h,`Tag ${h} used as modifier`):f=Array.isArray(p)?p:[p]:t0(h,`Unknown highlighting tag ${h}`)}for(let h of f)n.push(h)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+n.map(c=>c.id),o=aC[s];if(o)return o.id;let l=aC[s]=Sn.define({id:oC.length,name:i,props:[IE({[i]:n})]});return oC.push(l),l.id}it.RTL,it.LTR;const Z9=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Lx(t.state,n.from);return i.line?J9(t):i.block?tj(t):!1};function Rx(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let s=t(e,n);return s?(i(n.update(s)),!0):!1}}const J9=Rx(sj,0),ej=Rx(rM,0),tj=Rx((t,e)=>rM(t,e,ij(e)),0);function Lx(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Wa=50;function nj(t,{open:e,close:n},i,s){let o=t.sliceDoc(i-Wa,i),l=t.sliceDoc(s,s+Wa),c=/\s*$/.exec(o)[0].length,f=/^\s*/.exec(l)[0].length,h=o.length-c;if(o.slice(h-e.length,h)==e&&l.slice(f,f+n.length)==n)return{open:{pos:i-c,margin:c&&1},close:{pos:s+f,margin:f&&1}};let p,g;s-i<=2*Wa?p=g=t.sliceDoc(i,s):(p=t.sliceDoc(i,i+Wa),g=t.sliceDoc(s-Wa,s));let y=/^\s*/.exec(p)[0].length,v=/\s*$/.exec(g)[0].length,b=g.length-v-n.length;return p.slice(y,y+e.length)==e&&g.slice(b,b+n.length)==n?{open:{pos:i+y+e.length,margin:/\s/.test(p.charAt(y+e.length))?1:0},close:{pos:s-v-n.length,margin:/\s/.test(g.charAt(b-1))?1:0}}:null}function ij(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=n.to<=i.to?i:t.doc.lineAt(n.to);s.from>i.from&&s.from==n.to&&(s=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let o=e.length-1;o>=0&&e[o].to>i.from?e[o].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function rM(t,e,n=e.selection.ranges){let i=n.map(o=>Lx(e,o.from).block);if(!i.every(o=>o))return null;let s=n.map((o,l)=>nj(e,i[l],o.from,o.to));if(t!=2&&!s.every(o=>o))return{changes:e.changes(n.map((o,l)=>s[l]?[]:[{from:o.from,insert:i[l].open+" "},{from:o.to,insert:" "+i[l].close}]))};if(t!=1&&s.some(o=>o)){let o=[];for(let l=0,c;l<s.length;l++)if(c=s[l]){let f=i[l],{open:h,close:p}=c;o.push({from:h.pos-f.open.length,to:h.pos+h.margin},{from:p.pos-p.margin,to:p.pos+f.close.length})}return{changes:o}}return null}function sj(t,e,n=e.selection.ranges){let i=[],s=-1;for(let{from:o,to:l}of n){let c=i.length,f=1e9,h=Lx(e,o).line;if(h){for(let p=o;p<=l;){let g=e.doc.lineAt(p);if(g.from>s&&(o==l||l>g.from)){s=g.from;let y=/^\s*/.exec(g.text)[0].length,v=y==g.length,b=g.text.slice(y,y+h.length)==h?y:-1;y<g.text.length&&y<f&&(f=y),i.push({line:g,comment:b,token:h,indent:y,empty:v,single:!1})}p=g.to+1}if(f<1e9)for(let p=c;p<i.length;p++)i[p].indent<i[p].line.text.length&&(i[p].indent=f);i.length==c+1&&(i[c].single=!0)}}if(t!=2&&i.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:c,token:f,indent:h,empty:p,single:g}of i)(g||!p)&&o.push({from:c.from+h,insert:f+" "});let l=e.changes(o);return{changes:l,selection:e.selection.map(l,1)}}else if(t!=1&&i.some(o=>o.comment>=0)){let o=[];for(let{line:l,comment:c,token:f}of i)if(c>=0){let h=l.from+c,p=h+f.length;l.text[p-l.from]==" "&&p++,o.push({from:h,to:p})}return{changes:o}}return null}const Sy=_i.define(),rj=_i.define(),oj=ye.define(),oM=ye.define({combine(t){return Bi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,s)=>e(i,s)||n(i,s)})}}),lM=zt.define({create(){return Mi.empty},update(t,e){let n=e.state.facet(oM),i=e.annotation(Sy);if(i){let f=vn.fromTransaction(e,i.selection),h=i.side,p=h==0?t.undone:t.done;return f?p=ed(p,p.length,n.minDepth,f):p=uM(p,e.startState.selection),new Mi(h==0?i.rest:p,h==0?p:i.rest)}let s=e.annotation(rj);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(Rt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let o=vn.fromTransaction(e),l=e.annotation(Rt.time),c=e.annotation(Rt.userEvent);return o?t=t.addChanges(o,l,c,n,e):e.selection&&(t=t.addSelection(e.startState.selection,l,c,n.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Mi(t.done.map(vn.fromJSON),t.undone.map(vn.fromJSON))}});function lj(t={}){return[lM,oM.of(t),pe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?aM:e.inputType=="historyRedo"?wy:null;return i?(e.preventDefault(),i(n)):!1}})]}function qd(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let s=n.field(lM,!1);if(!s)return!1;let o=s.pop(t,n,e);return o?(i(o),!0):!1}}const aM=qd(0,!1),wy=qd(1,!1),aj=qd(0,!0),cj=qd(1,!0);class vn{constructor(e,n,i,s,o){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new vn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new vn(e.changes&&Nt.fromJSON(e.changes),[],e.mapped&&Ti.fromJSON(e.mapped),e.startSelection&&ae.fromJSON(e.startSelection),e.selectionsAfter.map(ae.fromJSON))}static fromTransaction(e,n){let i=Qn;for(let s of e.startState.facet(oj)){let o=s(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new vn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Qn)}static selection(e){return new vn(void 0,Qn,void 0,void 0,e)}}function ed(t,e,n,i){let s=e+1>n+20?e-n-1:0,o=t.slice(s,e);return o.push(i),o}function uj(t,e){let n=[],i=!1;return t.iterChangedRanges((s,o)=>n.push(s,o)),e.iterChangedRanges((s,o,l,c)=>{for(let f=0;f<n.length;){let h=n[f++],p=n[f++];c>=h&&l<=p&&(i=!0)}}),i}function fj(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function cM(t,e){return t.length?e.length?t.concat(e):t:e}const Qn=[],hj=200;function uM(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-hj));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),ed(t,t.length-1,1e9,n.setSelAfter(i)))}else return[vn.selection([e])]}function dj(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function n0(t,e){if(!t.length)return t;let n=t.length,i=Qn;for(;n;){let s=pj(t[n-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let o=t.slice(0,n);return o[n-1]=s,o}else e=s.mapped,n--,i=s.selectionsAfter}return i.length?[vn.selection(i)]:Qn}function pj(t,e,n){let i=cM(t.selectionsAfter.length?t.selectionsAfter.map(c=>c.map(e)):Qn,n);if(!t.changes)return vn.selection(i);let s=t.changes.map(e),o=e.mapDesc(t.changes,!0),l=t.mapped?t.mapped.composeDesc(o):o;return new vn(s,Me.mapEffects(t.effects,e),l,t.startSelection.map(o),i)}const gj=/^(input\.type|delete)($|\.)/;class Mi{constructor(e,n,i=0,s=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Mi(this.done,this.undone):this}addChanges(e,n,i,s,o){let l=this.done,c=l[l.length-1];return c&&c.changes&&!c.changes.empty&&e.changes&&(!i||gj.test(i))&&(!c.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,uj(c.changes,e.changes))||i=="input.type.compose")?l=ed(l,l.length-1,s.minDepth,new vn(e.changes.compose(c.changes),cM(Me.mapEffects(e.effects,c.changes),c.effects),c.mapped,c.startSelection,Qn)):l=ed(l,l.length,s.minDepth,e),new Mi(l,Qn,n,i)}addSelection(e,n,i,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:Qn;return o.length>0&&n-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&fj(o[o.length-1],e)?this:new Mi(uM(this.done,e),this.undone,n,i)}addMapping(e){return new Mi(n0(this.done,e),n0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],l=o.selectionsAfter[0]||n.selection;if(i&&o.selectionsAfter.length)return n.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Sy.of({side:e,rest:dj(s),selection:l}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let c=s.length==1?Qn:s.slice(0,s.length-1);return o.mapped&&(c=n0(c,o.mapped)),n.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Sy.of({side:e,rest:c,selection:l}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Mi.empty=new Mi(Qn,Qn);const mj=[{key:"Mod-z",run:aM,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:wy,preventDefault:!0},{linux:"Ctrl-Shift-z",run:wy,preventDefault:!0},{key:"Mod-u",run:aj,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:cj,preventDefault:!0}];function Yl(t,e){return ae.create(t.ranges.map(e),t.mainIndex)}function fi(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function hi({state:t,dispatch:e},n){let i=Yl(t.selection,n);return i.eq(t.selection,!0)?!1:(e(fi(t,i)),!0)}function Qd(t,e){return ae.cursor(e?t.to:t.from)}function fM(t,e){return hi(t,n=>n.empty?t.moveByChar(n,e):Qd(n,e))}function Wt(t){return t.textDirectionAt(t.state.selection.main.head)==it.LTR}const hM=t=>fM(t,!Wt(t)),dM=t=>fM(t,Wt(t));function pM(t,e){return hi(t,n=>n.empty?t.moveByGroup(n,e):Qd(n,e))}const yj=t=>pM(t,!Wt(t)),xj=t=>pM(t,Wt(t));function vj(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Yd(t,e,n){let i=Gt(t).resolveInner(e.head),s=n?Le.closedBy:Le.openedBy;for(let f=e.head;;){let h=n?i.childAfter(f):i.childBefore(f);if(!h)break;vj(t,h,s)?i=h:f=n?h.to:h.from}let o=i.type.prop(s),l,c;return o&&(l=n?Ei(t,i.from,1):Ei(t,i.to,-1))&&l.matched?c=n?l.end.to:l.end.from:c=n?i.to:i.from,ae.cursor(c,n?-1:1)}const bj=t=>hi(t,e=>Yd(t.state,e,!Wt(t))),Sj=t=>hi(t,e=>Yd(t.state,e,Wt(t)));function gM(t,e){return hi(t,n=>{if(!n.empty)return Qd(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const mM=t=>gM(t,!1),yM=t=>gM(t,!0);function xM(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,s;if(e){for(let o of t.state.facet(pe.scrollMargins)){let l=o(t);l?.top&&(n=Math.max(l?.top,n)),l?.bottom&&(i=Math.max(l?.bottom,i))}s=t.scrollDOM.clientHeight-n-i}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function vM(t,e){let n=xM(t),{state:i}=t,s=Yl(i.selection,l=>l.empty?t.moveVertically(l,e,n.height):Qd(l,e));if(s.eq(i.selection))return!1;let o;if(n.selfScroll){let l=t.coordsAtPos(i.selection.main.head),c=t.scrollDOM.getBoundingClientRect(),f=c.top+n.marginTop,h=c.bottom-n.marginBottom;l&&l.top>f&&l.bottom<h&&(o=pe.scrollIntoView(s.main.head,{y:"start",yMargin:l.top-f}))}return t.dispatch(fi(i,s),{effects:o}),!0}const cC=t=>vM(t,!1),Cy=t=>vM(t,!0);function pr(t,e,n){let i=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?i.to:i.from)&&(s=t.moveToLineBoundary(e,n,!1)),!n&&s.head==i.from&&i.length){let o=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;o&&e.head!=i.from+o&&(s=ae.cursor(i.from+o))}return s}const wj=t=>hi(t,e=>pr(t,e,!0)),Cj=t=>hi(t,e=>pr(t,e,!1)),kj=t=>hi(t,e=>pr(t,e,!Wt(t))),Aj=t=>hi(t,e=>pr(t,e,Wt(t))),Oj=t=>hi(t,e=>ae.cursor(t.lineBlockAt(e.head).from,1)),Ej=t=>hi(t,e=>ae.cursor(t.lineBlockAt(e.head).to,-1));function Mj(t,e,n){let i=!1,s=Yl(t.selection,o=>{let l=Ei(t,o.head,-1)||Ei(t,o.head,1)||o.head>0&&Ei(t,o.head-1,1)||o.head<t.doc.length&&Ei(t,o.head+1,-1);if(!l||!l.end)return o;i=!0;let c=l.start.from==o.head?l.end.to:l.end.from;return ae.cursor(c)});return i?(e(fi(t,s)),!0):!1}const Nj=({state:t,dispatch:e})=>Mj(t,e);function Gn(t,e){let n=Yl(t.state.selection,i=>{let s=e(i);return ae.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(fi(t.state,n)),!0)}function bM(t,e){return Gn(t,n=>t.moveByChar(n,e))}const SM=t=>bM(t,!Wt(t)),wM=t=>bM(t,Wt(t));function CM(t,e){return Gn(t,n=>t.moveByGroup(n,e))}const Tj=t=>CM(t,!Wt(t)),Dj=t=>CM(t,Wt(t)),Rj=t=>Gn(t,e=>Yd(t.state,e,!Wt(t))),Lj=t=>Gn(t,e=>Yd(t.state,e,Wt(t)));function kM(t,e){return Gn(t,n=>t.moveVertically(n,e))}const AM=t=>kM(t,!1),OM=t=>kM(t,!0);function EM(t,e){return Gn(t,n=>t.moveVertically(n,e,xM(t).height))}const uC=t=>EM(t,!1),fC=t=>EM(t,!0),_j=t=>Gn(t,e=>pr(t,e,!0)),Bj=t=>Gn(t,e=>pr(t,e,!1)),zj=t=>Gn(t,e=>pr(t,e,!Wt(t))),Pj=t=>Gn(t,e=>pr(t,e,Wt(t))),jj=t=>Gn(t,e=>ae.cursor(t.lineBlockAt(e.head).from)),Hj=t=>Gn(t,e=>ae.cursor(t.lineBlockAt(e.head).to)),hC=({state:t,dispatch:e})=>(e(fi(t,{anchor:0})),!0),dC=({state:t,dispatch:e})=>(e(fi(t,{anchor:t.doc.length})),!0),pC=({state:t,dispatch:e})=>(e(fi(t,{anchor:t.selection.main.anchor,head:0})),!0),gC=({state:t,dispatch:e})=>(e(fi(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Ij=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Vj=({state:t,dispatch:e})=>{let n=Xd(t).map(({from:i,to:s})=>ae.range(i,Math.min(s+1,t.doc.length)));return e(t.update({selection:ae.create(n),userEvent:"select"})),!0},$j=({state:t,dispatch:e})=>{let n=Yl(t.selection,i=>{let s=Gt(t),o=s.resolveStack(i.from,1);if(i.empty){let l=s.resolveStack(i.from,-1);l.node.from>=o.node.from&&l.node.to<=o.node.to&&(o=l)}for(let l=o;l;l=l.next){let{node:c}=l;if((c.from<i.from&&c.to>=i.to||c.to>i.to&&c.from<=i.from)&&l.next)return ae.range(c.to,c.from)}return i});return n.eq(t.selection)?!1:(e(fi(t,n)),!0)};function MM(t,e){let{state:n}=t,i=n.selection,s=n.selection.ranges.slice();for(let o of n.selection.ranges){let l=n.doc.lineAt(o.head);if(e?l.to<t.state.doc.length:l.from>0)for(let c=o;;){let f=t.moveVertically(c,e);if(f.head<l.from||f.head>l.to){s.some(h=>h.head==f.head)||s.push(f);break}else{if(f.head==c.head)break;c=f}}}return s.length==i.ranges.length?!1:(t.dispatch(fi(n,ae.create(s,s.length-1))),!0)}const Uj=t=>MM(t,!1),qj=t=>MM(t,!0),Qj=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=ae.create([n.main]):n.main.empty||(i=ae.create([ae.cursor(n.main.head)])),i?(e(fi(t,i)),!0):!1};function ou(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,s=i.changeByRange(o=>{let{from:l,to:c}=o;if(l==c){let f=e(o);f<l?(n="delete.backward",f=rh(t,f,!1)):f>l&&(n="delete.forward",f=rh(t,f,!0)),l=Math.min(l,f),c=Math.max(c,f)}else l=rh(t,l,!1),c=rh(t,c,!0);return l==c?{range:o}:{changes:{from:l,to:c},range:ae.cursor(l,l<o.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(i.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?pe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function rh(t,e,n){if(t instanceof pe)for(let i of t.state.facet(pe.atomicRanges).map(s=>s(t)))i.between(e,e,(s,o)=>{s<e&&o>e&&(e=n?o:s)});return e}const NM=(t,e,n)=>ou(t,i=>{let s=i.from,{state:o}=t,l=o.doc.lineAt(s),c,f;if(n&&!e&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(c=l.text.slice(0,s-l.from))){if(c[c.length-1]=="	")return s-1;let h=ql(c,o.tabSize),p=h%Kh(o)||Kh(o);for(let g=0;g<p&&c[c.length-1-g]==" ";g++)s--;f=s}else f=Dt(l.text,s-l.from,e,e)+l.from,f==s&&l.number!=(e?o.doc.lines:1)?f+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(l.text.slice(f-l.from,s-l.from))&&(f=Dt(l.text,f-l.from,!1,!1)+l.from);return f}),ky=t=>NM(t,!1,!0),TM=t=>NM(t,!0,!1),DM=(t,e)=>ou(t,n=>{let i=n.head,{state:s}=t,o=s.doc.lineAt(i),l=s.charCategorizer(i);for(let c=null;;){if(i==(e?o.to:o.from)){i==n.head&&o.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let f=Dt(o.text,i-o.from,e)+o.from,h=o.text.slice(Math.min(i,f)-o.from,Math.max(i,f)-o.from),p=l(h);if(c!=null&&p!=c)break;(h!=" "||i!=n.head)&&(c=p),i=f}return i}),RM=t=>DM(t,!1),Yj=t=>DM(t,!0),Xj=t=>ou(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Fj=t=>ou(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),Gj=t=>ou(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Wj=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Qe.of(["",""])},range:ae.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Kj=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let s=i.from,o=t.doc.lineAt(s),l=s==o.from?s-1:Dt(o.text,s-o.from,!1)+o.from,c=s==o.to?s+1:Dt(o.text,s-o.from,!0)+o.from;return{changes:{from:l,to:c,insert:t.doc.slice(s,c).append(t.doc.slice(l,s))},range:ae.cursor(c)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Xd(t){let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.from),o=t.doc.lineAt(i.to);if(!i.empty&&i.to==o.from&&(o=t.doc.lineAt(i.to-1)),n>=s.number){let l=e[e.length-1];l.to=o.to,l.ranges.push(i)}else e.push({from:s.from,to:o.to,ranges:[i]});n=o.number+1}return e}function LM(t,e,n){if(t.readOnly)return!1;let i=[],s=[];for(let o of Xd(t)){if(n?o.to==t.doc.length:o.from==0)continue;let l=t.doc.lineAt(n?o.to+1:o.from-1),c=l.length+1;if(n){i.push({from:o.to,to:l.to},{from:o.from,insert:l.text+t.lineBreak});for(let f of o.ranges)s.push(ae.range(Math.min(t.doc.length,f.anchor+c),Math.min(t.doc.length,f.head+c)))}else{i.push({from:l.from,to:o.from},{from:o.to,insert:t.lineBreak+l.text});for(let f of o.ranges)s.push(ae.range(f.anchor-c,f.head-c))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:ae.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Zj=({state:t,dispatch:e})=>LM(t,e,!1),Jj=({state:t,dispatch:e})=>LM(t,e,!0);function _M(t,e,n){if(t.readOnly)return!1;let i=[];for(let o of Xd(t))n?i.push({from:o.from,insert:t.doc.slice(o.from,o.to)+t.lineBreak}):i.push({from:o.to,insert:t.lineBreak+t.doc.slice(o.from,o.to)});let s=t.changes(i);return e(t.update({changes:s,selection:t.selection.map(s,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const eH=({state:t,dispatch:e})=>_M(t,e,!1),tH=({state:t,dispatch:e})=>_M(t,e,!0),nH=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Xd(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),i=Yl(e.selection,s=>{let o;if(t.lineWrapping){let l=t.lineBlockAt(s.head),c=t.coordsAtPos(s.head,s.assoc||1);c&&(o=l.bottom+t.documentTop-c.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,o)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function iH(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Gt(t).resolveInner(e),i=n.childBefore(e),s=n.childAfter(e),o;return i&&s&&i.to<=e&&s.from>=e&&(o=i.type.prop(Le.closedBy))&&o.indexOf(s.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const mC=BM(!1),sH=BM(!0);function BM(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:o,to:l}=s,c=e.doc.lineAt(o),f=!t&&o==l&&iH(e,o);t&&(o=l=(l<=c.to?c:e.doc.lineAt(l)).to);let h=new $d(e,{simulateBreak:o,simulateDoubleBreak:!!f}),p=Nx(h,o);for(p==null&&(p=ql(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));l<c.to&&/\s/.test(c.text[l-c.from]);)l++;f?{from:o,to:l}=f:o>c.from&&o<c.from+100&&!/\S/.test(c.text.slice(0,o))&&(o=c.from);let g=["",Bc(e,p)];return f&&g.push(Bc(e,h.lineIndent(c.from,-1))),{changes:{from:o,to:l,insert:Qe.of(g)},range:ae.cursor(o+1+g[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function _x(t,e){let n=-1;return t.changeByRange(i=>{let s=[];for(let l=i.from;l<=i.to;){let c=t.doc.lineAt(l);c.number>n&&(i.empty||i.to>c.from)&&(e(c,s,i),n=c.number),l=c.to+1}let o=t.changes(s);return{changes:s,range:ae.range(o.mapPos(i.anchor,1),o.mapPos(i.head,1))}})}const rH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new $d(t,{overrideIndentation:o=>{let l=n[o];return l??-1}}),s=_x(t,(o,l,c)=>{let f=Nx(i,o.from);if(f==null)return;/\S/.test(o.text)||(f=0);let h=/^\s*/.exec(o.text)[0],p=Bc(t,f);(h!=p||c.from<o.from+h.length)&&(n[o.from]=f,l.push({from:o.from,to:o.from+h.length,insert:p}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},zM=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(_x(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Vd)})}),{userEvent:"input.indent"})),!0),PM=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(_x(t,(n,i)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let o=ql(s,t.tabSize),l=0,c=Bc(t,Math.max(0,o-Kh(t)));for(;l<s.length&&l<c.length&&s.charCodeAt(l)==c.charCodeAt(l);)l++;i.push({from:n.from+l,to:n.from+s.length,insert:c.slice(l)})}),{userEvent:"delete.dedent"})),!0),oH=t=>(t.setTabFocusMode(),!0),lH=[{key:"Ctrl-b",run:hM,shift:SM,preventDefault:!0},{key:"Ctrl-f",run:dM,shift:wM},{key:"Ctrl-p",run:mM,shift:AM},{key:"Ctrl-n",run:yM,shift:OM},{key:"Ctrl-a",run:Oj,shift:jj},{key:"Ctrl-e",run:Ej,shift:Hj},{key:"Ctrl-d",run:TM},{key:"Ctrl-h",run:ky},{key:"Ctrl-k",run:Xj},{key:"Ctrl-Alt-h",run:RM},{key:"Ctrl-o",run:Wj},{key:"Ctrl-t",run:Kj},{key:"Ctrl-v",run:Cy}],aH=[{key:"ArrowLeft",run:hM,shift:SM,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:yj,shift:Tj,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:kj,shift:zj,preventDefault:!0},{key:"ArrowRight",run:dM,shift:wM,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:xj,shift:Dj,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Aj,shift:Pj,preventDefault:!0},{key:"ArrowUp",run:mM,shift:AM,preventDefault:!0},{mac:"Cmd-ArrowUp",run:hC,shift:pC},{mac:"Ctrl-ArrowUp",run:cC,shift:uC},{key:"ArrowDown",run:yM,shift:OM,preventDefault:!0},{mac:"Cmd-ArrowDown",run:dC,shift:gC},{mac:"Ctrl-ArrowDown",run:Cy,shift:fC},{key:"PageUp",run:cC,shift:uC},{key:"PageDown",run:Cy,shift:fC},{key:"Home",run:Cj,shift:Bj,preventDefault:!0},{key:"Mod-Home",run:hC,shift:pC},{key:"End",run:wj,shift:_j,preventDefault:!0},{key:"Mod-End",run:dC,shift:gC},{key:"Enter",run:mC,shift:mC},{key:"Mod-a",run:Ij},{key:"Backspace",run:ky,shift:ky,preventDefault:!0},{key:"Delete",run:TM,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:RM,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:Yj,preventDefault:!0},{mac:"Mod-Backspace",run:Fj,preventDefault:!0},{mac:"Mod-Delete",run:Gj,preventDefault:!0}].concat(lH.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),cH=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:bj,shift:Rj},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Sj,shift:Lj},{key:"Alt-ArrowUp",run:Zj},{key:"Shift-Alt-ArrowUp",run:eH},{key:"Alt-ArrowDown",run:Jj},{key:"Shift-Alt-ArrowDown",run:tH},{key:"Mod-Alt-ArrowUp",run:Uj},{key:"Mod-Alt-ArrowDown",run:qj},{key:"Escape",run:Qj},{key:"Mod-Enter",run:sH},{key:"Alt-l",mac:"Ctrl-l",run:Vj},{key:"Mod-i",run:$j,preventDefault:!0},{key:"Mod-[",run:PM},{key:"Mod-]",run:zM},{key:"Mod-Alt-\\",run:rH},{key:"Shift-Mod-k",run:nH},{key:"Shift-Mod-\\",run:Nj},{key:"Mod-/",run:Z9},{key:"Alt-A",run:ej},{key:"Ctrl-m",mac:"Shift-Alt-m",run:oH}].concat(aH),uH={key:"Tab",run:zM,shift:PM},yC=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Il{constructor(e,n,i=0,s=e.length,o,l){this.test=l,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=o?c=>o(yC(c)):yC,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return pn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=ox(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ai(e);let s=this.normalize(n);if(s.length)for(let o=0,l=i;;o++){let c=s.charCodeAt(o),f=this.match(c,l,this.bufferPos+this.bufferStart);if(o==s.length-1){if(f)return this.value=f,this;break}l==i&&o<n.length&&n.charCodeAt(o)==c&&l++}}}match(e,n,i){let s=null;for(let o=0;o<this.matches.length;o+=2){let l=this.matches[o],c=!1;this.query.charCodeAt(l)==e&&(l==this.query.length-1?s={from:this.matches[o+1],to:i}:(this.matches[o]++,c=!0)),c||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:i}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(Il.prototype[Symbol.iterator]=function(){return this});const jM={from:-1,to:-1,match:/.*/.exec("")},Bx="gm"+(/x/.unicode==null?"":"u");class HM{constructor(e,n,i,s=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=jM,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new IM(e,n,i,s,o);this.re=new RegExp(n,Bx+(i?.ignoreCase?"i":"")),this.test=i?.test,this.iter=e.iter();let l=e.lineAt(s);this.curLineStart=l.from,this.matchPos=td(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,s=i+n[0].length;if(this.matchPos=td(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const i0=new WeakMap;class Cl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let s=i0.get(e);if(!s||s.from>=i||s.to<=n){let c=new Cl(n,e.sliceString(n,i));return i0.set(e,c),c}if(s.from==n&&s.to==i)return s;let{text:o,from:l}=s;return l>n&&(o=e.sliceString(n,l)+o,l=n),s.to<i&&(o+=e.sliceString(s.to,i)),i0.set(e,new Cl(l,o)),new Cl(n,o.slice(n-l,i-l))}}class IM{constructor(e,n,i,s,o){this.text=e,this.to=o,this.done=!1,this.value=jM,this.matchPos=td(e,s),this.re=new RegExp(n,Bx+(i?.ignoreCase?"i":"")),this.test=i?.test,this.flat=Cl.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,s=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this.matchPos=td(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Cl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(HM.prototype[Symbol.iterator]=IM.prototype[Symbol.iterator]=function(){return this});function fH(t){try{return new RegExp(t,Bx),!0}catch{return!1}}function td(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}const hH=t=>{let{state:e}=t,n=String(e.doc.lineAt(t.state.selection.main.head).number),{close:i,result:s}=DP(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:n},focus:!0,submitLabel:e.phrase("go")});return s.then(o=>{let l=o&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(o.elements.line.value);if(!l){t.dispatch({effects:i});return}let c=e.doc.lineAt(e.selection.main.head),[,f,h,p,g]=l,y=p?+p.slice(1):0,v=h?+h:c.number;if(h&&g){let k=v/100;f&&(k=k*(f=="-"?-1:1)+c.number/e.doc.lines),v=Math.round(e.doc.lines*k)}else h&&f&&(v=v*(f=="-"?-1:1)+c.number);let b=e.doc.line(Math.max(1,Math.min(e.doc.lines,v))),S=ae.cursor(b.from+Math.max(0,Math.min(y,b.length)));t.dispatch({effects:[i,pe.scrollIntoView(S.from,{y:"center"})],selection:S})}),!0},dH={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},pH=ye.define({combine(t){return Bi(t,dH,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function gH(t){return[bH,vH]}const mH=Se.mark({class:"cm-selectionMatch"}),yH=Se.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function xC(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=at.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=at.Word)}function xH(t,e,n,i){return t(e.sliceDoc(n,n+1))==at.Word&&t(e.sliceDoc(i-1,i))==at.Word}const vH=xt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(pH),{state:n}=t,i=n.selection;if(i.ranges.length>1)return Se.none;let s=i.main,o,l=null;if(s.empty){if(!e.highlightWordAroundCursor)return Se.none;let f=n.wordAt(s.head);if(!f)return Se.none;l=n.charCategorizer(s.head),o=n.sliceDoc(f.from,f.to)}else{let f=s.to-s.from;if(f<e.minSelectionLength||f>200)return Se.none;if(e.wholeWords){if(o=n.sliceDoc(s.from,s.to),l=n.charCategorizer(s.head),!(xC(l,n,s.from,s.to)&&xH(l,n,s.from,s.to)))return Se.none}else if(o=n.sliceDoc(s.from,s.to),!o)return Se.none}let c=[];for(let f of t.visibleRanges){let h=new Il(n.doc,o,f.from,f.to);for(;!h.next().done;){let{from:p,to:g}=h.value;if((!l||xC(l,n,p,g))&&(s.empty&&p<=s.from&&g>=s.to?c.push(yH.range(p,g)):(p>=s.to||g<=s.from)&&c.push(mH.range(p,g)),c.length>e.maxMatches))return Se.none}}return Se.set(c)}},{decorations:t=>t.decorations}),bH=pe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),SH=({state:t,dispatch:e})=>{let{selection:n}=t,i=ae.create(n.ranges.map(s=>t.wordAt(s.head)||ae.cursor(s.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function wH(t,e){let{main:n,ranges:i}=t.selection,s=t.wordAt(n.head),o=s&&s.from==n.from&&s.to==n.to;for(let l=!1,c=new Il(t.doc,e,i[i.length-1].to);;)if(c.next(),c.done){if(l)return null;c=new Il(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),l=!0}else{if(l&&i.some(f=>f.from==c.value.from))continue;if(o){let f=t.wordAt(c.value.from);if(!f||f.from!=c.value.from||f.to!=c.value.to)continue}return c.value}}const CH=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(o=>o.from===o.to))return SH({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(o=>t.sliceDoc(o.from,o.to)!=i))return!1;let s=wH(t,i);return s?(e(t.update({selection:t.selection.addRange(ae.range(s.from,s.to),!1),effects:pe.scrollIntoView(s.to)})),!0):!1},Xl=ye.define({combine(t){return Bi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new PH(e),scrollToMatch:e=>pe.scrollIntoView(e)})}});class VM{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||fH(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new NH(this):new OH(this)}getCursor(e,n=0,i){let s=e.doc?e:Ve.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?rl(this,s,n,i):sl(this,s,n,i)}}class $M{constructor(e){this.spec=e}}function kH(t,e,n){return(i,s,o,l)=>{if(n&&!n(i,s,o,l))return!1;let c=i>=l&&s<=l+o.length?o.slice(i-l,s-l):e.doc.sliceString(i,s);return t(c,e,i,s)}}function sl(t,e,n,i){let s;return t.wholeWord&&(s=AH(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(s=kH(t.test,e,s)),new Il(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:o=>o.toLowerCase(),s)}function AH(t,e){return(n,i,s,o)=>((o>n||o+s.length<i)&&(o=Math.max(0,n-2),s=t.sliceString(o,Math.min(t.length,i+2))),(e(nd(s,n-o))!=at.Word||e(id(s,n-o))!=at.Word)&&(e(id(s,i-o))!=at.Word||e(nd(s,i-o))!=at.Word))}class OH extends $M{constructor(e){super(e)}nextMatch(e,n,i){let s=sl(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let o=Math.min(e.doc.length,n+this.spec.unquoted.length);s=sl(this.spec,e,0,o).nextOverlapping()}return s.done||s.value.from==n&&s.value.to==i?null:s.value}prevMatchInRange(e,n,i){for(let s=i;;){let o=Math.max(n,s-1e4-this.spec.unquoted.length),l=sl(this.spec,e,o,s),c=null;for(;!l.nextOverlapping().done;)c=l.value;if(c)return c;if(o==n)return null;s-=1e4}}prevMatch(e,n,i){let s=this.prevMatchInRange(e,0,n);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=n||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=sl(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let o=sl(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}function EH(t,e,n){return(i,s,o)=>(!n||n(i,s,o))&&t(o[0],e,i,s)}function rl(t,e,n,i){let s;return t.wholeWord&&(s=MH(e.charCategorizer(e.selection.main.head))),t.test&&(s=EH(t.test,e,s)),new HM(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:s},n,i)}function nd(t,e){return t.slice(Dt(t,e,!1),e)}function id(t,e){return t.slice(e,Dt(t,e))}function MH(t){return(e,n,i)=>!i[0].length||(t(nd(i.input,i.index))!=at.Word||t(id(i.input,i.index))!=at.Word)&&(t(id(i.input,i.index+i[0].length))!=at.Word||t(nd(i.input,i.index+i[0].length))!=at.Word)}class NH extends $M{nextMatch(e,n,i){let s=rl(this.spec,e,i,e.doc.length).next();return s.done&&(s=rl(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=1;;s++){let o=Math.max(n,i-s*1e4),l=rl(this.spec,e,o,i),c=null;for(;!l.next().done;)c=l.value;if(c&&(o==n||c.from>o+10))return c;if(o==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let o=+i.slice(0,s);if(o>0&&o<e.match.length)return e.match[o]+i.slice(s)}return n})}matchAll(e,n){let i=rl(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let o=rl(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!o.next().done;)s(o.value.from,o.value.to)}}const zc=Me.define(),zx=Me.define(),sr=zt.define({create(t){return new s0(Ay(t).create(),null)},update(t,e){for(let n of e.effects)n.is(zc)?t=new s0(n.value.create(),t.panel):n.is(zx)&&(t=new s0(t.query,n.value?Px:null));return t},provide:t=>Rc.from(t,e=>e.panel)});class s0{constructor(e,n){this.query=e,this.panel=n}}const TH=Se.mark({class:"cm-searchMatch"}),DH=Se.mark({class:"cm-searchMatch cm-searchMatch-selected"}),RH=xt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(sr))}update(t){let e=t.state.field(sr);(e!=t.startState.field(sr)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Se.none;let{view:n}=this,i=new ps;for(let s=0,o=n.visibleRanges,l=o.length;s<l;s++){let{from:c,to:f}=o[s];for(;s<l-1&&f>o[s+1].from-500;)f=o[++s].to;t.highlight(n.state,c,f,(h,p)=>{let g=n.state.selection.ranges.some(y=>y.from==h&&y.to==p);i.add(h,p,g?DH:TH)})}return i.finish()}},{decorations:t=>t.decorations});function lu(t){return e=>{let n=e.state.field(sr,!1);return n&&n.query.spec.valid?t(e,n):QM(e)}}const sd=lu((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let s=ae.single(i.from,i.to),o=t.state.facet(Xl);return t.dispatch({selection:s,effects:[jx(t,i),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),qM(t),!0}),rd=lu((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,s=e.prevMatch(n,i,i);if(!s)return!1;let o=ae.single(s.from,s.to),l=t.state.facet(Xl);return t.dispatch({selection:o,effects:[jx(t,s),l.scrollToMatch(o.main,t)],userEvent:"select.search"}),qM(t),!0}),LH=lu((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:ae.create(n.map(i=>ae.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),_H=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:s}=n.main,o=[],l=0;for(let c=new Il(t.doc,t.sliceDoc(i,s));!c.next().done;){if(o.length>1e3)return!1;c.value.from==i&&(l=o.length),o.push(ae.range(c.value.from,c.value.to))}return e(t.update({selection:ae.create(o,l),userEvent:"select.search.matches"})),!0},vC=lu((t,{query:e})=>{let{state:n}=t,{from:i,to:s}=n.selection.main;if(n.readOnly)return!1;let o=e.nextMatch(n,i,i);if(!o)return!1;let l=o,c=[],f,h,p=[];l.from==i&&l.to==s&&(h=n.toText(e.getReplacement(l)),c.push({from:l.from,to:l.to,insert:h}),l=e.nextMatch(n,l.from,l.to),p.push(pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let g=t.state.changes(c);return l&&(f=ae.single(l.from,l.to).map(g),p.push(jx(t,l)),p.push(n.facet(Xl).scrollToMatch(f.main,t))),t.dispatch({changes:g,selection:f,effects:p,userEvent:"input.replace"}),!0}),BH=lu((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:o,to:l}=s;return{from:o,to:l,insert:e.getReplacement(s)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:pe.announce.of(i),userEvent:"input.replace.all"}),!0});function Px(t){return t.state.facet(Xl).createPanel(t)}function Ay(t,e){var n,i,s,o,l;let c=t.selection.main,f=c.empty||c.to>c.from+100?"":t.sliceDoc(c.from,c.to);if(e&&!f)return e;let h=t.facet(Xl);return new VM({search:((n=e?.literal)!==null&&n!==void 0?n:h.literal)?f:f.replace(/\n/g,"\\n"),caseSensitive:(i=e?.caseSensitive)!==null&&i!==void 0?i:h.caseSensitive,literal:(s=e?.literal)!==null&&s!==void 0?s:h.literal,regexp:(o=e?.regexp)!==null&&o!==void 0?o:h.regexp,wholeWord:(l=e?.wholeWord)!==null&&l!==void 0?l:h.wholeWord})}function UM(t){let e=kx(t,Px);return e&&e.dom.querySelector("[main-field]")}function qM(t){let e=UM(t);e&&e==t.root.activeElement&&e.select()}const QM=t=>{let e=t.state.field(sr,!1);if(e&&e.panel){let n=UM(t);if(n&&n!=t.root.activeElement){let i=Ay(t.state,e.query.spec);i.valid&&t.dispatch({effects:zc.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[zx.of(!0),e?zc.of(Ay(t.state,e.query.spec)):Me.appendConfig.of(HH)]});return!0},YM=t=>{let e=t.state.field(sr,!1);if(!e||!e.panel)return!1;let n=kx(t,Px);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:zx.of(!1)}),!0},zH=[{key:"Mod-f",run:QM,scope:"editor search-panel"},{key:"F3",run:sd,shift:rd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:sd,shift:rd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:YM,scope:"editor search-panel"},{key:"Mod-Shift-l",run:_H},{key:"Mod-Alt-g",run:hH},{key:"Mod-d",run:CH,preventDefault:!0}];class PH{constructor(e){this.view=e;let n=this.query=e.state.field(sr).query.spec;this.commit=this.commit.bind(this),this.searchField=et("input",{value:n.search,placeholder:Tn(e,"Find"),"aria-label":Tn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=et("input",{value:n.replace,placeholder:Tn(e,"Replace"),"aria-label":Tn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=et("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=et("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=et("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(s,o,l){return et("button",{class:"cm-button",name:s,onclick:o,type:"button"},l)}this.dom=et("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>sd(e),[Tn(e,"next")]),i("prev",()=>rd(e),[Tn(e,"previous")]),i("select",()=>LH(e),[Tn(e,"all")]),et("label",null,[this.caseField,Tn(e,"match case")]),et("label",null,[this.reField,Tn(e,"regexp")]),et("label",null,[this.wordField,Tn(e,"by word")]),...e.state.readOnly?[]:[et("br"),this.replaceField,i("replace",()=>vC(e),[Tn(e,"replace")]),i("replaceAll",()=>BH(e),[Tn(e,"replace all")])],et("button",{name:"close",onclick:()=>YM(e),"aria-label":Tn(e,"close"),type:"button"},[""])])}commit(){let e=new VM({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:zc.of(e)}))}keydown(e){Vz(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?rd:sd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),vC(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(zc)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Xl).top}}function Tn(t,e){return t.state.phrase(e)}const oh=30,lh=/[\s\.,:;?!]/;function jx(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,o=Math.max(i.from,e-oh),l=Math.min(s,n+oh),c=t.state.sliceDoc(o,l);if(o!=i.from){for(let f=0;f<oh;f++)if(!lh.test(c[f+1])&&lh.test(c[f])){c=c.slice(f);break}}if(l!=s){for(let f=c.length-1;f>c.length-oh;f--)if(!lh.test(c[f-1])&&lh.test(c[f])){c=c.slice(0,f);break}}return pe.announce.of(`${t.state.phrase("current match")}. ${c} ${t.state.phrase("on line")} ${i.number}.`)}const jH=pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),HH=[sr,ho.low(RH),jH];class XM{constructor(e,n,i,s){this.state=e,this.pos=n,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Gt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),s=n.text.slice(i-n.from,this.pos-n.from),o=s.search(FM(e,!1));return o<0?null:{from:i+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function bC(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function IH(t){let e=Object.create(null),n=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let o=1;o<s.length;o++)n[s[o]]=!0}let i=bC(e)+bC(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function VH(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[n,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:IH(e);return s=>{let o=s.matchBefore(i);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:n}:null}}class SC{constructor(e,n,i,s){this.completion=e,this.source=n,this.match=i,this.score=s}}function no(t){return t.selection.main.from}function FM(t,e){var n;let{source:i}=t,s=e&&i[0]!="^",o=i[i.length-1]!="$";return!s&&!o?t:new RegExp(`${s?"^":""}(?:${i})${o?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const GM=_i.define();function $H(t,e,n,i){let{main:s}=t.selection,o=n-s.from,l=i-s.from;return{...t.changeByRange(c=>{if(c!=s&&n!=i&&t.sliceDoc(c.from+o,c.from+l)!=t.sliceDoc(n,i))return{range:c};let f=t.toText(e);return{changes:{from:c.from+o,to:i==s.from?c.to:c.from+l,insert:f},range:ae.cursor(c.from+o+f.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const wC=new WeakMap;function UH(t){if(!Array.isArray(t))return t;let e=wC.get(t);return e||wC.set(t,e=VH(t)),e}const od=Me.define(),Pc=Me.define();class qH{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=pn(e,n),s=Ai(i);this.chars.push(i);let o=e.slice(n,n+s),l=o.toUpperCase();this.folded.push(pn(l==o?o.toLowerCase():l,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:s,precise:o,byWord:l}=this;if(n.length==1){let N=pn(e,0),O=Ai(N),M=O==e.length?0:-100;if(N!=n[0])if(N==i[0])M+=-200;else return null;return this.ret(M,[0,O])}let c=e.indexOf(this.pattern);if(c==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let f=n.length,h=0;if(c<0){for(let N=0,O=Math.min(e.length,200);N<O&&h<f;){let M=pn(e,N);(M==n[h]||M==i[h])&&(s[h++]=N),N+=Ai(M)}if(h<f)return null}let p=0,g=0,y=!1,v=0,b=-1,S=-1,k=/[a-z]/.test(e),A=!0;for(let N=0,O=Math.min(e.length,200),M=0;N<O&&g<f;){let _=pn(e,N);c<0&&(p<f&&_==n[p]&&(o[p++]=N),v<f&&(_==n[v]||_==i[v]?(v==0&&(b=N),S=N+1,v++):v=0));let L,R=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(L=ox(_))!=L.toLowerCase()?1:L!=L.toUpperCase()?2:0;(!N||R==1&&k||M==0&&R!=0)&&(n[g]==_||i[g]==_&&(y=!0)?l[g++]=N:l.length&&(A=!1)),M=R,N+=Ai(_)}return g==f&&l[0]==0&&A?this.result(-100+(y?-200:0),l,e):v==f&&b==0?this.ret(-200-e.length+(S==e.length?0:-100),[0,S]):c>-1?this.ret(-700-e.length,[c,c+this.pattern.length]):v==f?this.ret(-900-e.length,[b,S]):g==f?this.result(-100+(y?-200:0)+-700+(A?0:-1100),l,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,i){let s=[],o=0;for(let l of n){let c=l+(this.astral?Ai(pn(i,l)):1);o&&s[o-1]==l?s[o-1]=c:(s[o++]=l,s[o++]=c)}return this.ret(e-i.length,s)}}class QH{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Bt=ye.define({combine(t){return Bi(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:YH,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>CC(e(i),n(i)),optionClass:(e,n)=>i=>CC(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function CC(t,e){return t?e?t+" "+e:t:e}function YH(t,e,n,i,s,o){let l=t.textDirection==it.RTL,c=l,f=!1,h="top",p,g,y=e.left-s.left,v=s.right-e.right,b=i.right-i.left,S=i.bottom-i.top;if(c&&y<Math.min(b,v)?c=!1:!c&&v<Math.min(b,y)&&(c=!0),b<=(c?y:v))p=Math.max(s.top,Math.min(n.top,s.bottom-S))-e.top,g=Math.min(400,c?y:v);else{f=!0,g=Math.min(400,(l?e.right:s.right-e.left)-30);let N=s.bottom-e.bottom;N>=S||N>e.top?p=n.bottom-e.top:(h="bottom",p=e.bottom-n.top)}let k=(e.bottom-e.top)/o.offsetHeight,A=(e.right-e.left)/o.offsetWidth;return{style:`${h}: ${p/k}px; max-width: ${g/A}px`,class:"cm-completionInfo-"+(f?l?"left-narrow":"right-narrow":c?"left":"right")}}function XH(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,s,o){let l=document.createElement("span");l.className="cm-completionLabel";let c=n.displayLabel||n.label,f=0;for(let h=0;h<o.length;){let p=o[h++],g=o[h++];p>f&&l.appendChild(document.createTextNode(c.slice(f,p)));let y=l.appendChild(document.createElement("span"));y.appendChild(document.createTextNode(c.slice(p,g))),y.className="cm-completionMatchedText",f=g}return f<c.length&&l.appendChild(document.createTextNode(c.slice(f))),l},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function r0(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class FH{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:f=>this.placeInfo(f),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:o,selected:l}=s.open,c=e.state.facet(Bt);this.optionContent=XH(c),this.optionClass=c.optionClass,this.tooltipClass=c.tooltipClass,this.range=r0(o.length,l,c.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",f=>{let{options:h}=e.state.field(n).open;for(let p=f.target,g;p&&p!=this.dom;p=p.parentNode)if(p.nodeName=="LI"&&(g=/-(\d+)$/.exec(p.id))&&+g[1]<h.length){this.applyCompletion(e,h[+g[1]]),f.preventDefault();return}}),this.dom.addEventListener("focusout",f=>{let h=e.state.field(this.stateField,!1);h&&h.tooltip&&e.state.facet(Bt).closeOnBlur&&f.relatedTarget!=e.contentDOM&&e.dispatch({effects:Pc.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:o,selected:l,disabled:c}=i.open;(!s.open||s.open.options!=o)&&(this.range=r0(o.length,l,e.state.facet(Bt).maxRenderedOptions),this.showOptions(o,i.id)),this.updateSel(),c!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!c)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=r0(n.options.length,n.selected,this.view.state.facet(Bt).maxRenderedOptions),this.showOptions(n.options,e.id));let i=this.updateSelectedOption(n.selected);if(i){this.destroyInfo();let{completion:s}=n.options[n.selected],{info:o}=s;if(!o)return;let l=typeof o=="string"?document.createTextNode(o):o(s);if(!l)return;"then"in l?l.then(c=>{c&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(c,s)}).catch(c=>xn(this.view.state,c,"completion info")):(this.addInfoPane(l,s),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;i.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return n&&WH(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let l=this.dom.ownerDocument.documentElement;o={left:0,top:0,right:l.clientWidth,bottom:l.clientHeight}}return s.top>Math.min(o.bottom,n.bottom)-10||s.bottom<Math.max(o.top,n.top)+10?null:this.view.state.facet(Bt).positionInfo(this.view,n,s,i,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",l=>{l.target==s&&l.preventDefault()});let o=null;for(let l=i.from;l<i.to;l++){let{completion:c,match:f}=e[l],{section:h}=c;if(h){let y=typeof h=="string"?h:h.name;if(y!=o&&(l>i.from||i.from==0))if(o=y,typeof h!="string"&&h.header)s.appendChild(h.header(h));else{let v=s.appendChild(document.createElement("completion-section"));v.textContent=y}}const p=s.appendChild(document.createElement("li"));p.id=n+"-"+l,p.setAttribute("role","option");let g=this.optionClass(c);g&&(p.className=g);for(let y of this.optionContent){let v=y(c,this.view.state,this.view,f);v&&p.appendChild(v)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function GH(t,e){return n=>new FH(n,t,e)}function WH(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/s:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/s)}function kC(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function KH(t,e){let n=[],i=null,s=null,o=p=>{n.push(p);let{section:g}=p.completion;if(g){i||(i=[]);let y=typeof g=="string"?g:g.name;i.some(v=>v.name==y)||i.push(typeof g=="string"?{name:y}:g)}},l=e.facet(Bt);for(let p of t)if(p.hasResult()){let g=p.result.getMatch;if(p.result.filter===!1)for(let y of p.result.options)o(new SC(y,p.source,g?g(y):[],1e9-n.length));else{let y=e.sliceDoc(p.from,p.to),v,b=l.filterStrict?new QH(y):new qH(y);for(let S of p.result.options)if(v=b.match(S.label)){let k=S.displayLabel?g?g(S,v.matched):[]:v.matched,A=v.score+(S.boost||0);if(o(new SC(S,p.source,k,A)),typeof S.section=="object"&&S.section.rank==="dynamic"){let{name:N}=S.section;s||(s=Object.create(null)),s[N]=Math.max(A,s[N]||-1e9)}}}}if(i){let p=Object.create(null),g=0,y=(v,b)=>(v.rank==="dynamic"&&b.rank==="dynamic"?s[b.name]-s[v.name]:0)||(typeof v.rank=="number"?v.rank:1e9)-(typeof b.rank=="number"?b.rank:1e9)||(v.name<b.name?-1:1);for(let v of i.sort(y))g-=1e5,p[v.name]=g;for(let v of n){let{section:b}=v.completion;b&&(v.score+=p[typeof b=="string"?b:b.name])}}let c=[],f=null,h=l.compareCompletions;for(let p of n.sort((g,y)=>y.score-g.score||h(g.completion,y.completion))){let g=p.completion;!f||f.label!=g.label||f.detail!=g.detail||f.type!=null&&g.type!=null&&f.type!=g.type||f.apply!=g.apply||f.boost!=g.boost?c.push(p):kC(p.completion)>kC(f)&&(c[c.length-1]=p),f=p.completion}return c}class pl{constructor(e,n,i,s,o,l){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=s,this.selected=o,this.disabled=l}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new pl(this.options,AC(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,s,o,l){if(s&&!l&&e.some(h=>h.isPending))return s.setDisabled();let c=KH(e,n);if(!c.length)return s&&e.some(h=>h.isPending)?s.setDisabled():null;let f=n.facet(Bt).selectOnOpen?0:-1;if(s&&s.selected!=f&&s.selected!=-1){let h=s.options[s.selected].completion;for(let p=0;p<c.length;p++)if(c[p].completion==h){f=p;break}}return new pl(c,AC(i,f),{pos:e.reduce((h,p)=>p.hasResult()?Math.min(h,p.from):h,1e8),create:i7,above:o.aboveCursor},s?s.timestamp:Date.now(),f,!1)}map(e){return new pl(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new pl(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class ld{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new ld(t7,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Bt),o=(i.override||n.languageDataAt("autocomplete",no(n)).map(UH)).map(f=>(this.active.find(p=>p.source==f)||new Yn(f,this.active.some(p=>p.state!=0)?1:0)).update(e,i));o.length==this.active.length&&o.every((f,h)=>f==this.active[h])&&(o=this.active);let l=this.open,c=e.effects.some(f=>f.is(Hx));l&&e.docChanged&&(l=l.map(e.changes)),e.selection||o.some(f=>f.hasResult()&&e.changes.touchesRange(f.from,f.to))||!ZH(o,this.active)||c?l=pl.build(o,n,this.id,l,i,c):l&&l.disabled&&!o.some(f=>f.isPending)&&(l=null),!l&&o.every(f=>!f.isPending)&&o.some(f=>f.hasResult())&&(o=o.map(f=>f.hasResult()?new Yn(f.source,0):f));for(let f of e.effects)f.is(KM)&&(l=l&&l.setSelected(f.value,this.id));return o==this.active&&l==this.open?this:new ld(o,this.id,l)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?JH:e7}}function ZH(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let s=n==t.length,o=i==e.length;if(s||o)return s==o;if(t[n++].result!=e[i++].result)return!1}}const JH={"aria-autocomplete":"list"},e7={};function AC(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const t7=[];function WM(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(GM);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Yn{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=WM(e,n),s=this;(i&8||i&16&&this.touches(e))&&(s=new Yn(s.source,0)),i&4&&s.state==0&&(s=new Yn(this.source,1)),s=s.updateFor(e,i);for(let o of e.effects)if(o.is(od))s=new Yn(s.source,1,o.value);else if(o.is(Pc))s=new Yn(s.source,0);else if(o.is(Hx))for(let l of o.value)l.source==s.source&&(s=l);return s}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(no(e.state))}}class kl extends Yn{constructor(e,n,i,s,o,l){super(e,3,n),this.limit=i,this.result=s,this.from=o,this.to=l}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),c=no(e.state);if(c>l||!s||n&2&&(no(e.startState)==this.from||c<this.limit))return new Yn(this.source,n&4?1:0);let f=e.changes.mapPos(this.limit);return n7(s.validFor,e.state,o,l)?new kl(this.source,this.explicit,f,s,o,l):s.update&&(s=s.update(s,o,l,new XM(e.state,c,!1)))?new kl(this.source,this.explicit,f,s,s.from,(i=s.to)!==null&&i!==void 0?i:no(e.state)):new Yn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new kl(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Yn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function n7(t,e,n,i){if(!t)return!1;let s=e.sliceDoc(n,i);return typeof t=="function"?t(s,n,i,e):FM(t,!0).test(s)}const Hx=Me.define({map(t,e){return t.map(n=>n.map(e))}}),KM=Me.define(),gn=zt.define({create(){return ld.start()},update(t,e){return t.update(e)},provide:t=>[Cx.from(t,e=>e.tooltip),pe.contentAttributes.from(t,e=>e.attrs)]});function Ix(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(gn).active.find(s=>s.source==e.source);return i instanceof kl?(typeof n=="string"?t.dispatch({...$H(t.state,n,i.from,i.to),annotations:GM.of(e.completion)}):n(t,e.completion,i.from,i.to),!0):!1}const i7=GH(gn,Ix);function ah(t,e="option"){return n=>{let i=n.state.field(gn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Bt).interactionDelay)return!1;let s=1,o;e=="page"&&(o=NE(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:l}=i.open.options,c=i.open.selected>-1?i.open.selected+s*(t?1:-1):t?0:l-1;return c<0?c=e=="page"?0:l-1:c>=l&&(c=e=="page"?l-1:0),n.dispatch({effects:KM.of(c)}),!0}}const s7=t=>{let e=t.state.field(gn,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Bt).interactionDelay?!1:Ix(t,e.open.options[e.open.selected])},o0=t=>t.state.field(gn,!1)?(t.dispatch({effects:od.of(!0)}),!0):!1,r7=t=>{let e=t.state.field(gn,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:Pc.of(null)}),!0)};class o7{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const l7=50,a7=1e3,c7=xt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(gn).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(gn),n=t.state.facet(Bt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(gn)==e)return;let i=t.transactions.some(o=>{let l=WM(o,n);return l&8||(o.selection||o.docChanged)&&!(l&3)});for(let o=0;o<this.running.length;o++){let l=this.running[o];if(i||l.context.abortOnDocChange&&t.docChanged||l.updates.length+t.transactions.length>l7&&Date.now()-l.time>a7){for(let c of l.context.abortListeners)try{c()}catch(f){xn(this.view.state,f)}l.context.abortListeners=null,this.running.splice(o--,1)}else l.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(o=>o.effects.some(l=>l.is(od)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(o=>o.isPending&&!this.running.some(l=>l.active.source==o.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let o of t.transactions)o.isUserEvent("input.type")?this.composing=2:this.composing==2&&o.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(gn);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=no(e),i=new XM(e,n,t.explicit,this.view),s=new o7(t,i);this.running.push(s),Promise.resolve(t.source(i)).then(o=>{s.context.aborted||(s.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Pc.of(null)}),xn(this.view.state,o)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Bt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Bt),i=this.view.state.field(gn);for(let s=0;s<this.running.length;s++){let o=this.running[s];if(o.done===void 0)continue;if(this.running.splice(s--,1),o.done){let c=no(o.updates.length?o.updates[0].startState:this.view.state),f=Math.min(c,o.done.from+(o.active.explicit?0:1)),h=new kl(o.active.source,o.active.explicit,f,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:c);for(let p of o.updates)h=h.update(p,n);if(h.hasResult()){e.push(h);continue}}let l=i.active.find(c=>c.source==o.active.source);if(l&&l.isPending)if(o.done==null){let c=new Yn(o.active.source,0);for(let f of o.updates)c=c.update(f,n);c.isPending||e.push(c)}else this.startQuery(l)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:Hx.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(gn,!1);if(e&&e.tooltip&&this.view.state.facet(Bt).closeOnBlur){let n=e.open&&NE(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Pc.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:od.of(!1)}),20),this.composing=0}}}),u7=typeof navigator=="object"&&/Win/.test(navigator.platform),f7=ho.highest(pe.domEventHandlers({keydown(t,e){let n=e.state.field(gn,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(u7&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],s=n.active.find(l=>l.source==i.source),o=i.completion.commitCharacters||s.result.commitCharacters;return o&&o.indexOf(t.key)>-1&&Ix(e,i),!1}})),h7=pe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),jc={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Wr=Me.define({map(t,e){let n=e.mapPos(t,-1,nn.TrackAfter);return n??void 0}}),Vx=new class extends lr{};Vx.startSide=1;Vx.endSide=-1;const ZM=zt.define({create(){return ze.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(Wr)&&(t=t.update({add:[Vx.range(n.value,n.value+1)]}));return t}});function d7(){return[g7,ZM]}const l0="()[]{}<>";function JM(t){for(let e=0;e<l0.length;e+=2)if(l0.charCodeAt(e)==t)return l0.charAt(e+1);return ox(t<128?t:t+1)}function eN(t,e){return t.languageDataAt("closeBrackets",e)[0]||jc}const p7=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),g7=pe.inputHandler.of((t,e,n,i)=>{if((p7?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(i.length>2||i.length==2&&Ai(pn(i,0))==1||e!=s.from||n!=s.to)return!1;let o=x7(t.state,i);return o?(t.dispatch(o),!0):!1}),m7=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=eN(t,t.selection.main.head).brackets||jc.brackets,s=null,o=t.changeByRange(l=>{if(l.empty){let c=v7(t.doc,l.head);for(let f of i)if(f==c&&Fd(t.doc,l.head)==JM(pn(f,0)))return{changes:{from:l.head-f.length,to:l.head+f.length},range:ae.cursor(l.head-f.length)}}return{range:s=l}});return s||e(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},y7=[{key:"Backspace",run:m7}];function x7(t,e){let n=eN(t,t.selection.main.head),i=n.brackets||jc.brackets;for(let s of i){let o=JM(pn(s,0));if(e==s)return o==s?w7(t,s,i.indexOf(s+s+s)>-1,n):b7(t,s,o,n.before||jc.before);if(e==o&&tN(t,t.selection.main.from))return S7(t,s,o)}return null}function tN(t,e){let n=!1;return t.field(ZM).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function Fd(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Ai(pn(n,0)))}function v7(t,e){let n=t.sliceString(e-2,e);return Ai(pn(n,0))==n.length?n:n.slice(1)}function b7(t,e,n,i){let s=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:n,from:l.to}],effects:Wr.of(l.to+e.length),range:ae.range(l.anchor+e.length,l.head+e.length)};let c=Fd(t.doc,l.head);return!c||/\s/.test(c)||i.indexOf(c)>-1?{changes:{insert:e+n,from:l.head},effects:Wr.of(l.head+e.length),range:ae.cursor(l.head+e.length)}:{range:s=l}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function S7(t,e,n){let i=null,s=t.changeByRange(o=>o.empty&&Fd(t.doc,o.head)==n?{changes:{from:o.head,to:o.head+n.length,insert:n},range:ae.cursor(o.head+n.length)}:i={range:o});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function w7(t,e,n,i){let s=i.stringPrefixes||jc.stringPrefixes,o=null,l=t.changeByRange(c=>{if(!c.empty)return{changes:[{insert:e,from:c.from},{insert:e,from:c.to}],effects:Wr.of(c.to+e.length),range:ae.range(c.anchor+e.length,c.head+e.length)};let f=c.head,h=Fd(t.doc,f),p;if(h==e){if(OC(t,f))return{changes:{insert:e+e,from:f},effects:Wr.of(f+e.length),range:ae.cursor(f+e.length)};if(tN(t,f)){let y=n&&t.sliceDoc(f,f+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:f,to:f+y.length,insert:y},range:ae.cursor(f+y.length)}}}else{if(n&&t.sliceDoc(f-2*e.length,f)==e+e&&(p=EC(t,f-2*e.length,s))>-1&&OC(t,p))return{changes:{insert:e+e+e+e,from:f},effects:Wr.of(f+e.length),range:ae.cursor(f+e.length)};if(t.charCategorizer(f)(h)!=at.Word&&EC(t,f,s)>-1&&!C7(t,f,e,s))return{changes:{insert:e+e,from:f},effects:Wr.of(f+e.length),range:ae.cursor(f+e.length)}}return{range:o=c}});return o?null:t.update(l,{scrollIntoView:!0,userEvent:"input.type"})}function OC(t,e){let n=Gt(t).resolveInner(e+1);return n.parent&&n.from==e}function C7(t,e,n,i){let s=Gt(t).resolveInner(e,-1),o=i.reduce((l,c)=>Math.max(l,c.length),0);for(let l=0;l<5;l++){let c=t.sliceDoc(s.from,Math.min(s.to,s.from+n.length+o)),f=c.indexOf(n);if(!f||f>-1&&i.indexOf(c.slice(0,f))>-1){let p=s.firstChild;for(;p&&p.from==s.from&&p.to-p.from>n.length+f;){if(t.sliceDoc(p.to-n.length,p.to)==n)return!1;p=p.firstChild}return!0}let h=s.to==e&&s.parent;if(!h)break;s=h}return!1}function EC(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=at.Word)return e;for(let s of n){let o=e-s.length;if(t.sliceDoc(o,e)==s&&i(t.sliceDoc(o-1,o))!=at.Word)return o}return-1}function k7(t={}){return[f7,gn,Bt.of(t),c7,A7,h7]}const nN=[{key:"Ctrl-Space",run:o0},{mac:"Alt-`",run:o0},{mac:"Alt-i",run:o0},{key:"Escape",run:r7},{key:"ArrowDown",run:ah(!0)},{key:"ArrowUp",run:ah(!1)},{key:"PageDown",run:ah(!0,"page")},{key:"PageUp",run:ah(!1,"page")},{key:"Enter",run:s7}],A7=ho.highest(Hd.computeN([Bt],t=>t.facet(Bt).defaultKeymap?[nN]:[]));class MC{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Qr{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let s=i.facet(Hc).markerFilter;s&&(e=s(e,i));let o=e.slice().sort((v,b)=>v.from-b.from||v.to-b.to),l=new ps,c=[],f=0,h=i.doc.iter(),p=0,g=i.doc.length;for(let v=0;;){let b=v==o.length?null:o[v];if(!b&&!c.length)break;let S,k;if(c.length)S=f,k=c.reduce((O,M)=>Math.min(O,M.to),b&&b.from>S?b.from:1e8);else{if(S=b.from,S>g)break;k=b.to,c.push(b),v++}for(;v<o.length;){let O=o[v];if(O.from==S&&(O.to>O.from||O.to==S))c.push(O),v++,k=Math.min(O.to,k);else{k=Math.min(O.from,k);break}}k=Math.min(k,g);let A=!1;if(c.some(O=>O.from==S&&(O.to==k||k==g))&&(A=S==k,!A&&k-S<10)){let O=S-(p+h.value.length);O>0&&(h.next(O),p=S);for(let M=S;;){if(M>=k){A=!0;break}if(!h.lineBreak&&p+h.value.length>M)break;M=p+h.value.length,p+=h.value.length,h.next()}}let N=j7(c);if(A)l.add(S,S,Se.widget({widget:new _7(N),diagnostics:c.slice()}));else{let O=c.reduce((M,_)=>_.markClass?M+" "+_.markClass:M,"");l.add(S,k,Se.mark({class:"cm-lintRange cm-lintRange-"+N+O,diagnostics:c.slice(),inclusiveEnd:c.some(M=>M.to>k)}))}if(f=k,f==g)break;for(let O=0;O<c.length;O++)c[O].to<=f&&c.splice(O--,1)}let y=l.finish();return new Qr(y,n,Vl(y))}}function Vl(t,e=null,n=0){let i=null;return t.between(n,1e9,(s,o,{spec:l})=>{if(!(e&&l.diagnostics.indexOf(e)<0))if(!i)i=new MC(s,o,e||l.diagnostics[0]);else{if(l.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new MC(i.from,o,i.diagnostic)}}),i}function O7(t,e){let n=e.pos,i=e.end||n,s=t.state.facet(Hc).hideOn(t,n,i);if(s!=null)return s;let o=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(l=>l.is(iN))||t.changes.touchesRange(o.from,Math.max(o.to,i)))}function E7(t,e){return t.field(_n,!1)?e:e.concat(Me.appendConfig.of(H7))}const iN=Me.define(),$x=Me.define(),sN=Me.define(),_n=zt.define({create(){return new Qr(Se.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,s=t.panel;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);i=Vl(n,t.selected.diagnostic,o)||Vl(n,null,o)}!n.size&&s&&e.state.facet(Hc).autoPanel&&(s=null),t=new Qr(n,s,i)}for(let n of e.effects)if(n.is(iN)){let i=e.state.facet(Hc).autoPanel?n.value.length?Ic.open:null:t.panel;t=Qr.init(n.value,i,e.state)}else n.is($x)?t=new Qr(t.diagnostics,n.value?Ic.open:null,t.selected):n.is(sN)&&(t=new Qr(t.diagnostics,t.panel,n.value));return t},provide:t=>[Rc.from(t,e=>e.panel),pe.decorations.from(t,e=>e.diagnostics)]}),M7=Se.mark({class:"cm-lintRange cm-lintRange-active"});function N7(t,e,n){let{diagnostics:i}=t.state.field(_n),s,o=-1,l=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(f,h,{spec:p})=>{if(e>=f&&e<=h&&(f==h||(e>f||n>0)&&(e<h||n<0)))return s=p.diagnostics,o=f,l=h,!1});let c=t.state.facet(Hc).tooltipFilter;return s&&c&&(s=c(s,t.state)),s?{pos:o,end:l,above:t.state.doc.lineAt(o).to<l,create(){return{dom:T7(t,s)}}}:null}function T7(t,e){return et("ul",{class:"cm-tooltip-lint"},e.map(n=>oN(t,n,!1)))}const D7=t=>{let e=t.state.field(_n,!1);(!e||!e.panel)&&t.dispatch({effects:E7(t.state,[$x.of(!0)])});let n=kx(t,Ic.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},NC=t=>{let e=t.state.field(_n,!1);return!e||!e.panel?!1:(t.dispatch({effects:$x.of(!1)}),!0)},R7=t=>{let e=t.state.field(_n,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},L7=[{key:"Mod-Shift-m",run:D7,preventDefault:!0},{key:"F8",run:R7}],Hc=ye.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Bi(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:TC,tooltipFilter:TC,needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n,hideOn:(e,n)=>e?n?(i,s,o)=>e(i,s,o)||n(i,s,o):e:n,autoPanel:(e,n)=>e||n})}}});function TC(t,e){return t?e?(n,i)=>e(t(n,i),i):t:e}function rN(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let s=n[i];if(/[a-zA-Z]/.test(s)&&!e.some(o=>o.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function oN(t,e,n){var i;let s=n?rN(e.actions):[];return et("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},et("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((o,l)=>{let c=!1,f=v=>{if(v.preventDefault(),c)return;c=!0;let b=Vl(t.state.field(_n).diagnostics,e);b&&o.apply(t,b.from,b.to)},{name:h}=o,p=s[l]?h.indexOf(s[l]):-1,g=p<0?h:[h.slice(0,p),et("u",h.slice(p,p+1)),h.slice(p+1)],y=o.markClass?" "+o.markClass:"";return et("button",{type:"button",class:"cm-diagnosticAction"+y,onclick:f,onmousedown:f,"aria-label":` Action: ${h}${p<0?"":` (access key "${s[l]})"`}.`},g)}),e.source&&et("div",{class:"cm-diagnosticSource"},e.source))}class _7 extends zi{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return et("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class DC{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=oN(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Ic{constructor(e){this.view=e,this.items=[];let n=s=>{if(!(s.ctrlKey||s.altKey||s.metaKey)){if(s.keyCode==27)NC(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],l=rN(o.actions);for(let c=0;c<l.length;c++)if(l[c].toUpperCase().charCodeAt(0)==s.keyCode){let f=Vl(this.view.state.field(_n).diagnostics,o);f&&o.actions[c].apply(e,f.from,f.to)}}else return;s.preventDefault()}},i=s=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(s.target)&&this.moveSelection(o)};this.list=et("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=et("div",{class:"cm-panel-lint"},this.list,et("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>NC(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(_n).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(_n),i=0,s=!1,o=null,l=new Set;for(e.between(0,this.view.state.doc.length,(c,f,{spec:h})=>{for(let p of h.diagnostics){if(l.has(p))continue;l.add(p);let g=-1,y;for(let v=i;v<this.items.length;v++)if(this.items[v].diagnostic==p){g=v;break}g<0?(y=new DC(this.view,p),this.items.splice(i,0,y),s=!0):(y=this.items[g],g>i&&(this.items.splice(i,g-i),s=!0)),n&&y.diagnostic==n.diagnostic?y.dom.hasAttribute("aria-selected")||(y.dom.setAttribute("aria-selected","true"),o=y):y.dom.hasAttribute("aria-selected")&&y.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new DC(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:c,panel:f})=>{let h=f.height/this.list.offsetHeight;c.top<f.top?this.list.scrollTop-=(f.top-c.top)/h:c.bottom>f.bottom&&(this.list.scrollTop+=(c.bottom-f.bottom)/h)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(_n),i=Vl(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:sN.of(i)})}static open(e){return new Ic(e)}}function B7(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function ch(t){return B7(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const z7=pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ch("#d11")},".cm-lintRange-warning":{backgroundImage:ch("orange")},".cm-lintRange-info":{backgroundImage:ch("#999")},".cm-lintRange-hint":{backgroundImage:ch("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function P7(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function j7(t){let e="hint",n=1;for(let i of t){let s=P7(i.severity);s>n&&(n=s,e=i.severity)}return e}const H7=[_n,pe.decorations.compute([_n],t=>{let{selected:e,panel:n}=t.field(_n);return!e||!n||e.from==e.to?Se.none:Se.set([M7.range(e.from,e.to)])}),NP(N7,{hideOn:O7}),z7];var RC=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(y7)),e.defaultKeymap!==!1&&(i=i.concat(cH)),e.searchKeymap!==!1&&(i=i.concat(zH)),e.historyKeymap!==!1&&(i=i.concat(mj)),e.foldKeymap!==!1&&(i=i.concat(T9)),e.completionKeymap!==!1&&(i=i.concat(nN)),e.lintKeymap!==!1&&(i=i.concat(L7));var s=[];return e.lineNumbers!==!1&&s.push($P()),e.highlightActiveLineGutter!==!1&&s.push(QP()),e.highlightSpecialChars!==!1&&s.push(sP()),e.history!==!1&&s.push(lj()),e.foldGutter!==!1&&s.push(_9()),e.drawSelection!==!1&&s.push(Xz()),e.dropCursor!==!1&&s.push(Zz()),e.allowMultipleSelections!==!1&&s.push(Ve.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&s.push(b9()),e.syntaxHighlighting!==!1&&s.push(Dx(j9,{fallback:!0})),e.bracketMatching!==!1&&s.push(Q9()),e.closeBrackets!==!1&&s.push(d7()),e.autocompletion!==!1&&s.push(k7()),e.rectangularSelection!==!1&&s.push(xP()),n!==!1&&s.push(SP()),e.highlightActiveLine!==!1&&s.push(uP()),e.highlightSelectionMatches!==!1&&s.push(gH()),e.tabSize&&typeof e.tabSize=="number"&&s.push(Vd.of(" ".repeat(e.tabSize))),s.concat([Hd.of(i.flat())]).filter(Boolean)};const I7="#e5c07b",LC="#e06c75",V7="#56b6c2",$7="#ffffff",kh="#abb2bf",Oy="#7d8799",U7="#61afef",q7="#98c379",_C="#d19a66",Q7="#c678dd",Y7="#21252b",BC="#2c313a",zC="#282c34",a0="#353a42",X7="#3E4451",PC="#528bff",F7=pe.theme({"&":{color:kh,backgroundColor:zC},".cm-content":{caretColor:PC},".cm-cursor, .cm-dropCursor":{borderLeftColor:PC},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:X7},".cm-panels":{backgroundColor:Y7,color:kh},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:zC,color:Oy,border:"none"},".cm-activeLineGutter":{backgroundColor:BC},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:a0},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:a0,borderBottomColor:a0},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:BC,color:kh}}},{dark:!0}),G7=Ql.define([{tag:te.keyword,color:Q7},{tag:[te.name,te.deleted,te.character,te.propertyName,te.macroName],color:LC},{tag:[te.function(te.variableName),te.labelName],color:U7},{tag:[te.color,te.constant(te.name),te.standard(te.name)],color:_C},{tag:[te.definition(te.name),te.separator],color:kh},{tag:[te.typeName,te.className,te.number,te.changed,te.annotation,te.modifier,te.self,te.namespace],color:I7},{tag:[te.operator,te.operatorKeyword,te.url,te.escape,te.regexp,te.link,te.special(te.string)],color:V7},{tag:[te.meta,te.comment],color:Oy},{tag:te.strong,fontWeight:"bold"},{tag:te.emphasis,fontStyle:"italic"},{tag:te.strikethrough,textDecoration:"line-through"},{tag:te.link,color:Oy,textDecoration:"underline"},{tag:te.heading,fontWeight:"bold",color:LC},{tag:[te.atom,te.bool,te.special(te.variableName)],color:_C},{tag:[te.processingInstruction,te.string,te.inserted],color:q7},{tag:te.invalid,color:$7}]),W7=[F7,Dx(G7)];var K7=pe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Z7=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:i=!0,readOnly:s=!1,theme:o="light",placeholder:l="",basicSetup:c=!0}=e,f=[];switch(n&&f.unshift(Hd.of([uH])),c&&(typeof c=="boolean"?f.unshift(RC()):f.unshift(RC(c))),l&&f.unshift(pP(l)),o){case"light":f.push(K7);break;case"dark":f.push(W7);break;case"none":break;default:f.push(o);break}return i===!1&&f.push(pe.editable.of(!1)),s&&f.push(Ve.readOnly.of(!0)),[...f]},J7=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class eI{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class jC{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var c0=null,tI=()=>typeof window>"u"?new jC:(c0||(c0=new jC),c0),HC=_i.define(),nI=200,iI=[];function sI(t){var{value:e,selection:n,onChange:i,onStatistics:s,onCreateEditor:o,onUpdate:l,extensions:c=iI,autoFocus:f,theme:h="light",height:p=null,minHeight:g=null,maxHeight:y=null,width:v=null,minWidth:b=null,maxWidth:S=null,placeholder:k="",editable:A=!0,readOnly:N=!1,indentWithTab:O=!0,basicSetup:M=!0,root:_,initialState:L}=t,[R,X]=U.useState(),[$,ne]=U.useState(),[q,Q]=U.useState(),Z=U.useState(()=>({current:null}))[0],B=U.useState(()=>({current:null}))[0],V=pe.theme({"&":{height:p,minHeight:g,maxHeight:y,width:v,minWidth:b,maxWidth:S},"& .cm-scroller":{height:"100% !important"}}),T=pe.updateListener.of(z=>{if(z.docChanged&&typeof i=="function"&&!z.transactions.some(j=>j.annotation(HC))){Z.current?Z.current.reset():(Z.current=new eI(()=>{if(B.current){var j=B.current;B.current=null,j()}Z.current=null},nI),tI().add(Z.current));var G=z.state.doc,D=G.toString();i(D,z)}s&&s(J7(z))}),P=Z7({theme:h,editable:A,readOnly:N,placeholder:k,indentWithTab:O,basicSetup:M}),H=[T,V,...P];return l&&typeof l=="function"&&H.push(pe.updateListener.of(l)),H=H.concat(c),U.useLayoutEffect(()=>{if(R&&!q){var z={doc:e,selection:n,extensions:H},G=L?Ve.fromJSON(L.json,z,L.fields):Ve.create(z);if(Q(G),!$){var D=new pe({state:G,parent:R,root:_});ne(D),o&&o(D,G)}}return()=>{$&&(Q(void 0),ne(void 0))}},[R,q]),U.useEffect(()=>{t.container&&X(t.container)},[t.container]),U.useEffect(()=>()=>{$&&($.destroy(),ne(void 0)),Z.current&&(Z.current.cancel(),Z.current=null)},[$]),U.useEffect(()=>{f&&$&&$.focus()},[f,$]),U.useEffect(()=>{$&&$.dispatch({effects:Me.reconfigure.of(H)})},[h,c,p,g,y,v,b,S,k,A,N,O,M,i,l]),U.useEffect(()=>{if(e!==void 0){var z=$?$.state.doc.toString():"";if($&&e!==z){var G=Z.current&&!Z.current.isDone,D=()=>{$&&e!==$.state.doc.toString()&&$.dispatch({changes:{from:0,to:$.state.doc.toString().length,insert:e||""},annotations:[HC.of(!0)]})};G?B.current=D:D()}}},[e,$]),{state:q,setState:Q,view:$,setView:ne,container:R,setContainer:X}}var rI=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],lN=U.forwardRef((t,e)=>{var{className:n,value:i="",selection:s,extensions:o=[],onChange:l,onStatistics:c,onCreateEditor:f,onUpdate:h,autoFocus:p,theme:g="light",height:y,minHeight:v,maxHeight:b,width:S,minWidth:k,maxWidth:A,basicSetup:N,placeholder:O,indentWithTab:M,editable:_,readOnly:L,root:R,initialState:X}=t,$=_6(t,rI),ne=U.useRef(null),{state:q,view:Q,container:Z,setContainer:B}=sI({root:R,value:i,autoFocus:p,theme:g,height:y,minHeight:v,maxHeight:b,width:S,minWidth:k,maxWidth:A,basicSetup:N,placeholder:O,indentWithTab:M,editable:_,readOnly:L,selection:s,onChange:l,onStatistics:c,onCreateEditor:f,onUpdate:h,extensions:o,initialState:X});U.useImperativeHandle(e,()=>({editor:ne.current,state:q,view:Q}),[ne,Z,q,Q]);var V=U.useCallback(P=>{ne.current=P,B(P)},[B]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var T=typeof g=="string"?"cm-theme-"+g:"cm-theme";return w.jsx("div",R0({ref:V,className:""+T+(n?" "+n:"")},$))});lN.displayName="CodeMirror";var IC={};class ad{constructor(e,n,i,s,o,l,c,f,h,p=0,g){this.p=e,this.stack=n,this.state=i,this.reducePos=s,this.pos=o,this.score=l,this.buffer=c,this.bufferBase=f,this.curContext=h,this.lookAhead=p,this.parent=g}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let s=e.parser.context;return new ad(e,[],n,i,i,0,[],0,s?new VC(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,s=e&65535,{parser:o}=this.p,l=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),c=o.dynamicPrecedence(s);if(c&&(this.score+=c),i==0){this.pushState(o.getGoto(this.state,s,!0),this.reducePos),s<o.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,l?8:4,!0),this.reduceContext(s,this.reducePos);return}let f=this.stack.length-(i-1)*3-(e&262144?6:0),h=f?this.stack[f-2]:this.p.ranges[0].from,p=this.reducePos-h;p>=2e3&&!(!((n=this.p.parser.nodeSet.types[s])===null||n===void 0)&&n.isAnonymous)&&(h==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=h,this.p.lastBigReductionSize=p));let g=f?this.stack[f-1]:0,y=this.bufferBase+this.buffer.length-g;if(s<o.minRepeatTerm||e&131072){let v=o.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,h,v,y+4,!0)}if(e&262144)this.state=this.stack[f];else{let v=this.stack[f-3];this.state=o.getGoto(v,s,!0)}for(;this.stack.length>f;)this.stack.pop();this.reduceContext(s,h)}storeNode(e,n,i,s=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let l=this,c=this.buffer.length;if(c==0&&l.parent&&(c=l.bufferBase-l.parent.bufferBase,l=l.parent),c>0&&l.buffer[c-4]==0&&l.buffer[c-1]>-1){if(n==i)return;if(l.buffer[c-2]>=n){l.buffer[c-2]=i;return}}}if(!o||this.pos==i)this.buffer.push(e,n,i,s);else{let l=this.buffer.length;if(l>0&&(this.buffer[l-4]!=0||this.buffer[l-1]<0)){let c=!1;for(let f=l;f>0&&this.buffer[f-2]>i;f-=4)if(this.buffer[f-1]>=0){c=!0;break}if(c)for(;l>0&&this.buffer[l-2]>i;)this.buffer[l]=this.buffer[l-4],this.buffer[l+1]=this.buffer[l-3],this.buffer[l+2]=this.buffer[l-2],this.buffer[l+3]=this.buffer[l-1],l-=4,s>4&&(s-=4)}this.buffer[l]=e,this.buffer[l+1]=n,this.buffer[l+2]=i,this.buffer[l+3]=s}}shift(e,n,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:l}=this.p;this.pos=s;let c=l.stateFlag(o,1);!c&&(s>i||n<=l.maxNode)&&(this.reducePos=s),this.pushState(o,c?i:Math.min(i,this.reducePos)),this.shiftContext(n,i),n<=l.maxNode&&this.buffer.push(n,i,s,4)}else this.pos=s,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,s,4)}apply(e,n,i,s){e&65536?this.reduce(e):this.shift(e,n,i,s)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(n,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),s=e.bufferBase+n;for(;e&&s==e.bufferBase;)e=e.parent;return new ad(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new oI(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if((i&65536)==0)return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let s=[];for(let o=0,l;o<n.length;o+=2)(l=n[o+1])!=this.state&&this.p.parser.hasAction(l,e)&&s.push(n[o],l);if(this.stack.length<120)for(let o=0;s.length<8&&o<n.length;o+=2){let l=n[o+1];s.some((c,f)=>f&1&&c==l)||s.push(n[o],l)}n=s}let i=[];for(let s=0;s<n.length&&i.length<4;s+=2){let o=n[s+1];if(o==this.state)continue;let l=this.split();l.pushState(o,this.pos),l.storeNode(0,l.pos,l.pos,4,!0),l.shiftContext(n[s],this.pos),l.reducePos=this.pos,l.score-=200,i.push(l)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if((n&65536)==0)return!1;if(!e.validAction(this.state,n)){let i=n>>19,s=n&65535,o=this.stack.length-i*3;if(o<0||e.getGoto(this.stack[o],s,!1)<0){let l=this.findForcedReduction();if(l==null)return!1;n=l}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(s,o)=>{if(!n.includes(s))return n.push(s),e.allActions(s,l=>{if(!(l&393216))if(l&65536){let c=(l>>19)-o;if(c>1){let f=l&65535,h=this.stack.length-c*3;if(h>=0&&e.getGoto(this.stack[h],f,!1)>=0)return c<<19|65536|f}}else{let c=i(l,o+1);if(c!=null)return c}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new VC(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class VC{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class oI{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=s}}class cd{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new cd(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new cd(this.stack,this.pos,this.index)}}function uh(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let i=0,s=0;i<t.length;){let o=0;for(;;){let l=t.charCodeAt(i++),c=!1;if(l==126){o=65535;break}l>=92&&l--,l>=34&&l--;let f=l-32;if(f>=46&&(f-=46,c=!0),o+=f,c)break;o*=46}n?n[s++]=o:n=new e(o)}return n}class Ah{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const $C=new Ah;class lI{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=$C,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,s=this.rangeIndex,o=this.pos+e;for(;o<i.from;){if(!s)return null;let l=this.ranges[--s];o-=i.from-l.to,i=l}for(;n<0?o>i.to:o>=i.to;){if(s==this.ranges.length-1)return null;let l=this.ranges[++s];o+=l.from-i.to,i=l}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,s;if(n>=0&&n<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(n);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(i=o,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let l=this.rangeIndex,c=this.range;for(;c.to<=i;)c=this.ranges[++l];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=$C,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let s of this.ranges){if(s.from>=n)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,n)))}return i}}class Al{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;aI(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}Al.prototype.contextual=Al.prototype.fallback=Al.prototype.extend=!1;Al.prototype.fallback=Al.prototype.extend=!1;class Gd{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function aI(t,e,n,i,s,o){let l=0,c=1<<i,{dialect:f}=n.p.parser;e:for(;(c&t[l])!=0;){let h=t[l+1];for(let v=l+3;v<h;v+=2)if((t[v+1]&c)>0){let b=t[v];if(f.allows(b)&&(e.token.value==-1||e.token.value==b||cI(b,e.token.value,s,o))){e.acceptToken(b);break}}let p=e.next,g=0,y=t[l+2];if(e.next<0&&y>g&&t[h+y*3-3]==65535){l=t[h+y*3-1];continue e}for(;g<y;){let v=g+y>>1,b=h+v+(v<<1),S=t[b],k=t[b+1]||65536;if(p<S)y=v;else if(p>=k)g=v+1;else{l=t[b+2],e.advance();continue e}}break}}function UC(t,e,n){for(let i=e,s;(s=t[i])!=65535;i++)if(s==n)return i-e;return-1}function cI(t,e,n,i){let s=UC(n,i,e);return s<0||UC(n,i,t)<s}const Dn=typeof process<"u"&&IC&&/\bparse\b/.test(IC.LOG);let u0=null;function qC(t,e,n){let i=t.cursor(dt.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}class uI{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qC(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qC(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],s=this.index[n];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=i.children[s],l=this.start[n]+i.positions[s];if(l>e)return this.nextStart=l,null;if(o instanceof yt){if(l==e){if(l<this.safeFrom)return null;let c=l+o.length;if(c<=this.safeTo){let f=o.prop(Le.lookAhead);if(!f||c+f<this.fragment.to)return o}}this.index[n]++,l+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(l),this.index.push(0))}else this.index[n]++,this.nextStart=l+o.length}}}class fI{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ah)}getActions(e){let n=0,i=null,{parser:s}=e.p,{tokenizers:o}=s,l=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,f=0;for(let h=0;h<o.length;h++){if((1<<h&l)==0)continue;let p=o[h],g=this.tokens[h];if(!(i&&!p.fallback)&&((p.contextual||g.start!=e.pos||g.mask!=l||g.context!=c)&&(this.updateCachedToken(g,p,e),g.mask=l,g.context=c),g.lookAhead>g.end+25&&(f=Math.max(g.lookAhead,f)),g.value!=0)){let y=n;if(g.extended>-1&&(n=this.addActions(e,g.extended,g.end,n)),n=this.addActions(e,g.value,g.end,n),!p.extend&&(i=g,n>y))break}}for(;this.actions.length>n;)this.actions.pop();return f&&e.setLookAhead(f),!i&&e.pos==this.stream.end&&(i=new Ah,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Ah,{pos:i,p:s}=e;return n.start=i,n.end=Math.min(i+1,s.stream.end),n.value=i==s.stream.end?s.parser.eofTerm:0,n}updateCachedToken(e,n,i){let s=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(s,e),i),e.value>-1){let{parser:o}=i.p;for(let l=0;l<o.specialized.length;l++)if(o.specialized[l]==e.value){let c=o.specializers[l](this.stream.read(e.start,e.end),i);if(c>=0&&i.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,n,i,s){for(let o=0;o<s;o+=3)if(this.actions[o]==e)return s;return this.actions[s++]=e,this.actions[s++]=n,this.actions[s++]=i,s}addActions(e,n,i,s){let{state:o}=e,{parser:l}=e.p,{data:c}=l;for(let f=0;f<2;f++)for(let h=l.stateSlot(o,f?2:1);;h+=3){if(c[h]==65535)if(c[h+1]==1)h=as(c,h+2);else{s==0&&c[h+1]==2&&(s=this.putAction(as(c,h+2),n,i,s));break}c[h]==n&&(s=this.putAction(as(c,h+1),n,i,s))}return s}}class hI{constructor(e,n,i,s){this.parser=e,this.input=n,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new lI(n,s),this.tokens=new fI(e,this.stream),this.topTerm=e.top[1];let{from:o}=s[0];this.stacks=[ad.start(this,e.top[0],o)],this.fragments=i.length&&this.stream.end-o>e.bufferLength*4?new uI(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],s,o;if(this.bigReductionCount>300&&e.length==1){let[l]=e;for(;l.forceReduce()&&l.stack.length&&l.stack[l.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let l=0;l<e.length;l++){let c=e[l];for(;;){if(this.tokens.mainToken=null,c.pos>n)i.push(c);else{if(this.advanceStack(c,i,e))continue;{s||(s=[],o=[]),s.push(c);let f=this.tokens.getMainToken(c);o.push(f.value,f.end)}}break}}if(!i.length){let l=s&&gI(s);if(l)return Dn&&console.log("Finish with "+this.stackID(l)),this.stackToTree(l);if(this.parser.strict)throw Dn&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&s){let l=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,o,i);if(l)return Dn&&console.log("Force-finish "+this.stackID(l)),this.stackToTree(l.forceAll())}if(this.recovering){let l=this.recovering==1?1:this.recovering*3;if(i.length>l)for(i.sort((c,f)=>f.score-c.score);i.length>l;)i.pop();i.some(c=>c.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let l=0;l<i.length-1;l++){let c=i[l];for(let f=l+1;f<i.length;f++){let h=i[f];if(c.sameState(h)||c.buffer.length>500&&h.buffer.length>500)if((c.score-h.score||c.buffer.length-h.buffer.length)>0)i.splice(f--,1);else{i.splice(l--,1);continue e}}}i.length>12&&(i.sort((l,c)=>c.score-l.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let l=1;l<i.length;l++)i[l].pos<this.minStackPos&&(this.minStackPos=i[l].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let s=e.pos,{parser:o}=this,l=Dn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let h=e.curContext&&e.curContext.tracker.strict,p=h?e.curContext.hash:0;for(let g=this.fragments.nodeAt(s);g;){let y=this.parser.nodeSet.types[g.type.id]==g.type?o.getGoto(e.state,g.type.id):-1;if(y>-1&&g.length&&(!h||(g.prop(Le.contextHash)||0)==p))return e.useNode(g,y),Dn&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(g.type.id)})`),!0;if(!(g instanceof yt)||g.children.length==0||g.positions[0]>0)break;let v=g.children[0];if(v instanceof yt&&g.positions[0]==0)g=v;else break}}let c=o.stateSlot(e.state,4);if(c>0)return e.reduce(c),Dn&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let f=this.tokens.getActions(e);for(let h=0;h<f.length;){let p=f[h++],g=f[h++],y=f[h++],v=h==f.length||!i,b=v?e:e.split(),S=this.tokens.mainToken;if(b.apply(p,g,S?S.start:b.pos,y),Dn&&console.log(l+this.stackID(b)+` (via ${(p&65536)==0?"shift":`reduce of ${o.getName(p&65535)}`} for ${o.getName(g)} @ ${s}${b==e?"":", split"})`),v)return!0;b.pos>s?n.push(b):i.push(b)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return QC(e,n),!0}}runRecovery(e,n,i){let s=null,o=!1;for(let l=0;l<e.length;l++){let c=e[l],f=n[l<<1],h=n[(l<<1)+1],p=Dn?this.stackID(c)+" -> ":"";if(c.deadEnd&&(o||(o=!0,c.restart(),Dn&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,i))))continue;let g=c.split(),y=p;for(let v=0;v<10&&g.forceReduce()&&(Dn&&console.log(y+this.stackID(g)+" (via force-reduce)"),!this.advanceFully(g,i));v++)Dn&&(y=this.stackID(g)+" -> ");for(let v of c.recoverByInsert(f))Dn&&console.log(p+this.stackID(v)+" (via recover-insert)"),this.advanceFully(v,i);this.stream.end>c.pos?(h==c.pos&&(h++,f=0),c.recoverByDelete(f,h),Dn&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(f)})`),QC(c,i)):(!s||s.score<g.score)&&(s=g)}return s}stackToTree(e){return e.close(),yt.build({buffer:cd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(u0||(u0=new WeakMap)).get(e);return n||u0.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function QC(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class dI{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const f0=t=>t;class pI{constructor(e){this.start=e.start,this.shift=e.shift||f0,this.reduce=e.reduce||f0,this.reuse=e.reuse||f0,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ud extends HE{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let c=0;c<e.repeatNodeCount;c++)n.push("");let i=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<n.length;c++)s.push([]);function o(c,f,h){s[c].push([f,f.deserialize(String(h))])}if(e.nodeProps)for(let c of e.nodeProps){let f=c[0];typeof f=="string"&&(f=Le[f]);for(let h=1;h<c.length;){let p=c[h++];if(p>=0)o(p,f,c[h++]);else{let g=c[h+-p];for(let y=-p;y>0;y--)o(c[h++],f,g);h++}}}this.nodeSet=new Ax(n.map((c,f)=>Sn.define({name:f>=this.minRepeatTerm?void 0:c,id:f,props:s[f],top:i.indexOf(f)>-1,error:f==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(f)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=BE;let l=uh(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(YC),this.states=uh(e.states,Uint32Array),this.data=uh(e.stateData),this.goto=uh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new Al(l,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let s=new hI(this,e,n,i);for(let o of this.wrappers)s=o(s,e,n,i);return s}getGoto(e,n,i=!1){let s=this.goto;if(n>=s[0])return-1;for(let o=s[n+1];;){let l=s[o++],c=l&1,f=s[o++];if(c&&i)return f;for(let h=o+(l>>1);o<h;o++)if(s[o]==e)return f;if(c)return-1}}hasAction(e,n){let i=this.data;for(let s=0;s<2;s++)for(let o=this.stateSlot(e,s?2:1),l;;o+=3){if((l=i[o])==65535)if(i[o+1]==1)l=i[o=as(i,o+2)];else{if(i[o+1]==2)return as(i,o+2);break}if(l==n||l==0)return as(i,o+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),s=i?n(i):void 0;for(let o=this.stateSlot(e,1);s==null;o+=3){if(this.data[o]==65535)if(this.data[o+1]==1)o=as(this.data,o+2);else break;s=n(as(this.data,o+1))}return s}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=as(this.data,i+2);else break;if((this.data[i+2]&1)==0){let s=this.data[i+1];n.some((o,l)=>l&1&&o==s)||n.push(this.data[i],s)}}return n}configure(e){let n=Object.assign(Object.create(ud.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(o=>o.from==i);return s?s.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,s)=>{let o=e.specializers.find(c=>c.from==i.external);if(!o)return i;let l=Object.assign(Object.assign({},i),{external:o.to});return n.specializers[s]=YC(l),l})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let o of e.split(" ")){let l=n.indexOf(o);l>=0&&(i[l]=!0)}let s=null;for(let o=0;o<n.length;o++)if(!i[o])for(let l=this.dialects[n[o]],c;(c=this.data[l++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new dI(e,i,s)}static deserialize(e){return new ud(e)}}function as(t,e){return t[e]|t[e+1]<<16}function gI(t){let e=null;for(let n of t){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function YC(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}const ol=63,XC=64,mI=1,yI=2,aN=3,xI=4,cN=5,vI=6,bI=7,uN=65,SI=66,wI=8,CI=9,kI=10,AI=11,OI=12,fN=13,EI=19,MI=20,NI=29,TI=33,DI=34,RI=47,LI=0,Ux=1,Ey=2,Vc=3,My=4;class Yr{constructor(e,n,i){this.parent=e,this.depth=n,this.type=i,this.hash=(e?e.hash+e.hash<<8:0)+n+(n<<4)+i}}Yr.top=new Yr(null,-1,LI);function pc(t,e){for(let n=0,i=e-t.pos-1;;i--,n++){let s=t.peek(i);if(ys(s)||s==-1)return n}}function Ny(t){return t==32||t==9}function ys(t){return t==10||t==13}function hN(t){return Ny(t)||ys(t)}function Kr(t){return t<0||hN(t)}const _I=new pI({start:Yr.top,reduce(t,e){return t.type==Vc&&(e==MI||e==DI)?t.parent:t},shift(t,e,n,i){if(e==aN)return new Yr(t,pc(i,i.pos),Ux);if(e==uN||e==cN)return new Yr(t,pc(i,i.pos),Ey);if(e==ol)return t.parent;if(e==EI||e==TI)return new Yr(t,0,Vc);if(e==fN&&t.type==My)return t.parent;if(e==RI){let s=/[1-9]/.exec(i.read(i.pos,n.pos));if(s)return new Yr(t,t.depth+ +s[0],My)}return t},hash(t){return t.hash}});function $l(t,e,n=0){return t.peek(n)==e&&t.peek(n+1)==e&&t.peek(n+2)==e&&Kr(t.peek(n+3))}const BI=new Gd((t,e)=>{if(t.next==-1&&e.canShift(XC))return t.acceptToken(XC);let n=t.peek(-1);if((ys(n)||n<0)&&e.context.type!=Vc){if($l(t,45))if(e.canShift(ol))t.acceptToken(ol);else return t.acceptToken(mI,3);if($l(t,46))if(e.canShift(ol))t.acceptToken(ol);else return t.acceptToken(yI,3);let i=0;for(;t.next==32;)i++,t.advance();(i<e.context.depth||i==e.context.depth&&e.context.type==Ux&&(t.next!=45||!Kr(t.peek(1))))&&t.next!=-1&&!ys(t.next)&&t.next!=35&&t.acceptToken(ol,-i)}},{contextual:!0}),zI=new Gd((t,e)=>{if(e.context.type==Vc){t.next==63&&(t.advance(),Kr(t.next)&&t.acceptToken(bI));return}if(t.next==45)t.advance(),Kr(t.next)&&t.acceptToken(e.context.type==Ux&&e.context.depth==pc(t,t.pos-1)?xI:aN);else if(t.next==63)t.advance(),Kr(t.next)&&t.acceptToken(e.context.type==Ey&&e.context.depth==pc(t,t.pos-1)?vI:cN);else{let n=t.pos;for(;;)if(Ny(t.next)){if(t.pos==n)return;t.advance()}else if(t.next==33)dN(t);else if(t.next==38)Ty(t);else if(t.next==42){Ty(t);break}else if(t.next==39||t.next==34){if(qx(t,!0))break;return}else if(t.next==91||t.next==123){if(!jI(t))return;break}else{pN(t,!0,!1,0);break}for(;Ny(t.next);)t.advance();if(t.next==58){if(t.pos==n&&e.canShift(NI))return;let i=t.peek(1);Kr(i)&&t.acceptTokenTo(e.context.type==Ey&&e.context.depth==pc(t,n)?SI:uN,n)}}},{contextual:!0});function PI(t){return t>32&&t<127&&t!=34&&t!=37&&t!=44&&t!=60&&t!=62&&t!=92&&t!=94&&t!=96&&t!=123&&t!=124&&t!=125}function FC(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function GC(t,e){return t.next==37?(t.advance(),FC(t.next)&&t.advance(),FC(t.next)&&t.advance(),!0):PI(t.next)||e&&t.next==44?(t.advance(),!0):!1}function dN(t){if(t.advance(),t.next==60){for(t.advance();;)if(!GC(t,!0)){t.next==62&&t.advance();break}}else for(;GC(t,!1););}function Ty(t){for(t.advance();!Kr(t.next)&&fd(t.next)!="f";)t.advance()}function qx(t,e){let n=t.next,i=!1,s=t.pos;for(t.advance();;){let o=t.next;if(o<0)break;if(t.advance(),o==n)if(o==39)if(t.next==39)t.advance();else break;else break;else if(o==92&&n==34)t.next>=0&&t.advance();else if(ys(o)){if(e)return!1;i=!0}else if(e&&t.pos>=s+1024)return!1}return!i}function jI(t){for(let e=[],n=t.pos+1024;;)if(t.next==91||t.next==123)e.push(t.next),t.advance();else if(t.next==39||t.next==34){if(!qx(t,!0))return!1}else if(t.next==93||t.next==125){if(e[e.length-1]!=t.next-2)return!1;if(e.pop(),t.advance(),!e.length)return!0}else{if(t.next<0||t.pos>n||ys(t.next))return!1;t.advance()}}const HI="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function fd(t){return t<33?"u":t>125?"s":HI[t-33]}function h0(t,e){let n=fd(t);return n!="u"&&!(e&&n=="f")}function pN(t,e,n,i){if(fd(t.next)=="s"||(t.next==63||t.next==58||t.next==45)&&h0(t.peek(1),n))t.advance();else return!1;let s=t.pos;for(;;){let o=t.next,l=0,c=i+1;for(;hN(o);){if(ys(o)){if(e)return!1;c=0}else c++;o=t.peek(++l)}if(!(o>=0&&(o==58?h0(t.peek(l+1),n):o==35?t.peek(l-1)!=32:h0(o,n)))||!n&&c<=i||c==0&&!n&&($l(t,45,l)||$l(t,46,l)))break;if(e&&fd(o)=="f")return!1;for(let h=l;h>=0;h--)t.advance();if(e&&t.pos>s+1024)return!1}return!0}const II=new Gd((t,e)=>{if(t.next==33)dN(t),t.acceptToken(OI);else if(t.next==38||t.next==42){let n=t.next==38?kI:AI;Ty(t),t.acceptToken(n)}else t.next==39||t.next==34?(qx(t,!1),t.acceptToken(CI)):pN(t,!1,e.context.type==Vc,e.context.depth)&&t.acceptToken(wI)}),VI=new Gd((t,e)=>{let n=e.context.type==My?e.context.depth:-1,i=t.pos;e:for(;;){let s=0,o=t.next;for(;o==32;)o=t.peek(++s);if(!s&&($l(t,45,s)||$l(t,46,s))||!ys(o)&&(n<0&&(n=Math.max(e.context.depth+1,s)),s<n))break;for(;;){if(t.next<0)break e;let l=ys(t.next);if(t.advance(),l)continue e;i=t.pos}}t.acceptTokenTo(fN,i)}),$I=IE({DirectiveName:te.keyword,DirectiveContent:te.attributeValue,"DirectiveEnd DocEnd":te.meta,QuotedLiteral:te.string,BlockLiteralHeader:te.special(te.string),BlockLiteralContent:te.content,Literal:te.content,"Key/Literal Key/QuotedLiteral":te.definition(te.propertyName),"Anchor Alias":te.labelName,Tag:te.typeName,Comment:te.lineComment,": , -":te.separator,"?":te.punctuation,"[ ]":te.squareBracket,"{ }":te.brace}),UI=ud.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:_I,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[$I],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[BI,zI,II,VI,0,1],topRules:{Stream:[0,15]},tokenPrec:0}),qI=Gh.define({name:"yaml",parser:UI.configure({props:[qE.add({Stream:t=>{for(let e=t.node.resolve(t.pos,-1);e&&e.to>=t.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return t.baseIndentFor(e);if(e.name=="BlockLiteral")return t.baseIndentFor(e)+t.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return t.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let n=t.column(e.from,1);if(n==t.lineIndent(e.from,1))return n;if(e.to>t.pos)return null}}return null},FlowMapping:iC({closing:"}"}),FlowSequence:iC({closing:"]"})}),XE.add({"FlowMapping FlowSequence":w9,"Item Pair BlockLiteral":(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function QI(){return new f9(qI)}var YI=t=>{var{theme:e,settings:n={},styles:i=[]}=t,s={".cm-gutters":{}},o={};n.background&&(o.backgroundColor=n.background),n.backgroundImage&&(o.backgroundImage=n.backgroundImage),n.foreground&&(o.color=n.foreground),n.fontSize&&(o.fontSize=n.fontSize),(n.background||n.foreground)&&(s["&"]=o),n.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:n.fontFamily}),n.gutterBackground&&(s[".cm-gutters"].backgroundColor=n.gutterBackground),n.gutterForeground&&(s[".cm-gutters"].color=n.gutterForeground),n.gutterBorder&&(s[".cm-gutters"].borderRightColor=n.gutterBorder),n.caret&&(s[".cm-content"]={caretColor:n.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:n.caret});var l={};n.gutterActiveForeground&&(l.color=n.gutterActiveForeground),n.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:n.lineHighlight},l.backgroundColor=n.lineHighlight),s[".cm-activeLineGutter"]=l,n.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:n.selection+" !important"}),n.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:n.selectionMatch});var c=pe.theme(s,{dark:e==="dark"}),f=Ql.define(i),h=[c,Dx(f)];return h};function Fl(){const t=U.useContext(kk);if(!t)throw new Error("usePolicyContext must be used within a PolicyProvider");return t}const XI=YI({theme:"dark",settings:{background:"#0f172a",foreground:"#e2e8f0",caret:"#6366f1",selection:"#6366f140",selectionMatch:"#6366f120",gutterBackground:"#1e293b",gutterForeground:"#475569",gutterActiveForeground:"#94a3b8",gutterBorder:"#334155",lineHighlight:"#1e293b50"},styles:[{tag:te.keyword,color:"#c084fc"},{tag:te.string,color:"#86efac"},{tag:te.number,color:"#fbbf24"},{tag:te.bool,color:"#f472b6"},{tag:te.null,color:"#94a3b8"},{tag:te.propertyName,color:"#67e8f9"},{tag:te.comment,color:"#475569"},{tag:te.operator,color:"#94a3b8"},{tag:te.punctuation,color:"#64748b"},{tag:te.meta,color:"#818cf8"},{tag:te.atom,color:"#f472b6"}]}),Dy=Me.define(),FI=Se.line({class:"cm-highlighted-rule"}),GI=zt.define({create(){return Se.none},update(t,e){for(const n of e.effects)if(n.is(Dy)){if(!n.value)return Se.none;const{from:i,to:s}=n.value,o=e.state.doc,l=o.lines,c=Math.max(1,Math.min(i,l)),f=Math.max(1,Math.min(s,l)),h=[];for(let p=c;p<=f;p++){const g=o.line(p).from;h.push(FI.range(g))}return Se.set(h,!0)}return t},provide:t=>pe.decorations.from(t)});function WI({onYamlChange:t}){const{state:e}=Fl(),n=U.useRef(null),i=U.useCallback(l=>{n.current=l},[]),s=U.useCallback(l=>{t(l)},[t]);U.useEffect(()=>{const l=n.current;if(!l)return;const c=e.highlightedLines;if(c){l.dispatch({effects:Dy.of({from:c.startLine,to:c.endLine})});const f=l.state.doc,h=f.lines,p=Math.max(1,Math.min(c.startLine,h)),g=f.line(p).from;l.dispatch({effects:pe.scrollIntoView(g,{y:"center"})})}else l.dispatch({effects:Dy.of(null)})},[e.highlightedLines]);const o=U.useMemo(()=>[QI(),GI],[]);return w.jsxs("div",{className:"h-full flex flex-col",children:[w.jsx("div",{className:"flex items-center justify-between px-3 py-2 border-b border-slate-700 bg-slate-800/50",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("svg",{className:"w-4 h-4 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),w.jsx("span",{className:"text-xs font-semibold text-slate-300",children:"YAML"}),w.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-slate-700 text-slate-400 font-mono",children:"editable"})]})}),w.jsx("div",{className:"flex-1 min-h-0 overflow-auto",children:e.yamlContent?w.jsx(lN,{value:e.yamlContent,height:"100%",extensions:o,theme:XI,onChange:s,onCreateEditor:i,basicSetup:{lineNumbers:!0,highlightActiveLineGutter:!0,highlightActiveLine:!0,foldGutter:!0}}):w.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:w.jsx("p",{className:"text-xs",children:"No policy loaded"})})}),e.parseWarnings.length>0&&w.jsx("div",{className:"px-3 py-2 bg-amber-500/10 border-t border-amber-500/30",children:w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("svg",{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M10.29 3.86l-8.6 14.86A1 1 0 002.56 20h18.88a1 1 0 00.87-1.28l-8.6-14.86a1 1 0 00-1.72 0z"})}),w.jsx("div",{className:"space-y-0.5",children:e.parseWarnings.map((l,c)=>w.jsx("div",{className:"text-xs text-amber-300",children:l},c))})]})}),e.parseError&&w.jsx("div",{className:"px-3 py-2 bg-red-500/10 border-t border-red-500/30",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("svg",{className:"w-4 h-4 text-red-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),w.jsx("span",{className:"text-xs text-red-300",children:e.parseError})]})})]})}function KI({data:t}){const e=t.kind==="GlobalNetworkPolicy";return w.jsxs("div",{className:"relative min-w-[280px] max-w-[360px]",children:[w.jsx(or,{type:"target",position:be.Left,id:"left",className:"!w-3 !h-3 !bg-indigo-400 !border-2 !border-indigo-600"}),w.jsxs("div",{className:"rounded-xl border-2 border-indigo-500/60 bg-slate-800/90 shadow-lg shadow-indigo-500/10 backdrop-blur-sm overflow-hidden",children:[w.jsx("div",{className:"bg-indigo-500/20 px-4 py-2 border-b border-indigo-500/30",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full ${e?"bg-amber-500/20 text-amber-300 border border-amber-500/30":"bg-indigo-500/20 text-indigo-300 border border-indigo-500/30"}`,children:e?"Global":"Namespaced"}),w.jsxs("span",{className:"text-[10px] text-slate-400 font-mono",children:["tier: ",t.tier,t.order!==void 0?` | order: ${t.order}`:""]})]})}),w.jsxs("div",{className:"px-4 py-3 space-y-2",children:[w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Policy"}),w.jsx("div",{className:"text-sm font-semibold text-slate-100 break-all leading-tight mt-0.5",children:t.name})]}),t.namespace&&w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Namespace"}),w.jsx("div",{className:"text-xs font-mono text-cyan-300 mt-0.5",children:t.namespace})]}),t.namespaceSelector&&w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Namespace Selector"}),w.jsx("div",{className:"text-[11px] font-mono text-amber-300 mt-0.5 break-all leading-snug bg-slate-900/50 rounded px-2 py-1",children:t.namespaceSelector.length>80?t.namespaceSelector.substring(0,80)+"...":t.namespaceSelector})]}),w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Selector"}),w.jsx("div",{className:"text-[11px] font-mono text-emerald-300 mt-0.5 break-all leading-snug bg-slate-900/50 rounded px-2 py-1",children:t.selector})]}),t.serviceAccountSelector&&w.jsxs("div",{children:[w.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Service Account Selector"}),w.jsx("div",{className:"text-[11px] font-mono text-cyan-300 mt-0.5 break-all leading-snug bg-slate-900/50 rounded px-2 py-1",children:t.serviceAccountSelector.length>80?t.serviceAccountSelector.substring(0,80)+"...":t.serviceAccountSelector})]}),(t.preDNAT||t.applyOnForward||t.doNotTrack)&&w.jsxs("div",{className:"flex flex-wrap gap-1.5 pt-1",children:[t.preDNAT&&w.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg bg-violet-500/10 text-violet-300 border border-violet-500/30",children:[w.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"preDNAT"]}),t.applyOnForward&&w.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg bg-teal-500/10 text-teal-300 border border-teal-500/30",children:[w.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"applyOnForward"]}),t.doNotTrack&&w.jsxs("div",{className:"flex items-center gap-1 text-[10px] font-bold uppercase tracking-wider px-2 py-1 rounded-lg bg-rose-500/10 text-rose-300 border border-rose-500/30",children:[w.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"doNotTrack"]})]}),w.jsxs("div",{className:"flex gap-2 pt-1",children:[w.jsx("div",{className:`flex-1 text-center text-[10px] font-bold uppercase tracking-wider px-2 py-1.5 rounded-lg border ${t.effectiveIngressDefault==="deny"?"bg-red-500/10 text-red-400 border-red-500/30":"bg-green-500/10 text-green-400 border-green-500/30"}`,children:`Ingress Default ${t.effectiveIngressDefault==="deny"?"Deny":"Allow"}`}),w.jsx("div",{className:`flex-1 text-center text-[10px] font-bold uppercase tracking-wider px-2 py-1.5 rounded-lg border ${t.effectiveEgressDefault==="deny"?"bg-red-500/10 text-red-400 border-red-500/30":"bg-green-500/10 text-green-400 border-green-500/30"}`,children:`Egress Default ${t.effectiveEgressDefault==="deny"?"Deny":"Allow"}`})]})]})]}),w.jsx(or,{type:"source",position:be.Right,id:"right",className:"!w-3 !h-3 !bg-indigo-400 !border-2 !border-indigo-600"})]})}const ZI=U.memo(KI);function hd(t){const e=t.split(".").map(Number);return(e[0]<<24|e[1]<<16|e[2]<<8|e[3])>>>0}function Ry(t,e){if(typeof t!="string"||typeof e!="string")return!1;const[n,i]=t.split("/"),s=i!==void 0?Number(i):32,o=s===0?0:-1<<32-s>>>0;return(hd(n)&o)===(hd(e)&o)}const JI=["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","100.64.0.0/10"];function gN(t){const e=t.filter(n=>typeof n=="string");return JI.every(n=>{const[i,s]=n.split("/"),o=Number(s);return e.some(l=>{const[c,f]=l.split("/"),h=Number(f);if(h>o)return!1;const p=-1<<32-h>>>0;return(hd(c)&p)===(hd(i)&p)})})}function eV(t){const e=t.split(".");return e.length!==4?!1:e.every(n=>{const i=Number(n);return Number.isInteger(i)&&i>=0&&i<=255&&n===String(i)})}function Ly(t){if(typeof t=="number")return Number.isInteger(t)&&t>=0&&t<=65535;if(t.includes(":")){const e=t.split(":");if(e.length!==2)return!1;const n=Number(e[0]),i=Number(e[1]);return Number.isInteger(n)&&n>=0&&n<=65535&&Number.isInteger(i)&&i>=0&&i<=65535&&n<=i}return!0}function Qx(t){if(typeof t!="string")return!1;const e=t.indexOf("/");if(e===-1||t.indexOf("/",e+1)!==-1)return!1;const n=t.substring(0,e),i=t.substring(e+1);if(!eV(n))return!1;const s=Number(i);return Number.isInteger(s)&&s>=0&&s<=32&&i===String(s)}function tV(t,e){if(typeof e=="number")return t===e;if(e.includes(":")){const[n,i]=e.split(":"),s=Number(n),o=Number(i);if(!Number.isNaN(s)&&!Number.isNaN(o))return t>=s&&t<=o}return!1}const WC=3;function nV(t){switch(t){case"outsideCluster":return"";case"inNamespace":return"";case"inCluster":return"";default:return""}}function iV(t){switch(t){case"outsideCluster":return{border:"border-orange-500/50",bg:"bg-slate-800/90",headerBg:"bg-orange-500/15",iconBg:"bg-orange-500/20"};case"inNamespace":return{border:"border-cyan-500/50",bg:"bg-slate-800/90",headerBg:"bg-cyan-500/15",iconBg:"bg-cyan-500/20"};case"inCluster":return{border:"border-purple-500/50",bg:"bg-slate-800/90",headerBg:"bg-purple-500/15",iconBg:"bg-purple-500/20"};default:return{border:"border-slate-500/50",bg:"bg-slate-800/90",headerBg:"bg-slate-500/15",iconBg:"bg-slate-500/20"}}}function mN(t){switch(t){case"Allow":return{card:"bg-green-500/8 border-green-500/20 text-green-300",dot:"bg-green-400"};case"Deny":return{card:"bg-red-500/8 border-red-500/20 text-red-300",dot:"bg-red-400"};case"Log":return{card:"bg-amber-500/8 border-amber-500/20 text-amber-300",dot:"bg-amber-400"};case"Pass":return{card:"bg-blue-500/8 border-blue-500/20 text-blue-300",dot:"bg-blue-400"}}}function sV(t){const e=Number(t);return!Number.isNaN(e)&&String(e)===t?Ly(e):Ly(t)}function KC({port:t,baseClass:e}){return sV(t)?w.jsx("span",{className:e,children:t}):w.jsx("span",{className:"text-red-400 font-semibold underline decoration-wavy decoration-red-400/60",title:`Invalid port: ${t}`,children:t})}function dd({ports:t,highlight:e}){if(t.length===0)return null;const n=e?"text-orange-400 font-semibold":"opacity-75";if(t.length<=WC)return w.jsxs("span",{className:"font-mono text-[10px]",children:[w.jsx("span",{className:n,children:":"}),t.map((o,l)=>w.jsxs("span",{children:[l>0&&w.jsx("span",{className:n,children:", "}),w.jsx(KC,{port:o,baseClass:n})]},l))]});const i=t.slice(0,WC),s=t.join(`
`);return w.jsxs("span",{className:"font-mono text-[10px]",children:[w.jsx("span",{className:n,children:":"}),i.map((o,l)=>w.jsxs("span",{children:[l>0&&w.jsx("span",{className:n,children:", "}),w.jsx(KC,{port:o,baseClass:n})]},l))," ",w.jsx("span",{className:"ports-hint text-[10px]","data-tooltip":s,children:"*"})]})}function gc({cidrs:t,max:e}){const n=e??t.length,i=t.slice(0,n),s=t.length-n;return w.jsxs(w.Fragment,{children:[i.map((o,l)=>w.jsxs("span",{children:[l>0&&", ",Qx(o)?o:w.jsx("span",{className:"text-red-400 font-semibold underline decoration-wavy decoration-red-400/60",title:`Invalid CIDR: ${o}`,children:o})]},l)),s>0&&` +${s} more`]})}function rV({cidr:t,action:e,protocol:n,ports:i,notNets:s,notPorts:o,oppositeLabel:l,oppositePorts:c,oppositeSelector:f,oppositeNets:h,sourceRange:p,onHover:g}){const y=mN(e);return w.jsxs("div",{className:`text-[11px] px-2.5 py-1.5 rounded-lg border ${y.card}`,onMouseEnter:p&&g?()=>g(p):void 0,onMouseLeave:g?()=>g(null):void 0,children:[w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full shrink-0 ${y.dot}`}),w.jsx("span",{className:"font-bold uppercase text-[10px]",children:e}),Qx(t)?w.jsx("span",{className:"font-mono text-[10px] opacity-90 flex-1 truncate",children:t}):w.jsx("span",{className:"font-mono text-[10px] text-red-400 font-semibold underline decoration-wavy decoration-red-400/60 flex-1 truncate",title:`Invalid CIDR: ${t}`,children:t}),n&&w.jsx("span",{className:"font-mono text-[10px] text-orange-400 font-semibold shrink-0 ml-1",children:n})]}),i&&i.length>0&&w.jsx("div",{className:"flex justify-end mt-0.5",children:w.jsx(dd,{ports:i,highlight:!0})}),l&&(h||f||c&&c.length>0)&&w.jsxs("div",{className:"font-mono text-[10px] text-amber-400/70 pl-3 leading-snug mt-0.5",children:[h&&h.length>0&&w.jsxs("div",{className:"truncate",children:[l,": ",w.jsx(gc,{cidrs:h,max:3})]}),f&&w.jsxs("div",{className:"truncate",children:[l,": ",f]}),c&&c.length>0&&w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsxs("span",{children:[l,":"]}),w.jsx(dd,{ports:c,highlight:!0})]})]}),s&&s.length>0&&w.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT: ",w.jsx(gc,{cidrs:s})]}),o&&o.length>0&&w.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT ports: ",o.join(", ")]})]})}function yN({rule:t,onHover:e}){const n=mN(t.action),i=t.dstPorts??t.srcPorts,s=t.dstSelector??t.srcSelector,o=t.dstNets??t.srcNets,l=t.dstPorts||t.dstSelector||t.dstNets?"dst":t.srcPorts||t.srcSelector||t.srcNets?"src":null;return w.jsxs("div",{className:`text-[11px] px-2.5 py-1.5 rounded-lg border ${n.card}`,onMouseEnter:t.sourceRange&&e?()=>e(t.sourceRange):void 0,onMouseLeave:e?()=>e(null):void 0,children:[w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("span",{className:`inline-block w-1.5 h-1.5 rounded-full shrink-0 ${n.dot}`}),w.jsx("span",{className:"font-bold uppercase text-[10px]",children:t.action}),w.jsx("span",{className:"flex-1"}),t.protocol&&w.jsx("span",{className:"font-mono text-[10px] text-orange-400 font-semibold shrink-0",children:t.protocol})]}),t.ports&&t.ports.length>0&&w.jsx("div",{className:"flex justify-end mt-0.5",children:w.jsx(dd,{ports:t.ports,highlight:!0})}),t.nets&&t.nets.length>0&&w.jsx("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug",children:w.jsx(gc,{cidrs:t.nets,max:3})}),t.services&&w.jsxs("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug",children:["svc: ",t.services.name," ",w.jsxs("span",{className:"text-slate-500",children:["(",t.services.namespace,")"]})]}),t.serviceAccounts&&w.jsxs("div",{className:"font-mono text-[10px] text-cyan-400/70 pl-3 leading-snug",children:[t.serviceAccounts.names&&t.serviceAccounts.names.map((c,f)=>w.jsxs("div",{children:["sa: ",c]},f)),t.serviceAccounts.selector&&w.jsxs("div",{children:["sa selector: ",t.serviceAccounts.selector]})]}),t.selector&&w.jsx("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug truncate",children:t.selector}),t.namespaceSelector&&w.jsxs("div",{className:"font-mono text-[10px] opacity-70 pl-3 leading-snug truncate",children:["ns: ",t.namespaceSelector]}),l&&(o||s||i&&i.length>0)&&w.jsxs("div",{className:"font-mono text-[10px] text-amber-400/70 pl-3 leading-snug mt-0.5",children:[o&&o.length>0&&w.jsxs("div",{className:"truncate",children:[l,": ",w.jsx(gc,{cidrs:o,max:3})]}),s&&w.jsxs("div",{className:"truncate",children:[l,": ",s]}),i&&i.length>0&&w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsxs("span",{children:[l,":"]}),w.jsx(dd,{ports:i,highlight:!0})]})]}),t.notNets&&t.notNets.length>0&&w.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT: ",w.jsx(gc,{cidrs:t.notNets})]}),t.notPorts&&t.notPorts.length>0&&w.jsxs("div",{className:"font-mono text-[10px] text-red-400/70 pl-3 leading-snug",children:["NOT ports: ",t.notPorts.join(", ")]})]})}function oV(t,e){const n=[],i=[];return t.forEach((s,o)=>{s.nets&&s.nets.length>0?s.nets.forEach((l,c)=>{n.push({key:`${o}-cidr-${c}`,cidr:l,rule:s})}):i.push({key:`${o}-nonet`,rule:s})}),w.jsxs(w.Fragment,{children:[n.map(({key:s,cidr:o,rule:l})=>{const c=l.dstPorts??l.srcPorts,f=l.dstSelector??l.srcSelector,h=l.dstNets??l.srcNets,p=l.dstPorts||l.dstSelector||l.dstNets?"dst":l.srcPorts||l.srcSelector||l.srcNets?"src":null;return w.jsx(rV,{cidr:o,action:l.action,protocol:l.protocol,ports:l.ports,notNets:l.notNets,notPorts:l.notPorts,oppositeLabel:p,oppositePorts:c,oppositeSelector:f,oppositeNets:h,sourceRange:l.sourceRange,onHover:e},s)}),i.map(({key:s,rule:o})=>w.jsx(yN,{rule:o,onHover:e},s))]})}function lV(t){switch(t){case"outsideCluster":return"Any Endpoint";case"inNamespace":return"Any pod";case"inCluster":return"Everything in the cluster";default:return"All traffic"}}function aV({data:t}){const{dispatch:e}=Fl(),n=iV(t.category),i=nV(t.category),s=t.direction==="ingress",{groups:o}=t,l=t.category==="outsideCluster",c=U.useCallback(f=>{e({type:"HIGHLIGHT_LINES",payload:f})},[e]);return w.jsxs("div",{className:"min-w-[240px] max-w-[320px]",children:[s&&w.jsx(or,{type:"source",position:be.Right,id:"right",className:"!w-3 !h-3 !bg-slate-400 !border-2 !border-slate-600"}),!s&&w.jsx(or,{type:"target",position:be.Left,id:"left",className:"!w-3 !h-3 !bg-slate-400 !border-2 !border-slate-600"}),w.jsxs("div",{className:`rounded-xl border-2 ${n.border} ${n.bg} shadow-lg backdrop-blur-sm overflow-hidden`,children:[w.jsx("div",{className:`${n.headerBg} px-4 py-2 border-b ${n.border}`,children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:`text-lg ${n.iconBg} rounded-lg p-1 leading-none`,children:i}),w.jsxs("div",{children:[w.jsx("div",{className:"text-sm font-semibold text-slate-100",children:t.label}),w.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold",children:s?"Ingress Source":"Egress Destination"})]})]})}),w.jsxs("div",{className:"px-3 py-2 space-y-1.5",children:[o.rules.length===0&&t.unmanaged&&w.jsx("div",{className:"text-[11px] px-2.5 py-2 text-center text-green-400/80 font-semibold",children:lV(t.category)}),o.rules.length===0&&!t.unmanaged&&w.jsx("div",{className:"text-[11px] px-2.5 py-2 text-center text-slate-500 italic",children:"No rules"}),l&&o.rules.length>0&&oV(o.rules,c),!l&&o.rules.map((f,h)=>w.jsx(yN,{rule:f,onHover:c},h)),o.inferredStatuses&&o.inferredStatuses.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"border-t border-slate-600/40 my-1.5"}),o.inferredStatuses.map((f,h)=>{const p=f.state==="allowed"?"bg-green-500/5 border-green-500/15 text-green-400/80":f.state==="denied"?"bg-red-500/5 border-red-500/15 text-red-400/80":"bg-orange-500/5 border-orange-500/15 text-orange-400/80",g=f.state==="allowed"?"":f.state==="denied"?"":"",y=f.state==="allowed"?"text-green-400/70":f.state==="denied"?"text-red-400/70":"text-orange-400/70",v=f.state==="allowed"?"allowed":f.state==="denied"?"denied":"likely";return w.jsxs("div",{className:`text-[11px] px-2.5 py-1.5 rounded-lg border ${p}`,title:f.reason,children:[w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("span",{className:"text-[10px]",children:g}),w.jsx("span",{className:"font-semibold text-[10px]",children:f.label}),w.jsx("span",{className:`text-[10px] font-mono ${y}`,children:v})]}),w.jsx("div",{className:"text-[9px] opacity-60 pl-5 leading-snug mt-0.5",children:f.reason})]},h)})]})]})]})]})}const cV=U.memo(aV);function uV({id:t,sourceX:e,sourceY:n,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,style:c={},data:f,markerEnd:h}){const[p,g,y]=Jy({sourceX:e,sourceY:n,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),v=c?.stroke||"#64748b";let b="";if(f?.category!=="outsideCluster"&&f?.rules&&f.rules.length>0){const S=f.rules.map(A=>{const N=[];A.protocol&&N.push(A.protocol);const O=A.ports&&A.ports.length>0?A.ports:A.dstPorts&&A.dstPorts.length>0?A.dstPorts:A.srcPorts&&A.srcPorts.length>0?A.srcPorts:[];return O.length>0&&N.push(`:${O.join(",")}`),N.join("")||A.action});b=[...new Set(S)].join(" | ")}return w.jsxs(w.Fragment,{children:[w.jsx(eu,{id:t,path:p,markerEnd:h,style:{...c,strokeWidth:2,stroke:v}}),b&&w.jsx(s6,{children:w.jsx("div",{className:"px-2 py-0.5 rounded-md text-[10px] font-mono font-semibold border backdrop-blur-sm whitespace-nowrap",style:{position:"absolute",transform:`translate(-50%, -50%) translate(${g}px, ${y}px)`,pointerEvents:"all",backgroundColor:`${v}15`,borderColor:`${v}40`,color:v},children:b})})]})}const fV=U.memo(uV);function Oh(t){return typeof t=="number"?String(t):t}function _y(t,e){return!t||t.nets&&t.nets.length>0?"outsideCluster":t.services?"inCluster":t.serviceAccounts?t.namespaceSelector?"inCluster":e?"inNamespace":"inCluster":t.namespaceSelector?"inCluster":t.selector?e?"inNamespace":"inCluster":"outsideCluster"}function Vr(t){return!t||t.length===0?[]:t.map(Oh)}function ZC(t,e,n){const i=e==="ingress"?t.source:t.destination,s=e==="ingress"?t.destination:t.source,o=[];if(o.push(`${t.action}`),t.protocol&&o.push(`${t.protocol}`),i?.ports&&i.ports.length>0&&o.push(`port${i.ports.length>1?"s":""} ${Vr(i.ports).join(", ")}`),i?.nets&&i.nets.length>0&&(i.nets.length<=3?o.push(`to ${i.nets.join(", ")}`):o.push(`to ${i.nets.length} CIDRs`)),i?.selector&&o.push(`selector: ${i.selector}`),i?.namespaceSelector&&o.push(`ns: ${i.namespaceSelector}`),i?.services&&o.push(`svc: ${i.services.name}/${i.services.namespace}`),i?.serviceAccounts&&(i.serviceAccounts.names&&i.serviceAccounts.names.length>0&&o.push(`sa: ${i.serviceAccounts.names.join(", ")}`),i.serviceAccounts.selector&&o.push(`sa selector: ${i.serviceAccounts.selector}`)),i?.notNets&&i.notNets.length>0&&o.push(`NOT nets: ${i.notNets.join(", ")}`),i?.notPorts&&i.notPorts.length>0&&o.push(`NOT ports: ${Vr(i.notPorts).join(", ")}`),s?.ports&&s.ports.length>0){const l=e==="ingress"?"dst":"src";o.push(`${l} port${s.ports.length>1?"s":""} ${Vr(s.ports).join(", ")}`)}if(s?.selector){const l=e==="ingress"?"dst":"src";o.push(`${l}: ${s.selector}`)}return{action:t.action,protocol:t.protocol?String(t.protocol):void 0,ports:i?.ports?Vr(i.ports):void 0,nets:i?.nets,notNets:i?.notNets,selector:i?.selector,notSelector:i?.notSelector,namespaceSelector:i?.namespaceSelector,notPorts:i?.notPorts?Vr(i.notPorts):void 0,services:i?.services,serviceAccounts:i?.serviceAccounts,description:o.join(" "),dstPorts:e==="ingress"&&s?.ports?Vr(s.ports):void 0,dstSelector:e==="ingress"?s?.selector:void 0,dstNets:e==="ingress"?s?.nets:void 0,srcPorts:e==="egress"&&s?.ports?Vr(s.ports):void 0,srcSelector:e==="egress"?s?.selector:void 0,srcNets:e==="egress"?s?.nets:void 0,sourceRange:n}}const hV=["169.254.25.10"],dV=["coredns","nodelocaldns","node-local-dns"],pV=["kube-dns"];function gV(t,e){const n=e==="ingress"?t.source:t.destination;return n?!!(n.services&&pV.includes(n.services.name)||n.serviceAccounts?.names&&n.serviceAccounts.names.some(i=>dV.includes(i))||n.nets&&hV.some(i=>n.nets.some(s=>Ry(s,i)))||n.ports&&n.ports.some(i=>i===53||i==="53")):!1}function xN(t){return t?!!(t.nets&&t.nets.length>0||t.ports&&t.ports.length>0||t.selector||t.namespaceSelector||t.services||t.serviceAccounts||t.notNets&&t.notNets.length>0||t.notPorts&&t.notPorts.length>0||t.notSelector):!1}function JC(t,e){if(t.protocol)return!1;const n=e==="ingress"?t.destination:t.source;if(xN(n))return!1;const i=e==="ingress"?t.source:t.destination;return!!(!i||i.nets&&gN(i.nets))}function $c(t,e){if(t.protocol)return!1;const n=e==="ingress"?t.destination:t.source;if(xN(n))return!1;const i=e==="ingress"?t.source:t.destination;return!!(!i||i.nets&&i.nets.length===1&&i.nets[0]==="0.0.0.0/0"&&!i.ports)}function pd(t,e,n){let i=!1;for(const s of t){if(!$c(s,e)){s.action==="Deny"&&(i=!0);continue}if(!(s.action==="Log"||s.action==="Pass")){if(s.action==="Allow")return i?"deny":"allow";if(s.action==="Deny")return"deny"}}return n==="allow"?"allow":"deny"}function ek(t,e){let n=!1;for(const i of t){if(!$c(i,e)){i.action==="Deny"&&(n=!0);continue}if(!(i.action==="Log"||i.action==="Pass"))return i.action==="Allow"?n:!1}return!1}function By(t,e){const n=[],i=" (traffic is also logged)";let s=!1,o="denied",l="",c=!1;for(const y of t){if(s)break;if(gV(y,e)){if(y.action==="Log"){c=!0;continue}y.action==="Allow"?(s=!0,o="allowed",l="Explicit allow rule matches DNS"):y.action==="Deny"&&(s=!0,o="denied",l="Explicit deny rule matches DNS");continue}if(JC(y,e)){if(y.action==="Log"){c=!0;continue}y.action==="Deny"?(s=!0,o="denied",l="Denied by broad private-range deny rule"):y.action==="Allow"&&$c(y,e)&&(s=!0,o="allowed",l="Allowed by unrestricted allow rule")}}s||(l="No matching rule found; depends on policy default"),c&&(l+=i),n.push({label:"Kubernetes DNS",state:o,reason:l});let f=!1,h="denied",p="",g=!1;for(const y of t){if(f)break;if(JC(y,e)){if(y.action==="Log"){g=!0;continue}y.action==="Allow"?(f=!0,h="allowed",p="Broad allow covers all cluster traffic"):y.action==="Deny"&&(f=!0,h="denied",p="Broad deny blocks all cluster traffic")}if(!f&&$c(y,e)){if(y.action==="Log"){g=!0;continue}y.action==="Allow"?(f=!0,h="allowed",p="Unrestricted allow rule covers everything"):y.action==="Deny"&&(f=!0,h="denied",p="Unrestricted deny rule blocks everything")}}return f||(p="No matching rule found; depends on policy default"),g&&(p+=i),n.push({label:"Everything in the cluster",state:h,reason:p}),n}function mV(t,e,n){const i=e==="ingress"?t.source:t.destination;if(!i)return"direct";if(_y(i,n)==="inNamespace"){if(i.selector==="all()")return"direct";if(i.serviceAccounts){const o=i.serviceAccounts.names&&i.serviceAccounts.names.length>0,l=!!i.serviceAccounts.selector;if(!o&&!l)return"direct"}return!i.selector&&!i.serviceAccounts&&!i.services&&!i.nets?"direct":!1}return i.nets&&gN(i.nets)||$c(t,e)?"implicit":!1}function zy(t,e,n){if(!n)return[];const i=[],s=" (traffic is also logged)";let o=!1,l="denied",c="",f=!1;for(const h of t){if(o)break;const p=mV(h,e,n);if(p){if(h.action==="Log"){f=!0;continue}p==="direct"?h.action==="Allow"?(o=!0,l="allowed",c="Explicit allow rule targets all pods in namespace"):h.action==="Deny"&&(o=!0,l="denied",c="Explicit deny rule targets all pods in namespace"):p==="implicit"&&(h.action==="Allow"?(o=!0,l="uncertain",c="Broad CIDR allow may cover pod IPs (network-topology dependent)"):h.action==="Deny"&&(o=!0,l="uncertain",c="Broad CIDR deny may block pod IPs (network-topology dependent)"))}}return o||(c="No matching rule found; depends on policy default"),f&&(c+=s),i.push({label:"Any pod",state:l,reason:c}),i}function tk(t){switch(t){case"outsideCluster":return"Outside Cluster";case"inNamespace":return"In Namespace";case"inCluster":return"In Cluster"}}function yV(t,e){const n=[],i=[],s=pd(t.ingressRules,"ingress",t.ingressDefault),o=pd(t.egressRules,"egress",t.egressDefault),l={name:t.name,namespace:t.namespace,kind:t.kind,selector:t.selector,tier:t.tier,order:t.order,namespaceSelector:t.namespaceSelector,serviceAccountSelector:t.serviceAccountSelector,ingressDefault:t.ingressDefault,egressDefault:t.egressDefault,effectiveIngressDefault:s,effectiveEgressDefault:o,applyOnForward:t.raw.spec.applyOnForward||void 0,preDNAT:t.raw.spec.preDNAT||void 0,doNotTrack:t.raw.spec.doNotTrack||void 0};n.push({id:"policy-center",type:"policyNode",position:{x:500,y:200},data:l,draggable:!0});const c=e?.ingress??[],f=new Map;for(let A=0;A<t.ingressRules.length;A++){const N=t.ingressRules[A],O=N.source,M=_y(O,t.namespace),_=A<c.length?c[A]:void 0,L=ZC(N,"ingress",_);f.has(M)||f.set(M,{rules:[],hasAllow:!1,hasDeny:!1,hasLog:!1});const R=f.get(M);R.rules.push(L),N.action==="Allow"&&(R.hasAllow=!0),N.action==="Deny"&&(R.hasDeny=!0),N.action==="Log"&&(R.hasLog=!0)}const h=e?.egress??[],p=new Map;for(let A=0;A<t.egressRules.length;A++){const N=t.egressRules[A],O=N.destination,M=_y(O,t.namespace),_=A<h.length?h[A]:void 0,L=ZC(N,"egress",_);p.has(M)||p.set(M,{rules:[],hasAllow:!1,hasDeny:!1,hasLog:!1});const R=p.get(M);R.rules.push(L),N.action==="Allow"&&(R.hasAllow=!0),N.action==="Deny"&&(R.hasDeny=!0),N.action==="Log"&&(R.hasLog=!0)}const g=["outsideCluster","inNamespace","inCluster"],y=220;function v(A,N,O,M,_,L){const R=L!==!1,X=R?By(M,A):void 0,$=R?zy(M,A,_):void 0;let ne=50;for(const q of g){const Q=N.get(q),Z=!Q||Q.rules.length===0,B=`${A}-${q}`,V=R?q==="inCluster"?X:q==="inNamespace"&&$&&$.length>0?$:void 0:void 0,T={category:q,label:tk(q),rules:Q?.rules??[],hasAllow:Q?.hasAllow??!1,hasDeny:Q?.hasDeny??!1,hasLog:Q?.hasLog??!1,inferredStatuses:V},P={category:q,label:tk(q),direction:A,groups:T,unmanaged:!R||void 0};if(n.push({id:B,type:"ruleNode",position:{x:O,y:ne},data:P,draggable:!0}),R)if(Z){const H={action:"Allow",rules:[],category:q},z={id:`edge-${B}`,type:"policyEdge",data:H,style:{stroke:"#475569",strokeWidth:1,strokeDasharray:"6 4",opacity:.4},animated:!1,markerEnd:{type:eo.ArrowClosed,color:"#475569",width:16,height:16}};A==="ingress"?i.push({...z,source:B,target:"policy-center",sourceHandle:"right",targetHandle:"left"}):i.push({...z,source:"policy-center",target:B,sourceHandle:"right",targetHandle:"left"})}else{const H=Q.hasAllow,z=Q.hasDeny,D=Q.hasLog&&!H&&!z,j=D||z&&H?"#f59e0b":z?"#ef4444":"#22c55e",ie={action:D?"Log":z?"Deny":"Allow",rules:Q.rules,category:q},ce={id:`edge-${B}`,type:"policyEdge",data:ie,style:{stroke:j,strokeWidth:2},animated:!0,markerEnd:{type:eo.ArrowClosed,color:j,width:16,height:16}};A==="ingress"?i.push({...ce,source:B,target:"policy-center",sourceHandle:"right",targetHandle:"left"}):i.push({...ce,source:"policy-center",target:B,sourceHandle:"right",targetHandle:"left"})}else{const H={action:"Allow",rules:[],category:q},z={id:`edge-${B}`,type:"policyEdge",data:H,style:{stroke:"#22c55e",strokeWidth:2},animated:!0,markerEnd:{type:eo.ArrowClosed,color:"#22c55e",width:16,height:16}};A==="ingress"?i.push({...z,source:B,target:"policy-center",sourceHandle:"right",targetHandle:"left"}):i.push({...z,source:"policy-center",target:B,sourceHandle:"right",targetHandle:"left"})}ne+=y}}const b=t.types.includes("Ingress");v("ingress",f,0,t.ingressRules,t.namespace,b);const S=t.types.includes("Egress");v("egress",p,1e3,t.egressRules,t.namespace,S);const k=n.filter(A=>A.id!=="policy-center").map(A=>A.position.y);if(k.length>0){const A=Math.min(...k),N=Math.max(...k),O=(A+N)/2,M=n.find(_=>_.id==="policy-center");M&&(M.position.y=O)}return{nodes:n,edges:i}}const xV={policyNode:ZI,ruleNode:cV},vV={policyEdge:fV};function bV(){const{state:t,dispatch:e}=Fl(),[n,i,s]=r6([]),[o,l,c]=o6([]),{fitView:f}=Dd(),h=U.useRef(0);U.useEffect(()=>{if(t.policy)try{const v=yV(t.policy,t.ruleLineRanges);i(v.nodes),l(v.edges),v.nodes.length!==h.current&&(h.current=v.nodes.length,setTimeout(()=>f({padding:.3,duration:300}),50))}catch(v){console.error("policyToGraph failed:",v),e({type:"SET_ERROR",payload:v instanceof Error?v.message:"Failed to build graph"})}else i([]),l([]),h.current=0},[t.policy,t.ruleLineRanges,i,l,f,e]);const p=U.useCallback((v,b)=>{e({type:"SELECT_NODE",payload:b.id})},[e]),g=U.useCallback(()=>{e({type:"SELECT_NODE",payload:null})},[e]),y=U.useMemo(()=>({type:"policyEdge",animated:!0}),[]);return t.policy?w.jsxs(n6,{nodes:n,edges:o,onNodesChange:s,onEdgesChange:c,onNodeClick:p,onPaneClick:g,nodeTypes:xV,edgeTypes:vV,defaultEdgeOptions:y,fitView:!0,fitViewOptions:{padding:.3},minZoom:.1,maxZoom:2,proOptions:{hideAttribution:!0},className:"bg-slate-900",children:[w.jsx(x6,{showInteractive:!1,className:"!bg-slate-800 !border-slate-700 !rounded-lg !shadow-lg"}),w.jsx(f6,{variant:hs.Dots,gap:20,size:1,color:"#1e293b"})]}):w.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:w.jsxs("div",{className:"text-center space-y-3",children:[w.jsx("div",{className:"text-5xl opacity-30",children:w.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),w.jsx("p",{className:"text-sm",children:"Import a Calico NetworkPolicy or GlobalNetworkPolicy YAML to visualize"})]})})}function nk(t){const e=typeof t=="number"?t:parseInt(t,10);return isNaN(e)?"":{53:"DNS",80:"HTTP",443:"HTTPS",22:"SSH",25:"SMTP",110:"POP3",143:"IMAP",993:"IMAPS",995:"POP3S",3306:"MySQL",5432:"PostgreSQL",6379:"Redis",27017:"MongoDB",8080:"HTTP-ALT",8443:"HTTPS-ALT",9090:"Prometheus",9093:"Alertmanager",2379:"etcd",6443:"K8s API",10250:"Kubelet"}[e]||""}function SV(t){return t?String(t):"any protocol"}function ik(t,e){const n=e==="ingress"?t.source:t.destination,i=e==="ingress"?t.destination:t.source,s=[],o=t.action==="Allow"?"+":t.action==="Deny"?"x":t.action==="Log"?"!":"~";if(s.push(`[${o}] ${t.action}`),s.push(e==="ingress"?"incoming":"outgoing"),t.protocol?s.push(`${SV(t.protocol)} traffic`):s.push("traffic"),n?.ports&&n.ports.length>0){const l=n.ports.map(c=>{const f=nk(c),h=Oh(c);return f?`${h} (${f})`:h});s.push(`on port${n.ports.length>1?"s":""} ${l.join(", ")}`)}if(n?.nets&&n.nets.length>0){const l=e==="ingress"?"from":"to";n.nets.length<=3?s.push(`${l} ${n.nets.join(", ")}`):s.push(`${l} ${n.nets.length} CIDR ranges`)}if(n?.selector){const l=e==="ingress"?"from":"to";s.push(`${l} pods matching: ${n.selector}`)}if(n?.namespaceSelector&&s.push(`in namespaces matching: ${n.namespaceSelector}`),n?.services){const l=e==="ingress"?"from":"to";s.push(`${l} service: ${n.services.namespace}/${n.services.name}`)}if(n?.serviceAccounts){const l=e==="ingress"?"from":"to";n.serviceAccounts.names&&n.serviceAccounts.names.length>0?s.push(`${l} service account${n.serviceAccounts.names.length>1?"s":""}: ${n.serviceAccounts.names.join(", ")}`):n.serviceAccounts.selector&&s.push(`${l} service accounts matching: ${n.serviceAccounts.selector}`)}if(n?.notNets&&n.notNets.length>0&&s.push(`(excluding ${n.notNets.join(", ")})`),n?.notPorts&&n.notPorts.length>0&&s.push(`(excluding ports ${n.notPorts.map(Oh).join(", ")})`),n?.notSelector&&s.push(`(excluding pods matching: ${n.notSelector})`),!n||!n.nets&&!n.selector&&!n.services&&!n.serviceAccounts){const l=e==="ingress"?"from any source":"to any destination";s.push(l)}if(i){const l=e==="ingress"?"destined for":"originating from";if(i.nets&&i.nets.length>0&&(i.nets.length<=3?s.push(`${l} ${i.nets.join(", ")}`):s.push(`${l} ${i.nets.length} CIDR ranges`)),i.selector&&s.push(`${l} pods matching: ${i.selector}`),i.ports&&i.ports.length>0){const c=i.ports.map(h=>{const p=nk(h),g=Oh(h);return p?`${g} (${p})`:g}),f=e==="ingress"?"dst":"src";s.push(`(${f} port${i.ports.length>1?"s":""} ${c.join(", ")})`)}}return s.join(" ")}function wV(t){const e=[],n=[];n.push(`Kind: ${t.kind}`),n.push(`Name: ${t.name}`),t.namespace&&n.push(`Namespace: ${t.namespace}`),n.push(`Tier: ${t.tier}`),t.order!==void 0&&n.push(`Order: ${t.order} (${t.order<100?"high priority":t.order>5e3?"low priority":"medium priority"})`),n.push(`Applies to: ${t.selector}`),t.namespaceSelector&&n.push(`Namespace selector: ${t.namespaceSelector}`),n.push(`Policy types: ${t.types.join(", ")}`),e.push({title:"Policy Overview",items:n,type:"info"});const i=t.raw.spec;if(i.preDNAT||i.applyOnForward||i.doNotTrack){const l=[];i.preDNAT&&l.push("preDNAT: ENABLED -- Rules are applied before DNAT (destination NAT). This means the policy sees the original destination IP before kube-proxy rewrites it to a pod IP. Required when you want to control access to Kubernetes Service ClusterIPs or NodePorts at the host level."),i.applyOnForward&&l.push("applyOnForward: ENABLED -- Rules are applied to forwarded traffic (traffic that arrives on the host and is forwarded to a local pod or another host). Without this flag, host endpoint policies only affect traffic that is destined for or originates from the host itself. Required together with preDNAT for controlling access to services via ClusterIPs/NodePorts."),i.doNotTrack&&l.push("doNotTrack: ENABLED -- Rules are applied before Linux conntrack. Traffic matching these rules is not tracked by conntrack, which improves performance for high-throughput, stateless traffic (e.g., memcached, load balancers). Both request and response traffic must be explicitly allowed since there is no connection tracking."),i.preDNAT&&i.applyOnForward&&(l.push("---"),l.push("Combined effect: This policy acts as a host-level firewall that controls access to ClusterIPs and NodePorts before NAT translation occurs. It applies to traffic arriving on the host and being forwarded to backend pods. This is the standard pattern for restricting external access to specific Kubernetes services.")),e.push({title:"Policy Flags",items:l,type:"warning"})}const o=[];if(t.types.includes("Ingress")){const l=pd(t.ingressRules,"ingress",t.ingressDefault);l==="allow"&&t.ingressDefault==="deny"?o.push("Ingress effective default: ALLOW (catch-all allow rule overrides the implicit deny)"):l==="deny"&&ek(t.ingressRules,"ingress")?o.push("Ingress default: DENY (deny rules restrict traffic before the catch-all allow)"):o.push("Ingress default: DENY (all ingress traffic not matched by a rule is denied)")}else o.push("Ingress: Not managed by this policy");if(t.types.includes("Egress")){const l=pd(t.egressRules,"egress",t.egressDefault);l==="allow"&&t.egressDefault==="deny"?o.push("Egress effective default: ALLOW (catch-all allow rule overrides the implicit deny)"):l==="deny"&&ek(t.egressRules,"egress")?o.push("Egress default: DENY (deny rules restrict traffic before the catch-all allow)"):o.push("Egress default: DENY (all egress traffic not matched by a rule is denied)")}else o.push("Egress: Not managed by this policy");if(e.push({title:"Default Behavior",items:o,type:"warning"}),t.types.includes("Ingress")){const l=t.ingressRules.map(h=>ik(h,"ingress")),c=zy(t.ingressRules,"ingress",t.namespace),f=By(t.ingressRules,"ingress");l.push("---");for(const h of[...c,...f]){const p=h.state==="allowed"?"[+]":h.state==="denied"?"[x]":"[?]",g=h.state==="allowed"?"Allowed":h.state==="denied"?"Denied":"Likely";l.push(`${p} ${h.label}: ${g}  ${h.reason}`)}e.push({title:`Ingress Rules (${t.ingressRules.length})`,items:l,type:"ingress"})}else e.push({title:"Ingress (not managed)",items:["[+] All traffic allowed  this policy does not restrict ingress"],type:"ingress"});if(t.types.includes("Egress")){const l=t.egressRules.map(h=>ik(h,"egress")),c=zy(t.egressRules,"egress",t.namespace),f=By(t.egressRules,"egress");l.push("---");for(const h of[...c,...f]){const p=h.state==="allowed"?"[+]":h.state==="denied"?"[x]":"[?]",g=h.state==="allowed"?"Allowed":h.state==="denied"?"Denied":"Likely";l.push(`${p} ${h.label}: ${g}  ${h.reason}`)}e.push({title:`Egress Rules (${t.egressRules.length})`,items:l,type:"egress"})}else e.push({title:"Egress (not managed)",items:["[+] All traffic allowed  this policy does not restrict egress"],type:"egress"});return e}function CV({type:t}){switch(t){case"info":return w.jsx("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});case"ingress":return w.jsx("svg",{className:"w-4 h-4 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17l-5-5m0 0l5-5m-5 5h12"})});case"egress":return w.jsx("svg",{className:"w-4 h-4 text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})});case"warning":return w.jsx("svg",{className:"w-4 h-4 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}}function kV(t){switch(t){case"info":return"border-l-indigo-500";case"ingress":return"border-l-cyan-500";case"egress":return"border-l-orange-500";case"warning":return"border-l-amber-500"}}function AV(){const{state:t}=Fl();if(!t.policy)return null;let e;try{e=wV(t.policy)}catch(n){return console.error("explainPolicy failed:",n),w.jsx("div",{className:"h-full flex items-center justify-center p-4 bg-slate-900/50",children:w.jsxs("p",{className:"text-xs text-red-400",children:["Failed to generate explanation: ",n instanceof Error?n.message:"Unknown error"]})})}return w.jsxs("div",{className:"h-full overflow-y-auto p-4 bg-slate-900/50",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[w.jsx("svg",{className:"w-5 h-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),w.jsx("h3",{className:"text-sm font-semibold text-slate-200",children:"Policy Explanation"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:e.map((n,i)=>w.jsxs("div",{className:`bg-slate-800/60 rounded-lg border border-slate-700/50 border-l-2 ${kV(n.type)} overflow-hidden`,children:[w.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-slate-700/50 bg-slate-800/40",children:[w.jsx(CV,{type:n.type}),w.jsx("span",{className:"text-xs font-semibold text-slate-300",children:n.title})]}),w.jsx("div",{className:"px-3 py-2 space-y-1",children:n.items.map((s,o)=>s==="---"?w.jsx("div",{className:"border-t border-slate-600/50 my-1.5"},o):w.jsx("div",{className:"text-[11px] text-slate-400 leading-relaxed",children:s.startsWith("[+]")?w.jsxs("span",{children:[w.jsx("span",{className:"text-green-400 font-semibold",children:"[ALLOW]"}),s.substring(3)]}):s.startsWith("[x]")?w.jsxs("span",{children:[w.jsx("span",{className:"text-red-400 font-semibold",children:"[DENY]"}),s.substring(3)]}):s.startsWith("[?]")?w.jsxs("span",{children:[w.jsx("span",{className:"text-orange-400 font-semibold",children:"[LIKELY]"}),s.substring(3)]}):s.startsWith("[!]")?w.jsxs("span",{children:[w.jsx("span",{className:"text-amber-400 font-semibold",children:"[LOG]"}),s.substring(3)]}):s.startsWith("[~]")?w.jsxs("span",{children:[w.jsx("span",{className:"text-blue-400 font-semibold",children:"[PASS]"}),s.substring(3)]}):s},o))})]},i))})]})}const OV=["Baseline / Zero Trust","Pod & Namespace Scoping","Database & Stateful Workloads","Gateway API & Ingress Controller","Egress Control & Internet Access","Port & Protocol Restrictions","ServiceAccount-Aware Policies (Calico-Specific)","GlobalNetworkPolicy & Cluster Protection","Production Reference Architectures"],vN=[{id:"default-deny-all",name:"default-deny-all",description:"Denies all ingress and egress traffic for pods in a namespace (zero-trust baseline).",category:"Baseline / Zero Trust",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: default-deny-all
  namespace: production
spec:
  selector: all()
  types:
    - Ingress
    - Egress`},{id:"allow-app-to-app-same-namespace",name:"allow-app-to-app-same-namespace",description:"Allows traffic only between pods with matching labels in one namespace.",category:"Pod & Namespace Scoping",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-app-to-app-same-namespace
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
    - Egress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'api'
      destination:
        ports:
          - 8080
  egress:
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'api'
        ports:
          - 8080`},{id:"allow-cross-namespace-by-label",name:"allow-cross-namespace-by-label",description:"Allows ingress from pods in another namespace using pod + namespace selectors.",category:"Pod & Namespace Scoping",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-cross-namespace-by-label
  namespace: backend
spec:
  selector: app == 'api-server'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'frontend'
        namespaceSelector: team == 'web'
      destination:
        ports:
          - 443`},{id:"allow-namespace-to-namespace",name:"allow-namespace-to-namespace",description:"Allows all traffic from one namespace to another (e.g., app to db namespace).",category:"Pod & Namespace Scoping",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-namespace-to-namespace
  namespace: database
spec:
  selector: all()
  types:
    - Ingress
  ingress:
    - action: Allow
      source:
        namespaceSelector: "projectcalico.org/name == 'application'"`},{id:"allow-db-access-from-app-namespace",name:"allow-db-access-from-app-namespace",description:"Allows application namespace to access DB pods on database ports only.",category:"Database & Stateful Workloads",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-db-access-from-app-namespace
  namespace: database
spec:
  selector: role == 'database'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: role == 'app-server'
        namespaceSelector: "projectcalico.org/name == 'application'"
      destination:
        ports:
          - 5432
          - 3306`},{id:"only-allow-ingress-nginx",name:"only-allow-ingress-nginx",description:"Allows ingress traffic only from ingress-nginx namespace pods.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: only-allow-ingress-nginx
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'ingress-nginx'
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080`},{id:"deny-direct-pod-access",name:"deny-direct-pod-access",description:"Denies all ingress except from the ingress controller, forcing traffic through the gateway.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: deny-direct-pod-access
  namespace: production
spec:
  selector: app == 'web'
  order: 100
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080
    - action: Deny`},{id:"allow-ingress-nginx-egress",name:"allow-ingress-nginx-egress",description:"Restricts application pod egress to only the ingress-nginx services.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-ingress-nginx-egress
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'ingress-nginx'
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
        ports:
          - 80
          - 443`},{id:"gateway-api-allow-traffic",name:"gateway-api-allow-traffic",description:"Allows backend pods to receive HTTPS traffic from Gateway API controller pods.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: gateway-api-allow-traffic
  namespace: production
spec:
  selector: app == 'backend'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app.kubernetes.io/component == 'gateway'
        namespaceSelector: "projectcalico.org/name == 'gateway-system'"
      destination:
        ports:
          - 443`},{id:"gateway-api-default-deny-with-exception",name:"gateway-api-default-deny-with-exception",description:"Default deny all ingress with explicit allow only from Gateway API on port 443.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: gateway-api-default-deny-with-exception
  namespace: production
spec:
  selector: app == 'backend'
  order: 100
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        selector: app.kubernetes.io/component == 'gateway'
        namespaceSelector: "projectcalico.org/name == 'gateway-system'"
      destination:
        ports:
          - 443
    - action: Deny`},{id:"gateway-api-cross-namespace-routing",name:"gateway-api-cross-namespace-routing",description:"Allows Gateway API traffic from gateway-system namespace to backend in production namespace.",category:"Gateway API & Ingress Controller",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: gateway-api-cross-namespace-routing
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'gateway-system'"
      destination:
        ports:
          - 443`},{id:"allow-dns-only",name:"allow-dns-only",description:"Allows egress only to DNS (TCP/UDP 53); required for name resolution.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-dns-only
  namespace: production
spec:
  selector: all()
  types:
    - Egress
  egress:
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    - action: Allow
      protocol: TCP
      destination:
        ports:
          - 53`},{id:"allow-kubernetes-api",name:"allow-kubernetes-api",description:"Allows egress to the Kubernetes API server endpoint (port 6443).",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-kubernetes-api
  namespace: production
spec:
  selector: app == 'controller'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.1/32
        ports:
          - 6443`},{id:"allow-internet-access",name:"allow-internet-access",description:"Allows egress to 0.0.0.0/0 for unrestricted public internet access.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-internet-access
  namespace: production
spec:
  selector: app == 'external-client'
  types:
    - Egress
  egress:
    - action: Allow
      destination:
        nets:
          - 0.0.0.0/0`},{id:"allow-internet-except-private",name:"allow-internet-except-private",description:"Allows internet egress but denies RFC 1918 / private networks.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-internet-except-private
  namespace: production
spec:
  selector: app == 'saas-connector'
  types:
    - Egress
  egress:
    - action: Allow
      destination:
        nets:
          - 0.0.0.0/0
        notNets:
          - 10.0.0.0/8
          - 172.16.0.0/12
          - 192.168.0.0/16`},{id:"allow-specific-external-ips",name:"allow-specific-external-ips",description:"Allows egress only to approved external IPs or CIDR ranges.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-specific-external-ips
  namespace: production
spec:
  selector: app == 'payment-gateway'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 203.0.113.0/24
          - 198.51.100.10/32
         ports:
           - 443`},{id:"allow-egress-to-service",name:"allow-egress-to-service",description:"Allows egress only to a specific Kubernetes service (kube-dns). Uses Calico service match.",category:"Egress Control & Internet Access",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-egress-to-service
  namespace: production
spec:
  selector: app == 'backend'
  types:
    - Egress
  egress:
    - action: Allow
      protocol: UDP
      destination:
        services:
          name: kube-dns
          namespace: kube-system
        ports:
          - 53
    - action: Allow
      protocol: TCP
      destination:
        services:
          name: redis-master
          namespace: cache
        ports:
          - 6379`},{id:"allow-specific-tcp-ports",name:"allow-specific-tcp-ports",description:"Allows ingress traffic only on approved TCP ports (80, 443, 5432).",category:"Port & Protocol Restrictions",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-specific-tcp-ports
  namespace: production
spec:
  selector: app == 'multi-service'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      destination:
        ports:
          - 80
          - 443
          - 5432`},{id:"allow-udp-only",name:"allow-udp-only",description:"Restricts all ingress traffic to UDP protocol only (e.g., DNS or game server).",category:"Port & Protocol Restrictions",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-udp-only
  namespace: production
spec:
  selector: app == 'dns-server'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    - action: Deny`},{id:"allow-metrics-port",name:"allow-metrics-port",description:"Allows access only to Prometheus metrics ports (9090/9091) from the monitoring namespace.",category:"Port & Protocol Restrictions",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-metrics-port
  namespace: production
spec:
  selector: has(app)
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'monitoring'"
      destination:
        ports:
          - 9090
          - 9091`},{id:"allow-k8s-api-by-serviceaccount",name:"allow-k8s-api-by-serviceaccount",description:"Allows Kubernetes API access only for pods running under specific ServiceAccounts.",category:"ServiceAccount-Aware Policies (Calico-Specific)",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-k8s-api-by-serviceaccount
  namespace: production
spec:
  serviceAccountSelector: "projectcalico.org/name == 'api-controller'"
  types:
    - Egress
  egress:
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.1/32
        ports:
          - 6443`},{id:"allow-db-by-serviceaccount",name:"allow-db-by-serviceaccount",description:"Restricts database ingress to workloads running under approved ServiceAccounts.",category:"ServiceAccount-Aware Policies (Calico-Specific)",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-db-by-serviceaccount
  namespace: database
spec:
  selector: role == 'database'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        serviceAccounts:
          names:
            - backend-api
            - migration-runner
      destination:
        ports:
          - 5432`},{id:"allow-ingress-by-ingress-sa",name:"allow-ingress-by-ingress-sa",description:"Allows ingress traffic only from the ingress controller ServiceAccount.",category:"ServiceAccount-Aware Policies (Calico-Specific)",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-ingress-by-ingress-sa
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        serviceAccounts:
          selector: "role == 'ingress-controller'"
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080`},{id:"gnp-protect-kubernetes-api",name:"gnp-protect-kubernetes-api",description:"Restricts kube-apiserver access to authorized CIDRs and control-plane nodes.",category:"GlobalNetworkPolicy & Cluster Protection",yaml:`apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: protect-kubernetes-api
spec:
  order: 10
  selector: has(node-role.kubernetes.io/control-plane)
  types:
    - Ingress
  ingress:
    - action: Allow
      protocol: TCP
      source:
        nets:
          - 10.0.0.0/8
      destination:
        ports:
          - 6443
    - action: Allow
      protocol: TCP
      source:
        selector: has(node-role.kubernetes.io/control-plane)
      destination:
        ports:
          - 6443
    - action: Deny
      protocol: TCP
      destination:
        ports:
          - 6443`},{id:"gnp-lock-down-control-plane",name:"gnp-lock-down-control-plane",description:"Protects etcd, kubelet, and control-plane ports from unauthorized access.",category:"GlobalNetworkPolicy & Cluster Protection",yaml:`apiVersion: projectcalico.org/v3
kind: GlobalNetworkPolicy
metadata:
  name: lock-down-control-plane
spec:
  order: 5
  selector: has(node-role.kubernetes.io/control-plane)
  types:
    - Ingress
  ingress:
    # Allow etcd peer traffic between control-plane nodes
    - action: Allow
      protocol: TCP
      source:
        selector: has(node-role.kubernetes.io/control-plane)
      destination:
        ports:
          - 2379
          - 2380
    # Allow kubelet API from control-plane nodes
    - action: Allow
      protocol: TCP
      source:
        selector: has(node-role.kubernetes.io/control-plane)
      destination:
        ports:
          - 10250
    # Allow kube-apiserver
    - action: Allow
      protocol: TCP
      destination:
        ports:
          - 6443
    # Allow localhost
    - action: Allow
      destination:
        nets:
          - 127.0.0.0/8
    # Deny everything else to control-plane ports
    - action: Deny
      protocol: TCP
      destination:
        ports:
          - 2379
          - 2380
          - 10250
          - 10259
          - 10257`},{id:"secure-web-application",name:"secure-web-application",description:"Web app reachable only via ingress, DB access restricted, controlled egress.",category:"Production Reference Architectures",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: secure-web-application
  namespace: production
spec:
  selector: app == 'web'
  types:
    - Ingress
    - Egress
  ingress:
    # Only accept traffic from ingress controller
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'ingress-nginx'"
      destination:
        ports:
          - 8080
    - action: Deny
  egress:
    # Allow DNS resolution
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    # Allow access to backend API
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'api'
        ports:
          - 8443
    # Allow access to database
    - action: Allow
      protocol: TCP
      destination:
        selector: role == 'database'
        namespaceSelector: "projectcalico.org/name == 'database'"
        ports:
          - 5432
    - action: Deny`},{id:"secure-ci-runner",name:"secure-ci-runner",description:"CI runner with kube-api, container registry, and limited internet access.",category:"Production Reference Architectures",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: secure-ci-runner
  namespace: ci
spec:
  selector: app == 'ci-runner'
  types:
    - Ingress
    - Egress
  ingress:
    # Only allow CI controller to reach runners
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'ci-controller'
      destination:
        ports:
          - 8089
    - action: Deny
  egress:
    # DNS resolution
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    # Kubernetes API
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.1/32
        ports:
          - 6443
    # Container registry
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 10.96.0.0/16
        ports:
          - 443
    # Limited internet (HTTPS only, no private nets)
    - action: Allow
      protocol: TCP
      destination:
        nets:
          - 0.0.0.0/0
        notNets:
          - 10.0.0.0/8
          - 172.16.0.0/12
          - 192.168.0.0/16
        ports:
          - 443
    - action: Deny`},{id:"secure-vault-deployment",name:"secure-vault-deployment",description:"Vault with peer replication, restricted client access, and metrics exposure.",category:"Production Reference Architectures",yaml:`apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: secure-vault-deployment
  namespace: vault
spec:
  selector: app == 'vault'
  types:
    - Ingress
    - Egress
  ingress:
    # Vault peer replication (raft)
    - action: Allow
      protocol: TCP
      source:
        selector: app == 'vault'
      destination:
        ports:
          - 8201
    # Client API access from application namespaces
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "environment == 'production'"
      destination:
        ports:
          - 8200
    # Prometheus metrics scraping
    - action: Allow
      protocol: TCP
      source:
        namespaceSelector: "projectcalico.org/name == 'monitoring'"
      destination:
        ports:
          - 8200
    - action: Deny
  egress:
    # DNS resolution
    - action: Allow
      protocol: UDP
      destination:
        ports:
          - 53
    # Vault peer traffic
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'vault'
        ports:
          - 8201
    # Backend storage (Consul or etcd)
    - action: Allow
      protocol: TCP
      destination:
        selector: app == 'consul'
        ports:
          - 8500
          - 8501
    - action: Deny`}],EV={"Baseline / Zero Trust":"","Pod & Namespace Scoping":"","Database & Stateful Workloads":"","Gateway API & Ingress Controller":"","Egress Control & Internet Access":"","Port & Protocol Restrictions":"","ServiceAccount-Aware Policies (Calico-Specific)":"","GlobalNetworkPolicy & Cluster Protection":"","Production Reference Architectures":""};function MV({open:t,onClose:e,onSelect:n}){const i=U.useRef(null);U.useEffect(()=>{const f=i.current;f&&(t&&!f.open?f.showModal():!t&&f.open&&f.close())},[t]);const s=U.useCallback(f=>{const h=i.current;if(!h)return;const p=h.getBoundingClientRect();f.clientX>=p.left&&f.clientX<=p.right&&f.clientY>=p.top&&f.clientY<=p.bottom||e()},[e]),o=U.useCallback(f=>{f.preventDefault(),e()},[e]),l=U.useCallback(f=>{n(f)},[n]),c=OV.map(f=>({category:f,icon:EV[f]??"",policies:vN.filter(h=>h.category===f)}));return t?w.jsxs("dialog",{ref:i,onClick:s,onCancel:o,className:"fixed inset-0 m-auto w-[56rem] max-w-[90vw] max-h-[80vh] rounded-xl border border-slate-600/80 bg-slate-800 text-slate-100 shadow-2xl backdrop:bg-black/60 backdrop:backdrop-blur-sm p-0 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-700/80 bg-slate-800/95 sticky top-0 z-10",children:[w.jsx("h2",{className:"text-base font-bold text-slate-100 tracking-tight",children:"Policy Examples"}),w.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-100 transition-colors cursor-pointer p-1 rounded-lg hover:bg-slate-700/50","aria-label":"Close",children:w.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"overflow-y-auto px-6 py-4",style:{maxHeight:"calc(80vh - 4rem)"},children:c.map(({category:f,icon:h,policies:p})=>w.jsxs("div",{className:"mb-6 last:mb-2",children:[w.jsxs("h3",{className:"text-sm font-semibold text-indigo-300 mb-2 flex items-center gap-2",children:[w.jsx("span",{children:h}),w.jsx("span",{children:f})]}),w.jsxs("table",{className:"w-full text-left border-collapse",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"border-b border-slate-700/60",children:[w.jsx("th",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold pb-1.5 pr-4 w-[38%]",children:"Policy name"}),w.jsx("th",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold pb-1.5",children:"Description"})]})}),w.jsx("tbody",{children:p.map(g=>w.jsxs("tr",{onClick:()=>l(g),className:"border-b border-slate-700/30 hover:bg-slate-700/40 cursor-pointer transition-colors group",children:[w.jsx("td",{className:"py-2 pr-4",children:w.jsx("code",{className:"text-xs text-emerald-400 group-hover:text-emerald-300 font-mono",children:g.name})}),w.jsx("td",{className:"py-2 text-xs text-slate-400 group-hover:text-slate-300",children:g.description})]},g.id))})]})]},f))})]}):null}const NV={all:"ALL",global:"GLOBAL",has:"HAS",in:"IN",not:"NOT",starts:"STARTS",ends:"ENDS",with:"WITH"};function TV(t){const e=[];let n=0;for(;n<t.length;){if(/\s/.test(t[n])){n++;continue}const i=n;if(t[n]==="="&&t[n+1]==="="){e.push({type:"EQ",value:"==",pos:i}),n+=2;continue}if(t[n]==="!"&&t[n+1]==="="){e.push({type:"NEQ",value:"!=",pos:i}),n+=2;continue}if(t[n]==="&"&&t[n+1]==="&"){e.push({type:"AND",value:"&&",pos:i}),n+=2;continue}if(t[n]==="|"&&t[n+1]==="|"){e.push({type:"OR",value:"||",pos:i}),n+=2;continue}if(t[n]==="("){e.push({type:"LPAREN",value:"(",pos:i}),n++;continue}if(t[n]===")"){e.push({type:"RPAREN",value:")",pos:i}),n++;continue}if(t[n]==="{"){e.push({type:"LBRACE",value:"{",pos:i}),n++;continue}if(t[n]==="}"){e.push({type:"RBRACE",value:"}",pos:i}),n++;continue}if(t[n]===","){e.push({type:"COMMA",value:",",pos:i}),n++;continue}if(t[n]==="!"){e.push({type:"NOT",value:"!",pos:i}),n++;continue}if(t[n]==="'"||t[n]==='"'){const s=t[n];n++;let o="";for(;n<t.length&&t[n]!==s;)t[n]==="\\"&&n+1<t.length?(o+=t[n+1],n+=2):(o+=t[n],n++);n<t.length&&n++,e.push({type:"STRING",value:o,pos:i});continue}if(/[a-zA-Z0-9_\-./]/.test(t[n])){let s="";for(;n<t.length&&/[a-zA-Z0-9_\-./]/.test(t[n]);)s+=t[n],n++;const o=NV[s.toLowerCase()];o?e.push({type:o,value:s,pos:i}):e.push({type:"IDENT",value:s,pos:i});continue}throw new Error(`Unexpected character '${t[n]}' at position ${n}`)}return e.push({type:"EOF",value:"",pos:n}),e}class DV{tokens;pos=0;constructor(e){this.tokens=e}peek(){return this.tokens[this.pos]}advance(){const e=this.tokens[this.pos];return this.pos++,e}expect(e){const n=this.peek();if(n.type!==e)throw new Error(`Expected ${e} but got ${n.type} ('${n.value}') at position ${n.pos}`);return this.advance()}parse(){const e=this.parseOr();if(this.peek().type!=="EOF"){const n=this.peek();throw new Error(`Unexpected token '${n.value}' at position ${n.pos}`)}return e}parseOr(){let e=this.parseAnd();for(;this.peek().type==="OR";){this.advance();const n=this.parseAnd();e={kind:"or",left:e,right:n}}return e}parseAnd(){let e=this.parseUnary();for(;this.peek().type==="AND";){this.advance();const n=this.parseUnary();e={kind:"and",left:e,right:n}}return e}parseUnary(){return this.peek().type==="NOT"?(this.advance(),{kind:"not",operand:this.parseUnary()}):this.parsePrimary()}parsePrimary(){const e=this.peek();if(e.type==="ALL")return this.advance(),this.expect("LPAREN"),this.expect("RPAREN"),{kind:"all"};if(e.type==="GLOBAL")return this.advance(),this.expect("LPAREN"),this.expect("RPAREN"),{kind:"global"};if(e.type==="HAS"){this.advance(),this.expect("LPAREN");const n=this.parseLabel();return this.expect("RPAREN"),{kind:"has",label:n}}if(e.type==="LPAREN"){this.advance();const n=this.parseOr();return this.expect("RPAREN"),n}if(e.type==="IDENT"){const n=this.parseLabel(),i=this.peek();if(i.type==="EQ"){this.advance();const s=this.parseStringValue();return{kind:"eq",label:n,value:s}}if(i.type==="NEQ"){this.advance();const s=this.parseStringValue();return{kind:"neq",label:n,value:s}}if(i.type==="IN"){this.advance();const s=this.parseSet();return{kind:"in",label:n,values:s}}if(i.type==="NOT"){this.advance(),this.expect("IN");const s=this.parseSet();return{kind:"notIn",label:n,values:s}}if(i.type==="STARTS"){this.advance(),this.expect("WITH");const s=this.parseStringValue();return{kind:"startsWith",label:n,value:s}}if(i.type==="ENDS"){this.advance(),this.expect("WITH");const s=this.parseStringValue();return{kind:"endsWith",label:n,value:s}}throw new Error(`Unexpected operator '${i.value}' after label '${n}' at position ${i.pos}`)}throw new Error(`Unexpected token '${e.value}' at position ${e.pos}`)}parseLabel(){const e=this.peek();if(e.type==="IDENT"||e.type==="STRING")return this.advance().value;if(e.type==="HAS"||e.type==="ALL"||e.type==="GLOBAL"||e.type==="IN"||e.type==="NOT"||e.type==="STARTS"||e.type==="ENDS"||e.type==="WITH")return this.advance().value;throw new Error(`Expected label name but got '${e.value}' at position ${e.pos}`)}parseStringValue(){const e=this.peek();if(e.type==="STRING")return this.advance().value;if(e.type==="IDENT")return this.advance().value;throw new Error(`Expected string value but got '${e.value}' at position ${e.pos}`)}parseSet(){this.expect("LBRACE");const e=[];if(this.peek().type!=="RBRACE")for(e.push(this.parseStringValue());this.peek().type==="COMMA"&&(this.advance(),this.peek().type!=="RBRACE");)e.push(this.parseStringValue());return this.expect("RBRACE"),e}}function RV(t){const e=t.trim();if(e===""||e==="all()")return{kind:"all"};const n=TV(e);return new DV(n).parse()}function fh(t,e){const n=RV(t);return ll(n,e)}function ll(t,e){switch(t.kind){case"all":return!0;case"global":return!1;case"has":return t.label in e;case"eq":return e[t.label]===t.value;case"neq":return t.label in e&&e[t.label]!==t.value;case"in":return t.label in e&&t.values.includes(e[t.label]);case"notIn":return!(t.label in e)||!t.values.includes(e[t.label]);case"startsWith":return t.label in e&&e[t.label].startsWith(t.value);case"endsWith":return t.label in e&&e[t.label].endsWith(t.value);case"and":return ll(t.left,e)&&ll(t.right,e);case"or":return ll(t.left,e)||ll(t.right,e);case"not":return!ll(t.operand,e)}}function LV(t,e,n){const i=[];let s=!1,o=!1;if(t.protocol)if(n.protocol){const p=String(t.protocol).toUpperCase(),g=n.protocol.toUpperCase(),y=p===g;i.push({field:"protocol",matched:y,reason:y?`Protocol ${g} matches`:`Protocol ${g} does not match required ${p}`}),y||(s=!0)}else i.push({field:"protocol",matched:!1,indeterminate:!0,reason:`Rule requires protocol ${t.protocol}, not specified in test`}),o=!0;if(t.notProtocol)if(n.protocol){const p=String(t.notProtocol).toUpperCase(),g=n.protocol.toUpperCase(),y=p!==g;i.push({field:"notProtocol",matched:y,reason:y?`Protocol ${g} is not excluded (${p})`:`Protocol ${g} is excluded by notProtocol`}),y||(s=!0)}else i.push({field:"notProtocol",matched:!1,indeterminate:!0,reason:`Rule excludes protocol ${t.notProtocol}, not specified in test`}),o=!0;const l=e==="ingress"?t.source:t.destination;l&&_V(l,n,i);const c=e==="ingress"?t.destination:t.source;c&&BV(c,n,e,i);for(const p of i)!p.matched&&!p.indeterminate&&(s=!0),p.indeterminate&&(o=!0);const f=!s&&!o,h=zV(i,s,o);return{matches:f,indeterminate:o&&!s,details:i,reason:h}}function _V(t,e,n){if(t.nets&&t.nets.length>0)if(e.ip){const i=t.nets.some(s=>{const o=s.includes("/")?s:`${s}/32`;return Ry(o,e.ip)});n.push({field:"nets",matched:i,reason:i?`IP ${e.ip} is within allowed CIDRs`:`IP ${e.ip} is not within any of: ${t.nets.join(", ")}`})}else n.push({field:"nets",matched:!1,indeterminate:!0,reason:`Rule requires IP in ${t.nets.join(", ")}, no IP specified`});if(t.notNets&&t.notNets.length>0)if(e.ip){const i=t.notNets.some(s=>{const o=s.includes("/")?s:`${s}/32`;return Ry(o,e.ip)});n.push({field:"notNets",matched:!i,reason:i?`IP ${e.ip} is excluded by notNets`:`IP ${e.ip} is not in excluded ranges`})}else n.push({field:"notNets",matched:!1,indeterminate:!0,reason:`Rule excludes IPs in ${t.notNets.join(", ")}, no IP specified`});if(t.selector)if(e.labels&&Object.keys(e.labels).length>0)try{const i=fh(t.selector,e.labels);n.push({field:"selector",matched:i,reason:i?`Labels match selector: ${t.selector}`:`Labels do not match selector: ${t.selector}`})}catch(i){n.push({field:"selector",matched:!1,indeterminate:!0,reason:`Cannot parse selector: ${t.selector} (${i instanceof Error?i.message:String(i)})`})}else n.push({field:"selector",matched:!1,indeterminate:!0,reason:`Rule requires selector match: ${t.selector}, no labels specified`});if(t.notSelector)if(e.labels&&Object.keys(e.labels).length>0)try{const i=fh(t.notSelector,e.labels);n.push({field:"notSelector",matched:!i,reason:i?`Labels match excluded selector: ${t.notSelector}`:"Labels do not match excluded selector (good)"})}catch(i){n.push({field:"notSelector",matched:!1,indeterminate:!0,reason:`Cannot parse notSelector: ${t.notSelector} (${i instanceof Error?i.message:String(i)})`})}else n.push({field:"notSelector",matched:!1,indeterminate:!0,reason:`Rule has notSelector: ${t.notSelector}, no labels specified`});if(t.namespaceSelector)if(e.namespaceLabels&&Object.keys(e.namespaceLabels).length>0)try{const i=fh(t.namespaceSelector,e.namespaceLabels);n.push({field:"namespaceSelector",matched:i,reason:i?`Namespace labels match: ${t.namespaceSelector}`:`Namespace labels do not match: ${t.namespaceSelector}`})}catch{n.push({field:"namespaceSelector",matched:!1,indeterminate:!0,reason:`Cannot parse namespaceSelector: ${t.namespaceSelector}`})}else if(e.namespace)try{const i={"projectcalico.org/name":e.namespace,"kubernetes.io/metadata.name":e.namespace},s=fh(t.namespaceSelector,i);n.push({field:"namespaceSelector",matched:s,reason:s?`Namespace '${e.namespace}' matches: ${t.namespaceSelector} (via standard labels)`:`Namespace '${e.namespace}' does not match: ${t.namespaceSelector} (checked standard labels only)`})}catch{n.push({field:"namespaceSelector",matched:!1,indeterminate:!0,reason:`Cannot evaluate namespaceSelector: ${t.namespaceSelector}`})}else n.push({field:"namespaceSelector",matched:!1,indeterminate:!0,reason:`Rule requires namespaceSelector: ${t.namespaceSelector}, no namespace info specified`});if(t.ports&&t.ports.length>0)if(e.port!==void 0){const i=gd(e.port,t.ports);n.push({field:"ports",matched:i,reason:i?`Port ${e.port} matches allowed ports`:`Port ${e.port} does not match any of: ${Ol(t.ports)}`})}else n.push({field:"ports",matched:!1,indeterminate:!0,reason:`Rule allows ports ${Ol(t.ports)}, no port specified`});if(t.notPorts&&t.notPorts.length>0)if(e.port!==void 0){const i=gd(e.port,t.notPorts);n.push({field:"notPorts",matched:!i,reason:i?`Port ${e.port} is excluded by notPorts`:`Port ${e.port} is not in excluded ports`})}else n.push({field:"notPorts",matched:!1,indeterminate:!0,reason:`Rule excludes ports ${Ol(t.notPorts)}, no port specified`});if(t.serviceAccounts){if(t.serviceAccounts.names&&t.serviceAccounts.names.length>0)if(e.serviceAccountName){const i=t.serviceAccounts.names.includes(e.serviceAccountName);n.push({field:"serviceAccounts.names",matched:i,reason:i?`ServiceAccount '${e.serviceAccountName}' is in allowed list`:`ServiceAccount '${e.serviceAccountName}' is not in: ${t.serviceAccounts.names.join(", ")}`})}else n.push({field:"serviceAccounts.names",matched:!1,indeterminate:!0,reason:`Rule requires SA in [${t.serviceAccounts.names.join(", ")}], no SA specified`});t.serviceAccounts.selector&&n.push({field:"serviceAccounts.selector",matched:!1,indeterminate:!0,reason:`Rule has SA selector: ${t.serviceAccounts.selector} (SA label matching not supported)`})}if(t.services)if(e.serviceName&&e.serviceNamespace){const i=t.services.name===e.serviceName,s=t.services.namespace===e.serviceNamespace,o=i&&s;n.push({field:"services",matched:o,reason:o?`Service ${e.serviceNamespace}/${e.serviceName} matches`:`Service ${e.serviceNamespace}/${e.serviceName} does not match required ${t.services.namespace}/${t.services.name}`})}else if(e.serviceName){const i=t.services.name===e.serviceName;n.push({field:"services",matched:!1,indeterminate:!0,reason:i?`Service name '${e.serviceName}' matches, but namespace not specified (required: ${t.services.namespace})`:`Service name '${e.serviceName}' does not match required '${t.services.name}'`})}else n.push({field:"services",matched:!1,indeterminate:!0,reason:`Rule targets service ${t.services.namespace}/${t.services.name}, no service specified`})}function BV(t,e,n,i){const s=n==="ingress"?"destination":"source";if(t.ports&&t.ports.length>0)if(e.port!==void 0){const o=gd(e.port,t.ports);i.push({field:`${s}.ports`,matched:o,reason:o?`Port ${e.port} matches ${s} port constraint`:`Port ${e.port} does not match ${s} ports: ${Ol(t.ports)}`})}else i.push({field:`${s}.ports`,matched:!1,indeterminate:!0,reason:`Rule constrains ${s} ports ${Ol(t.ports)}, no port specified`});if(t.notPorts&&t.notPorts.length>0)if(e.port!==void 0){const o=gd(e.port,t.notPorts);i.push({field:`${s}.notPorts`,matched:!o,reason:o?`Port ${e.port} is excluded by ${s} notPorts`:`Port ${e.port} is not in excluded ${s} ports`})}else i.push({field:`${s}.notPorts`,matched:!1,indeterminate:!0,reason:`Rule excludes ${s} ports ${Ol(t.notPorts)}, no port specified`});(t.selector||t.nets||t.namespaceSelector)&&i.push({field:`${s}.constraints`,matched:!1,indeterminate:!0,reason:`Rule has ${s}-side constraints (selector/nets) on the policy endpoint  not evaluated in this test`})}function gd(t,e){return e.some(n=>tV(t,n))}function Ol(t){return t.map(e=>String(e)).join(", ")}function zV(t,e,n){return t.length===0?"No constraints  matches all traffic":e?`No match: ${t.filter(s=>!s.matched&&!s.indeterminate).map(s=>s.reason).join("; ")}`:n?`Indeterminate: ${t.filter(s=>s.indeterminate).map(s=>s.field).join(", ")} not specified`:"All constraints matched"}function PV(t,e,n,i){const s=e==="ingress"?t.ingressRules:t.egressRules,o=e==="ingress"?t.ingressDefault:t.egressDefault,l=i?e==="ingress"?i.ingress:i.egress:void 0,c=[],f=e==="ingress"?"Ingress":"Egress";if(!t.types.includes(f))return{verdict:"allowed",reason:`Policy does not manage ${e} traffic  all ${e} is implicitly allowed`,trace:[],decisiveRuleIndex:null,appliedDefault:!0};for(let g=0;g<s.length;g++){const y=s[g],v=LV(y,e,n),b=l&&l[g]?{startLine:l[g].startLine,endLine:l[g].endLine}:void 0,S={ruleIndex:g,rule:y,action:y.action,matchResult:v,isDecisive:!1,sourceRange:b};if(v.matches)switch(y.action){case"Allow":return S.isDecisive=!0,c.push(S),{verdict:"allowed",reason:`Allowed by rule #${g+1}: ${v.reason}`,trace:c,decisiveRuleIndex:g,appliedDefault:!1};case"Deny":return S.isDecisive=!0,c.push(S),{verdict:"denied",reason:`Denied by rule #${g+1}: ${v.reason}`,trace:c,decisiveRuleIndex:g,appliedDefault:!1};case"Log":c.push(S);continue;case"Pass":return S.isDecisive=!0,c.push(S),{verdict:"passed",reason:`Passed to next tier by rule #${g+1} (verdict depends on subsequent tiers)`,trace:c,decisiveRuleIndex:g,appliedDefault:!1}}else v.indeterminate,c.push(S)}return{verdict:o==="allow"?"allowed":"denied",reason:o==="allow"?"This direction is not explicitly managed  traffic is allowed by default":"No rule matched  traffic is denied by implicit Calico default",trace:c,decisiveRuleIndex:null,appliedDefault:!0}}function d0({labels:t,onChange:e,placeholder:n}){const i=U.useCallback(()=>{e([...t,{key:"",value:""}])},[t,e]),s=U.useCallback(l=>{e(t.filter((c,f)=>f!==l))},[t,e]),o=U.useCallback((l,c,f)=>{const h=t.map((p,g)=>g===l?{...p,[c]:f}:p);e(h)},[t,e]);return w.jsxs("div",{className:"space-y-1.5",children:[t.map((l,c)=>w.jsxs("div",{className:"flex items-center gap-1.5",children:[w.jsx("input",{type:"text",value:l.key,onChange:f=>o(c,"key",f.target.value),placeholder:"key",className:"flex-1 min-w-0 text-xs px-2 py-1 rounded bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"}),w.jsx("span",{className:"text-slate-500 text-xs",children:"="}),w.jsx("input",{type:"text",value:l.value,onChange:f=>o(c,"value",f.target.value),placeholder:"value",className:"flex-1 min-w-0 text-xs px-2 py-1 rounded bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"}),w.jsx("button",{onClick:()=>s(c),className:"text-slate-500 hover:text-red-400 transition-colors cursor-pointer p-0.5",title:"Remove",children:w.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),w.jsx("button",{onClick:i,className:"text-xs text-indigo-400 hover:text-indigo-300 transition-colors cursor-pointer",children:n??"+ Add label"})]})}function jV({verdict:t}){const e={allowed:{bg:"bg-emerald-500/20",border:"border-emerald-500/40",text:"text-emerald-400",label:"ALLOWED"},denied:{bg:"bg-red-500/20",border:"border-red-500/40",text:"text-red-400",label:"DENIED"},passed:{bg:"bg-blue-500/20",border:"border-blue-500/40",text:"text-blue-400",label:"PASSED TO NEXT TIER"},unknown:{bg:"bg-amber-500/20",border:"border-amber-500/40",text:"text-amber-400",label:"UNKNOWN"}}[t];return w.jsx("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border ${e.bg} ${e.border}`,children:w.jsx("span",{className:`text-sm font-bold ${e.text}`,children:e.label})})}function HV({action:t}){const n={Allow:{bg:"bg-emerald-500/20",text:"text-emerald-400"},Deny:{bg:"bg-red-500/20",text:"text-red-400"},Log:{bg:"bg-amber-500/20",text:"text-amber-400"},Pass:{bg:"bg-blue-500/20",text:"text-blue-400"}}[t]??{bg:"bg-slate-500/20",text:"text-slate-400"};return w.jsx("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold ${n.bg} ${n.text}`,children:t})}function IV({entry:t,onHover:e,onLeave:n}){const i=U.useCallback(()=>{t.sourceRange&&e(t.sourceRange)},[t.sourceRange,e]),s=t.matchResult.matches?"text-emerald-400":t.matchResult.indeterminate?"text-amber-400":"text-slate-500",o=t.matchResult.matches?"MATCH":t.matchResult.indeterminate?"MAYBE":"NO MATCH";return w.jsxs("div",{className:`px-2.5 py-1.5 rounded-lg border text-xs ${t.isDecisive?"border-indigo-500/40 bg-indigo-500/10":"border-slate-700/50 bg-slate-800/30"} hover:bg-slate-700/30 transition-colors cursor-default`,onMouseEnter:i,onMouseLeave:n,children:[w.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[w.jsxs("span",{className:"text-slate-500 font-mono text-[10px]",children:["#",t.ruleIndex+1]}),w.jsx(HV,{action:t.action}),w.jsx("span",{className:`text-[10px] font-semibold ${s}`,children:o}),t.isDecisive&&w.jsx("span",{className:"text-[10px] font-semibold text-indigo-400 ml-auto",children:"DECISIVE"})]}),w.jsx("p",{className:"text-slate-400 text-[11px] leading-snug",children:t.matchResult.reason})]})}function VV({onClose:t}){const{state:e,dispatch:n}=Fl(),[i,s]=U.useState("ingress"),[o,l]=U.useState("ip"),[c,f]=U.useState(""),[h,p]=U.useState([{key:"",value:""}]),[g,y]=U.useState(""),[v,b]=U.useState([]),[S,k]=U.useState(""),[A,N]=U.useState(""),[O,M]=U.useState(""),[_,L]=U.useState(""),[R,X]=U.useState(""),[$,ne]=U.useState(null),q=U.useCallback(()=>{s("ingress"),l("ip"),f(""),p([{key:"",value:""}]),y(""),b([]),k(""),N(""),M(""),L(""),X(""),ne(null),n({type:"HIGHLIGHT_LINES",payload:null})},[n]),Q=U.useCallback(()=>{const z={};switch(o){case"ip":c.trim()&&(z.ip=c.trim());break;case"podLabels":{const G=h.filter(D=>D.key.trim());G.length>0&&(z.labels=Object.fromEntries(G.map(D=>[D.key.trim(),D.value.trim()]))),g.trim()&&(z.namespace=g.trim());{const D=v.filter(j=>j.key.trim());D.length>0&&(z.namespaceLabels=Object.fromEntries(D.map(j=>[j.key.trim(),j.value.trim()])))}break}case"namespace":g.trim()&&(z.namespace=g.trim());{const G=v.filter(D=>D.key.trim());G.length>0&&(z.namespaceLabels=Object.fromEntries(G.map(D=>[D.key.trim(),D.value.trim()])))}break;case"serviceAccount":S.trim()&&(z.serviceAccountName=S.trim()),g.trim()&&(z.namespace=g.trim());break;case"service":A.trim()&&(z.serviceName=A.trim()),O.trim()&&(z.serviceNamespace=O.trim());break}if(_&&(z.protocol=_),R.trim()){const G=Number(R.trim());!Number.isNaN(G)&&G>0&&G<=65535&&(z.port=G)}return z},[o,c,h,g,v,S,A,O,_,R]),Z=U.useCallback(()=>{if(!e.policy)return;const z=Q(),G=PV(e.policy,i,z,e.ruleLineRanges);ne(G)},[e.policy,e.ruleLineRanges,i,Q]),B=U.useCallback(z=>{n({type:"HIGHLIGHT_LINES",payload:z})},[n]),V=U.useCallback(()=>{n({type:"HIGHLIGHT_LINES",payload:null})},[n]),T=U.useMemo(()=>e.policy?.types??[],[e.policy]),P=T.includes("Ingress"),H=T.includes("Egress");return w.jsxs("div",{className:"h-full flex flex-col bg-slate-850 overflow-hidden",children:[w.jsxs("div",{className:"flex items-center justify-between px-3 h-9 border-b border-slate-700/50 bg-slate-800/50 shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("svg",{className:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),w.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold",children:"Access Tester"})]}),w.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-300 transition-colors cursor-pointer p-0.5 rounded hover:bg-slate-700/50","aria-label":"Close panel",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-3",children:[w.jsx("div",{className:"text-[10px] text-amber-400/70 bg-amber-500/5 border border-amber-500/20 rounded-lg px-2.5 py-1.5 leading-snug",children:"This is a best-effort emulation, not a real Calico policy engine. It evaluates a single policy in isolation. Real Calico evaluates all policies across tiers. Do not use for production security decisions."}),e.policy?w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Traffic Direction"}),w.jsxs("div",{className:"flex gap-1",children:[w.jsxs("button",{onClick:()=>{s("ingress"),ne(null)},className:`flex-1 text-xs py-1.5 rounded-lg border transition-colors cursor-pointer ${i==="ingress"?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:["Ingress ",!P&&w.jsx("span",{className:"text-[9px] text-slate-500",children:"(unmanaged)"})]}),w.jsxs("button",{onClick:()=>{s("egress"),ne(null)},className:`flex-1 text-xs py-1.5 rounded-lg border transition-colors cursor-pointer ${i==="egress"?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:["Egress ",!H&&w.jsx("span",{className:"text-[9px] text-slate-500",children:"(unmanaged)"})]})]})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:[i==="ingress"?"Source":"Destination"," Type"]}),w.jsx("div",{className:"grid grid-cols-2 gap-1",children:[{type:"ip",label:"IP Address"},{type:"podLabels",label:"Pod Labels"},{type:"namespace",label:"Namespace"},{type:"serviceAccount",label:"ServiceAccount"},{type:"service",label:"Service"}].map(({type:z,label:G})=>w.jsx("button",{onClick:()=>{l(z),ne(null)},className:`text-xs py-1.5 rounded-lg border transition-colors cursor-pointer ${o===z?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-600"}`,children:G},z))})]}),w.jsxs("div",{className:"space-y-2",children:[o==="ip"&&w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"IP Address"}),w.jsx("input",{type:"text",value:c,onChange:z=>{f(z.target.value),ne(null)},placeholder:"e.g. 10.0.1.5 or 8.8.8.8",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),o==="podLabels"&&w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Pod Labels"}),w.jsx(d0,{labels:h,onChange:z=>{p(z),ne(null)}})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace Name ",w.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt., for namespaceSelector)"})]}),w.jsx("input",{type:"text",value:g,onChange:z=>{y(z.target.value),ne(null)},placeholder:"e.g. database",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace Labels ",w.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt., overrides name)"})]}),w.jsx(d0,{labels:v,onChange:z=>{b(z),ne(null)},placeholder:"+ Add namespace label"})]})]}),o==="namespace"&&w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Namespace Name"}),w.jsx("input",{type:"text",value:g,onChange:z=>{y(z.target.value),ne(null)},placeholder:"e.g. backend",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace Labels ",w.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(optional)"})]}),w.jsx(d0,{labels:v,onChange:z=>{b(z),ne(null)},placeholder:"+ Add namespace label"})]})]}),o==="serviceAccount"&&w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"ServiceAccount Name"}),w.jsx("input",{type:"text",value:S,onChange:z=>{k(z.target.value),ne(null)},placeholder:"e.g. backend-api",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Namespace ",w.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(optional, for scoped SA matching)"})]}),w.jsx("input",{type:"text",value:g,onChange:z=>{y(z.target.value),ne(null)},placeholder:"e.g. default",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]})]}),o==="service"&&w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Service Name"}),w.jsx("input",{type:"text",value:A,onChange:z=>{N(z.target.value),ne(null)},placeholder:"e.g. kube-dns",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:"Service Namespace"}),w.jsx("input",{type:"text",value:O,onChange:z=>{M(z.target.value),ne(null)},placeholder:"e.g. kube-system",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Protocol ",w.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt.)"})]}),w.jsxs("select",{value:_,onChange:z=>{L(z.target.value),ne(null)},className:"w-full text-xs px-2 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none cursor-pointer",children:[w.jsx("option",{value:"",children:"Any"}),w.jsx("option",{value:"TCP",children:"TCP"}),w.jsx("option",{value:"UDP",children:"UDP"}),w.jsx("option",{value:"SCTP",children:"SCTP"}),w.jsx("option",{value:"ICMP",children:"ICMP"})]})]}),w.jsxs("div",{children:[w.jsxs("label",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1 block",children:["Port ",w.jsx("span",{className:"normal-case tracking-normal font-normal text-slate-600",children:"(opt.)"})]}),w.jsx("input",{type:"text",value:R,onChange:z=>{X(z.target.value),ne(null)},placeholder:"e.g. 443",className:"w-full text-xs px-2.5 py-1.5 rounded-lg bg-slate-700/80 text-slate-200 border border-slate-600 focus:border-indigo-500 focus:outline-none placeholder:text-slate-500"})]})]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:Z,className:"flex-1 text-xs py-2 rounded-lg bg-indigo-500 hover:bg-indigo-400 text-white font-semibold transition-colors cursor-pointer",children:"Check Access"}),w.jsx("button",{onClick:q,className:"text-xs px-3 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold border border-slate-600 transition-colors cursor-pointer",children:"Reset"})]}),$&&w.jsxs("div",{className:"space-y-2.5 pt-1",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx(jV,{verdict:$.verdict}),$.appliedDefault&&w.jsx("span",{className:"text-[10px] text-slate-500",children:"default applied"})]}),w.jsx("p",{className:"text-xs text-slate-300 leading-snug",children:$.reason}),$.trace.length>0&&w.jsxs("div",{children:[w.jsx("h4",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold mb-1.5",children:"Rule Evaluation Trace"}),w.jsx("div",{className:"space-y-1",children:$.trace.map(z=>w.jsx(IV,{entry:z,onHover:B,onLeave:V},z.ruleIndex))}),$.appliedDefault&&w.jsxs("div",{className:"px-2.5 py-1.5 mt-1 rounded-lg border border-slate-700/50 bg-slate-800/30 text-xs text-slate-400",children:["No rule matched  ",$.verdict==="allowed"?"implicit allow":"implicit deny"," applied"]})]})]})]}):w.jsx("div",{className:"text-xs text-slate-500 text-center py-8",children:"Load a policy first to test access"})]})]})}function bN(t){return typeof t>"u"||t===null}function $V(t){return typeof t=="object"&&t!==null}function UV(t){return Array.isArray(t)?t:bN(t)?[]:[t]}function qV(t,e){var n,i,s,o;if(e)for(o=Object.keys(e),n=0,i=o.length;n<i;n+=1)s=o[n],t[s]=e[s];return t}function QV(t,e){var n="",i;for(i=0;i<e;i+=1)n+=t;return n}function YV(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var XV=bN,FV=$V,GV=UV,WV=QV,KV=YV,ZV=qV,Tt={isNothing:XV,isObject:FV,toArray:GV,repeat:WV,isNegativeZero:KV,extend:ZV};function SN(t,e){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function Uc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=SN(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Uc.prototype=Object.create(Error.prototype);Uc.prototype.constructor=Uc;Uc.prototype.toString=function(e){return this.name+": "+SN(this,e)};var sn=Uc;function p0(t,e,n,i,s){var o="",l="",c=Math.floor(s/2)-1;return i-e>c&&(o=" ... ",e=i-c+o.length),n-i>c&&(l=" ...",n=i+c-l.length),{str:o+t.slice(e,n).replace(/\t/g,"")+l,pos:i-e+o.length}}function g0(t,e){return Tt.repeat(" ",e-t.length)+t}function JV(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],s=[],o,l=-1;o=n.exec(t.buffer);)s.push(o.index),i.push(o.index+o[0].length),t.position<=o.index&&l<0&&(l=i.length-2);l<0&&(l=i.length-1);var c="",f,h,p=Math.min(t.line+e.linesAfter,s.length).toString().length,g=e.maxLength-(e.indent+p+3);for(f=1;f<=e.linesBefore&&!(l-f<0);f++)h=p0(t.buffer,i[l-f],s[l-f],t.position-(i[l]-i[l-f]),g),c=Tt.repeat(" ",e.indent)+g0((t.line-f+1).toString(),p)+" | "+h.str+`
`+c;for(h=p0(t.buffer,i[l],s[l],t.position,g),c+=Tt.repeat(" ",e.indent)+g0((t.line+1).toString(),p)+" | "+h.str+`
`,c+=Tt.repeat("-",e.indent+p+3+h.pos)+`^
`,f=1;f<=e.linesAfter&&!(l+f>=s.length);f++)h=p0(t.buffer,i[l+f],s[l+f],t.position-(i[l]-i[l+f]),g),c+=Tt.repeat(" ",e.indent)+g0((t.line+f+1).toString(),p)+" | "+h.str+`
`;return c.replace(/\n$/,"")}var e$=JV,t$=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],n$=["scalar","sequence","mapping"];function i$(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){e[String(i)]=n})}),e}function s$(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(t$.indexOf(n)===-1)throw new sn('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=i$(e.styleAliases||null),n$.indexOf(this.kind)===-1)throw new sn('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Qt=s$;function sk(t,e){var n=[];return t[e].forEach(function(i){var s=n.length;n.forEach(function(o,l){o.tag===i.tag&&o.kind===i.kind&&o.multi===i.multi&&(s=l)}),n[s]=i}),n}function r$(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function i(s){s.multi?(t.multi[s.kind].push(s),t.multi.fallback.push(s)):t[s.kind][s.tag]=t.fallback[s.tag]=s}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(i);return t}function Py(t){return this.extend(t)}Py.prototype.extend=function(e){var n=[],i=[];if(e instanceof Qt)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new sn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof Qt))throw new sn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new sn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new sn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(o){if(!(o instanceof Qt))throw new sn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(Py.prototype);return s.implicit=(this.implicit||[]).concat(n),s.explicit=(this.explicit||[]).concat(i),s.compiledImplicit=sk(s,"implicit"),s.compiledExplicit=sk(s,"explicit"),s.compiledTypeMap=r$(s.compiledImplicit,s.compiledExplicit),s};var wN=Py,CN=new Qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),kN=new Qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),AN=new Qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),ON=new wN({explicit:[CN,kN,AN]});function o$(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function l$(){return null}function a$(t){return t===null}var EN=new Qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:o$,construct:l$,predicate:a$,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function c$(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function u$(t){return t==="true"||t==="True"||t==="TRUE"}function f$(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var MN=new Qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c$,construct:u$,predicate:f$,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function h$(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function d$(t){return 48<=t&&t<=55}function p$(t){return 48<=t&&t<=57}function g$(t){if(t===null)return!1;var e=t.length,n=0,i=!1,s;if(!e)return!1;if(s=t[n],(s==="-"||s==="+")&&(s=t[++n]),s==="0"){if(n+1===e)return!0;if(s=t[++n],s==="b"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(s!=="0"&&s!=="1")return!1;i=!0}return i&&s!=="_"}if(s==="x"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!h$(t.charCodeAt(n)))return!1;i=!0}return i&&s!=="_"}if(s==="o"){for(n++;n<e;n++)if(s=t[n],s!=="_"){if(!d$(t.charCodeAt(n)))return!1;i=!0}return i&&s!=="_"}}if(s==="_")return!1;for(;n<e;n++)if(s=t[n],s!=="_"){if(!p$(t.charCodeAt(n)))return!1;i=!0}return!(!i||s==="_")}function m$(t){var e=t,n=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function y$(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Tt.isNegativeZero(t)}var NN=new Qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:g$,construct:m$,predicate:y$,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),x$=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function v$(t){return!(t===null||!x$.test(t)||t[t.length-1]==="_")}function b$(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var S$=/^[-+]?[0-9]+e/;function w$(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Tt.isNegativeZero(t))return"-0.0";return n=t.toString(10),S$.test(n)?n.replace("e",".e"):n}function C$(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Tt.isNegativeZero(t))}var TN=new Qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:v$,construct:b$,predicate:C$,represent:w$,defaultStyle:"lowercase"}),DN=ON.extend({implicit:[EN,MN,NN,TN]}),RN=DN,LN=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_N=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function k$(t){return t===null?!1:LN.exec(t)!==null||_N.exec(t)!==null}function A$(t){var e,n,i,s,o,l,c,f=0,h=null,p,g,y;if(e=LN.exec(t),e===null&&(e=_N.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],i=+e[2]-1,s=+e[3],!e[4])return new Date(Date.UTC(n,i,s));if(o=+e[4],l=+e[5],c=+e[6],e[7]){for(f=e[7].slice(0,3);f.length<3;)f+="0";f=+f}return e[9]&&(p=+e[10],g=+(e[11]||0),h=(p*60+g)*6e4,e[9]==="-"&&(h=-h)),y=new Date(Date.UTC(n,i,s,o,l,c,f)),h&&y.setTime(y.getTime()-h),y}function O$(t){return t.toISOString()}var BN=new Qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:k$,construct:A$,instanceOf:Date,represent:O$});function E$(t){return t==="<<"||t===null}var zN=new Qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:E$}),Yx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function M$(t){if(t===null)return!1;var e,n,i=0,s=t.length,o=Yx;for(n=0;n<s;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function N$(t){var e,n,i=t.replace(/[\r\n=]/g,""),s=i.length,o=Yx,l=0,c=[];for(e=0;e<s;e++)e%4===0&&e&&(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)),l=l<<6|o.indexOf(i.charAt(e));return n=s%4*6,n===0?(c.push(l>>16&255),c.push(l>>8&255),c.push(l&255)):n===18?(c.push(l>>10&255),c.push(l>>2&255)):n===12&&c.push(l>>4&255),new Uint8Array(c)}function T$(t){var e="",n=0,i,s,o=t.length,l=Yx;for(i=0;i<o;i++)i%3===0&&i&&(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]),n=(n<<8)+t[i];return s=o%3,s===0?(e+=l[n>>18&63],e+=l[n>>12&63],e+=l[n>>6&63],e+=l[n&63]):s===2?(e+=l[n>>10&63],e+=l[n>>4&63],e+=l[n<<2&63],e+=l[64]):s===1&&(e+=l[n>>2&63],e+=l[n<<4&63],e+=l[64],e+=l[64]),e}function D$(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var PN=new Qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:M$,construct:N$,predicate:D$,represent:T$}),R$=Object.prototype.hasOwnProperty,L$=Object.prototype.toString;function _$(t){if(t===null)return!0;var e=[],n,i,s,o,l,c=t;for(n=0,i=c.length;n<i;n+=1){if(s=c[n],l=!1,L$.call(s)!=="[object Object]")return!1;for(o in s)if(R$.call(s,o))if(!l)l=!0;else return!1;if(!l)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function B$(t){return t!==null?t:[]}var jN=new Qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:_$,construct:B$}),z$=Object.prototype.toString;function P$(t){if(t===null)return!0;var e,n,i,s,o,l=t;for(o=new Array(l.length),e=0,n=l.length;e<n;e+=1){if(i=l[e],z$.call(i)!=="[object Object]"||(s=Object.keys(i),s.length!==1))return!1;o[e]=[s[0],i[s[0]]]}return!0}function j$(t){if(t===null)return[];var e,n,i,s,o,l=t;for(o=new Array(l.length),e=0,n=l.length;e<n;e+=1)i=l[e],s=Object.keys(i),o[e]=[s[0],i[s[0]]];return o}var HN=new Qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:P$,construct:j$}),H$=Object.prototype.hasOwnProperty;function I$(t){if(t===null)return!0;var e,n=t;for(e in n)if(H$.call(n,e)&&n[e]!==null)return!1;return!0}function V$(t){return t!==null?t:{}}var IN=new Qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:I$,construct:V$}),Xx=RN.extend({implicit:[BN,zN],explicit:[PN,jN,HN,IN]}),dr=Object.prototype.hasOwnProperty,md=1,VN=2,$N=3,yd=4,m0=1,$$=2,rk=3,U$=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,q$=/[\x85\u2028\u2029]/,Q$=/[,\[\]\{\}]/,UN=/^(?:!|!!|![a-z\-]+!)$/i,qN=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ok(t){return Object.prototype.toString.call(t)}function Di(t){return t===10||t===13}function io(t){return t===9||t===32}function bn(t){return t===9||t===32||t===10||t===13}function gl(t){return t===44||t===91||t===93||t===123||t===125}function Y$(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function X$(t){return t===120?2:t===117?4:t===85?8:0}function F$(t){return 48<=t&&t<=57?t-48:-1}function lk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}function G$(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}function QN(t,e,n){e==="__proto__"?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n}):t[e]=n}var YN=new Array(256),XN=new Array(256);for(var il=0;il<256;il++)YN[il]=lk(il)?1:0,XN[il]=lk(il);function W$(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Xx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function FN(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=e$(n),new sn(e,n)}function we(t,e){throw FN(t,e)}function xd(t,e){t.onWarning&&t.onWarning.call(null,FN(t,e))}var ak={YAML:function(e,n,i){var s,o,l;e.version!==null&&we(e,"duplication of %YAML directive"),i.length!==1&&we(e,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),s===null&&we(e,"ill-formed argument of the YAML directive"),o=parseInt(s[1],10),l=parseInt(s[2],10),o!==1&&we(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=l<2,l!==1&&l!==2&&xd(e,"unsupported YAML version of the document")},TAG:function(e,n,i){var s,o;i.length!==2&&we(e,"TAG directive accepts exactly two arguments"),s=i[0],o=i[1],UN.test(s)||we(e,"ill-formed tag handle (first argument) of the TAG directive"),dr.call(e.tagMap,s)&&we(e,'there is a previously declared suffix for "'+s+'" tag handle'),qN.test(o)||we(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{we(e,"tag prefix is malformed: "+o)}e.tagMap[s]=o}};function rr(t,e,n,i){var s,o,l,c;if(e<n){if(c=t.input.slice(e,n),i)for(s=0,o=c.length;s<o;s+=1)l=c.charCodeAt(s),l===9||32<=l&&l<=1114111||we(t,"expected valid JSON character");else U$.test(c)&&we(t,"the stream contains non-printable characters");t.result+=c}}function ck(t,e,n,i){var s,o,l,c;for(Tt.isObject(n)||we(t,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(n),l=0,c=s.length;l<c;l+=1)o=s[l],dr.call(e,o)||(QN(e,o,n[o]),i[o]=!0)}function ml(t,e,n,i,s,o,l,c,f){var h,p;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),h=0,p=s.length;h<p;h+=1)Array.isArray(s[h])&&we(t,"nested arrays are not supported inside keys"),typeof s=="object"&&ok(s[h])==="[object Object]"&&(s[h]="[object Object]");if(typeof s=="object"&&ok(s)==="[object Object]"&&(s="[object Object]"),s=String(s),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(h=0,p=o.length;h<p;h+=1)ck(t,e,o[h],n);else ck(t,e,o,n);else!t.json&&!dr.call(n,s)&&dr.call(e,s)&&(t.line=l||t.line,t.lineStart=c||t.lineStart,t.position=f||t.position,we(t,"duplicated mapping key")),QN(e,s,o),delete n[s];return e}function Fx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):we(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function kt(t,e,n){for(var i=0,s=t.input.charCodeAt(t.position);s!==0;){for(;io(s);)s===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),s=t.input.charCodeAt(++t.position);if(e&&s===35)do s=t.input.charCodeAt(++t.position);while(s!==10&&s!==13&&s!==0);if(Di(s))for(Fx(t),s=t.input.charCodeAt(t.position),i++,t.lineIndent=0;s===32;)t.lineIndent++,s=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&xd(t,"deficient indentation"),i}function Wd(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||bn(n)))}function Gx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Tt.repeat(`
`,e-1))}function K$(t,e,n){var i,s,o,l,c,f,h,p,g=t.kind,y=t.result,v;if(v=t.input.charCodeAt(t.position),bn(v)||gl(v)||v===35||v===38||v===42||v===33||v===124||v===62||v===39||v===34||v===37||v===64||v===96||(v===63||v===45)&&(s=t.input.charCodeAt(t.position+1),bn(s)||n&&gl(s)))return!1;for(t.kind="scalar",t.result="",o=l=t.position,c=!1;v!==0;){if(v===58){if(s=t.input.charCodeAt(t.position+1),bn(s)||n&&gl(s))break}else if(v===35){if(i=t.input.charCodeAt(t.position-1),bn(i))break}else{if(t.position===t.lineStart&&Wd(t)||n&&gl(v))break;if(Di(v))if(f=t.line,h=t.lineStart,p=t.lineIndent,kt(t,!1,-1),t.lineIndent>=e){c=!0,v=t.input.charCodeAt(t.position);continue}else{t.position=l,t.line=f,t.lineStart=h,t.lineIndent=p;break}}c&&(rr(t,o,l,!1),Gx(t,t.line-f),o=l=t.position,c=!1),io(v)||(l=t.position+1),v=t.input.charCodeAt(++t.position)}return rr(t,o,l,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function Z$(t,e){var n,i,s;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=s=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(rr(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,s=t.position;else return!0;else Di(n)?(rr(t,i,s,!0),Gx(t,kt(t,!1,e)),i=s=t.position):t.position===t.lineStart&&Wd(t)?we(t,"unexpected end of the document within a single quoted scalar"):(t.position++,s=t.position);we(t,"unexpected end of the stream within a single quoted scalar")}function J$(t,e){var n,i,s,o,l,c;if(c=t.input.charCodeAt(t.position),c!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(c=t.input.charCodeAt(t.position))!==0;){if(c===34)return rr(t,n,t.position,!0),t.position++,!0;if(c===92){if(rr(t,n,t.position,!0),c=t.input.charCodeAt(++t.position),Di(c))kt(t,!1,e);else if(c<256&&YN[c])t.result+=XN[c],t.position++;else if((l=X$(c))>0){for(s=l,o=0;s>0;s--)c=t.input.charCodeAt(++t.position),(l=Y$(c))>=0?o=(o<<4)+l:we(t,"expected hexadecimal character");t.result+=G$(o),t.position++}else we(t,"unknown escape sequence");n=i=t.position}else Di(c)?(rr(t,n,i,!0),Gx(t,kt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Wd(t)?we(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}we(t,"unexpected end of the stream within a double quoted scalar")}function eU(t,e){var n=!0,i,s,o,l=t.tag,c,f=t.anchor,h,p,g,y,v,b=Object.create(null),S,k,A,N;if(N=t.input.charCodeAt(t.position),N===91)p=93,v=!1,c=[];else if(N===123)p=125,v=!0,c={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=c),N=t.input.charCodeAt(++t.position);N!==0;){if(kt(t,!0,e),N=t.input.charCodeAt(t.position),N===p)return t.position++,t.tag=l,t.anchor=f,t.kind=v?"mapping":"sequence",t.result=c,!0;n?N===44&&we(t,"expected the node content, but found ','"):we(t,"missed comma between flow collection entries"),k=S=A=null,g=y=!1,N===63&&(h=t.input.charCodeAt(t.position+1),bn(h)&&(g=y=!0,t.position++,kt(t,!0,e))),i=t.line,s=t.lineStart,o=t.position,Ul(t,e,md,!1,!0),k=t.tag,S=t.result,kt(t,!0,e),N=t.input.charCodeAt(t.position),(y||t.line===i)&&N===58&&(g=!0,N=t.input.charCodeAt(++t.position),kt(t,!0,e),Ul(t,e,md,!1,!0),A=t.result),v?ml(t,c,b,k,S,A,i,s,o):g?c.push(ml(t,null,b,k,S,A,i,s,o)):c.push(S),kt(t,!0,e),N=t.input.charCodeAt(t.position),N===44?(n=!0,N=t.input.charCodeAt(++t.position)):n=!1}we(t,"unexpected end of the stream within a flow collection")}function tU(t,e){var n,i,s=m0,o=!1,l=!1,c=e,f=0,h=!1,p,g;if(g=t.input.charCodeAt(t.position),g===124)i=!1;else if(g===62)i=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)m0===s?s=g===43?rk:$$:we(t,"repeat of a chomping mode identifier");else if((p=F$(g))>=0)p===0?we(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?we(t,"repeat of an indentation width identifier"):(c=e+p-1,l=!0);else break;if(io(g)){do g=t.input.charCodeAt(++t.position);while(io(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!Di(g)&&g!==0)}for(;g!==0;){for(Fx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),Di(g)){f++;continue}if(t.lineIndent<c){s===rk?t.result+=Tt.repeat(`
`,o?1+f:f):s===m0&&o&&(t.result+=`
`);break}for(i?io(g)?(h=!0,t.result+=Tt.repeat(`
`,o?1+f:f)):h?(h=!1,t.result+=Tt.repeat(`
`,f+1)):f===0?o&&(t.result+=" "):t.result+=Tt.repeat(`
`,f):t.result+=Tt.repeat(`
`,o?1+f:f),o=!0,l=!0,f=0,n=t.position;!Di(g)&&g!==0;)g=t.input.charCodeAt(++t.position);rr(t,n,t.position,!1)}return!0}function uk(t,e){var n,i=t.tag,s=t.anchor,o=[],l,c=!1,f;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),f=t.input.charCodeAt(t.position);f!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,we(t,"tab characters must not be used in indentation")),!(f!==45||(l=t.input.charCodeAt(t.position+1),!bn(l))));){if(c=!0,t.position++,kt(t,!0,-1)&&t.lineIndent<=e){o.push(null),f=t.input.charCodeAt(t.position);continue}if(n=t.line,Ul(t,e,$N,!1,!0),o.push(t.result),kt(t,!0,-1),f=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&f!==0)we(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return c?(t.tag=i,t.anchor=s,t.kind="sequence",t.result=o,!0):!1}function nU(t,e,n){var i,s,o,l,c,f,h=t.tag,p=t.anchor,g={},y=Object.create(null),v=null,b=null,S=null,k=!1,A=!1,N;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),N=t.input.charCodeAt(t.position);N!==0;){if(!k&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,we(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),o=t.line,(N===63||N===58)&&bn(i))N===63?(k&&(ml(t,g,y,v,b,null,l,c,f),v=b=S=null),A=!0,k=!0,s=!0):k?(k=!1,s=!0):we(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,N=i;else{if(l=t.line,c=t.lineStart,f=t.position,!Ul(t,n,VN,!1,!0))break;if(t.line===o){for(N=t.input.charCodeAt(t.position);io(N);)N=t.input.charCodeAt(++t.position);if(N===58)N=t.input.charCodeAt(++t.position),bn(N)||we(t,"a whitespace character is expected after the key-value separator within a block mapping"),k&&(ml(t,g,y,v,b,null,l,c,f),v=b=S=null),A=!0,k=!1,s=!1,v=t.tag,b=t.result;else if(A)we(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=p,!0}else if(A)we(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=p,!0}if((t.line===o||t.lineIndent>e)&&(k&&(l=t.line,c=t.lineStart,f=t.position),Ul(t,e,yd,!0,s)&&(k?b=t.result:S=t.result),k||(ml(t,g,y,v,b,S,l,c,f),v=b=S=null),kt(t,!0,-1),N=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&N!==0)we(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return k&&ml(t,g,y,v,b,null,l,c,f),A&&(t.tag=h,t.anchor=p,t.kind="mapping",t.result=g),A}function iU(t){var e,n=!1,i=!1,s,o,l;if(l=t.input.charCodeAt(t.position),l!==33)return!1;if(t.tag!==null&&we(t,"duplication of a tag property"),l=t.input.charCodeAt(++t.position),l===60?(n=!0,l=t.input.charCodeAt(++t.position)):l===33?(i=!0,s="!!",l=t.input.charCodeAt(++t.position)):s="!",e=t.position,n){do l=t.input.charCodeAt(++t.position);while(l!==0&&l!==62);t.position<t.length?(o=t.input.slice(e,t.position),l=t.input.charCodeAt(++t.position)):we(t,"unexpected end of the stream within a verbatim tag")}else{for(;l!==0&&!bn(l);)l===33&&(i?we(t,"tag suffix cannot contain exclamation marks"):(s=t.input.slice(e-1,t.position+1),UN.test(s)||we(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),l=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),Q$.test(o)&&we(t,"tag suffix cannot contain flow indicator characters")}o&&!qN.test(o)&&we(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{we(t,"tag name is malformed: "+o)}return n?t.tag=o:dr.call(t.tagMap,s)?t.tag=t.tagMap[s]+o:s==="!"?t.tag="!"+o:s==="!!"?t.tag="tag:yaml.org,2002:"+o:we(t,'undeclared tag handle "'+s+'"'),!0}function sU(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&we(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!bn(n)&&!gl(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&we(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function rU(t){var e,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!bn(i)&&!gl(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&we(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),dr.call(t.anchorMap,n)||we(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],kt(t,!0,-1),!0}function Ul(t,e,n,i,s){var o,l,c,f=1,h=!1,p=!1,g,y,v,b,S,k;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=l=c=yd===n||$N===n,i&&kt(t,!0,-1)&&(h=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),f===1)for(;iU(t)||sU(t);)kt(t,!0,-1)?(h=!0,c=o,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):c=!1;if(c&&(c=h||s),(f===1||yd===n)&&(md===n||VN===n?S=e:S=e+1,k=t.position-t.lineStart,f===1?c&&(uk(t,k)||nU(t,k,S))||eU(t,S)?p=!0:(l&&tU(t,S)||Z$(t,S)||J$(t,S)?p=!0:rU(t)?(p=!0,(t.tag!==null||t.anchor!==null)&&we(t,"alias node should not have any properties")):K$(t,S,md===n)&&(p=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):f===0&&(p=c&&uk(t,k))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&we(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(b=t.implicitTypes[g],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(dr.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,v=t.typeMap.multi[t.kind||"fallback"],g=0,y=v.length;g<y;g+=1)if(t.tag.slice(0,v[g].tag.length)===v[g].tag){b=v[g];break}b||we(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&we(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):we(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||p}function oU(t){var e=t.position,n,i,s,o=!1,l;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(l=t.input.charCodeAt(t.position))!==0&&(kt(t,!0,-1),l=t.input.charCodeAt(t.position),!(t.lineIndent>0||l!==37));){for(o=!0,l=t.input.charCodeAt(++t.position),n=t.position;l!==0&&!bn(l);)l=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),s=[],i.length<1&&we(t,"directive name must not be less than one character in length");l!==0;){for(;io(l);)l=t.input.charCodeAt(++t.position);if(l===35){do l=t.input.charCodeAt(++t.position);while(l!==0&&!Di(l));break}if(Di(l))break;for(n=t.position;l!==0&&!bn(l);)l=t.input.charCodeAt(++t.position);s.push(t.input.slice(n,t.position))}l!==0&&Fx(t),dr.call(ak,i)?ak[i](t,i,s):xd(t,'unknown document directive "'+i+'"')}if(kt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,kt(t,!0,-1)):o&&we(t,"directives end mark is expected"),Ul(t,t.lineIndent-1,yd,!1,!0),kt(t,!0,-1),t.checkLineBreaks&&q$.test(t.input.slice(e,t.position))&&xd(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Wd(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,kt(t,!0,-1));return}if(t.position<t.length-1)we(t,"end of the stream or a document separator is expected");else return}function GN(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new W$(t,e),i=t.indexOf("\0");for(i!==-1&&(n.position=i,we(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)oU(n);return n.documents}function lU(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var i=GN(t,n);if(typeof e!="function")return i;for(var s=0,o=i.length;s<o;s+=1)e(i[s])}function aU(t,e){var n=GN(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new sn("expected a single document in the stream, but found more")}}var cU=lU,uU=aU,WN={loadAll:cU,load:uU},KN=Object.prototype.toString,ZN=Object.prototype.hasOwnProperty,Wx=65279,fU=9,qc=10,hU=13,dU=32,pU=33,gU=34,jy=35,mU=37,yU=38,xU=39,vU=42,JN=44,bU=45,vd=58,SU=61,wU=62,CU=63,kU=64,eT=91,tT=93,AU=96,nT=123,OU=124,iT=125,Kt={};Kt[0]="\\0";Kt[7]="\\a";Kt[8]="\\b";Kt[9]="\\t";Kt[10]="\\n";Kt[11]="\\v";Kt[12]="\\f";Kt[13]="\\r";Kt[27]="\\e";Kt[34]='\\"';Kt[92]="\\\\";Kt[133]="\\N";Kt[160]="\\_";Kt[8232]="\\L";Kt[8233]="\\P";var EU=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],MU=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function NU(t,e){var n,i,s,o,l,c,f;if(e===null)return{};for(n={},i=Object.keys(e),s=0,o=i.length;s<o;s+=1)l=i[s],c=String(e[l]),l.slice(0,2)==="!!"&&(l="tag:yaml.org,2002:"+l.slice(2)),f=t.compiledTypeMap.fallback[l],f&&ZN.call(f.styleAliases,c)&&(c=f.styleAliases[c]),n[l]=c;return n}function TU(t){var e,n,i;if(e=t.toString(16).toUpperCase(),t<=255)n="x",i=2;else if(t<=65535)n="u",i=4;else if(t<=4294967295)n="U",i=8;else throw new sn("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Tt.repeat("0",i-e.length)+e}var DU=1,Qc=2;function RU(t){this.schema=t.schema||Xx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Tt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=NU(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Qc:DU,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fk(t,e){for(var n=Tt.repeat(" ",e),i=0,s=-1,o="",l,c=t.length;i<c;)s=t.indexOf(`
`,i),s===-1?(l=t.slice(i),i=c):(l=t.slice(i,s+1),i=s+1),l.length&&l!==`
`&&(o+=n),o+=l;return o}function Hy(t,e){return`
`+Tt.repeat(" ",t.indent*e)}function LU(t,e){var n,i,s;for(n=0,i=t.implicitTypes.length;n<i;n+=1)if(s=t.implicitTypes[n],s.resolve(e))return!0;return!1}function bd(t){return t===dU||t===fU}function Yc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Wx||65536<=t&&t<=1114111}function hk(t){return Yc(t)&&t!==Wx&&t!==hU&&t!==qc}function dk(t,e,n){var i=hk(t),s=i&&!bd(t);return(n?i:i&&t!==JN&&t!==eT&&t!==tT&&t!==nT&&t!==iT)&&t!==jy&&!(e===vd&&!s)||hk(e)&&!bd(e)&&t===jy||e===vd&&s}function _U(t){return Yc(t)&&t!==Wx&&!bd(t)&&t!==bU&&t!==CU&&t!==vd&&t!==JN&&t!==eT&&t!==tT&&t!==nT&&t!==iT&&t!==jy&&t!==yU&&t!==vU&&t!==pU&&t!==OU&&t!==SU&&t!==wU&&t!==xU&&t!==gU&&t!==mU&&t!==kU&&t!==AU}function BU(t){return!bd(t)&&t!==vd}function ic(t,e){var n=t.charCodeAt(e),i;return n>=55296&&n<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function sT(t){var e=/^\n* /;return e.test(t)}var rT=1,Iy=2,oT=3,lT=4,al=5;function zU(t,e,n,i,s,o,l,c){var f,h=0,p=null,g=!1,y=!1,v=i!==-1,b=-1,S=_U(ic(t,0))&&BU(ic(t,t.length-1));if(e||l)for(f=0;f<t.length;h>=65536?f+=2:f++){if(h=ic(t,f),!Yc(h))return al;S=S&&dk(h,p,c),p=h}else{for(f=0;f<t.length;h>=65536?f+=2:f++){if(h=ic(t,f),h===qc)g=!0,v&&(y=y||f-b-1>i&&t[b+1]!==" ",b=f);else if(!Yc(h))return al;S=S&&dk(h,p,c),p=h}y=y||v&&f-b-1>i&&t[b+1]!==" "}return!g&&!y?S&&!l&&!s(t)?rT:o===Qc?al:Iy:n>9&&sT(t)?al:l?o===Qc?al:Iy:y?lT:oT}function PU(t,e,n,i,s){t.dump=(function(){if(e.length===0)return t.quotingType===Qc?'""':"''";if(!t.noCompatMode&&(EU.indexOf(e)!==-1||MU.test(e)))return t.quotingType===Qc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),l=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),c=i||t.flowLevel>-1&&n>=t.flowLevel;function f(h){return LU(t,h)}switch(zU(e,c,t.indent,l,f,t.quotingType,t.forceQuotes&&!i,s)){case rT:return e;case Iy:return"'"+e.replace(/'/g,"''")+"'";case oT:return"|"+pk(e,t.indent)+gk(fk(e,o));case lT:return">"+pk(e,t.indent)+gk(fk(jU(e,l),o));case al:return'"'+HU(e)+'"';default:throw new sn("impossible error: invalid scalar style")}})()}function pk(t,e){var n=sT(t)?String(e):"",i=t[t.length-1]===`
`,s=i&&(t[t.length-2]===`
`||t===`
`),o=s?"+":i?"":"-";return n+o+`
`}function gk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function jU(t,e){for(var n=/(\n+)([^\n]*)/g,i=(function(){var h=t.indexOf(`
`);return h=h!==-1?h:t.length,n.lastIndex=h,mk(t.slice(0,h),e)})(),s=t[0]===`
`||t[0]===" ",o,l;l=n.exec(t);){var c=l[1],f=l[2];o=f[0]===" ",i+=c+(!s&&!o&&f!==""?`
`:"")+mk(f,e),s=o}return i}function mk(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,i,s=0,o,l=0,c=0,f="";i=n.exec(t);)c=i.index,c-s>e&&(o=l>s?l:c,f+=`
`+t.slice(s,o),s=o+1),l=c;return f+=`
`,t.length-s>e&&l>s?f+=t.slice(s,l)+`
`+t.slice(l+1):f+=t.slice(s),f.slice(1)}function HU(t){for(var e="",n=0,i,s=0;s<t.length;n>=65536?s+=2:s++)n=ic(t,s),i=Kt[n],!i&&Yc(n)?(e+=t[s],n>=65536&&(e+=t[s+1])):e+=i||TU(n);return e}function IU(t,e,n){var i="",s=t.tag,o,l,c;for(o=0,l=n.length;o<l;o+=1)c=n[o],t.replacer&&(c=t.replacer.call(n,String(o),c)),(xs(t,e,c,!1,!1)||typeof c>"u"&&xs(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=s,t.dump="["+i+"]"}function yk(t,e,n,i){var s="",o=t.tag,l,c,f;for(l=0,c=n.length;l<c;l+=1)f=n[l],t.replacer&&(f=t.replacer.call(n,String(l),f)),(xs(t,e+1,f,!0,!0,!1,!0)||typeof f>"u"&&xs(t,e+1,null,!0,!0,!1,!0))&&((!i||s!=="")&&(s+=Hy(t,e)),t.dump&&qc===t.dump.charCodeAt(0)?s+="-":s+="- ",s+=t.dump);t.tag=o,t.dump=s||"[]"}function VU(t,e,n){var i="",s=t.tag,o=Object.keys(n),l,c,f,h,p;for(l=0,c=o.length;l<c;l+=1)p="",i!==""&&(p+=", "),t.condenseFlow&&(p+='"'),f=o[l],h=n[f],t.replacer&&(h=t.replacer.call(n,f,h)),xs(t,e,f,!1,!1)&&(t.dump.length>1024&&(p+="? "),p+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),xs(t,e,h,!1,!1)&&(p+=t.dump,i+=p));t.tag=s,t.dump="{"+i+"}"}function $U(t,e,n,i){var s="",o=t.tag,l=Object.keys(n),c,f,h,p,g,y;if(t.sortKeys===!0)l.sort();else if(typeof t.sortKeys=="function")l.sort(t.sortKeys);else if(t.sortKeys)throw new sn("sortKeys must be a boolean or a function");for(c=0,f=l.length;c<f;c+=1)y="",(!i||s!=="")&&(y+=Hy(t,e)),h=l[c],p=n[h],t.replacer&&(p=t.replacer.call(n,h,p)),xs(t,e+1,h,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&qc===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=Hy(t,e)),xs(t,e+1,p,!0,g)&&(t.dump&&qc===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,s+=y));t.tag=o,t.dump=s||"{}"}function xk(t,e,n){var i,s,o,l,c,f;for(s=n?t.explicitTypes:t.implicitTypes,o=0,l=s.length;o<l;o+=1)if(c=s[o],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(n?c.multi&&c.representName?t.tag=c.representName(e):t.tag=c.tag:t.tag="?",c.represent){if(f=t.styleMap[c.tag]||c.defaultStyle,KN.call(c.represent)==="[object Function]")i=c.represent(e,f);else if(ZN.call(c.represent,f))i=c.represent[f](e,f);else throw new sn("!<"+c.tag+'> tag resolver accepts not "'+f+'" style');t.dump=i}return!0}return!1}function xs(t,e,n,i,s,o,l){t.tag=null,t.dump=n,xk(t,n,!1)||xk(t,n,!0);var c=KN.call(t.dump),f=i,h;i&&(i=t.flowLevel<0||t.flowLevel>e);var p=c==="[object Object]"||c==="[object Array]",g,y;if(p&&(g=t.duplicates.indexOf(n),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(s=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(p&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),c==="[object Object]")i&&Object.keys(t.dump).length!==0?($U(t,e,t.dump,s),y&&(t.dump="&ref_"+g+t.dump)):(VU(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(c==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!l&&e>0?yk(t,e-1,t.dump,s):yk(t,e,t.dump,s),y&&(t.dump="&ref_"+g+t.dump)):(IU(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(c==="[object String]")t.tag!=="?"&&PU(t,t.dump,e,o,f);else{if(c==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new sn("unacceptable kind of an object to dump "+c)}t.tag!==null&&t.tag!=="?"&&(h=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",t.dump=h+" "+t.dump)}return!0}function UU(t,e){var n=[],i=[],s,o;for(Vy(t,n,i),s=0,o=i.length;s<o;s+=1)e.duplicates.push(n[i[s]]);e.usedDuplicates=new Array(o)}function Vy(t,e,n){var i,s,o;if(t!==null&&typeof t=="object")if(s=e.indexOf(t),s!==-1)n.indexOf(s)===-1&&n.push(s);else if(e.push(t),Array.isArray(t))for(s=0,o=t.length;s<o;s+=1)Vy(t[s],e,n);else for(i=Object.keys(t),s=0,o=i.length;s<o;s+=1)Vy(t[i[s]],e,n)}function qU(t,e){e=e||{};var n=new RU(e);n.noRefs||UU(t,n);var i=t;return n.replacer&&(i=n.replacer.call({"":i},"",i)),xs(n,0,i,!0,!0)?n.dump+`
`:""}var QU=qU,YU={dump:QU};function Kx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var XU=Qt,FU=wN,GU=ON,WU=DN,KU=RN,ZU=Xx,JU=WN.load,eq=WN.loadAll,tq=YU.dump,nq=sn,iq={binary:PN,float:TN,map:AN,null:EN,pairs:HN,set:IN,timestamp:BN,bool:MN,int:NN,merge:zN,omap:jN,seq:kN,str:CN},sq=Kx("safeLoad","load"),rq=Kx("safeLoadAll","loadAll"),oq=Kx("safeDump","dump"),lq={Type:XU,Schema:FU,FAILSAFE_SCHEMA:GU,JSON_SCHEMA:WU,CORE_SCHEMA:KU,DEFAULT_SCHEMA:ZU,load:JU,loadAll:eq,dump:tq,YAMLException:nq,types:iq,safeLoad:sq,safeLoadAll:rq,safeDump:oq};function aq(t){const e=t.split(`
`),n={ingress:[],egress:[]};let i=-1,s=-1;for(let l=0;l<e.length;l++){const c=e[l].match(/^(\s*)spec\s*:/);if(c){i=c[1].length,s=l;break}}if(s===-1)return n;const o=cq(e,s,i);if(o===-1)return n;for(let l=s+1;l<e.length;l++){const c=e[l],f=c.trimStart();if(f.length>0&&!f.startsWith("#")&&c.length-f.length<=i)break;const h=c.match(/^(\s*)(ingress|egress)\s*:/);if(h&&h[1].length===o){const p=h[2],y=uq(e,l,o);n[p]=y}}return n}function cq(t,e,n){for(let i=e+1;i<t.length;i++){const s=t[i],o=s.trimStart();if(o.length===0||o.startsWith("#"))continue;const l=s.length-o.length;if(l<=n)break;return l}return-1}function uq(t,e,n){const i=[];let s=-1,o=-1;for(let c=e+1;c<t.length;c++){const f=t[c],h=f.trimStart();if(h.length===0||h.startsWith("#"))continue;const p=f.length-h.length;if(p<n||p===n&&!h.startsWith("- "))break;if(h.startsWith("- ")){s=p,o=c;break}}if(o===-1)return i;let l=-1;for(let c=o;c<t.length;c++){const f=t[c],h=f.trimStart();if(h.length===0||h.startsWith("#"))continue;const p=f.length-h.length;if(p<n||p===n&&!h.startsWith("- ")){l!==-1&&i.push({startLine:l+1,endLine:y0(t,l,c-1)+1});break}p===s&&h.startsWith("- ")&&(l!==-1&&i.push({startLine:l+1,endLine:y0(t,l,c-1)+1}),l=c)}if(l!==-1){const c=i.length>0?i[i.length-1]:null;(!c||c.startLine!==l+1)&&i.push({startLine:l+1,endLine:y0(t,l,t.length-1)+1})}return i}function y0(t,e,n){let i=e;for(let s=n;s>=e;s--){const o=t[s].trim();if(o.length>0&&!o.startsWith("#")){i=s;break}}return i}const fq=["NetworkPolicy","GlobalNetworkPolicy"];function vk(t){if(!t)return t;const e={...t};return e.nets&&(e.nets=e.nets.filter(n=>typeof n=="string")),e.notNets&&(e.notNets=e.notNets.filter(n=>typeof n=="string")),e.ports&&(e.ports=e.ports.filter(n=>n!=null)),e.notPorts&&(e.notPorts=e.notPorts.filter(n=>n!=null)),e.serviceAccounts?.names&&(e.serviceAccounts={...e.serviceAccounts,names:e.serviceAccounts.names.filter(n=>typeof n=="string")}),e}function bk(t){return t.map(e=>({...e,source:vk(e.source),destination:vk(e.destination)}))}function Sk(t,e){const n=[];return t.forEach((i,s)=>{const o=`${e} rule ${s+1}`,l=(f,h)=>{if(f)for(const p of f)Ly(p)||(typeof p=="number"?n.push(`${o}: ${h} ${p} is out of range (065535)`):n.push(`${o}: ${h} "${p}" is not a valid port range`))},c=(f,h)=>{if(f)for(const p of f)Qx(p)||n.push(`${o}: ${h} "${p}" is not valid CIDR notation (expected x.x.x.x/0-32)`)};for(const f of["source","destination"]){const h=i[f];if(!h)continue;const p=f==="source"?"source":"destination";l(h.ports,`${p} port`),l(h.notPorts,`${p} notPort`),c(h.nets,`${p} net`),c(h.notNets,`${p} notNet`)}}),n}function hq(t){if(!t.trim())return{policy:null,error:"Empty YAML input",warnings:[],ruleLineRanges:null};let e;try{e=lq.load(t)}catch(y){return{policy:null,error:y instanceof Error?y.message:"Invalid YAML syntax",warnings:[],ruleLineRanges:null}}if(!e||typeof e!="object")return{policy:null,error:"YAML did not parse to an object",warnings:[],ruleLineRanges:null};const n=e;if(n.apiVersion!=="projectcalico.org/v3")return{policy:null,error:`Unsupported apiVersion: "${n.apiVersion}". Expected "projectcalico.org/v3"`,warnings:[],ruleLineRanges:null};if(!fq.includes(n.kind))return{policy:null,error:`Unsupported kind: "${n.kind}". Expected "NetworkPolicy" or "GlobalNetworkPolicy"`,warnings:[],ruleLineRanges:null};const i=n;if(!i.metadata?.name)return{policy:null,error:"Missing metadata.name",warnings:[],ruleLineRanges:null};if(!i.spec)return{policy:null,error:"Missing spec",warnings:[],ruleLineRanges:null};const s=Array.isArray(i.spec.ingress)&&i.spec.ingress.length>0,o=Array.isArray(i.spec.egress)&&i.spec.egress.length>0;let l=i.spec.types;(!l||l.length===0)&&(s&&o?l=["Ingress","Egress"]:o?l=["Egress"]:l=["Ingress"]);const c=l.includes("Ingress")?"deny":"allow",f=l.includes("Egress")?"deny":"allow",h={raw:i,name:i.metadata.name,namespace:i.metadata.namespace,kind:i.kind,tier:i.spec.tier||"default",order:i.spec.order,selector:i.spec.selector||"all()",namespaceSelector:i.spec.namespaceSelector,serviceAccountSelector:i.spec.serviceAccountSelector,types:l,ingressRules:bk(i.spec.ingress||[]),egressRules:bk(i.spec.egress||[]),ingressDefault:c,egressDefault:f},p=[...Sk(h.ingressRules,"Ingress"),...Sk(h.egressRules,"Egress")],g=aq(t);return{policy:h,error:null,warnings:p,ruleLineRanges:g}}function dq(t,e){const n=U.useRef(t),i=U.useRef(null);U.useEffect(()=>{n.current=t},[t]),U.useEffect(()=>()=>{i.current!==null&&clearTimeout(i.current)},[]);const s=U.useCallback((...c)=>{i.current!==null&&clearTimeout(i.current),i.current=setTimeout(()=>{i.current=null,n.current(...c)},e)},[e]),o=U.useCallback(()=>{i.current!==null&&(clearTimeout(i.current),i.current=null)},[]),l=U.useCallback((...c)=>{i.current!==null&&(clearTimeout(i.current),i.current=null),n.current(...c)},[]);return U.useMemo(()=>({call:s,cancel:o,flush:l}),[s,o,l])}function pq(){const{state:t,dispatch:e}=Fl(),n=U.useRef(null),[i,s]=U.useState(!1),[o,l]=U.useState(208),[c,f]=U.useState(350),[h,p]=U.useState(!1),[g,y]=U.useState(!1),[v,b]=U.useState(!1),[S,k]=U.useState(!1),[A,N]=U.useState(320),[O,M]=U.useState(!1),_=U.useCallback(V=>{const T=hq(V);T.error?e({type:"SET_ERROR",payload:T.error}):e({type:"SET_POLICY",payload:{policy:T.policy,ruleLineRanges:T.ruleLineRanges,warnings:T.warnings}})},[e]),L=dq(_,400),R=U.useCallback(V=>{L.cancel(),e({type:"SET_YAML",payload:V}),_(V)},[e,_,L]);U.useEffect(()=>{if(!t.yamlContent){const V=vN.find(T=>T.id==="default-deny-all");V&&R(V.yaml)}},[]);const X=U.useCallback(V=>{e({type:"SET_YAML",payload:V}),L.call(V)},[e,L]),$=U.useCallback(V=>{R(V.yaml),b(!1)},[R]),ne=U.useCallback(()=>{n.current?.click()},[]),q=U.useCallback(V=>{const T=V.target.files?.[0];if(!T)return;const P=new FileReader;P.onload=H=>{const z=H.target?.result;z&&R(z)},P.readAsText(T),V.target.value=""},[R]),Q=U.useCallback(V=>{V.preventDefault(),p(!0);const T=V.clientX,P=c,H=G=>{const D=G.clientX-T,j=Math.max(250,Math.min(600,P+D));f(j)},z=()=>{p(!1),document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",H),document.addEventListener("mouseup",z)},[c]),Z=U.useCallback(V=>{V.preventDefault(),y(!0);const T=V.clientY,P=o,H=G=>{const D=T-G.clientY,j=Math.round(window.innerHeight*2/3),ee=Math.max(80,Math.min(j,P+D));l(ee)},z=()=>{y(!1),document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",H),document.addEventListener("mouseup",z)},[o]),B=U.useCallback(V=>{V.preventDefault(),M(!0);const T=V.clientX,P=A,H=G=>{const D=T-G.clientX,j=Math.max(260,Math.min(500,P+D));N(j)},z=()=>{M(!1),document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",H),document.addEventListener("mouseup",z)},[A]);return w.jsxs("div",{className:"h-screen flex flex-col bg-slate-900",children:[w.jsxs("header",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-700 bg-slate-800/80 backdrop-blur-sm shrink-0",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("svg",{className:"w-6 h-6 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),w.jsxs("h1",{className:"text-sm font-bold text-slate-100",children:["Calico Network Policy Visualizer ",w.jsxs("span",{className:"text-xs font-normal text-slate-300",children:["v","0.8.1"]})]})]}),w.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg bg-indigo-500/20 text-indigo-300 hover:bg-indigo-500/30 border border-indigo-500/30 transition-colors cursor-pointer ml-4",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Examples"]}),w.jsxs("button",{onClick:()=>k(!S),className:`flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg border transition-colors cursor-pointer ${S?"bg-emerald-500/20 text-emerald-300 border-emerald-500/40":"bg-indigo-500/20 text-indigo-300 border-indigo-500/30 hover:bg-indigo-500/30"}`,children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Test Access"]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("input",{ref:n,type:"file",accept:".yaml,.yml",onChange:q,className:"hidden"}),w.jsxs("button",{onClick:ne,className:"flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-lg bg-indigo-500/20 text-indigo-300 hover:bg-indigo-500/30 border border-indigo-500/30 transition-colors cursor-pointer",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Import YAML"]})]})]}),w.jsxs("div",{className:"flex-1 flex min-h-0",children:[w.jsx("div",{className:"border-r border-slate-700 shrink-0 overflow-hidden",style:{width:c},children:w.jsx(WI,{onYamlChange:X})}),w.jsx("div",{className:`w-1 cursor-col-resize hover:bg-indigo-500/50 transition-colors shrink-0 ${h?"bg-indigo-500/50":"bg-transparent"}`,onMouseDown:Q}),w.jsx("div",{className:"flex-1 min-w-0",children:w.jsx(lO,{children:w.jsx(bV,{})})}),S&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:`w-1 cursor-col-resize hover:bg-indigo-500/50 transition-colors shrink-0 ${O?"bg-indigo-500/50":"bg-transparent"}`,onMouseDown:B}),w.jsx("div",{className:"border-l border-slate-700 shrink-0 overflow-hidden",style:{width:A},children:w.jsx(VV,{onClose:()=>k(!1)})})]})]}),t.policy&&w.jsxs("div",{className:"border-t border-slate-700 shrink-0",style:{height:i?32:o},children:[!i&&w.jsx("div",{className:`h-1 cursor-row-resize hover:bg-indigo-500/50 transition-colors ${g?"bg-indigo-500/50":"bg-transparent"}`,onMouseDown:Z}),w.jsxs("div",{className:"flex items-center justify-between px-3 h-8 border-b border-slate-700/50 bg-slate-800/50",children:[w.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-semibold",children:"Explanation"}),w.jsx("button",{onClick:()=>s(!i),className:"text-slate-500 hover:text-slate-300 transition-colors cursor-pointer",children:w.jsx("svg",{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),!i&&w.jsx("div",{style:{height:"calc(100% - 2rem - 4px)"},className:"overflow-hidden",children:w.jsx(AV,{})})]}),w.jsx(MV,{open:v,onClose:()=>b(!1),onSelect:$})]})}class gq extends U.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n.componentStack)}handleReset=()=>{this.setState({hasError:!1,error:null})};render(){return this.state.hasError?w.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-900 text-slate-200",children:w.jsxs("div",{className:"max-w-md text-center space-y-4 p-8",children:[w.jsx("svg",{className:"w-12 h-12 mx-auto text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),w.jsx("h2",{className:"text-lg font-semibold",children:"Something went wrong"}),w.jsx("p",{className:"text-sm text-slate-400",children:this.state.error?.message||"An unexpected error occurred."}),w.jsx("button",{onClick:this.handleReset,className:"inline-flex items-center gap-2 px-4 py-2 text-sm rounded-lg bg-indigo-500/20 text-indigo-300 hover:bg-indigo-500/30 border border-indigo-500/30 transition-colors cursor-pointer",children:"Try again"})]})}):this.props.children}}function mq(){return w.jsx(gq,{children:w.jsx(A3,{children:w.jsx(pq,{})})})}w3.createRoot(document.getElementById("root")).render(w.jsx(U.StrictMode,{children:w.jsx(mq,{})}));
